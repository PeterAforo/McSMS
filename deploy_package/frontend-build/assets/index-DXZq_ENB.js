(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const m of document.querySelectorAll('link[rel="modulepreload"]'))d(m);new MutationObserver(m=>{for(const u of m)if(u.type==="childList")for(const x of u.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&d(x)}).observe(document,{childList:!0,subtree:!0});function i(m){const u={};return m.integrity&&(u.integrity=m.integrity),m.referrerPolicy&&(u.referrerPolicy=m.referrerPolicy),m.crossOrigin==="use-credentials"?u.credentials="include":m.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function d(m){if(m.ep)return;m.ep=!0;const u=i(m);fetch(m.href,u)}})();function kb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Jo={exports:{}},lr={};var Mp;function Ab(){if(Mp)return lr;Mp=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(d,m,u){var x=null;if(u!==void 0&&(x=""+u),m.key!==void 0&&(x=""+m.key),"key"in m){u={};for(var p in m)p!=="key"&&(u[p]=m[p])}else u=m;return m=u.ref,{$$typeof:n,type:d,key:x,ref:m!==void 0?m:null,props:u}}return lr.Fragment=r,lr.jsx=i,lr.jsxs=i,lr}var Ep;function Mb(){return Ep||(Ep=1,Jo.exports=Ab()),Jo.exports}var e=Mb(),Ko={exports:{}},Ne={};var Tp;function Eb(){if(Tp)return Ne;Tp=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),x=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),w=Symbol.iterator;function A(H){return H===null||typeof H!="object"?null:(H=w&&H[w]||H["@@iterator"],typeof H=="function"?H:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,R={};function C(H,te,ce){this.props=H,this.context=te,this.refs=R,this.updater=ce||T}C.prototype.isReactComponent={},C.prototype.setState=function(H,te){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,te,"setState")},C.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function y(){}y.prototype=C.prototype;function k(H,te,ce){this.props=H,this.context=te,this.refs=R,this.updater=ce||T}var _=k.prototype=new y;_.constructor=k,M(_,C.prototype),_.isPureReactComponent=!0;var G=Array.isArray;function z(){}var N={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function S(H,te,ce){var ue=ce.ref;return{$$typeof:n,type:H,key:te,ref:ue!==void 0?ue:null,props:ce}}function U(H,te){return S(H.type,te,H.props)}function q(H){return typeof H=="object"&&H!==null&&H.$$typeof===n}function Z(H){var te={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ce){return te[ce]})}var W=/\/+/g;function ie(H,te){return typeof H=="object"&&H!==null&&H.key!=null?Z(""+H.key):te.toString(36)}function F(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(z,z):(H.status="pending",H.then(function(te){H.status==="pending"&&(H.status="fulfilled",H.value=te)},function(te){H.status==="pending"&&(H.status="rejected",H.reason=te)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function O(H,te,ce,ue,ye){var je=typeof H;(je==="undefined"||je==="boolean")&&(H=null);var De=!1;if(H===null)De=!0;else switch(je){case"bigint":case"string":case"number":De=!0;break;case"object":switch(H.$$typeof){case n:case r:De=!0;break;case h:return De=H._init,O(De(H._payload),te,ce,ue,ye)}}if(De)return ye=ye(H),De=ue===""?"."+ie(H,0):ue,G(ye)?(ce="",De!=null&&(ce=De.replace(W,"$&/")+"/"),O(ye,te,ce,"",function(hs){return hs})):ye!=null&&(q(ye)&&(ye=U(ye,ce+(ye.key==null||H&&H.key===ye.key?"":(""+ye.key).replace(W,"$&/")+"/")+De)),te.push(ye)),1;De=0;var nt=ue===""?".":ue+":";if(G(H))for(var Xe=0;Xe<H.length;Xe++)ue=H[Xe],je=nt+ie(ue,Xe),De+=O(ue,te,ce,je,ye);else if(Xe=A(H),typeof Xe=="function")for(H=Xe.call(H),Xe=0;!(ue=H.next()).done;)ue=ue.value,je=nt+ie(ue,Xe++),De+=O(ue,te,ce,je,ye);else if(je==="object"){if(typeof H.then=="function")return O(F(H),te,ce,ue,ye);throw te=String(H),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return De}function P(H,te,ce){if(H==null)return H;var ue=[],ye=0;return O(H,ue,"","",function(je){return te.call(ce,je,ye++)}),ue}function re(H){if(H._status===-1){var te=H._result;te=te(),te.then(function(ce){(H._status===0||H._status===-1)&&(H._status=1,H._result=ce)},function(ce){(H._status===0||H._status===-1)&&(H._status=2,H._result=ce)}),H._status===-1&&(H._status=0,H._result=te)}if(H._status===1)return H._result.default;throw H._result}var xe=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)},Q={map:P,forEach:function(H,te,ce){P(H,function(){te.apply(this,arguments)},ce)},count:function(H){var te=0;return P(H,function(){te++}),te},toArray:function(H){return P(H,function(te){return te})||[]},only:function(H){if(!q(H))throw Error("React.Children.only expected to receive a single React element child.");return H}};return Ne.Activity=v,Ne.Children=Q,Ne.Component=C,Ne.Fragment=i,Ne.Profiler=m,Ne.PureComponent=k,Ne.StrictMode=d,Ne.Suspense=b,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(H){return N.H.useMemoCache(H)}},Ne.cache=function(H){return function(){return H.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(H,te,ce){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var ue=M({},H.props),ye=H.key;if(te!=null)for(je in te.key!==void 0&&(ye=""+te.key),te)!E.call(te,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&te.ref===void 0||(ue[je]=te[je]);var je=arguments.length-2;if(je===1)ue.children=ce;else if(1<je){for(var De=Array(je),nt=0;nt<je;nt++)De[nt]=arguments[nt+2];ue.children=De}return S(H.type,ye,ue)},Ne.createContext=function(H){return H={$$typeof:x,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:u,_context:H},H},Ne.createElement=function(H,te,ce){var ue,ye={},je=null;if(te!=null)for(ue in te.key!==void 0&&(je=""+te.key),te)E.call(te,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(ye[ue]=te[ue]);var De=arguments.length-2;if(De===1)ye.children=ce;else if(1<De){for(var nt=Array(De),Xe=0;Xe<De;Xe++)nt[Xe]=arguments[Xe+2];ye.children=nt}if(H&&H.defaultProps)for(ue in De=H.defaultProps,De)ye[ue]===void 0&&(ye[ue]=De[ue]);return S(H,je,ye)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(H){return{$$typeof:p,render:H}},Ne.isValidElement=q,Ne.lazy=function(H){return{$$typeof:h,_payload:{_status:-1,_result:H},_init:re}},Ne.memo=function(H,te){return{$$typeof:g,type:H,compare:te===void 0?null:te}},Ne.startTransition=function(H){var te=N.T,ce={};N.T=ce;try{var ue=H(),ye=N.S;ye!==null&&ye(ce,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(z,xe)}catch(je){xe(je)}finally{te!==null&&ce.types!==null&&(te.types=ce.types),N.T=te}},Ne.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Ne.use=function(H){return N.H.use(H)},Ne.useActionState=function(H,te,ce){return N.H.useActionState(H,te,ce)},Ne.useCallback=function(H,te){return N.H.useCallback(H,te)},Ne.useContext=function(H){return N.H.useContext(H)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(H,te){return N.H.useDeferredValue(H,te)},Ne.useEffect=function(H,te){return N.H.useEffect(H,te)},Ne.useEffectEvent=function(H){return N.H.useEffectEvent(H)},Ne.useId=function(){return N.H.useId()},Ne.useImperativeHandle=function(H,te,ce){return N.H.useImperativeHandle(H,te,ce)},Ne.useInsertionEffect=function(H,te){return N.H.useInsertionEffect(H,te)},Ne.useLayoutEffect=function(H,te){return N.H.useLayoutEffect(H,te)},Ne.useMemo=function(H,te){return N.H.useMemo(H,te)},Ne.useOptimistic=function(H,te){return N.H.useOptimistic(H,te)},Ne.useReducer=function(H,te,ce){return N.H.useReducer(H,te,ce)},Ne.useRef=function(H){return N.H.useRef(H)},Ne.useState=function(H){return N.H.useState(H)},Ne.useSyncExternalStore=function(H,te,ce){return N.H.useSyncExternalStore(H,te,ce)},Ne.useTransition=function(){return N.H.useTransition()},Ne.version="19.2.0",Ne}var Dp;function jm(){return Dp||(Dp=1,Ko.exports=Eb()),Ko.exports}var f=jm();const Vi=kb(f);var Wo={exports:{}},nr={},em={exports:{}},tm={};var Rp;function Tb(){return Rp||(Rp=1,(function(n){function r(O,P){var re=O.length;O.push(P);e:for(;0<re;){var xe=re-1>>>1,Q=O[xe];if(0<m(Q,P))O[xe]=P,O[re]=Q,re=xe;else break e}}function i(O){return O.length===0?null:O[0]}function d(O){if(O.length===0)return null;var P=O[0],re=O.pop();if(re!==P){O[0]=re;e:for(var xe=0,Q=O.length,H=Q>>>1;xe<H;){var te=2*(xe+1)-1,ce=O[te],ue=te+1,ye=O[ue];if(0>m(ce,re))ue<Q&&0>m(ye,ce)?(O[xe]=ye,O[ue]=re,xe=ue):(O[xe]=ce,O[te]=re,xe=te);else if(ue<Q&&0>m(ye,re))O[xe]=ye,O[ue]=re,xe=ue;else break e}}return P}function m(O,P){var re=O.sortIndex-P.sortIndex;return re!==0?re:O.id-P.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var x=Date,p=x.now();n.unstable_now=function(){return x.now()-p}}var b=[],g=[],h=1,v=null,w=3,A=!1,T=!1,M=!1,R=!1,C=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function _(O){for(var P=i(g);P!==null;){if(P.callback===null)d(g);else if(P.startTime<=O)d(g),P.sortIndex=P.expirationTime,r(b,P);else break;P=i(g)}}function G(O){if(M=!1,_(O),!T)if(i(b)!==null)T=!0,z||(z=!0,Z());else{var P=i(g);P!==null&&F(G,P.startTime-O)}}var z=!1,N=-1,E=5,S=-1;function U(){return R?!0:!(n.unstable_now()-S<E)}function q(){if(R=!1,z){var O=n.unstable_now();S=O;var P=!0;try{e:{T=!1,M&&(M=!1,y(N),N=-1),A=!0;var re=w;try{t:{for(_(O),v=i(b);v!==null&&!(v.expirationTime>O&&U());){var xe=v.callback;if(typeof xe=="function"){v.callback=null,w=v.priorityLevel;var Q=xe(v.expirationTime<=O);if(O=n.unstable_now(),typeof Q=="function"){v.callback=Q,_(O),P=!0;break t}v===i(b)&&d(b),_(O)}else d(b);v=i(b)}if(v!==null)P=!0;else{var H=i(g);H!==null&&F(G,H.startTime-O),P=!1}}break e}finally{v=null,w=re,A=!1}P=void 0}}finally{P?Z():z=!1}}}var Z;if(typeof k=="function")Z=function(){k(q)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,ie=W.port2;W.port1.onmessage=q,Z=function(){ie.postMessage(null)}}else Z=function(){C(q,0)};function F(O,P){N=C(function(){O(n.unstable_now())},P)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(O){O.callback=null},n.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<O?Math.floor(1e3/O):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(O){switch(w){case 1:case 2:case 3:var P=3;break;default:P=w}var re=w;w=P;try{return O()}finally{w=re}},n.unstable_requestPaint=function(){R=!0},n.unstable_runWithPriority=function(O,P){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var re=w;w=O;try{return P()}finally{w=re}},n.unstable_scheduleCallback=function(O,P,re){var xe=n.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?xe+re:xe):re=xe,O){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=re+Q,O={id:h++,callback:P,priorityLevel:O,startTime:re,expirationTime:Q,sortIndex:-1},re>xe?(O.sortIndex=re,r(g,O),i(b)===null&&O===i(g)&&(M?(y(N),N=-1):M=!0,F(G,re-xe))):(O.sortIndex=Q,r(b,O),T||A||(T=!0,z||(z=!0,Z()))),O},n.unstable_shouldYield=U,n.unstable_wrapCallback=function(O){var P=w;return function(){var re=w;w=P;try{return O.apply(this,arguments)}finally{w=re}}}})(tm)),tm}var zp;function Db(){return zp||(zp=1,em.exports=Tb()),em.exports}var sm={exports:{}},Ct={};var Lp;function Rb(){if(Lp)return Ct;Lp=1;var n=jm();function r(b){var g="https://react.dev/errors/"+b;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)g+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+b+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var d={d:{f:i,r:function(){throw Error(r(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},m=Symbol.for("react.portal");function u(b,g,h){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:m,key:v==null?null:""+v,children:b,containerInfo:g,implementation:h}}var x=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(b,g){if(b==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Ct.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=d,Ct.createPortal=function(b,g){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(r(299));return u(b,g,null,h)},Ct.flushSync=function(b){var g=x.T,h=d.p;try{if(x.T=null,d.p=2,b)return b()}finally{x.T=g,d.p=h,d.d.f()}},Ct.preconnect=function(b,g){typeof b=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,d.d.C(b,g))},Ct.prefetchDNS=function(b){typeof b=="string"&&d.d.D(b)},Ct.preinit=function(b,g){if(typeof b=="string"&&g&&typeof g.as=="string"){var h=g.as,v=p(h,g.crossOrigin),w=typeof g.integrity=="string"?g.integrity:void 0,A=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;h==="style"?d.d.S(b,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:v,integrity:w,fetchPriority:A}):h==="script"&&d.d.X(b,{crossOrigin:v,integrity:w,fetchPriority:A,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Ct.preinitModule=function(b,g){if(typeof b=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var h=p(g.as,g.crossOrigin);d.d.M(b,{crossOrigin:h,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&d.d.M(b)},Ct.preload=function(b,g){if(typeof b=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var h=g.as,v=p(h,g.crossOrigin);d.d.L(b,h,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Ct.preloadModule=function(b,g){if(typeof b=="string")if(g){var h=p(g.as,g.crossOrigin);d.d.m(b,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:h,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else d.d.m(b)},Ct.requestFormReset=function(b){d.d.r(b)},Ct.unstable_batchedUpdates=function(b,g){return b(g)},Ct.useFormState=function(b,g,h){return x.H.useFormState(b,g,h)},Ct.useFormStatus=function(){return x.H.useHostTransitionStatus()},Ct.version="19.2.0",Ct}var Op;function zb(){if(Op)return sm.exports;Op=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),sm.exports=Rb(),sm.exports}var Up;function Lb(){if(Up)return nr;Up=1;var n=Db(),r=jm(),i=zb();function d(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function m(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var s=t,a=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(a=s.return),t=s.return;while(t)}return s.tag===3?a:null}function x(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function p(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function b(t){if(u(t)!==t)throw Error(d(188))}function g(t){var s=t.alternate;if(!s){if(s=u(t),s===null)throw Error(d(188));return s!==t?null:t}for(var a=t,l=s;;){var c=a.return;if(c===null)break;var o=c.alternate;if(o===null){if(l=c.return,l!==null){a=l;continue}break}if(c.child===o.child){for(o=c.child;o;){if(o===a)return b(c),t;if(o===l)return b(c),s;o=o.sibling}throw Error(d(188))}if(a.return!==l.return)a=c,l=o;else{for(var j=!1,D=c.child;D;){if(D===a){j=!0,a=c,l=o;break}if(D===l){j=!0,l=c,a=o;break}D=D.sibling}if(!j){for(D=o.child;D;){if(D===a){j=!0,a=o,l=c;break}if(D===l){j=!0,l=o,a=c;break}D=D.sibling}if(!j)throw Error(d(189))}}if(a.alternate!==l)throw Error(d(190))}if(a.tag!==3)throw Error(d(188));return a.stateNode.current===a?t:s}function h(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=h(t),s!==null)return s;t=t.sibling}return null}var v=Object.assign,w=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),y=Symbol.for("react.consumer"),k=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function Z(t){return t===null||typeof t!="object"?null:(t=q&&t[q]||t["@@iterator"],typeof t=="function"?t:null)}var W=Symbol.for("react.client.reference");function ie(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===W?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case M:return"Fragment";case C:return"Profiler";case R:return"StrictMode";case G:return"Suspense";case z:return"SuspenseList";case S:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case T:return"Portal";case k:return t.displayName||"Context";case y:return(t._context.displayName||"Context")+".Consumer";case _:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return s=t.displayName||null,s!==null?s:ie(t.type)||"Memo";case E:s=t._payload,t=t._init;try{return ie(t(s))}catch{}}return null}var F=Array.isArray,O=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re={pending:!1,data:null,method:null,action:null},xe=[],Q=-1;function H(t){return{current:t}}function te(t){0>Q||(t.current=xe[Q],xe[Q]=null,Q--)}function ce(t,s){Q++,xe[Q]=t.current,t.current=s}var ue=H(null),ye=H(null),je=H(null),De=H(null);function nt(t,s){switch(ce(je,s),ce(ye,t),ce(ue,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Kh(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Kh(s),t=Wh(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}te(ue),ce(ue,t)}function Xe(){te(ue),te(ye),te(je)}function hs(t){t.memoizedState!==null&&ce(De,t);var s=ue.current,a=Wh(s,t.type);s!==a&&(ce(ye,t),ce(ue,a))}function aa(t){ye.current===t&&(te(ue),te(ye)),De.current===t&&(te(De),er._currentValue=re)}var Da,_r;function Ts(t){if(Da===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Da=s&&s[1]||"",_r=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Da+t+_r}var Ra=!1;function za(t,s){if(!t||Ra)return"";Ra=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(se){var K=se}Reflect.construct(t,[],ne)}else{try{ne.call()}catch(se){K=se}t.call(ne.prototype)}}else{try{throw Error()}catch(se){K=se}(ne=t())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(se){if(se&&K&&typeof se.stack=="string")return[se.stack,K.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=l.DetermineComponentFrameRoot(),j=o[0],D=o[1];if(j&&D){var B=j.split(`
`),J=D.split(`
`);for(c=l=0;l<B.length&&!B[l].includes("DetermineComponentFrameRoot");)l++;for(;c<J.length&&!J[c].includes("DetermineComponentFrameRoot");)c++;if(l===B.length||c===J.length)for(l=B.length-1,c=J.length-1;1<=l&&0<=c&&B[l]!==J[c];)c--;for(;1<=l&&0<=c;l--,c--)if(B[l]!==J[c]){if(l!==1||c!==1)do if(l--,c--,0>c||B[l]!==J[c]){var ae=`
`+B[l].replace(" at new "," at ");return t.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",t.displayName)),ae}while(1<=l&&0<=c);break}}}finally{Ra=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Ts(a):""}function Dc(t,s){switch(t.tag){case 26:case 27:case 5:return Ts(t.type);case 16:return Ts("Lazy");case 13:return t.child!==s&&s!==null?Ts("Suspense Fallback"):Ts("Suspense");case 19:return Ts("SuspenseList");case 0:case 15:return za(t.type,!1);case 11:return za(t.type.render,!1);case 1:return za(t.type,!0);case 31:return Ts("Activity");default:return""}}function Cr(t){try{var s="",a=null;do s+=Dc(t,a),a=t,t=t.return;while(t);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var on=Object.prototype.hasOwnProperty,La=n.unstable_scheduleCallback,mn=n.unstable_cancelCallback,Rc=n.unstable_shouldYield,zc=n.unstable_requestPaint,Et=n.unstable_now,Lc=n.unstable_getCurrentPriorityLevel,kr=n.unstable_ImmediatePriority,Ar=n.unstable_UserBlockingPriority,ol=n.unstable_NormalPriority,Mr=n.unstable_LowPriority,ml=n.unstable_IdlePriority,Oc=n.log,Uc=n.unstable_setDisableYieldValue,Oa=null,L=null;function de(t){if(typeof Oc=="function"&&Uc(t),L&&typeof L.setStrictMode=="function")try{L.setStrictMode(Oa,t)}catch{}}var Le=Math.clz32?Math.clz32:xf,Rt=Math.log,un=Math.LN2;function xf(t){return t>>>=0,t===0?32:31-(Rt(t)/un|0)|0}var Er=256,Tr=262144,Dr=4194304;function Ua(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Rr(t,s,a){var l=t.pendingLanes;if(l===0)return 0;var c=0,o=t.suspendedLanes,j=t.pingedLanes;t=t.warmLanes;var D=l&134217727;return D!==0?(l=D&~o,l!==0?c=Ua(l):(j&=D,j!==0?c=Ua(j):a||(a=D&~t,a!==0&&(c=Ua(a))))):(D=l&~o,D!==0?c=Ua(D):j!==0?c=Ua(j):a||(a=l&~t,a!==0&&(c=Ua(a)))),c===0?0:s!==0&&s!==c&&(s&o)===0&&(o=c&-c,a=s&-s,o>=a||o===32&&(a&4194048)!==0)?s:c}function xn(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function hf(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rm(){var t=Dr;return Dr<<=1,(Dr&62914560)===0&&(Dr=4194304),t}function Hc(t){for(var s=[],a=0;31>a;a++)s.push(t);return s}function hn(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function pf(t,s,a,l,c,o){var j=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var D=t.entanglements,B=t.expirationTimes,J=t.hiddenUpdates;for(a=j&~a;0<a;){var ae=31-Le(a),ne=1<<ae;D[ae]=0,B[ae]=-1;var K=J[ae];if(K!==null)for(J[ae]=null,ae=0;ae<K.length;ae++){var se=K[ae];se!==null&&(se.lane&=-536870913)}a&=~ne}l!==0&&zm(t,l,0),o!==0&&c===0&&t.tag!==0&&(t.suspendedLanes|=o&~(j&~s))}function zm(t,s,a){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-Le(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Lm(t,s){var a=t.entangledLanes|=s;for(t=t.entanglements;a;){var l=31-Le(a),c=1<<l;c&s|t[l]&s&&(t[l]|=s),a&=~c}}function Om(t,s){var a=s&-s;return a=(a&42)!==0?1:$c(a),(a&(t.suspendedLanes|s))!==0?0:a}function $c(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function qc(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Um(){var t=P.p;return t!==0?t:(t=window.event,t===void 0?32:vp(t.type))}function Hm(t,s){var a=P.p;try{return P.p=t,s()}finally{P.p=a}}var la=Math.random().toString(36).slice(2),yt="__reactFiber$"+la,zt="__reactProps$"+la,ul="__reactContainer$"+la,Bc="__reactEvents$"+la,ff="__reactListeners$"+la,gf="__reactHandles$"+la,$m="__reactResources$"+la,pn="__reactMarker$"+la;function Gc(t){delete t[yt],delete t[zt],delete t[Bc],delete t[ff],delete t[gf]}function xl(t){var s=t[yt];if(s)return s;for(var a=t.parentNode;a;){if(s=a[ul]||a[yt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(t=rp(t);t!==null;){if(a=t[yt])return a;t=rp(t)}return s}t=a,a=t.parentNode}return null}function hl(t){if(t=t[yt]||t[ul]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function fn(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(d(33))}function pl(t){var s=t[$m];return s||(s=t[$m]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function gt(t){t[pn]=!0}var qm=new Set,Bm={};function Ha(t,s){fl(t,s),fl(t+"Capture",s)}function fl(t,s){for(Bm[t]=s,t=0;t<s.length;t++)qm.add(s[t])}var bf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gm={},Fm={};function jf(t){return on.call(Fm,t)?!0:on.call(Gm,t)?!1:bf.test(t)?Fm[t]=!0:(Gm[t]=!0,!1)}function zr(t,s,a){if(jf(s))if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+a)}}function Lr(t,s,a){if(a===null)t.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+a)}}function Ds(t,s,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(s,a,""+l)}}function Kt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Pm(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function yf(t,s,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var c=l.get,o=l.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return c.call(this)},set:function(j){a=""+j,o.call(this,j)}}),Object.defineProperty(t,s,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(j){a=""+j},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Fc(t){if(!t._valueTracker){var s=Pm(t)?"checked":"value";t._valueTracker=yf(t,s,""+t[s])}}function Ym(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var a=s.getValue(),l="";return t&&(l=Pm(t)?t.checked?"true":"false":t.value),t=l,t!==a?(s.setValue(t),!0):!1}function Or(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Nf=/[\n"\\]/g;function Wt(t){return t.replace(Nf,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Pc(t,s,a,l,c,o,j,D){t.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?t.type=j:t.removeAttribute("type"),s!=null?j==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+Kt(s)):t.value!==""+Kt(s)&&(t.value=""+Kt(s)):j!=="submit"&&j!=="reset"||t.removeAttribute("value"),s!=null?Yc(t,j,Kt(s)):a!=null?Yc(t,j,Kt(a)):l!=null&&t.removeAttribute("value"),c==null&&o!=null&&(t.defaultChecked=!!o),c!=null&&(t.checked=c&&typeof c!="function"&&typeof c!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?t.name=""+Kt(D):t.removeAttribute("name")}function Vm(t,s,a,l,c,o,j,D){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(t.type=o),s!=null||a!=null){if(!(o!=="submit"&&o!=="reset"||s!=null)){Fc(t);return}a=a!=null?""+Kt(a):"",s=s!=null?""+Kt(s):a,D||s===t.value||(t.value=s),t.defaultValue=s}l=l??c,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=D?t.checked:!!l,t.defaultChecked=!!l,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(t.name=j),Fc(t)}function Yc(t,s,a){s==="number"&&Or(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function gl(t,s,a,l){if(t=t.options,s){s={};for(var c=0;c<a.length;c++)s["$"+a[c]]=!0;for(a=0;a<t.length;a++)c=s.hasOwnProperty("$"+t[a].value),t[a].selected!==c&&(t[a].selected=c),c&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Kt(a),s=null,c=0;c<t.length;c++){if(t[c].value===a){t[c].selected=!0,l&&(t[c].defaultSelected=!0);return}s!==null||t[c].disabled||(s=t[c])}s!==null&&(s.selected=!0)}}function Xm(t,s,a){if(s!=null&&(s=""+Kt(s),s!==t.value&&(t.value=s),a==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=a!=null?""+Kt(a):""}function Qm(t,s,a,l){if(s==null){if(l!=null){if(a!=null)throw Error(d(92));if(F(l)){if(1<l.length)throw Error(d(93));l=l[0]}a=l}a==null&&(a=""),s=a}a=Kt(s),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Fc(t)}function bl(t,s){if(s){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=s;return}}t.textContent=s}var vf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Im(t,s,a){var l=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,a):typeof a!="number"||a===0||vf.has(s)?s==="float"?t.cssFloat=a:t[s]=(""+a).trim():t[s]=a+"px"}function Zm(t,s,a){if(s!=null&&typeof s!="object")throw Error(d(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var c in s)l=s[c],s.hasOwnProperty(c)&&a[c]!==l&&Im(t,c,l)}else for(var o in s)s.hasOwnProperty(o)&&Im(t,o,s[o])}function Vc(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Sf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ur(t){return Sf.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Rs(){}var Xc=null;function Qc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jl=null,yl=null;function Jm(t){var s=hl(t);if(s&&(t=s.stateNode)){var a=t[zt]||null;e:switch(t=s.stateNode,s.type){case"input":if(Pc(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Wt(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var l=a[s];if(l!==t&&l.form===t.form){var c=l[zt]||null;if(!c)throw Error(d(90));Pc(l,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(s=0;s<a.length;s++)l=a[s],l.form===t.form&&Ym(l)}break e;case"textarea":Xm(t,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&gl(t,!!a.multiple,s,!1)}}}var Ic=!1;function Km(t,s,a){if(Ic)return t(s,a);Ic=!0;try{var l=t(s);return l}finally{if(Ic=!1,(jl!==null||yl!==null)&&(Si(),jl&&(s=jl,t=yl,yl=jl=null,Jm(s),t)))for(s=0;s<t.length;s++)Jm(t[s])}}function gn(t,s){var a=t.stateNode;if(a===null)return null;var l=a[zt]||null;if(l===null)return null;a=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(d(231,s,typeof a));return a}var zs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zc=!1;if(zs)try{var bn={};Object.defineProperty(bn,"passive",{get:function(){Zc=!0}}),window.addEventListener("test",bn,bn),window.removeEventListener("test",bn,bn)}catch{Zc=!1}var na=null,Jc=null,Hr=null;function Wm(){if(Hr)return Hr;var t,s=Jc,a=s.length,l,c="value"in na?na.value:na.textContent,o=c.length;for(t=0;t<a&&s[t]===c[t];t++);var j=a-t;for(l=1;l<=j&&s[a-l]===c[o-l];l++);return Hr=c.slice(t,1<l?1-l:void 0)}function $r(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function qr(){return!0}function eu(){return!1}function Lt(t){function s(a,l,c,o,j){this._reactName=a,this._targetInst=c,this.type=l,this.nativeEvent=o,this.target=j,this.currentTarget=null;for(var D in t)t.hasOwnProperty(D)&&(a=t[D],this[D]=a?a(o):o[D]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?qr:eu,this.isPropagationStopped=eu,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=qr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=qr)},persist:function(){},isPersistent:qr}),s}var $a={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Br=Lt($a),jn=v({},$a,{view:0,detail:0}),_f=Lt(jn),Kc,Wc,yn,Gr=v({},jn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:td,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yn&&(yn&&t.type==="mousemove"?(Kc=t.screenX-yn.screenX,Wc=t.screenY-yn.screenY):Wc=Kc=0,yn=t),Kc)},movementY:function(t){return"movementY"in t?t.movementY:Wc}}),tu=Lt(Gr),Cf=v({},Gr,{dataTransfer:0}),kf=Lt(Cf),Af=v({},jn,{relatedTarget:0}),ed=Lt(Af),Mf=v({},$a,{animationName:0,elapsedTime:0,pseudoElement:0}),Ef=Lt(Mf),Tf=v({},$a,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Df=Lt(Tf),Rf=v({},$a,{data:0}),su=Lt(Rf),zf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Of={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uf(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Of[t])?!!s[t]:!1}function td(){return Uf}var Hf=v({},jn,{key:function(t){if(t.key){var s=zf[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=$r(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Lf[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:td,charCode:function(t){return t.type==="keypress"?$r(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?$r(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$f=Lt(Hf),qf=v({},Gr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),au=Lt(qf),Bf=v({},jn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:td}),Gf=Lt(Bf),Ff=v({},$a,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pf=Lt(Ff),Yf=v({},Gr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Vf=Lt(Yf),Xf=v({},$a,{newState:0,oldState:0}),Qf=Lt(Xf),If=[9,13,27,32],sd=zs&&"CompositionEvent"in window,Nn=null;zs&&"documentMode"in document&&(Nn=document.documentMode);var Zf=zs&&"TextEvent"in window&&!Nn,lu=zs&&(!sd||Nn&&8<Nn&&11>=Nn),nu=" ",ru=!1;function iu(t,s){switch(t){case"keyup":return If.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cu(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Nl=!1;function Jf(t,s){switch(t){case"compositionend":return cu(s);case"keypress":return s.which!==32?null:(ru=!0,nu);case"textInput":return t=s.data,t===nu&&ru?null:t;default:return null}}function Kf(t,s){if(Nl)return t==="compositionend"||!sd&&iu(t,s)?(t=Wm(),Hr=Jc=na=null,Nl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return lu&&s.locale!=="ko"?null:s.data;default:return null}}var Wf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function du(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Wf[t.type]:s==="textarea"}function ou(t,s,a,l){jl?yl?yl.push(l):yl=[l]:jl=l,s=Ti(s,"onChange"),0<s.length&&(a=new Br("onChange","change",null,a,l),t.push({event:a,listeners:s}))}var vn=null,wn=null;function eg(t){Vh(t,0)}function Fr(t){var s=fn(t);if(Ym(s))return t}function mu(t,s){if(t==="change")return s}var uu=!1;if(zs){var ad;if(zs){var ld="oninput"in document;if(!ld){var xu=document.createElement("div");xu.setAttribute("oninput","return;"),ld=typeof xu.oninput=="function"}ad=ld}else ad=!1;uu=ad&&(!document.documentMode||9<document.documentMode)}function hu(){vn&&(vn.detachEvent("onpropertychange",pu),wn=vn=null)}function pu(t){if(t.propertyName==="value"&&Fr(wn)){var s=[];ou(s,wn,t,Qc(t)),Km(eg,s)}}function tg(t,s,a){t==="focusin"?(hu(),vn=s,wn=a,vn.attachEvent("onpropertychange",pu)):t==="focusout"&&hu()}function sg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fr(wn)}function ag(t,s){if(t==="click")return Fr(s)}function lg(t,s){if(t==="input"||t==="change")return Fr(s)}function ng(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Pt=typeof Object.is=="function"?Object.is:ng;function Sn(t,s){if(Pt(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var a=Object.keys(t),l=Object.keys(s);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var c=a[l];if(!on.call(s,c)||!Pt(t[c],s[c]))return!1}return!0}function fu(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function gu(t,s){var a=fu(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=s&&l>=s)return{node:a,offset:s-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=fu(a)}}function bu(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?bu(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function ju(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Or(t.document);s instanceof t.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)t=s.contentWindow;else break;s=Or(t.document)}return s}function nd(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var rg=zs&&"documentMode"in document&&11>=document.documentMode,vl=null,rd=null,_n=null,id=!1;function yu(t,s,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;id||vl==null||vl!==Or(l)||(l=vl,"selectionStart"in l&&nd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),_n&&Sn(_n,l)||(_n=l,l=Ti(rd,"onSelect"),0<l.length&&(s=new Br("onSelect","select",null,s,a),t.push({event:s,listeners:l}),s.target=vl)))}function qa(t,s){var a={};return a[t.toLowerCase()]=s.toLowerCase(),a["Webkit"+t]="webkit"+s,a["Moz"+t]="moz"+s,a}var wl={animationend:qa("Animation","AnimationEnd"),animationiteration:qa("Animation","AnimationIteration"),animationstart:qa("Animation","AnimationStart"),transitionrun:qa("Transition","TransitionRun"),transitionstart:qa("Transition","TransitionStart"),transitioncancel:qa("Transition","TransitionCancel"),transitionend:qa("Transition","TransitionEnd")},cd={},Nu={};zs&&(Nu=document.createElement("div").style,"AnimationEvent"in window||(delete wl.animationend.animation,delete wl.animationiteration.animation,delete wl.animationstart.animation),"TransitionEvent"in window||delete wl.transitionend.transition);function Ba(t){if(cd[t])return cd[t];if(!wl[t])return t;var s=wl[t],a;for(a in s)if(s.hasOwnProperty(a)&&a in Nu)return cd[t]=s[a];return t}var vu=Ba("animationend"),wu=Ba("animationiteration"),Su=Ba("animationstart"),ig=Ba("transitionrun"),cg=Ba("transitionstart"),dg=Ba("transitioncancel"),_u=Ba("transitionend"),Cu=new Map,dd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dd.push("scrollEnd");function ps(t,s){Cu.set(t,s),Ha(s,[t])}var Pr=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},es=[],Sl=0,od=0;function Yr(){for(var t=Sl,s=od=Sl=0;s<t;){var a=es[s];es[s++]=null;var l=es[s];es[s++]=null;var c=es[s];es[s++]=null;var o=es[s];if(es[s++]=null,l!==null&&c!==null){var j=l.pending;j===null?c.next=c:(c.next=j.next,j.next=c),l.pending=c}o!==0&&ku(a,c,o)}}function Vr(t,s,a,l){es[Sl++]=t,es[Sl++]=s,es[Sl++]=a,es[Sl++]=l,od|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function md(t,s,a,l){return Vr(t,s,a,l),Xr(t)}function Ga(t,s){return Vr(t,null,null,s),Xr(t)}function ku(t,s,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var c=!1,o=t.return;o!==null;)o.childLanes|=a,l=o.alternate,l!==null&&(l.childLanes|=a),o.tag===22&&(t=o.stateNode,t===null||t._visibility&1||(c=!0)),t=o,o=o.return;return t.tag===3?(o=t.stateNode,c&&s!==null&&(c=31-Le(a),t=o.hiddenUpdates,l=t[c],l===null?t[c]=[s]:l.push(s),s.lane=a|536870912),o):null}function Xr(t){if(50<Xn)throw Xn=0,No=null,Error(d(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var _l={};function og(t,s,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,s,a,l){return new og(t,s,a,l)}function ud(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ls(t,s){var a=t.alternate;return a===null?(a=Yt(t.tag,s,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=s,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,s=t.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Au(t,s){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,s=a.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Qr(t,s,a,l,c,o){var j=0;if(l=t,typeof t=="function")ud(t)&&(j=1);else if(typeof t=="string")j=pb(t,a,ue.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case S:return t=Yt(31,a,s,c),t.elementType=S,t.lanes=o,t;case M:return Fa(a.children,c,o,s);case R:j=8,c|=24;break;case C:return t=Yt(12,a,s,c|2),t.elementType=C,t.lanes=o,t;case G:return t=Yt(13,a,s,c),t.elementType=G,t.lanes=o,t;case z:return t=Yt(19,a,s,c),t.elementType=z,t.lanes=o,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case k:j=10;break e;case y:j=9;break e;case _:j=11;break e;case N:j=14;break e;case E:j=16,l=null;break e}j=29,a=Error(d(130,t===null?"null":typeof t,"")),l=null}return s=Yt(j,a,s,c),s.elementType=t,s.type=l,s.lanes=o,s}function Fa(t,s,a,l){return t=Yt(7,t,l,s),t.lanes=a,t}function xd(t,s,a){return t=Yt(6,t,null,s),t.lanes=a,t}function Mu(t){var s=Yt(18,null,null,0);return s.stateNode=t,s}function hd(t,s,a){return s=Yt(4,t.children!==null?t.children:[],t.key,s),s.lanes=a,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var Eu=new WeakMap;function ts(t,s){if(typeof t=="object"&&t!==null){var a=Eu.get(t);return a!==void 0?a:(s={value:t,source:s,stack:Cr(s)},Eu.set(t,s),s)}return{value:t,source:s,stack:Cr(s)}}var Cl=[],kl=0,Ir=null,Cn=0,ss=[],as=0,ra=null,ws=1,Ss="";function Os(t,s){Cl[kl++]=Cn,Cl[kl++]=Ir,Ir=t,Cn=s}function Tu(t,s,a){ss[as++]=ws,ss[as++]=Ss,ss[as++]=ra,ra=t;var l=ws;t=Ss;var c=32-Le(l)-1;l&=~(1<<c),a+=1;var o=32-Le(s)+c;if(30<o){var j=c-c%5;o=(l&(1<<j)-1).toString(32),l>>=j,c-=j,ws=1<<32-Le(s)+c|a<<c|l,Ss=o+t}else ws=1<<o|a<<c|l,Ss=t}function pd(t){t.return!==null&&(Os(t,1),Tu(t,1,0))}function fd(t){for(;t===Ir;)Ir=Cl[--kl],Cl[kl]=null,Cn=Cl[--kl],Cl[kl]=null;for(;t===ra;)ra=ss[--as],ss[as]=null,Ss=ss[--as],ss[as]=null,ws=ss[--as],ss[as]=null}function Du(t,s){ss[as++]=ws,ss[as++]=Ss,ss[as++]=ra,ws=s.id,Ss=s.overflow,ra=t}var Nt=null,Qe=null,Te=!1,ia=null,ls=!1,gd=Error(d(519));function ca(t){var s=Error(d(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw kn(ts(s,t)),gd}function Ru(t){var s=t.stateNode,a=t.type,l=t.memoizedProps;switch(s[yt]=t,s[zt]=l,a){case"dialog":ke("cancel",s),ke("close",s);break;case"iframe":case"object":case"embed":ke("load",s);break;case"video":case"audio":for(a=0;a<In.length;a++)ke(In[a],s);break;case"source":ke("error",s);break;case"img":case"image":case"link":ke("error",s),ke("load",s);break;case"details":ke("toggle",s);break;case"input":ke("invalid",s),Vm(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":ke("invalid",s);break;case"textarea":ke("invalid",s),Qm(s,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||l.suppressHydrationWarning===!0||Zh(s.textContent,a)?(l.popover!=null&&(ke("beforetoggle",s),ke("toggle",s)),l.onScroll!=null&&ke("scroll",s),l.onScrollEnd!=null&&ke("scrollend",s),l.onClick!=null&&(s.onclick=Rs),s=!0):s=!1,s||ca(t,!0)}function zu(t){for(Nt=t.return;Nt;)switch(Nt.tag){case 5:case 31:case 13:ls=!1;return;case 27:case 3:ls=!0;return;default:Nt=Nt.return}}function Al(t){if(t!==Nt)return!1;if(!Te)return zu(t),Te=!0,!1;var s=t.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Oo(t.type,t.memoizedProps)),a=!a),a&&Qe&&ca(t),zu(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(d(317));Qe=np(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(d(317));Qe=np(t)}else s===27?(s=Qe,va(t.type)?(t=Bo,Bo=null,Qe=t):Qe=s):Qe=Nt?rs(t.stateNode.nextSibling):null;return!0}function Pa(){Qe=Nt=null,Te=!1}function bd(){var t=ia;return t!==null&&($t===null?$t=t:$t.push.apply($t,t),ia=null),t}function kn(t){ia===null?ia=[t]:ia.push(t)}var jd=H(null),Ya=null,Us=null;function da(t,s,a){ce(jd,s._currentValue),s._currentValue=a}function Hs(t){t._currentValue=jd.current,te(jd)}function yd(t,s,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===a)break;t=t.return}}function Nd(t,s,a,l){var c=t.child;for(c!==null&&(c.return=t);c!==null;){var o=c.dependencies;if(o!==null){var j=c.child;o=o.firstContext;e:for(;o!==null;){var D=o;o=c;for(var B=0;B<s.length;B++)if(D.context===s[B]){o.lanes|=a,D=o.alternate,D!==null&&(D.lanes|=a),yd(o.return,a,t),l||(j=null);break e}o=D.next}}else if(c.tag===18){if(j=c.return,j===null)throw Error(d(341));j.lanes|=a,o=j.alternate,o!==null&&(o.lanes|=a),yd(j,a,t),j=null}else j=c.child;if(j!==null)j.return=c;else for(j=c;j!==null;){if(j===t){j=null;break}if(c=j.sibling,c!==null){c.return=j.return,j=c;break}j=j.return}c=j}}function Ml(t,s,a,l){t=null;for(var c=s,o=!1;c!==null;){if(!o){if((c.flags&524288)!==0)o=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var j=c.alternate;if(j===null)throw Error(d(387));if(j=j.memoizedProps,j!==null){var D=c.type;Pt(c.pendingProps.value,j.value)||(t!==null?t.push(D):t=[D])}}else if(c===De.current){if(j=c.alternate,j===null)throw Error(d(387));j.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(t!==null?t.push(er):t=[er])}c=c.return}t!==null&&Nd(s,t,a,l),s.flags|=262144}function Zr(t){for(t=t.firstContext;t!==null;){if(!Pt(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Va(t){Ya=t,Us=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function vt(t){return Lu(Ya,t)}function Jr(t,s){return Ya===null&&Va(t),Lu(t,s)}function Lu(t,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Us===null){if(t===null)throw Error(d(308));Us=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else Us=Us.next=s;return a}var mg=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(a){return a()})}},ug=n.unstable_scheduleCallback,xg=n.unstable_NormalPriority,ot={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vd(){return{controller:new mg,data:new Map,refCount:0}}function An(t){t.refCount--,t.refCount===0&&ug(xg,function(){t.controller.abort()})}var Mn=null,wd=0,El=0,Tl=null;function hg(t,s){if(Mn===null){var a=Mn=[];wd=0,El=ko(),Tl={status:"pending",value:void 0,then:function(l){a.push(l)}}}return wd++,s.then(Ou,Ou),s}function Ou(){if(--wd===0&&Mn!==null){Tl!==null&&(Tl.status="fulfilled");var t=Mn;Mn=null,El=0,Tl=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function pg(t,s){var a=[],l={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var c=0;c<a.length;c++)(0,a[c])(s)},function(c){for(l.status="rejected",l.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),l}var Uu=O.S;O.S=function(t,s){yh=Et(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&hg(t,s),Uu!==null&&Uu(t,s)};var Xa=H(null);function Sd(){var t=Xa.current;return t!==null?t:Ye.pooledCache}function Kr(t,s){s===null?ce(Xa,Xa.current):ce(Xa,s.pool)}function Hu(){var t=Sd();return t===null?null:{parent:ot._currentValue,pool:t}}var Dl=Error(d(460)),_d=Error(d(474)),Wr=Error(d(542)),ei={then:function(){}};function $u(t){return t=t.status,t==="fulfilled"||t==="rejected"}function qu(t,s,a){switch(a=t[a],a===void 0?t.push(s):a!==s&&(s.then(Rs,Rs),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Gu(t),t;default:if(typeof s.status=="string")s.then(Rs,Rs);else{if(t=Ye,t!==null&&100<t.shellSuspendCounter)throw Error(d(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var c=s;c.status="fulfilled",c.value=l}},function(l){if(s.status==="pending"){var c=s;c.status="rejected",c.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Gu(t),t}throw Ia=s,Dl}}function Qa(t){try{var s=t._init;return s(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ia=a,Dl):a}}var Ia=null;function Bu(){if(Ia===null)throw Error(d(459));var t=Ia;return Ia=null,t}function Gu(t){if(t===Dl||t===Wr)throw Error(d(483))}var Rl=null,En=0;function ti(t){var s=En;return En+=1,Rl===null&&(Rl=[]),qu(Rl,t,s)}function Tn(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function si(t,s){throw s.$$typeof===w?Error(d(525)):(t=Object.prototype.toString.call(s),Error(d(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Fu(t){function s(V,Y){if(t){var I=V.deletions;I===null?(V.deletions=[Y],V.flags|=16):I.push(Y)}}function a(V,Y){if(!t)return null;for(;Y!==null;)s(V,Y),Y=Y.sibling;return null}function l(V){for(var Y=new Map;V!==null;)V.key!==null?Y.set(V.key,V):Y.set(V.index,V),V=V.sibling;return Y}function c(V,Y){return V=Ls(V,Y),V.index=0,V.sibling=null,V}function o(V,Y,I){return V.index=I,t?(I=V.alternate,I!==null?(I=I.index,I<Y?(V.flags|=67108866,Y):I):(V.flags|=67108866,Y)):(V.flags|=1048576,Y)}function j(V){return t&&V.alternate===null&&(V.flags|=67108866),V}function D(V,Y,I,le){return Y===null||Y.tag!==6?(Y=xd(I,V.mode,le),Y.return=V,Y):(Y=c(Y,I),Y.return=V,Y)}function B(V,Y,I,le){var ge=I.type;return ge===M?ae(V,Y,I.props.children,le,I.key):Y!==null&&(Y.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===E&&Qa(ge)===Y.type)?(Y=c(Y,I.props),Tn(Y,I),Y.return=V,Y):(Y=Qr(I.type,I.key,I.props,null,V.mode,le),Tn(Y,I),Y.return=V,Y)}function J(V,Y,I,le){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==I.containerInfo||Y.stateNode.implementation!==I.implementation?(Y=hd(I,V.mode,le),Y.return=V,Y):(Y=c(Y,I.children||[]),Y.return=V,Y)}function ae(V,Y,I,le,ge){return Y===null||Y.tag!==7?(Y=Fa(I,V.mode,le,ge),Y.return=V,Y):(Y=c(Y,I),Y.return=V,Y)}function ne(V,Y,I){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=xd(""+Y,V.mode,I),Y.return=V,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case A:return I=Qr(Y.type,Y.key,Y.props,null,V.mode,I),Tn(I,Y),I.return=V,I;case T:return Y=hd(Y,V.mode,I),Y.return=V,Y;case E:return Y=Qa(Y),ne(V,Y,I)}if(F(Y)||Z(Y))return Y=Fa(Y,V.mode,I,null),Y.return=V,Y;if(typeof Y.then=="function")return ne(V,ti(Y),I);if(Y.$$typeof===k)return ne(V,Jr(V,Y),I);si(V,Y)}return null}function K(V,Y,I,le){var ge=Y!==null?Y.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return ge!==null?null:D(V,Y,""+I,le);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case A:return I.key===ge?B(V,Y,I,le):null;case T:return I.key===ge?J(V,Y,I,le):null;case E:return I=Qa(I),K(V,Y,I,le)}if(F(I)||Z(I))return ge!==null?null:ae(V,Y,I,le,null);if(typeof I.then=="function")return K(V,Y,ti(I),le);if(I.$$typeof===k)return K(V,Y,Jr(V,I),le);si(V,I)}return null}function se(V,Y,I,le,ge){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return V=V.get(I)||null,D(Y,V,""+le,ge);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case A:return V=V.get(le.key===null?I:le.key)||null,B(Y,V,le,ge);case T:return V=V.get(le.key===null?I:le.key)||null,J(Y,V,le,ge);case E:return le=Qa(le),se(V,Y,I,le,ge)}if(F(le)||Z(le))return V=V.get(I)||null,ae(Y,V,le,ge,null);if(typeof le.then=="function")return se(V,Y,I,ti(le),ge);if(le.$$typeof===k)return se(V,Y,I,Jr(Y,le),ge);si(Y,le)}return null}function pe(V,Y,I,le){for(var ge=null,Re=null,fe=Y,_e=Y=0,Me=null;fe!==null&&_e<I.length;_e++){fe.index>_e?(Me=fe,fe=null):Me=fe.sibling;var ze=K(V,fe,I[_e],le);if(ze===null){fe===null&&(fe=Me);break}t&&fe&&ze.alternate===null&&s(V,fe),Y=o(ze,Y,_e),Re===null?ge=ze:Re.sibling=ze,Re=ze,fe=Me}if(_e===I.length)return a(V,fe),Te&&Os(V,_e),ge;if(fe===null){for(;_e<I.length;_e++)fe=ne(V,I[_e],le),fe!==null&&(Y=o(fe,Y,_e),Re===null?ge=fe:Re.sibling=fe,Re=fe);return Te&&Os(V,_e),ge}for(fe=l(fe);_e<I.length;_e++)Me=se(fe,V,_e,I[_e],le),Me!==null&&(t&&Me.alternate!==null&&fe.delete(Me.key===null?_e:Me.key),Y=o(Me,Y,_e),Re===null?ge=Me:Re.sibling=Me,Re=Me);return t&&fe.forEach(function(ka){return s(V,ka)}),Te&&Os(V,_e),ge}function be(V,Y,I,le){if(I==null)throw Error(d(151));for(var ge=null,Re=null,fe=Y,_e=Y=0,Me=null,ze=I.next();fe!==null&&!ze.done;_e++,ze=I.next()){fe.index>_e?(Me=fe,fe=null):Me=fe.sibling;var ka=K(V,fe,ze.value,le);if(ka===null){fe===null&&(fe=Me);break}t&&fe&&ka.alternate===null&&s(V,fe),Y=o(ka,Y,_e),Re===null?ge=ka:Re.sibling=ka,Re=ka,fe=Me}if(ze.done)return a(V,fe),Te&&Os(V,_e),ge;if(fe===null){for(;!ze.done;_e++,ze=I.next())ze=ne(V,ze.value,le),ze!==null&&(Y=o(ze,Y,_e),Re===null?ge=ze:Re.sibling=ze,Re=ze);return Te&&Os(V,_e),ge}for(fe=l(fe);!ze.done;_e++,ze=I.next())ze=se(fe,V,_e,ze.value,le),ze!==null&&(t&&ze.alternate!==null&&fe.delete(ze.key===null?_e:ze.key),Y=o(ze,Y,_e),Re===null?ge=ze:Re.sibling=ze,Re=ze);return t&&fe.forEach(function(Cb){return s(V,Cb)}),Te&&Os(V,_e),ge}function Pe(V,Y,I,le){if(typeof I=="object"&&I!==null&&I.type===M&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case A:e:{for(var ge=I.key;Y!==null;){if(Y.key===ge){if(ge=I.type,ge===M){if(Y.tag===7){a(V,Y.sibling),le=c(Y,I.props.children),le.return=V,V=le;break e}}else if(Y.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===E&&Qa(ge)===Y.type){a(V,Y.sibling),le=c(Y,I.props),Tn(le,I),le.return=V,V=le;break e}a(V,Y);break}else s(V,Y);Y=Y.sibling}I.type===M?(le=Fa(I.props.children,V.mode,le,I.key),le.return=V,V=le):(le=Qr(I.type,I.key,I.props,null,V.mode,le),Tn(le,I),le.return=V,V=le)}return j(V);case T:e:{for(ge=I.key;Y!==null;){if(Y.key===ge)if(Y.tag===4&&Y.stateNode.containerInfo===I.containerInfo&&Y.stateNode.implementation===I.implementation){a(V,Y.sibling),le=c(Y,I.children||[]),le.return=V,V=le;break e}else{a(V,Y);break}else s(V,Y);Y=Y.sibling}le=hd(I,V.mode,le),le.return=V,V=le}return j(V);case E:return I=Qa(I),Pe(V,Y,I,le)}if(F(I))return pe(V,Y,I,le);if(Z(I)){if(ge=Z(I),typeof ge!="function")throw Error(d(150));return I=ge.call(I),be(V,Y,I,le)}if(typeof I.then=="function")return Pe(V,Y,ti(I),le);if(I.$$typeof===k)return Pe(V,Y,Jr(V,I),le);si(V,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,Y!==null&&Y.tag===6?(a(V,Y.sibling),le=c(Y,I),le.return=V,V=le):(a(V,Y),le=xd(I,V.mode,le),le.return=V,V=le),j(V)):a(V,Y)}return function(V,Y,I,le){try{En=0;var ge=Pe(V,Y,I,le);return Rl=null,ge}catch(fe){if(fe===Dl||fe===Wr)throw fe;var Re=Yt(29,fe,null,V.mode);return Re.lanes=le,Re.return=V,Re}finally{}}}var Za=Fu(!0),Pu=Fu(!1),oa=!1;function Cd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kd(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ma(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ua(t,s,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Oe&2)!==0){var c=l.pending;return c===null?s.next=s:(s.next=c.next,c.next=s),l.pending=s,s=Xr(t),ku(t,null,a),s}return Vr(t,l,s,a),Xr(t)}function Dn(t,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Lm(t,a)}}function Ad(t,s){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var c=null,o=null;if(a=a.firstBaseUpdate,a!==null){do{var j={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};o===null?c=o=j:o=o.next=j,a=a.next}while(a!==null);o===null?c=o=s:o=o.next=s}else c=o=s;a={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:o,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=s:t.next=s,a.lastBaseUpdate=s}var Md=!1;function Rn(){if(Md){var t=Tl;if(t!==null)throw t}}function zn(t,s,a,l){Md=!1;var c=t.updateQueue;oa=!1;var o=c.firstBaseUpdate,j=c.lastBaseUpdate,D=c.shared.pending;if(D!==null){c.shared.pending=null;var B=D,J=B.next;B.next=null,j===null?o=J:j.next=J,j=B;var ae=t.alternate;ae!==null&&(ae=ae.updateQueue,D=ae.lastBaseUpdate,D!==j&&(D===null?ae.firstBaseUpdate=J:D.next=J,ae.lastBaseUpdate=B))}if(o!==null){var ne=c.baseState;j=0,ae=J=B=null,D=o;do{var K=D.lane&-536870913,se=K!==D.lane;if(se?(Ae&K)===K:(l&K)===K){K!==0&&K===El&&(Md=!0),ae!==null&&(ae=ae.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var pe=t,be=D;K=s;var Pe=a;switch(be.tag){case 1:if(pe=be.payload,typeof pe=="function"){ne=pe.call(Pe,ne,K);break e}ne=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=be.payload,K=typeof pe=="function"?pe.call(Pe,ne,K):pe,K==null)break e;ne=v({},ne,K);break e;case 2:oa=!0}}K=D.callback,K!==null&&(t.flags|=64,se&&(t.flags|=8192),se=c.callbacks,se===null?c.callbacks=[K]:se.push(K))}else se={lane:K,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ae===null?(J=ae=se,B=ne):ae=ae.next=se,j|=K;if(D=D.next,D===null){if(D=c.shared.pending,D===null)break;se=D,D=se.next,se.next=null,c.lastBaseUpdate=se,c.shared.pending=null}}while(!0);ae===null&&(B=ne),c.baseState=B,c.firstBaseUpdate=J,c.lastBaseUpdate=ae,o===null&&(c.shared.lanes=0),ga|=j,t.lanes=j,t.memoizedState=ne}}function Yu(t,s){if(typeof t!="function")throw Error(d(191,t));t.call(s)}function Vu(t,s){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Yu(a[t],s)}var zl=H(null),ai=H(0);function Xu(t,s){t=Xs,ce(ai,t),ce(zl,s),Xs=t|s.baseLanes}function Ed(){ce(ai,Xs),ce(zl,zl.current)}function Td(){Xs=ai.current,te(zl),te(ai)}var Vt=H(null),ns=null;function xa(t){var s=t.alternate;ce(rt,rt.current&1),ce(Vt,t),ns===null&&(s===null||zl.current!==null||s.memoizedState!==null)&&(ns=t)}function Dd(t){ce(rt,rt.current),ce(Vt,t),ns===null&&(ns=t)}function Qu(t){t.tag===22?(ce(rt,rt.current),ce(Vt,t),ns===null&&(ns=t)):ha()}function ha(){ce(rt,rt.current),ce(Vt,Vt.current)}function Xt(t){te(Vt),ns===t&&(ns=null),te(rt)}var rt=H(0);function li(t){for(var s=t;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||$o(a)||qo(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var $s=0,ve=null,Ge=null,mt=null,ni=!1,Ll=!1,Ja=!1,ri=0,Ln=0,Ol=null,fg=0;function tt(){throw Error(d(321))}function Rd(t,s){if(s===null)return!1;for(var a=0;a<s.length&&a<t.length;a++)if(!Pt(t[a],s[a]))return!1;return!0}function zd(t,s,a,l,c,o){return $s=o,ve=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,O.H=t===null||t.memoizedState===null?Tx:Id,Ja=!1,o=a(l,c),Ja=!1,Ll&&(o=Zu(s,a,l,c)),Iu(t),o}function Iu(t){O.H=Hn;var s=Ge!==null&&Ge.next!==null;if($s=0,mt=Ge=ve=null,ni=!1,Ln=0,Ol=null,s)throw Error(d(300));t===null||ut||(t=t.dependencies,t!==null&&Zr(t)&&(ut=!0))}function Zu(t,s,a,l){ve=t;var c=0;do{if(Ll&&(Ol=null),Ln=0,Ll=!1,25<=c)throw Error(d(301));if(c+=1,mt=Ge=null,t.updateQueue!=null){var o=t.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}O.H=Dx,o=s(a,l)}while(Ll);return o}function gg(){var t=O.H,s=t.useState()[0];return s=typeof s.then=="function"?On(s):s,t=t.useState()[0],(Ge!==null?Ge.memoizedState:null)!==t&&(ve.flags|=1024),s}function Ld(){var t=ri!==0;return ri=0,t}function Od(t,s,a){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~a}function Ud(t){if(ni){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}ni=!1}$s=0,mt=Ge=ve=null,Ll=!1,Ln=ri=0,Ol=null}function Tt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?ve.memoizedState=mt=t:mt=mt.next=t,mt}function it(){if(Ge===null){var t=ve.alternate;t=t!==null?t.memoizedState:null}else t=Ge.next;var s=mt===null?ve.memoizedState:mt.next;if(s!==null)mt=s,Ge=t;else{if(t===null)throw ve.alternate===null?Error(d(467)):Error(d(310));Ge=t,t={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},mt===null?ve.memoizedState=mt=t:mt=mt.next=t}return mt}function ii(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function On(t){var s=Ln;return Ln+=1,Ol===null&&(Ol=[]),t=qu(Ol,t,s),s=ve,(mt===null?s.memoizedState:mt.next)===null&&(s=s.alternate,O.H=s===null||s.memoizedState===null?Tx:Id),t}function ci(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return On(t);if(t.$$typeof===k)return vt(t)}throw Error(d(438,String(t)))}function Hd(t){var s=null,a=ve.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var l=ve.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(c){return c.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=ii(),ve.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(t),l=0;l<t;l++)a[l]=U;return s.index++,a}function qs(t,s){return typeof s=="function"?s(t):s}function di(t){var s=it();return $d(s,Ge,t)}function $d(t,s,a){var l=t.queue;if(l===null)throw Error(d(311));l.lastRenderedReducer=a;var c=t.baseQueue,o=l.pending;if(o!==null){if(c!==null){var j=c.next;c.next=o.next,o.next=j}s.baseQueue=c=o,l.pending=null}if(o=t.baseState,c===null)t.memoizedState=o;else{s=c.next;var D=j=null,B=null,J=s,ae=!1;do{var ne=J.lane&-536870913;if(ne!==J.lane?(Ae&ne)===ne:($s&ne)===ne){var K=J.revertLane;if(K===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ne===El&&(ae=!0);else if(($s&K)===K){J=J.next,K===El&&(ae=!0);continue}else ne={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},B===null?(D=B=ne,j=o):B=B.next=ne,ve.lanes|=K,ga|=K;ne=J.action,Ja&&a(o,ne),o=J.hasEagerState?J.eagerState:a(o,ne)}else K={lane:ne,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},B===null?(D=B=K,j=o):B=B.next=K,ve.lanes|=ne,ga|=ne;J=J.next}while(J!==null&&J!==s);if(B===null?j=o:B.next=D,!Pt(o,t.memoizedState)&&(ut=!0,ae&&(a=Tl,a!==null)))throw a;t.memoizedState=o,t.baseState=j,t.baseQueue=B,l.lastRenderedState=o}return c===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function qd(t){var s=it(),a=s.queue;if(a===null)throw Error(d(311));a.lastRenderedReducer=t;var l=a.dispatch,c=a.pending,o=s.memoizedState;if(c!==null){a.pending=null;var j=c=c.next;do o=t(o,j.action),j=j.next;while(j!==c);Pt(o,s.memoizedState)||(ut=!0),s.memoizedState=o,s.baseQueue===null&&(s.baseState=o),a.lastRenderedState=o}return[o,l]}function Ju(t,s,a){var l=ve,c=it(),o=Te;if(o){if(a===void 0)throw Error(d(407));a=a()}else a=s();var j=!Pt((Ge||c).memoizedState,a);if(j&&(c.memoizedState=a,ut=!0),c=c.queue,Fd(ex.bind(null,l,c,t),[t]),c.getSnapshot!==s||j||mt!==null&&mt.memoizedState.tag&1){if(l.flags|=2048,Ul(9,{destroy:void 0},Wu.bind(null,l,c,a,s),null),Ye===null)throw Error(d(349));o||($s&127)!==0||Ku(l,s,a)}return a}function Ku(t,s,a){t.flags|=16384,t={getSnapshot:s,value:a},s=ve.updateQueue,s===null?(s=ii(),ve.updateQueue=s,s.stores=[t]):(a=s.stores,a===null?s.stores=[t]:a.push(t))}function Wu(t,s,a,l){s.value=a,s.getSnapshot=l,tx(s)&&sx(t)}function ex(t,s,a){return a(function(){tx(s)&&sx(t)})}function tx(t){var s=t.getSnapshot;t=t.value;try{var a=s();return!Pt(t,a)}catch{return!0}}function sx(t){var s=Ga(t,2);s!==null&&qt(s,t,2)}function Bd(t){var s=Tt();if(typeof t=="function"){var a=t;if(t=a(),Ja){de(!0);try{a()}finally{de(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:t},s}function ax(t,s,a,l){return t.baseState=a,$d(t,Ge,typeof l=="function"?l:qs)}function bg(t,s,a,l,c){if(ui(t))throw Error(d(485));if(t=s.action,t!==null){var o={payload:c,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){o.listeners.push(j)}};O.T!==null?a(!0):o.isTransition=!1,l(o),a=s.pending,a===null?(o.next=s.pending=o,lx(s,o)):(o.next=a.next,s.pending=a.next=o)}}function lx(t,s){var a=s.action,l=s.payload,c=t.state;if(s.isTransition){var o=O.T,j={};O.T=j;try{var D=a(c,l),B=O.S;B!==null&&B(j,D),nx(t,s,D)}catch(J){Gd(t,s,J)}finally{o!==null&&j.types!==null&&(o.types=j.types),O.T=o}}else try{o=a(c,l),nx(t,s,o)}catch(J){Gd(t,s,J)}}function nx(t,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){rx(t,s,l)},function(l){return Gd(t,s,l)}):rx(t,s,a)}function rx(t,s,a){s.status="fulfilled",s.value=a,ix(s),t.state=a,s=t.pending,s!==null&&(a=s.next,a===s?t.pending=null:(a=a.next,s.next=a,lx(t,a)))}function Gd(t,s,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=a,ix(s),s=s.next;while(s!==l)}t.action=null}function ix(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function cx(t,s){return s}function dx(t,s){if(Te){var a=Ye.formState;if(a!==null){e:{var l=ve;if(Te){if(Qe){t:{for(var c=Qe,o=ls;c.nodeType!==8;){if(!o){c=null;break t}if(c=rs(c.nextSibling),c===null){c=null;break t}}o=c.data,c=o==="F!"||o==="F"?c:null}if(c){Qe=rs(c.nextSibling),l=c.data==="F!";break e}}ca(l)}l=!1}l&&(s=a[0])}}return a=Tt(),a.memoizedState=a.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cx,lastRenderedState:s},a.queue=l,a=Ax.bind(null,ve,l),l.dispatch=a,l=Bd(!1),o=Qd.bind(null,ve,!1,l.queue),l=Tt(),c={state:s,dispatch:null,action:t,pending:null},l.queue=c,a=bg.bind(null,ve,c,o,a),c.dispatch=a,l.memoizedState=t,[s,a,!1]}function ox(t){var s=it();return mx(s,Ge,t)}function mx(t,s,a){if(s=$d(t,s,cx)[0],t=di(qs)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=On(s)}catch(j){throw j===Dl?Wr:j}else l=s;s=it();var c=s.queue,o=c.dispatch;return a!==s.memoizedState&&(ve.flags|=2048,Ul(9,{destroy:void 0},jg.bind(null,c,a),null)),[l,o,t]}function jg(t,s){t.action=s}function ux(t){var s=it(),a=Ge;if(a!==null)return mx(s,a,t);it(),s=s.memoizedState,a=it();var l=a.queue.dispatch;return a.memoizedState=t,[s,l,!1]}function Ul(t,s,a,l){return t={tag:t,create:a,deps:l,inst:s,next:null},s=ve.updateQueue,s===null&&(s=ii(),ve.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,s.lastEffect=t),t}function xx(){return it().memoizedState}function oi(t,s,a,l){var c=Tt();ve.flags|=t,c.memoizedState=Ul(1|s,{destroy:void 0},a,l===void 0?null:l)}function mi(t,s,a,l){var c=it();l=l===void 0?null:l;var o=c.memoizedState.inst;Ge!==null&&l!==null&&Rd(l,Ge.memoizedState.deps)?c.memoizedState=Ul(s,o,a,l):(ve.flags|=t,c.memoizedState=Ul(1|s,o,a,l))}function hx(t,s){oi(8390656,8,t,s)}function Fd(t,s){mi(2048,8,t,s)}function yg(t){ve.flags|=4;var s=ve.updateQueue;if(s===null)s=ii(),ve.updateQueue=s,s.events=[t];else{var a=s.events;a===null?s.events=[t]:a.push(t)}}function px(t){var s=it().memoizedState;return yg({ref:s,nextImpl:t}),function(){if((Oe&2)!==0)throw Error(d(440));return s.impl.apply(void 0,arguments)}}function fx(t,s){return mi(4,2,t,s)}function gx(t,s){return mi(4,4,t,s)}function bx(t,s){if(typeof s=="function"){t=t();var a=s(t);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function jx(t,s,a){a=a!=null?a.concat([t]):null,mi(4,4,bx.bind(null,s,t),a)}function Pd(){}function yx(t,s){var a=it();s=s===void 0?null:s;var l=a.memoizedState;return s!==null&&Rd(s,l[1])?l[0]:(a.memoizedState=[t,s],t)}function Nx(t,s){var a=it();s=s===void 0?null:s;var l=a.memoizedState;if(s!==null&&Rd(s,l[1]))return l[0];if(l=t(),Ja){de(!0);try{t()}finally{de(!1)}}return a.memoizedState=[l,s],l}function Yd(t,s,a){return a===void 0||($s&1073741824)!==0&&(Ae&261930)===0?t.memoizedState=s:(t.memoizedState=a,t=vh(),ve.lanes|=t,ga|=t,a)}function vx(t,s,a,l){return Pt(a,s)?a:zl.current!==null?(t=Yd(t,a,l),Pt(t,s)||(ut=!0),t):($s&42)===0||($s&1073741824)!==0&&(Ae&261930)===0?(ut=!0,t.memoizedState=a):(t=vh(),ve.lanes|=t,ga|=t,s)}function wx(t,s,a,l,c){var o=P.p;P.p=o!==0&&8>o?o:8;var j=O.T,D={};O.T=D,Qd(t,!1,s,a);try{var B=c(),J=O.S;if(J!==null&&J(D,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ae=pg(B,l);Un(t,s,ae,Zt(t))}else Un(t,s,l,Zt(t))}catch(ne){Un(t,s,{then:function(){},status:"rejected",reason:ne},Zt())}finally{P.p=o,j!==null&&D.types!==null&&(j.types=D.types),O.T=j}}function Ng(){}function Vd(t,s,a,l){if(t.tag!==5)throw Error(d(476));var c=Sx(t).queue;wx(t,c,s,re,a===null?Ng:function(){return _x(t),a(l)})}function Sx(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:re,baseState:re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:re},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:a},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function _x(t){var s=Sx(t);s.next===null&&(s=t.alternate.memoizedState),Un(t,s.next.queue,{},Zt())}function Xd(){return vt(er)}function Cx(){return it().memoizedState}function kx(){return it().memoizedState}function vg(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var a=Zt();t=ma(a);var l=ua(s,t,a);l!==null&&(qt(l,s,a),Dn(l,s,a)),s={cache:vd()},t.payload=s;return}s=s.return}}function wg(t,s,a){var l=Zt();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ui(t)?Mx(s,a):(a=md(t,s,a,l),a!==null&&(qt(a,t,l),Ex(a,s,l)))}function Ax(t,s,a){var l=Zt();Un(t,s,a,l)}function Un(t,s,a,l){var c={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ui(t))Mx(s,c);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=s.lastRenderedReducer,o!==null))try{var j=s.lastRenderedState,D=o(j,a);if(c.hasEagerState=!0,c.eagerState=D,Pt(D,j))return Vr(t,s,c,0),Ye===null&&Yr(),!1}catch{}finally{}if(a=md(t,s,c,l),a!==null)return qt(a,t,l),Ex(a,s,l),!0}return!1}function Qd(t,s,a,l){if(l={lane:2,revertLane:ko(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ui(t)){if(s)throw Error(d(479))}else s=md(t,a,l,2),s!==null&&qt(s,t,2)}function ui(t){var s=t.alternate;return t===ve||s!==null&&s===ve}function Mx(t,s){Ll=ni=!0;var a=t.pending;a===null?s.next=s:(s.next=a.next,a.next=s),t.pending=s}function Ex(t,s,a){if((a&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,a|=l,s.lanes=a,Lm(t,a)}}var Hn={readContext:vt,use:ci,useCallback:tt,useContext:tt,useEffect:tt,useImperativeHandle:tt,useLayoutEffect:tt,useInsertionEffect:tt,useMemo:tt,useReducer:tt,useRef:tt,useState:tt,useDebugValue:tt,useDeferredValue:tt,useTransition:tt,useSyncExternalStore:tt,useId:tt,useHostTransitionStatus:tt,useFormState:tt,useActionState:tt,useOptimistic:tt,useMemoCache:tt,useCacheRefresh:tt};Hn.useEffectEvent=tt;var Tx={readContext:vt,use:ci,useCallback:function(t,s){return Tt().memoizedState=[t,s===void 0?null:s],t},useContext:vt,useEffect:hx,useImperativeHandle:function(t,s,a){a=a!=null?a.concat([t]):null,oi(4194308,4,bx.bind(null,s,t),a)},useLayoutEffect:function(t,s){return oi(4194308,4,t,s)},useInsertionEffect:function(t,s){oi(4,2,t,s)},useMemo:function(t,s){var a=Tt();s=s===void 0?null:s;var l=t();if(Ja){de(!0);try{t()}finally{de(!1)}}return a.memoizedState=[l,s],l},useReducer:function(t,s,a){var l=Tt();if(a!==void 0){var c=a(s);if(Ja){de(!0);try{a(s)}finally{de(!1)}}}else c=s;return l.memoizedState=l.baseState=c,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:c},l.queue=t,t=t.dispatch=wg.bind(null,ve,t),[l.memoizedState,t]},useRef:function(t){var s=Tt();return t={current:t},s.memoizedState=t},useState:function(t){t=Bd(t);var s=t.queue,a=Ax.bind(null,ve,s);return s.dispatch=a,[t.memoizedState,a]},useDebugValue:Pd,useDeferredValue:function(t,s){var a=Tt();return Yd(a,t,s)},useTransition:function(){var t=Bd(!1);return t=wx.bind(null,ve,t.queue,!0,!1),Tt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,a){var l=ve,c=Tt();if(Te){if(a===void 0)throw Error(d(407));a=a()}else{if(a=s(),Ye===null)throw Error(d(349));(Ae&127)!==0||Ku(l,s,a)}c.memoizedState=a;var o={value:a,getSnapshot:s};return c.queue=o,hx(ex.bind(null,l,o,t),[t]),l.flags|=2048,Ul(9,{destroy:void 0},Wu.bind(null,l,o,a,s),null),a},useId:function(){var t=Tt(),s=Ye.identifierPrefix;if(Te){var a=Ss,l=ws;a=(l&~(1<<32-Le(l)-1)).toString(32)+a,s="_"+s+"R_"+a,a=ri++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=fg++,s="_"+s+"r_"+a.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Xd,useFormState:dx,useActionState:dx,useOptimistic:function(t){var s=Tt();s.memoizedState=s.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Qd.bind(null,ve,!0,a),a.dispatch=s,[t,s]},useMemoCache:Hd,useCacheRefresh:function(){return Tt().memoizedState=vg.bind(null,ve)},useEffectEvent:function(t){var s=Tt(),a={impl:t};return s.memoizedState=a,function(){if((Oe&2)!==0)throw Error(d(440));return a.impl.apply(void 0,arguments)}}},Id={readContext:vt,use:ci,useCallback:yx,useContext:vt,useEffect:Fd,useImperativeHandle:jx,useInsertionEffect:fx,useLayoutEffect:gx,useMemo:Nx,useReducer:di,useRef:xx,useState:function(){return di(qs)},useDebugValue:Pd,useDeferredValue:function(t,s){var a=it();return vx(a,Ge.memoizedState,t,s)},useTransition:function(){var t=di(qs)[0],s=it().memoizedState;return[typeof t=="boolean"?t:On(t),s]},useSyncExternalStore:Ju,useId:Cx,useHostTransitionStatus:Xd,useFormState:ox,useActionState:ox,useOptimistic:function(t,s){var a=it();return ax(a,Ge,t,s)},useMemoCache:Hd,useCacheRefresh:kx};Id.useEffectEvent=px;var Dx={readContext:vt,use:ci,useCallback:yx,useContext:vt,useEffect:Fd,useImperativeHandle:jx,useInsertionEffect:fx,useLayoutEffect:gx,useMemo:Nx,useReducer:qd,useRef:xx,useState:function(){return qd(qs)},useDebugValue:Pd,useDeferredValue:function(t,s){var a=it();return Ge===null?Yd(a,t,s):vx(a,Ge.memoizedState,t,s)},useTransition:function(){var t=qd(qs)[0],s=it().memoizedState;return[typeof t=="boolean"?t:On(t),s]},useSyncExternalStore:Ju,useId:Cx,useHostTransitionStatus:Xd,useFormState:ux,useActionState:ux,useOptimistic:function(t,s){var a=it();return Ge!==null?ax(a,Ge,t,s):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Hd,useCacheRefresh:kx};Dx.useEffectEvent=px;function Zd(t,s,a,l){s=t.memoizedState,a=a(l,s),a=a==null?s:v({},s,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var Jd={enqueueSetState:function(t,s,a){t=t._reactInternals;var l=Zt(),c=ma(l);c.payload=s,a!=null&&(c.callback=a),s=ua(t,c,l),s!==null&&(qt(s,t,l),Dn(s,t,l))},enqueueReplaceState:function(t,s,a){t=t._reactInternals;var l=Zt(),c=ma(l);c.tag=1,c.payload=s,a!=null&&(c.callback=a),s=ua(t,c,l),s!==null&&(qt(s,t,l),Dn(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var a=Zt(),l=ma(a);l.tag=2,s!=null&&(l.callback=s),s=ua(t,l,a),s!==null&&(qt(s,t,a),Dn(s,t,a))}};function Rx(t,s,a,l,c,o,j){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,o,j):s.prototype&&s.prototype.isPureReactComponent?!Sn(a,l)||!Sn(c,o):!0}function zx(t,s,a,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,l),s.state!==t&&Jd.enqueueReplaceState(s,s.state,null)}function Ka(t,s){var a=s;if("ref"in s){a={};for(var l in s)l!=="ref"&&(a[l]=s[l])}if(t=t.defaultProps){a===s&&(a=v({},a));for(var c in t)a[c]===void 0&&(a[c]=t[c])}return a}function Lx(t){Pr(t)}function Ox(t){console.error(t)}function Ux(t){Pr(t)}function xi(t,s){try{var a=t.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Hx(t,s,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Kd(t,s,a){return a=ma(a),a.tag=3,a.payload={element:null},a.callback=function(){xi(t,s)},a}function $x(t){return t=ma(t),t.tag=3,t}function qx(t,s,a,l){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var o=l.value;t.payload=function(){return c(o)},t.callback=function(){Hx(s,a,l)}}var j=a.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(t.callback=function(){Hx(s,a,l),typeof c!="function"&&(ba===null?ba=new Set([this]):ba.add(this));var D=l.stack;this.componentDidCatch(l.value,{componentStack:D!==null?D:""})})}function Sg(t,s,a,l,c){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=a.alternate,s!==null&&Ml(s,a,c,!0),a=Vt.current,a!==null){switch(a.tag){case 31:case 13:return ns===null?_i():a.alternate===null&&st===0&&(st=3),a.flags&=-257,a.flags|=65536,a.lanes=c,l===ei?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([l]):s.add(l),So(t,l,c)),!1;case 22:return a.flags|=65536,l===ei?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([l]):a.add(l)),So(t,l,c)),!1}throw Error(d(435,a.tag))}return So(t,l,c),_i(),!1}if(Te)return s=Vt.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=c,l!==gd&&(t=Error(d(422),{cause:l}),kn(ts(t,a)))):(l!==gd&&(s=Error(d(423),{cause:l}),kn(ts(s,a))),t=t.current.alternate,t.flags|=65536,c&=-c,t.lanes|=c,l=ts(l,a),c=Kd(t.stateNode,l,c),Ad(t,c),st!==4&&(st=2)),!1;var o=Error(d(520),{cause:l});if(o=ts(o,a),Vn===null?Vn=[o]:Vn.push(o),st!==4&&(st=2),s===null)return!0;l=ts(l,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,t=c&-c,a.lanes|=t,t=Kd(a.stateNode,l,t),Ad(a,t),!1;case 1:if(s=a.type,o=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(ba===null||!ba.has(o))))return a.flags|=65536,c&=-c,a.lanes|=c,c=$x(c),qx(c,t,a,l),Ad(a,c),!1}a=a.return}while(a!==null);return!1}var Wd=Error(d(461)),ut=!1;function wt(t,s,a,l){s.child=t===null?Pu(s,null,a,l):Za(s,t.child,a,l)}function Bx(t,s,a,l,c){a=a.render;var o=s.ref;if("ref"in l){var j={};for(var D in l)D!=="ref"&&(j[D]=l[D])}else j=l;return Va(s),l=zd(t,s,a,j,o,c),D=Ld(),t!==null&&!ut?(Od(t,s,c),Bs(t,s,c)):(Te&&D&&pd(s),s.flags|=1,wt(t,s,l,c),s.child)}function Gx(t,s,a,l,c){if(t===null){var o=a.type;return typeof o=="function"&&!ud(o)&&o.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=o,Fx(t,s,o,l,c)):(t=Qr(a.type,null,l,s,s.mode,c),t.ref=s.ref,t.return=s,s.child=t)}if(o=t.child,!io(t,c)){var j=o.memoizedProps;if(a=a.compare,a=a!==null?a:Sn,a(j,l)&&t.ref===s.ref)return Bs(t,s,c)}return s.flags|=1,t=Ls(o,l),t.ref=s.ref,t.return=s,s.child=t}function Fx(t,s,a,l,c){if(t!==null){var o=t.memoizedProps;if(Sn(o,l)&&t.ref===s.ref)if(ut=!1,s.pendingProps=l=o,io(t,c))(t.flags&131072)!==0&&(ut=!0);else return s.lanes=t.lanes,Bs(t,s,c)}return eo(t,s,a,l,c)}function Px(t,s,a,l){var c=l.children,o=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(o=o!==null?o.baseLanes|a:a,t!==null){for(l=s.child=t.child,c=0;l!==null;)c=c|l.lanes|l.childLanes,l=l.sibling;l=c&~o}else l=0,s.child=null;return Yx(t,s,o,a,l)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Kr(s,o!==null?o.cachePool:null),o!==null?Xu(s,o):Ed(),Qu(s);else return l=s.lanes=536870912,Yx(t,s,o!==null?o.baseLanes|a:a,a,l)}else o!==null?(Kr(s,o.cachePool),Xu(s,o),ha(),s.memoizedState=null):(t!==null&&Kr(s,null),Ed(),ha());return wt(t,s,c,a),s.child}function $n(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function Yx(t,s,a,l,c){var o=Sd();return o=o===null?null:{parent:ot._currentValue,pool:o},s.memoizedState={baseLanes:a,cachePool:o},t!==null&&Kr(s,null),Ed(),Qu(s),t!==null&&Ml(t,s,l,!0),s.childLanes=c,null}function hi(t,s){return s=fi({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function Vx(t,s,a){return Za(s,t.child,null,a),t=hi(s,s.pendingProps),t.flags|=2,Xt(s),s.memoizedState=null,t}function _g(t,s,a){var l=s.pendingProps,c=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(Te){if(l.mode==="hidden")return t=hi(s,l),s.lanes=536870912,$n(null,t);if(Dd(s),(t=Qe)?(t=lp(t,ls),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:ra!==null?{id:ws,overflow:Ss}:null,retryLane:536870912,hydrationErrors:null},a=Mu(t),a.return=s,s.child=a,Nt=s,Qe=null)):t=null,t===null)throw ca(s);return s.lanes=536870912,null}return hi(s,l)}var o=t.memoizedState;if(o!==null){var j=o.dehydrated;if(Dd(s),c)if(s.flags&256)s.flags&=-257,s=Vx(t,s,a);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(d(558));else if(ut||Ml(t,s,a,!1),c=(a&t.childLanes)!==0,ut||c){if(l=Ye,l!==null&&(j=Om(l,a),j!==0&&j!==o.retryLane))throw o.retryLane=j,Ga(t,j),qt(l,t,j),Wd;_i(),s=Vx(t,s,a)}else t=o.treeContext,Qe=rs(j.nextSibling),Nt=s,Te=!0,ia=null,ls=!1,t!==null&&Du(s,t),s=hi(s,l),s.flags|=4096;return s}return t=Ls(t.child,{mode:l.mode,children:l.children}),t.ref=s.ref,s.child=t,t.return=s,t}function pi(t,s){var a=s.ref;if(a===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(d(284));(t===null||t.ref!==a)&&(s.flags|=4194816)}}function eo(t,s,a,l,c){return Va(s),a=zd(t,s,a,l,void 0,c),l=Ld(),t!==null&&!ut?(Od(t,s,c),Bs(t,s,c)):(Te&&l&&pd(s),s.flags|=1,wt(t,s,a,c),s.child)}function Xx(t,s,a,l,c,o){return Va(s),s.updateQueue=null,a=Zu(s,l,a,c),Iu(t),l=Ld(),t!==null&&!ut?(Od(t,s,o),Bs(t,s,o)):(Te&&l&&pd(s),s.flags|=1,wt(t,s,a,o),s.child)}function Qx(t,s,a,l,c){if(Va(s),s.stateNode===null){var o=_l,j=a.contextType;typeof j=="object"&&j!==null&&(o=vt(j)),o=new a(l,o),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Jd,s.stateNode=o,o._reactInternals=s,o=s.stateNode,o.props=l,o.state=s.memoizedState,o.refs={},Cd(s),j=a.contextType,o.context=typeof j=="object"&&j!==null?vt(j):_l,o.state=s.memoizedState,j=a.getDerivedStateFromProps,typeof j=="function"&&(Zd(s,a,j,l),o.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(j=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),j!==o.state&&Jd.enqueueReplaceState(o,o.state,null),zn(s,l,o,c),Rn(),o.state=s.memoizedState),typeof o.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){o=s.stateNode;var D=s.memoizedProps,B=Ka(a,D);o.props=B;var J=o.context,ae=a.contextType;j=_l,typeof ae=="object"&&ae!==null&&(j=vt(ae));var ne=a.getDerivedStateFromProps;ae=typeof ne=="function"||typeof o.getSnapshotBeforeUpdate=="function",D=s.pendingProps!==D,ae||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(D||J!==j)&&zx(s,o,l,j),oa=!1;var K=s.memoizedState;o.state=K,zn(s,l,o,c),Rn(),J=s.memoizedState,D||K!==J||oa?(typeof ne=="function"&&(Zd(s,a,ne,l),J=s.memoizedState),(B=oa||Rx(s,a,B,l,K,J,j))?(ae||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(s.flags|=4194308)):(typeof o.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=J),o.props=l,o.state=J,o.context=j,l=B):(typeof o.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{o=s.stateNode,kd(t,s),j=s.memoizedProps,ae=Ka(a,j),o.props=ae,ne=s.pendingProps,K=o.context,J=a.contextType,B=_l,typeof J=="object"&&J!==null&&(B=vt(J)),D=a.getDerivedStateFromProps,(J=typeof D=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(j!==ne||K!==B)&&zx(s,o,l,B),oa=!1,K=s.memoizedState,o.state=K,zn(s,l,o,c),Rn();var se=s.memoizedState;j!==ne||K!==se||oa||t!==null&&t.dependencies!==null&&Zr(t.dependencies)?(typeof D=="function"&&(Zd(s,a,D,l),se=s.memoizedState),(ae=oa||Rx(s,a,ae,l,K,se,B)||t!==null&&t.dependencies!==null&&Zr(t.dependencies))?(J||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(l,se,B),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(l,se,B)),typeof o.componentDidUpdate=="function"&&(s.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof o.componentDidUpdate!="function"||j===t.memoizedProps&&K===t.memoizedState||(s.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&K===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=se),o.props=l,o.state=se,o.context=B,l=ae):(typeof o.componentDidUpdate!="function"||j===t.memoizedProps&&K===t.memoizedState||(s.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&K===t.memoizedState||(s.flags|=1024),l=!1)}return o=l,pi(t,s),l=(s.flags&128)!==0,o||l?(o=s.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:o.render(),s.flags|=1,t!==null&&l?(s.child=Za(s,t.child,null,c),s.child=Za(s,null,a,c)):wt(t,s,a,c),s.memoizedState=o.state,t=s.child):t=Bs(t,s,c),t}function Ix(t,s,a,l){return Pa(),s.flags|=256,wt(t,s,a,l),s.child}var to={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function so(t){return{baseLanes:t,cachePool:Hu()}}function ao(t,s,a){return t=t!==null?t.childLanes&~a:0,s&&(t|=It),t}function Zx(t,s,a){var l=s.pendingProps,c=!1,o=(s.flags&128)!==0,j;if((j=o)||(j=t!==null&&t.memoizedState===null?!1:(rt.current&2)!==0),j&&(c=!0,s.flags&=-129),j=(s.flags&32)!==0,s.flags&=-33,t===null){if(Te){if(c?xa(s):ha(),(t=Qe)?(t=lp(t,ls),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:ra!==null?{id:ws,overflow:Ss}:null,retryLane:536870912,hydrationErrors:null},a=Mu(t),a.return=s,s.child=a,Nt=s,Qe=null)):t=null,t===null)throw ca(s);return qo(t)?s.lanes=32:s.lanes=536870912,null}var D=l.children;return l=l.fallback,c?(ha(),c=s.mode,D=fi({mode:"hidden",children:D},c),l=Fa(l,c,a,null),D.return=s,l.return=s,D.sibling=l,s.child=D,l=s.child,l.memoizedState=so(a),l.childLanes=ao(t,j,a),s.memoizedState=to,$n(null,l)):(xa(s),lo(s,D))}var B=t.memoizedState;if(B!==null&&(D=B.dehydrated,D!==null)){if(o)s.flags&256?(xa(s),s.flags&=-257,s=no(t,s,a)):s.memoizedState!==null?(ha(),s.child=t.child,s.flags|=128,s=null):(ha(),D=l.fallback,c=s.mode,l=fi({mode:"visible",children:l.children},c),D=Fa(D,c,a,null),D.flags|=2,l.return=s,D.return=s,l.sibling=D,s.child=l,Za(s,t.child,null,a),l=s.child,l.memoizedState=so(a),l.childLanes=ao(t,j,a),s.memoizedState=to,s=$n(null,l));else if(xa(s),qo(D)){if(j=D.nextSibling&&D.nextSibling.dataset,j)var J=j.dgst;j=J,l=Error(d(419)),l.stack="",l.digest=j,kn({value:l,source:null,stack:null}),s=no(t,s,a)}else if(ut||Ml(t,s,a,!1),j=(a&t.childLanes)!==0,ut||j){if(j=Ye,j!==null&&(l=Om(j,a),l!==0&&l!==B.retryLane))throw B.retryLane=l,Ga(t,l),qt(j,t,l),Wd;$o(D)||_i(),s=no(t,s,a)}else $o(D)?(s.flags|=192,s.child=t.child,s=null):(t=B.treeContext,Qe=rs(D.nextSibling),Nt=s,Te=!0,ia=null,ls=!1,t!==null&&Du(s,t),s=lo(s,l.children),s.flags|=4096);return s}return c?(ha(),D=l.fallback,c=s.mode,B=t.child,J=B.sibling,l=Ls(B,{mode:"hidden",children:l.children}),l.subtreeFlags=B.subtreeFlags&65011712,J!==null?D=Ls(J,D):(D=Fa(D,c,a,null),D.flags|=2),D.return=s,l.return=s,l.sibling=D,s.child=l,$n(null,l),l=s.child,D=t.child.memoizedState,D===null?D=so(a):(c=D.cachePool,c!==null?(B=ot._currentValue,c=c.parent!==B?{parent:B,pool:B}:c):c=Hu(),D={baseLanes:D.baseLanes|a,cachePool:c}),l.memoizedState=D,l.childLanes=ao(t,j,a),s.memoizedState=to,$n(t.child,l)):(xa(s),a=t.child,t=a.sibling,a=Ls(a,{mode:"visible",children:l.children}),a.return=s,a.sibling=null,t!==null&&(j=s.deletions,j===null?(s.deletions=[t],s.flags|=16):j.push(t)),s.child=a,s.memoizedState=null,a)}function lo(t,s){return s=fi({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function fi(t,s){return t=Yt(22,t,null,s),t.lanes=0,t}function no(t,s,a){return Za(s,t.child,null,a),t=lo(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Jx(t,s,a){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),yd(t.return,s,a)}function ro(t,s,a,l,c,o){var j=t.memoizedState;j===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:c,treeForkCount:o}:(j.isBackwards=s,j.rendering=null,j.renderingStartTime=0,j.last=l,j.tail=a,j.tailMode=c,j.treeForkCount=o)}function Kx(t,s,a){var l=s.pendingProps,c=l.revealOrder,o=l.tail;l=l.children;var j=rt.current,D=(j&2)!==0;if(D?(j=j&1|2,s.flags|=128):j&=1,ce(rt,j),wt(t,s,l,a),l=Te?Cn:0,!D&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Jx(t,a,s);else if(t.tag===19)Jx(t,a,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(c){case"forwards":for(a=s.child,c=null;a!==null;)t=a.alternate,t!==null&&li(t)===null&&(c=a),a=a.sibling;a=c,a===null?(c=s.child,s.child=null):(c=a.sibling,a.sibling=null),ro(s,!1,c,a,o,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,c=s.child,s.child=null;c!==null;){if(t=c.alternate,t!==null&&li(t)===null){s.child=c;break}t=c.sibling,c.sibling=a,a=c,c=t}ro(s,!0,a,null,o,l);break;case"together":ro(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function Bs(t,s,a){if(t!==null&&(s.dependencies=t.dependencies),ga|=s.lanes,(a&s.childLanes)===0)if(t!==null){if(Ml(t,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(d(153));if(s.child!==null){for(t=s.child,a=Ls(t,t.pendingProps),s.child=a,a.return=s;t.sibling!==null;)t=t.sibling,a=a.sibling=Ls(t,t.pendingProps),a.return=s;a.sibling=null}return s.child}function io(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Zr(t)))}function Cg(t,s,a){switch(s.tag){case 3:nt(s,s.stateNode.containerInfo),da(s,ot,t.memoizedState.cache),Pa();break;case 27:case 5:hs(s);break;case 4:nt(s,s.stateNode.containerInfo);break;case 10:da(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Dd(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(xa(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Zx(t,s,a):(xa(s),t=Bs(t,s,a),t!==null?t.sibling:null);xa(s);break;case 19:var c=(t.flags&128)!==0;if(l=(a&s.childLanes)!==0,l||(Ml(t,s,a,!1),l=(a&s.childLanes)!==0),c){if(l)return Kx(t,s,a);s.flags|=128}if(c=s.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),ce(rt,rt.current),l)break;return null;case 22:return s.lanes=0,Px(t,s,a,s.pendingProps);case 24:da(s,ot,t.memoizedState.cache)}return Bs(t,s,a)}function Wx(t,s,a){if(t!==null)if(t.memoizedProps!==s.pendingProps)ut=!0;else{if(!io(t,a)&&(s.flags&128)===0)return ut=!1,Cg(t,s,a);ut=(t.flags&131072)!==0}else ut=!1,Te&&(s.flags&1048576)!==0&&Tu(s,Cn,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(t=Qa(s.elementType),s.type=t,typeof t=="function")ud(t)?(l=Ka(t,l),s.tag=1,s=Qx(null,s,t,l,a)):(s.tag=0,s=eo(null,s,t,l,a));else{if(t!=null){var c=t.$$typeof;if(c===_){s.tag=11,s=Bx(null,s,t,l,a);break e}else if(c===N){s.tag=14,s=Gx(null,s,t,l,a);break e}}throw s=ie(t)||t,Error(d(306,s,""))}}return s;case 0:return eo(t,s,s.type,s.pendingProps,a);case 1:return l=s.type,c=Ka(l,s.pendingProps),Qx(t,s,l,c,a);case 3:e:{if(nt(s,s.stateNode.containerInfo),t===null)throw Error(d(387));l=s.pendingProps;var o=s.memoizedState;c=o.element,kd(t,s),zn(s,l,null,a);var j=s.memoizedState;if(l=j.cache,da(s,ot,l),l!==o.cache&&Nd(s,[ot],a,!0),Rn(),l=j.element,o.isDehydrated)if(o={element:l,isDehydrated:!1,cache:j.cache},s.updateQueue.baseState=o,s.memoizedState=o,s.flags&256){s=Ix(t,s,l,a);break e}else if(l!==c){c=ts(Error(d(424)),s),kn(c),s=Ix(t,s,l,a);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Qe=rs(t.firstChild),Nt=s,Te=!0,ia=null,ls=!0,a=Pu(s,null,l,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Pa(),l===c){s=Bs(t,s,a);break e}wt(t,s,l,a)}s=s.child}return s;case 26:return pi(t,s),t===null?(a=op(s.type,null,s.pendingProps,null))?s.memoizedState=a:Te||(a=s.type,t=s.pendingProps,l=Di(je.current).createElement(a),l[yt]=s,l[zt]=t,St(l,a,t),gt(l),s.stateNode=l):s.memoizedState=op(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return hs(s),t===null&&Te&&(l=s.stateNode=ip(s.type,s.pendingProps,je.current),Nt=s,ls=!0,c=Qe,va(s.type)?(Bo=c,Qe=rs(l.firstChild)):Qe=c),wt(t,s,s.pendingProps.children,a),pi(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&Te&&((c=l=Qe)&&(l=sb(l,s.type,s.pendingProps,ls),l!==null?(s.stateNode=l,Nt=s,Qe=rs(l.firstChild),ls=!1,c=!0):c=!1),c||ca(s)),hs(s),c=s.type,o=s.pendingProps,j=t!==null?t.memoizedProps:null,l=o.children,Oo(c,o)?l=null:j!==null&&Oo(c,j)&&(s.flags|=32),s.memoizedState!==null&&(c=zd(t,s,gg,null,null,a),er._currentValue=c),pi(t,s),wt(t,s,l,a),s.child;case 6:return t===null&&Te&&((t=a=Qe)&&(a=ab(a,s.pendingProps,ls),a!==null?(s.stateNode=a,Nt=s,Qe=null,t=!0):t=!1),t||ca(s)),null;case 13:return Zx(t,s,a);case 4:return nt(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=Za(s,null,l,a):wt(t,s,l,a),s.child;case 11:return Bx(t,s,s.type,s.pendingProps,a);case 7:return wt(t,s,s.pendingProps,a),s.child;case 8:return wt(t,s,s.pendingProps.children,a),s.child;case 12:return wt(t,s,s.pendingProps.children,a),s.child;case 10:return l=s.pendingProps,da(s,s.type,l.value),wt(t,s,l.children,a),s.child;case 9:return c=s.type._context,l=s.pendingProps.children,Va(s),c=vt(c),l=l(c),s.flags|=1,wt(t,s,l,a),s.child;case 14:return Gx(t,s,s.type,s.pendingProps,a);case 15:return Fx(t,s,s.type,s.pendingProps,a);case 19:return Kx(t,s,a);case 31:return _g(t,s,a);case 22:return Px(t,s,a,s.pendingProps);case 24:return Va(s),l=vt(ot),t===null?(c=Sd(),c===null&&(c=Ye,o=vd(),c.pooledCache=o,o.refCount++,o!==null&&(c.pooledCacheLanes|=a),c=o),s.memoizedState={parent:l,cache:c},Cd(s),da(s,ot,c)):((t.lanes&a)!==0&&(kd(t,s),zn(s,null,null,a),Rn()),c=t.memoizedState,o=s.memoizedState,c.parent!==l?(c={parent:l,cache:l},s.memoizedState=c,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=c),da(s,ot,l)):(l=o.cache,da(s,ot,l),l!==c.cache&&Nd(s,[ot],a,!0))),wt(t,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(d(156,s.tag))}function Gs(t){t.flags|=4}function co(t,s,a,l,c){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(c&335544128)===c)if(t.stateNode.complete)t.flags|=8192;else if(Ch())t.flags|=8192;else throw Ia=ei,_d}else t.flags&=-16777217}function eh(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!pp(s))if(Ch())t.flags|=8192;else throw Ia=ei,_d}function gi(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Rm():536870912,t.lanes|=s,Bl|=s)}function qn(t,s){if(!Te)switch(t.tailMode){case"hidden":s=t.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Ie(t){var s=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(s)for(var c=t.child;c!==null;)a|=c.lanes|c.childLanes,l|=c.subtreeFlags&65011712,l|=c.flags&65011712,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)a|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=l,t.childLanes=a,s}function kg(t,s,a){var l=s.pendingProps;switch(fd(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(s),null;case 1:return Ie(s),null;case 3:return a=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),Hs(ot),Xe(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Al(s)?Gs(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,bd())),Ie(s),null;case 26:var c=s.type,o=s.memoizedState;return t===null?(Gs(s),o!==null?(Ie(s),eh(s,o)):(Ie(s),co(s,c,null,l,a))):o?o!==t.memoizedState?(Gs(s),Ie(s),eh(s,o)):(Ie(s),s.flags&=-16777217):(t=t.memoizedProps,t!==l&&Gs(s),Ie(s),co(s,c,t,l,a)),null;case 27:if(aa(s),a=je.current,c=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&Gs(s);else{if(!l){if(s.stateNode===null)throw Error(d(166));return Ie(s),null}t=ue.current,Al(s)?Ru(s):(t=ip(c,l,a),s.stateNode=t,Gs(s))}return Ie(s),null;case 5:if(aa(s),c=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&Gs(s);else{if(!l){if(s.stateNode===null)throw Error(d(166));return Ie(s),null}if(o=ue.current,Al(s))Ru(s);else{var j=Di(je.current);switch(o){case 1:o=j.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:o=j.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":o=j.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":o=j.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":o=j.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof l.is=="string"?j.createElement("select",{is:l.is}):j.createElement("select"),l.multiple?o.multiple=!0:l.size&&(o.size=l.size);break;default:o=typeof l.is=="string"?j.createElement(c,{is:l.is}):j.createElement(c)}}o[yt]=s,o[zt]=l;e:for(j=s.child;j!==null;){if(j.tag===5||j.tag===6)o.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===s)break e;for(;j.sibling===null;){if(j.return===null||j.return===s)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}s.stateNode=o;e:switch(St(o,c,l),c){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Gs(s)}}return Ie(s),co(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,a),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&Gs(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(d(166));if(t=je.current,Al(s)){if(t=s.stateNode,a=s.memoizedProps,l=null,c=Nt,c!==null)switch(c.tag){case 27:case 5:l=c.memoizedProps}t[yt]=s,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Zh(t.nodeValue,a)),t||ca(s,!0)}else t=Di(t).createTextNode(l),t[yt]=s,s.stateNode=t}return Ie(s),null;case 31:if(a=s.memoizedState,t===null||t.memoizedState!==null){if(l=Al(s),a!==null){if(t===null){if(!l)throw Error(d(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(d(557));t[yt]=s}else Pa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ie(s),t=!1}else a=bd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return s.flags&256?(Xt(s),s):(Xt(s),null);if((s.flags&128)!==0)throw Error(d(558))}return Ie(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(c=Al(s),l!==null&&l.dehydrated!==null){if(t===null){if(!c)throw Error(d(318));if(c=s.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(d(317));c[yt]=s}else Pa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Ie(s),c=!1}else c=bd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),c=!0;if(!c)return s.flags&256?(Xt(s),s):(Xt(s),null)}return Xt(s),(s.flags&128)!==0?(s.lanes=a,s):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=s.child,c=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(c=l.alternate.memoizedState.cachePool.pool),o=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==c&&(l.flags|=2048)),a!==t&&a&&(s.child.flags|=8192),gi(s,s.updateQueue),Ie(s),null);case 4:return Xe(),t===null&&To(s.stateNode.containerInfo),Ie(s),null;case 10:return Hs(s.type),Ie(s),null;case 19:if(te(rt),l=s.memoizedState,l===null)return Ie(s),null;if(c=(s.flags&128)!==0,o=l.rendering,o===null)if(c)qn(l,!1);else{if(st!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(o=li(t),o!==null){for(s.flags|=128,qn(l,!1),t=o.updateQueue,s.updateQueue=t,gi(s,t),s.subtreeFlags=0,t=a,a=s.child;a!==null;)Au(a,t),a=a.sibling;return ce(rt,rt.current&1|2),Te&&Os(s,l.treeForkCount),s.child}t=t.sibling}l.tail!==null&&Et()>vi&&(s.flags|=128,c=!0,qn(l,!1),s.lanes=4194304)}else{if(!c)if(t=li(o),t!==null){if(s.flags|=128,c=!0,t=t.updateQueue,s.updateQueue=t,gi(s,t),qn(l,!0),l.tail===null&&l.tailMode==="hidden"&&!o.alternate&&!Te)return Ie(s),null}else 2*Et()-l.renderingStartTime>vi&&a!==536870912&&(s.flags|=128,c=!0,qn(l,!1),s.lanes=4194304);l.isBackwards?(o.sibling=s.child,s.child=o):(t=l.last,t!==null?t.sibling=o:s.child=o,l.last=o)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Et(),t.sibling=null,a=rt.current,ce(rt,c?a&1|2:a&1),Te&&Os(s,l.treeForkCount),t):(Ie(s),null);case 22:case 23:return Xt(s),Td(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(a&536870912)!==0&&(s.flags&128)===0&&(Ie(s),s.subtreeFlags&6&&(s.flags|=8192)):Ie(s),a=s.updateQueue,a!==null&&gi(s,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==a&&(s.flags|=2048),t!==null&&te(Xa),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Hs(ot),Ie(s),null;case 25:return null;case 30:return null}throw Error(d(156,s.tag))}function Ag(t,s){switch(fd(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Hs(ot),Xe(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return aa(s),null;case 31:if(s.memoizedState!==null){if(Xt(s),s.alternate===null)throw Error(d(340));Pa()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(Xt(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(d(340));Pa()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return te(rt),null;case 4:return Xe(),null;case 10:return Hs(s.type),null;case 22:case 23:return Xt(s),Td(),t!==null&&te(Xa),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return Hs(ot),null;case 25:return null;default:return null}}function th(t,s){switch(fd(s),s.tag){case 3:Hs(ot),Xe();break;case 26:case 27:case 5:aa(s);break;case 4:Xe();break;case 31:s.memoizedState!==null&&Xt(s);break;case 13:Xt(s);break;case 19:te(rt);break;case 10:Hs(s.type);break;case 22:case 23:Xt(s),Td(),t!==null&&te(Xa);break;case 24:Hs(ot)}}function Bn(t,s){try{var a=s.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var c=l.next;a=c;do{if((a.tag&t)===t){l=void 0;var o=a.create,j=a.inst;l=o(),j.destroy=l}a=a.next}while(a!==c)}}catch(D){$e(s,s.return,D)}}function pa(t,s,a){try{var l=s.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var o=c.next;l=o;do{if((l.tag&t)===t){var j=l.inst,D=j.destroy;if(D!==void 0){j.destroy=void 0,c=s;var B=a,J=D;try{J()}catch(ae){$e(c,B,ae)}}}l=l.next}while(l!==o)}}catch(ae){$e(s,s.return,ae)}}function sh(t){var s=t.updateQueue;if(s!==null){var a=t.stateNode;try{Vu(s,a)}catch(l){$e(t,t.return,l)}}}function ah(t,s,a){a.props=Ka(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){$e(t,s,l)}}function Gn(t,s){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(c){$e(t,s,c)}}function _s(t,s){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(c){$e(t,s,c)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){$e(t,s,c)}else a.current=null}function lh(t){var s=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(c){$e(t,t.return,c)}}function oo(t,s,a){try{var l=t.stateNode;Zg(l,t.type,a,s),l[zt]=s}catch(c){$e(t,t.return,c)}}function nh(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&va(t.type)||t.tag===4}function mo(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&va(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uo(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(t),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Rs));else if(l!==4&&(l===27&&va(t.type)&&(a=t.stateNode,s=null),t=t.child,t!==null))for(uo(t,s,a),t=t.sibling;t!==null;)uo(t,s,a),t=t.sibling}function bi(t,s,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?a.insertBefore(t,s):a.appendChild(t);else if(l!==4&&(l===27&&va(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(bi(t,s,a),t=t.sibling;t!==null;)bi(t,s,a),t=t.sibling}function rh(t){var s=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,c=s.attributes;c.length;)s.removeAttributeNode(c[0]);St(s,l,a),s[yt]=t,s[zt]=a}catch(o){$e(t,t.return,o)}}var Fs=!1,xt=!1,xo=!1,ih=typeof WeakSet=="function"?WeakSet:Set,bt=null;function Mg(t,s){if(t=t.containerInfo,zo=$i,t=ju(t),nd(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var c=l.anchorOffset,o=l.focusNode;l=l.focusOffset;try{a.nodeType,o.nodeType}catch{a=null;break e}var j=0,D=-1,B=-1,J=0,ae=0,ne=t,K=null;t:for(;;){for(var se;ne!==a||c!==0&&ne.nodeType!==3||(D=j+c),ne!==o||l!==0&&ne.nodeType!==3||(B=j+l),ne.nodeType===3&&(j+=ne.nodeValue.length),(se=ne.firstChild)!==null;)K=ne,ne=se;for(;;){if(ne===t)break t;if(K===a&&++J===c&&(D=j),K===o&&++ae===l&&(B=j),(se=ne.nextSibling)!==null)break;ne=K,K=ne.parentNode}ne=se}a=D===-1||B===-1?null:{start:D,end:B}}else a=null}a=a||{start:0,end:0}}else a=null;for(Lo={focusedElem:t,selectionRange:a},$i=!1,bt=s;bt!==null;)if(s=bt,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,bt=t;else for(;bt!==null;){switch(s=bt,o=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)c=t[a],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&o!==null){t=void 0,a=s,c=o.memoizedProps,o=o.memoizedState,l=a.stateNode;try{var pe=Ka(a.type,c);t=l.getSnapshotBeforeUpdate(pe,o),l.__reactInternalSnapshotBeforeUpdate=t}catch(be){$e(a,a.return,be)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,a=t.nodeType,a===9)Ho(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Ho(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(d(163))}if(t=s.sibling,t!==null){t.return=s.return,bt=t;break}bt=s.return}}function ch(t,s,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ys(t,a),l&4&&Bn(5,a);break;case 1:if(Ys(t,a),l&4)if(t=a.stateNode,s===null)try{t.componentDidMount()}catch(j){$e(a,a.return,j)}else{var c=Ka(a.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(c,s,t.__reactInternalSnapshotBeforeUpdate)}catch(j){$e(a,a.return,j)}}l&64&&sh(a),l&512&&Gn(a,a.return);break;case 3:if(Ys(t,a),l&64&&(t=a.updateQueue,t!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Vu(t,s)}catch(j){$e(a,a.return,j)}}break;case 27:s===null&&l&4&&rh(a);case 26:case 5:Ys(t,a),s===null&&l&4&&lh(a),l&512&&Gn(a,a.return);break;case 12:Ys(t,a);break;case 31:Ys(t,a),l&4&&mh(t,a);break;case 13:Ys(t,a),l&4&&uh(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Hg.bind(null,a),lb(t,a))));break;case 22:if(l=a.memoizedState!==null||Fs,!l){s=s!==null&&s.memoizedState!==null||xt,c=Fs;var o=xt;Fs=l,(xt=s)&&!o?Vs(t,a,(a.subtreeFlags&8772)!==0):Ys(t,a),Fs=c,xt=o}break;case 30:break;default:Ys(t,a)}}function dh(t){var s=t.alternate;s!==null&&(t.alternate=null,dh(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&Gc(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Je=null,Ot=!1;function Ps(t,s,a){for(a=a.child;a!==null;)oh(t,s,a),a=a.sibling}function oh(t,s,a){if(L&&typeof L.onCommitFiberUnmount=="function")try{L.onCommitFiberUnmount(Oa,a)}catch{}switch(a.tag){case 26:xt||_s(a,s),Ps(t,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:xt||_s(a,s);var l=Je,c=Ot;va(a.type)&&(Je=a.stateNode,Ot=!1),Ps(t,s,a),Jn(a.stateNode),Je=l,Ot=c;break;case 5:xt||_s(a,s);case 6:if(l=Je,c=Ot,Je=null,Ps(t,s,a),Je=l,Ot=c,Je!==null)if(Ot)try{(Je.nodeType===9?Je.body:Je.nodeName==="HTML"?Je.ownerDocument.body:Je).removeChild(a.stateNode)}catch(o){$e(a,s,o)}else try{Je.removeChild(a.stateNode)}catch(o){$e(a,s,o)}break;case 18:Je!==null&&(Ot?(t=Je,sp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Il(t)):sp(Je,a.stateNode));break;case 4:l=Je,c=Ot,Je=a.stateNode.containerInfo,Ot=!0,Ps(t,s,a),Je=l,Ot=c;break;case 0:case 11:case 14:case 15:pa(2,a,s),xt||pa(4,a,s),Ps(t,s,a);break;case 1:xt||(_s(a,s),l=a.stateNode,typeof l.componentWillUnmount=="function"&&ah(a,s,l)),Ps(t,s,a);break;case 21:Ps(t,s,a);break;case 22:xt=(l=xt)||a.memoizedState!==null,Ps(t,s,a),xt=l;break;default:Ps(t,s,a)}}function mh(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Il(t)}catch(a){$e(s,s.return,a)}}}function uh(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Il(t)}catch(a){$e(s,s.return,a)}}function Eg(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new ih),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new ih),s;default:throw Error(d(435,t.tag))}}function ji(t,s){var a=Eg(t);s.forEach(function(l){if(!a.has(l)){a.add(l);var c=$g.bind(null,t,l);l.then(c,c)}})}function Ut(t,s){var a=s.deletions;if(a!==null)for(var l=0;l<a.length;l++){var c=a[l],o=t,j=s,D=j;e:for(;D!==null;){switch(D.tag){case 27:if(va(D.type)){Je=D.stateNode,Ot=!1;break e}break;case 5:Je=D.stateNode,Ot=!1;break e;case 3:case 4:Je=D.stateNode.containerInfo,Ot=!0;break e}D=D.return}if(Je===null)throw Error(d(160));oh(o,j,c),Je=null,Ot=!1,o=c.alternate,o!==null&&(o.return=null),c.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)xh(s,t),s=s.sibling}var fs=null;function xh(t,s){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ut(s,t),Ht(t),l&4&&(pa(3,t,t.return),Bn(3,t),pa(5,t,t.return));break;case 1:Ut(s,t),Ht(t),l&512&&(xt||a===null||_s(a,a.return)),l&64&&Fs&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var c=fs;if(Ut(s,t),Ht(t),l&512&&(xt||a===null||_s(a,a.return)),l&4){var o=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,c=c.ownerDocument||c;t:switch(l){case"title":o=c.getElementsByTagName("title")[0],(!o||o[pn]||o[yt]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=c.createElement(l),c.head.insertBefore(o,c.querySelector("head > title"))),St(o,l,a),o[yt]=t,gt(o),l=o;break e;case"link":var j=xp("link","href",c).get(l+(a.href||""));if(j){for(var D=0;D<j.length;D++)if(o=j[D],o.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&o.getAttribute("rel")===(a.rel==null?null:a.rel)&&o.getAttribute("title")===(a.title==null?null:a.title)&&o.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){j.splice(D,1);break t}}o=c.createElement(l),St(o,l,a),c.head.appendChild(o);break;case"meta":if(j=xp("meta","content",c).get(l+(a.content||""))){for(D=0;D<j.length;D++)if(o=j[D],o.getAttribute("content")===(a.content==null?null:""+a.content)&&o.getAttribute("name")===(a.name==null?null:a.name)&&o.getAttribute("property")===(a.property==null?null:a.property)&&o.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&o.getAttribute("charset")===(a.charSet==null?null:a.charSet)){j.splice(D,1);break t}}o=c.createElement(l),St(o,l,a),c.head.appendChild(o);break;default:throw Error(d(468,l))}o[yt]=t,gt(o),l=o}t.stateNode=l}else hp(c,t.type,t.stateNode);else t.stateNode=up(c,l,t.memoizedProps);else o!==l?(o===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):o.count--,l===null?hp(c,t.type,t.stateNode):up(c,l,t.memoizedProps)):l===null&&t.stateNode!==null&&oo(t,t.memoizedProps,a.memoizedProps)}break;case 27:Ut(s,t),Ht(t),l&512&&(xt||a===null||_s(a,a.return)),a!==null&&l&4&&oo(t,t.memoizedProps,a.memoizedProps);break;case 5:if(Ut(s,t),Ht(t),l&512&&(xt||a===null||_s(a,a.return)),t.flags&32){c=t.stateNode;try{bl(c,"")}catch(pe){$e(t,t.return,pe)}}l&4&&t.stateNode!=null&&(c=t.memoizedProps,oo(t,c,a!==null?a.memoizedProps:c)),l&1024&&(xo=!0);break;case 6:if(Ut(s,t),Ht(t),l&4){if(t.stateNode===null)throw Error(d(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(pe){$e(t,t.return,pe)}}break;case 3:if(Li=null,c=fs,fs=Ri(s.containerInfo),Ut(s,t),fs=c,Ht(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Il(s.containerInfo)}catch(pe){$e(t,t.return,pe)}xo&&(xo=!1,hh(t));break;case 4:l=fs,fs=Ri(t.stateNode.containerInfo),Ut(s,t),Ht(t),fs=l;break;case 12:Ut(s,t),Ht(t);break;case 31:Ut(s,t),Ht(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ji(t,l)));break;case 13:Ut(s,t),Ht(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ni=Et()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ji(t,l)));break;case 22:c=t.memoizedState!==null;var B=a!==null&&a.memoizedState!==null,J=Fs,ae=xt;if(Fs=J||c,xt=ae||B,Ut(s,t),xt=ae,Fs=J,Ht(t),l&8192)e:for(s=t.stateNode,s._visibility=c?s._visibility&-2:s._visibility|1,c&&(a===null||B||Fs||xt||Wa(t)),a=null,s=t;;){if(s.tag===5||s.tag===26){if(a===null){B=a=s;try{if(o=B.stateNode,c)j=o.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{D=B.stateNode;var ne=B.memoizedProps.style,K=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;D.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(pe){$e(B,B.return,pe)}}}else if(s.tag===6){if(a===null){B=s;try{B.stateNode.nodeValue=c?"":B.memoizedProps}catch(pe){$e(B,B.return,pe)}}}else if(s.tag===18){if(a===null){B=s;try{var se=B.stateNode;c?ap(se,!0):ap(B.stateNode,!1)}catch(pe){$e(B,B.return,pe)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,ji(t,a))));break;case 19:Ut(s,t),Ht(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,ji(t,l)));break;case 30:break;case 21:break;default:Ut(s,t),Ht(t)}}function Ht(t){var s=t.flags;if(s&2){try{for(var a,l=t.return;l!==null;){if(nh(l)){a=l;break}l=l.return}if(a==null)throw Error(d(160));switch(a.tag){case 27:var c=a.stateNode,o=mo(t);bi(t,o,c);break;case 5:var j=a.stateNode;a.flags&32&&(bl(j,""),a.flags&=-33);var D=mo(t);bi(t,D,j);break;case 3:case 4:var B=a.stateNode.containerInfo,J=mo(t);uo(t,J,B);break;default:throw Error(d(161))}}catch(ae){$e(t,t.return,ae)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function hh(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;hh(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Ys(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)ch(t,s.alternate,s),s=s.sibling}function Wa(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:pa(4,s,s.return),Wa(s);break;case 1:_s(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&ah(s,s.return,a),Wa(s);break;case 27:Jn(s.stateNode);case 26:case 5:_s(s,s.return),Wa(s);break;case 22:s.memoizedState===null&&Wa(s);break;case 30:Wa(s);break;default:Wa(s)}t=t.sibling}}function Vs(t,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,c=t,o=s,j=o.flags;switch(o.tag){case 0:case 11:case 15:Vs(c,o,a),Bn(4,o);break;case 1:if(Vs(c,o,a),l=o,c=l.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(J){$e(l,l.return,J)}if(l=o,c=l.updateQueue,c!==null){var D=l.stateNode;try{var B=c.shared.hiddenCallbacks;if(B!==null)for(c.shared.hiddenCallbacks=null,c=0;c<B.length;c++)Yu(B[c],D)}catch(J){$e(l,l.return,J)}}a&&j&64&&sh(o),Gn(o,o.return);break;case 27:rh(o);case 26:case 5:Vs(c,o,a),a&&l===null&&j&4&&lh(o),Gn(o,o.return);break;case 12:Vs(c,o,a);break;case 31:Vs(c,o,a),a&&j&4&&mh(c,o);break;case 13:Vs(c,o,a),a&&j&4&&uh(c,o);break;case 22:o.memoizedState===null&&Vs(c,o,a),Gn(o,o.return);break;case 30:break;default:Vs(c,o,a)}s=s.sibling}}function ho(t,s){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&An(a))}function po(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&An(t))}function gs(t,s,a,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ph(t,s,a,l),s=s.sibling}function ph(t,s,a,l){var c=s.flags;switch(s.tag){case 0:case 11:case 15:gs(t,s,a,l),c&2048&&Bn(9,s);break;case 1:gs(t,s,a,l);break;case 3:gs(t,s,a,l),c&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&An(t)));break;case 12:if(c&2048){gs(t,s,a,l),t=s.stateNode;try{var o=s.memoizedProps,j=o.id,D=o.onPostCommit;typeof D=="function"&&D(j,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(B){$e(s,s.return,B)}}else gs(t,s,a,l);break;case 31:gs(t,s,a,l);break;case 13:gs(t,s,a,l);break;case 23:break;case 22:o=s.stateNode,j=s.alternate,s.memoizedState!==null?o._visibility&2?gs(t,s,a,l):Fn(t,s):o._visibility&2?gs(t,s,a,l):(o._visibility|=2,Hl(t,s,a,l,(s.subtreeFlags&10256)!==0||!1)),c&2048&&ho(j,s);break;case 24:gs(t,s,a,l),c&2048&&po(s.alternate,s);break;default:gs(t,s,a,l)}}function Hl(t,s,a,l,c){for(c=c&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var o=t,j=s,D=a,B=l,J=j.flags;switch(j.tag){case 0:case 11:case 15:Hl(o,j,D,B,c),Bn(8,j);break;case 23:break;case 22:var ae=j.stateNode;j.memoizedState!==null?ae._visibility&2?Hl(o,j,D,B,c):Fn(o,j):(ae._visibility|=2,Hl(o,j,D,B,c)),c&&J&2048&&ho(j.alternate,j);break;case 24:Hl(o,j,D,B,c),c&&J&2048&&po(j.alternate,j);break;default:Hl(o,j,D,B,c)}s=s.sibling}}function Fn(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=t,l=s,c=l.flags;switch(l.tag){case 22:Fn(a,l),c&2048&&ho(l.alternate,l);break;case 24:Fn(a,l),c&2048&&po(l.alternate,l);break;default:Fn(a,l)}s=s.sibling}}var Pn=8192;function $l(t,s,a){if(t.subtreeFlags&Pn)for(t=t.child;t!==null;)fh(t,s,a),t=t.sibling}function fh(t,s,a){switch(t.tag){case 26:$l(t,s,a),t.flags&Pn&&t.memoizedState!==null&&fb(a,fs,t.memoizedState,t.memoizedProps);break;case 5:$l(t,s,a);break;case 3:case 4:var l=fs;fs=Ri(t.stateNode.containerInfo),$l(t,s,a),fs=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Pn,Pn=16777216,$l(t,s,a),Pn=l):$l(t,s,a));break;default:$l(t,s,a)}}function gh(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Yn(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];bt=l,jh(l,t)}gh(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)bh(t),t=t.sibling}function bh(t){switch(t.tag){case 0:case 11:case 15:Yn(t),t.flags&2048&&pa(9,t,t.return);break;case 3:Yn(t);break;case 12:Yn(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,yi(t)):Yn(t);break;default:Yn(t)}}function yi(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var l=s[a];bt=l,jh(l,t)}gh(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:pa(8,s,s.return),yi(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,yi(s));break;default:yi(s)}t=t.sibling}}function jh(t,s){for(;bt!==null;){var a=bt;switch(a.tag){case 0:case 11:case 15:pa(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:An(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,bt=l;else e:for(a=t;bt!==null;){l=bt;var c=l.sibling,o=l.return;if(dh(l),l===a){bt=null;break e}if(c!==null){c.return=o,bt=c;break e}bt=o}}}var Tg={getCacheForType:function(t){var s=vt(ot),a=s.data.get(t);return a===void 0&&(a=t(),s.data.set(t,a)),a},cacheSignal:function(){return vt(ot).controller.signal}},Dg=typeof WeakMap=="function"?WeakMap:Map,Oe=0,Ye=null,Ce=null,Ae=0,He=0,Qt=null,fa=!1,ql=!1,fo=!1,Xs=0,st=0,ga=0,el=0,go=0,It=0,Bl=0,Vn=null,$t=null,bo=!1,Ni=0,yh=0,vi=1/0,wi=null,ba=null,ht=0,ja=null,Gl=null,Qs=0,jo=0,yo=null,Nh=null,Xn=0,No=null;function Zt(){return(Oe&2)!==0&&Ae!==0?Ae&-Ae:O.T!==null?ko():Um()}function vh(){if(It===0)if((Ae&536870912)===0||Te){var t=Tr;Tr<<=1,(Tr&3932160)===0&&(Tr=262144),It=t}else It=536870912;return t=Vt.current,t!==null&&(t.flags|=32),It}function qt(t,s,a){(t===Ye&&(He===2||He===9)||t.cancelPendingCommit!==null)&&(Fl(t,0),ya(t,Ae,It,!1)),hn(t,a),((Oe&2)===0||t!==Ye)&&(t===Ye&&((Oe&2)===0&&(el|=a),st===4&&ya(t,Ae,It,!1)),Cs(t))}function wh(t,s,a){if((Oe&6)!==0)throw Error(d(327));var l=!a&&(s&127)===0&&(s&t.expiredLanes)===0||xn(t,s),c=l?Lg(t,s):wo(t,s,!0),o=l;do{if(c===0){ql&&!l&&ya(t,s,0,!1);break}else{if(a=t.current.alternate,o&&!Rg(a)){c=wo(t,s,!1),o=!1;continue}if(c===2){if(o=s,t.errorRecoveryDisabledLanes&o)var j=0;else j=t.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){s=j;e:{var D=t;c=Vn;var B=D.current.memoizedState.isDehydrated;if(B&&(Fl(D,j).flags|=256),j=wo(D,j,!1),j!==2){if(fo&&!B){D.errorRecoveryDisabledLanes|=o,el|=o,c=4;break e}o=$t,$t=c,o!==null&&($t===null?$t=o:$t.push.apply($t,o))}c=j}if(o=!1,c!==2)continue}}if(c===1){Fl(t,0),ya(t,s,0,!0);break}e:{switch(l=t,o=c,o){case 0:case 1:throw Error(d(345));case 4:if((s&4194048)!==s)break;case 6:ya(l,s,It,!fa);break e;case 2:$t=null;break;case 3:case 5:break;default:throw Error(d(329))}if((s&62914560)===s&&(c=Ni+300-Et(),10<c)){if(ya(l,s,It,!fa),Rr(l,0,!0)!==0)break e;Qs=s,l.timeoutHandle=ep(Sh.bind(null,l,a,$t,wi,bo,s,It,el,Bl,fa,o,"Throttled",-0,0),c);break e}Sh(l,a,$t,wi,bo,s,It,el,Bl,fa,o,null,-0,0)}}break}while(!0);Cs(t)}function Sh(t,s,a,l,c,o,j,D,B,J,ae,ne,K,se){if(t.timeoutHandle=-1,ne=s.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Rs},fh(s,o,ne);var pe=(o&62914560)===o?Ni-Et():(o&4194048)===o?yh-Et():0;if(pe=gb(ne,pe),pe!==null){Qs=o,t.cancelPendingCommit=pe(Dh.bind(null,t,s,o,a,l,c,j,D,B,ae,ne,null,K,se)),ya(t,o,j,!J);return}}Dh(t,s,o,a,l,c,j,D,B)}function Rg(t){for(var s=t;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var c=a[l],o=c.getSnapshot;c=c.value;try{if(!Pt(o(),c))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ya(t,s,a,l){s&=~go,s&=~el,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var c=s;0<c;){var o=31-Le(c),j=1<<o;l[o]=-1,c&=~j}a!==0&&zm(t,a,s)}function Si(){return(Oe&6)===0?(Qn(0),!1):!0}function vo(){if(Ce!==null){if(He===0)var t=Ce.return;else t=Ce,Us=Ya=null,Ud(t),Rl=null,En=0,t=Ce;for(;t!==null;)th(t.alternate,t),t=t.return;Ce=null}}function Fl(t,s){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,Wg(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Qs=0,vo(),Ye=t,Ce=a=Ls(t.current,null),Ae=s,He=0,Qt=null,fa=!1,ql=xn(t,s),fo=!1,Bl=It=go=el=ga=st=0,$t=Vn=null,bo=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var c=31-Le(l),o=1<<c;s|=t[c],l&=~o}return Xs=s,Yr(),a}function _h(t,s){ve=null,O.H=Hn,s===Dl||s===Wr?(s=Bu(),He=3):s===_d?(s=Bu(),He=4):He=s===Wd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Qt=s,Ce===null&&(st=1,xi(t,ts(s,t.current)))}function Ch(){var t=Vt.current;return t===null?!0:(Ae&4194048)===Ae?ns===null:(Ae&62914560)===Ae||(Ae&536870912)!==0?t===ns:!1}function kh(){var t=O.H;return O.H=Hn,t===null?Hn:t}function Ah(){var t=O.A;return O.A=Tg,t}function _i(){st=4,fa||(Ae&4194048)!==Ae&&Vt.current!==null||(ql=!0),(ga&134217727)===0&&(el&134217727)===0||Ye===null||ya(Ye,Ae,It,!1)}function wo(t,s,a){var l=Oe;Oe|=2;var c=kh(),o=Ah();(Ye!==t||Ae!==s)&&(wi=null,Fl(t,s)),s=!1;var j=st;e:do try{if(He!==0&&Ce!==null){var D=Ce,B=Qt;switch(He){case 8:vo(),j=6;break e;case 3:case 2:case 9:case 6:Vt.current===null&&(s=!0);var J=He;if(He=0,Qt=null,Pl(t,D,B,J),a&&ql){j=0;break e}break;default:J=He,He=0,Qt=null,Pl(t,D,B,J)}}zg(),j=st;break}catch(ae){_h(t,ae)}while(!0);return s&&t.shellSuspendCounter++,Us=Ya=null,Oe=l,O.H=c,O.A=o,Ce===null&&(Ye=null,Ae=0,Yr()),j}function zg(){for(;Ce!==null;)Mh(Ce)}function Lg(t,s){var a=Oe;Oe|=2;var l=kh(),c=Ah();Ye!==t||Ae!==s?(wi=null,vi=Et()+500,Fl(t,s)):ql=xn(t,s);e:do try{if(He!==0&&Ce!==null){s=Ce;var o=Qt;t:switch(He){case 1:He=0,Qt=null,Pl(t,s,o,1);break;case 2:case 9:if($u(o)){He=0,Qt=null,Eh(s);break}s=function(){He!==2&&He!==9||Ye!==t||(He=7),Cs(t)},o.then(s,s);break e;case 3:He=7;break e;case 4:He=5;break e;case 7:$u(o)?(He=0,Qt=null,Eh(s)):(He=0,Qt=null,Pl(t,s,o,7));break;case 5:var j=null;switch(Ce.tag){case 26:j=Ce.memoizedState;case 5:case 27:var D=Ce;if(j?pp(j):D.stateNode.complete){He=0,Qt=null;var B=D.sibling;if(B!==null)Ce=B;else{var J=D.return;J!==null?(Ce=J,Ci(J)):Ce=null}break t}}He=0,Qt=null,Pl(t,s,o,5);break;case 6:He=0,Qt=null,Pl(t,s,o,6);break;case 8:vo(),st=6;break e;default:throw Error(d(462))}}Og();break}catch(ae){_h(t,ae)}while(!0);return Us=Ya=null,O.H=l,O.A=c,Oe=a,Ce!==null?0:(Ye=null,Ae=0,Yr(),st)}function Og(){for(;Ce!==null&&!Rc();)Mh(Ce)}function Mh(t){var s=Wx(t.alternate,t,Xs);t.memoizedProps=t.pendingProps,s===null?Ci(t):Ce=s}function Eh(t){var s=t,a=s.alternate;switch(s.tag){case 15:case 0:s=Xx(a,s,s.pendingProps,s.type,void 0,Ae);break;case 11:s=Xx(a,s,s.pendingProps,s.type.render,s.ref,Ae);break;case 5:Ud(s);default:th(a,s),s=Ce=Au(s,Xs),s=Wx(a,s,Xs)}t.memoizedProps=t.pendingProps,s===null?Ci(t):Ce=s}function Pl(t,s,a,l){Us=Ya=null,Ud(s),Rl=null,En=0;var c=s.return;try{if(Sg(t,c,s,a,Ae)){st=1,xi(t,ts(a,t.current)),Ce=null;return}}catch(o){if(c!==null)throw Ce=c,o;st=1,xi(t,ts(a,t.current)),Ce=null;return}s.flags&32768?(Te||l===1?t=!0:ql||(Ae&536870912)!==0?t=!1:(fa=t=!0,(l===2||l===9||l===3||l===6)&&(l=Vt.current,l!==null&&l.tag===13&&(l.flags|=16384))),Th(s,t)):Ci(s)}function Ci(t){var s=t;do{if((s.flags&32768)!==0){Th(s,fa);return}t=s.return;var a=kg(s.alternate,s,Xs);if(a!==null){Ce=a;return}if(s=s.sibling,s!==null){Ce=s;return}Ce=s=t}while(s!==null);st===0&&(st=5)}function Th(t,s){do{var a=Ag(t.alternate,t);if(a!==null){a.flags&=32767,Ce=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(t=t.sibling,t!==null)){Ce=t;return}Ce=t=a}while(t!==null);st=6,Ce=null}function Dh(t,s,a,l,c,o,j,D,B){t.cancelPendingCommit=null;do ki();while(ht!==0);if((Oe&6)!==0)throw Error(d(327));if(s!==null){if(s===t.current)throw Error(d(177));if(o=s.lanes|s.childLanes,o|=od,pf(t,a,o,j,D,B),t===Ye&&(Ce=Ye=null,Ae=0),Gl=s,ja=t,Qs=a,jo=o,yo=c,Nh=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,qg(ol,function(){return Uh(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=O.T,O.T=null,c=P.p,P.p=2,j=Oe,Oe|=4;try{Mg(t,s,a)}finally{Oe=j,P.p=c,O.T=l}}ht=1,Rh(),zh(),Lh()}}function Rh(){if(ht===1){ht=0;var t=ja,s=Gl,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=O.T,O.T=null;var l=P.p;P.p=2;var c=Oe;Oe|=4;try{xh(s,t);var o=Lo,j=ju(t.containerInfo),D=o.focusedElem,B=o.selectionRange;if(j!==D&&D&&D.ownerDocument&&bu(D.ownerDocument.documentElement,D)){if(B!==null&&nd(D)){var J=B.start,ae=B.end;if(ae===void 0&&(ae=J),"selectionStart"in D)D.selectionStart=J,D.selectionEnd=Math.min(ae,D.value.length);else{var ne=D.ownerDocument||document,K=ne&&ne.defaultView||window;if(K.getSelection){var se=K.getSelection(),pe=D.textContent.length,be=Math.min(B.start,pe),Pe=B.end===void 0?be:Math.min(B.end,pe);!se.extend&&be>Pe&&(j=Pe,Pe=be,be=j);var V=gu(D,be),Y=gu(D,Pe);if(V&&Y&&(se.rangeCount!==1||se.anchorNode!==V.node||se.anchorOffset!==V.offset||se.focusNode!==Y.node||se.focusOffset!==Y.offset)){var I=ne.createRange();I.setStart(V.node,V.offset),se.removeAllRanges(),be>Pe?(se.addRange(I),se.extend(Y.node,Y.offset)):(I.setEnd(Y.node,Y.offset),se.addRange(I))}}}}for(ne=[],se=D;se=se.parentNode;)se.nodeType===1&&ne.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<ne.length;D++){var le=ne[D];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}$i=!!zo,Lo=zo=null}finally{Oe=c,P.p=l,O.T=a}}t.current=s,ht=2}}function zh(){if(ht===2){ht=0;var t=ja,s=Gl,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=O.T,O.T=null;var l=P.p;P.p=2;var c=Oe;Oe|=4;try{ch(t,s.alternate,s)}finally{Oe=c,P.p=l,O.T=a}}ht=3}}function Lh(){if(ht===4||ht===3){ht=0,zc();var t=ja,s=Gl,a=Qs,l=Nh;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?ht=5:(ht=0,Gl=ja=null,Oh(t,t.pendingLanes));var c=t.pendingLanes;if(c===0&&(ba=null),qc(a),s=s.stateNode,L&&typeof L.onCommitFiberRoot=="function")try{L.onCommitFiberRoot(Oa,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=O.T,c=P.p,P.p=2,O.T=null;try{for(var o=t.onRecoverableError,j=0;j<l.length;j++){var D=l[j];o(D.value,{componentStack:D.stack})}}finally{O.T=s,P.p=c}}(Qs&3)!==0&&ki(),Cs(t),c=t.pendingLanes,(a&261930)!==0&&(c&42)!==0?t===No?Xn++:(Xn=0,No=t):Xn=0,Qn(0)}}function Oh(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,An(s)))}function ki(){return Rh(),zh(),Lh(),Uh()}function Uh(){if(ht!==5)return!1;var t=ja,s=jo;jo=0;var a=qc(Qs),l=O.T,c=P.p;try{P.p=32>a?32:a,O.T=null,a=yo,yo=null;var o=ja,j=Qs;if(ht=0,Gl=ja=null,Qs=0,(Oe&6)!==0)throw Error(d(331));var D=Oe;if(Oe|=4,bh(o.current),ph(o,o.current,j,a),Oe=D,Qn(0,!1),L&&typeof L.onPostCommitFiberRoot=="function")try{L.onPostCommitFiberRoot(Oa,o)}catch{}return!0}finally{P.p=c,O.T=l,Oh(t,s)}}function Hh(t,s,a){s=ts(a,s),s=Kd(t.stateNode,s,2),t=ua(t,s,2),t!==null&&(hn(t,2),Cs(t))}function $e(t,s,a){if(t.tag===3)Hh(t,t,a);else for(;s!==null;){if(s.tag===3){Hh(s,t,a);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ba===null||!ba.has(l))){t=ts(a,t),a=$x(2),l=ua(s,a,2),l!==null&&(qx(a,l,s,t),hn(l,2),Cs(l));break}}s=s.return}}function So(t,s,a){var l=t.pingCache;if(l===null){l=t.pingCache=new Dg;var c=new Set;l.set(s,c)}else c=l.get(s),c===void 0&&(c=new Set,l.set(s,c));c.has(a)||(fo=!0,c.add(a),t=Ug.bind(null,t,s,a),s.then(t,t))}function Ug(t,s,a){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,Ye===t&&(Ae&a)===a&&(st===4||st===3&&(Ae&62914560)===Ae&&300>Et()-Ni?(Oe&2)===0&&Fl(t,0):go|=a,Bl===Ae&&(Bl=0)),Cs(t)}function $h(t,s){s===0&&(s=Rm()),t=Ga(t,s),t!==null&&(hn(t,s),Cs(t))}function Hg(t){var s=t.memoizedState,a=0;s!==null&&(a=s.retryLane),$h(t,a)}function $g(t,s){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,c=t.memoizedState;c!==null&&(a=c.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(d(314))}l!==null&&l.delete(s),$h(t,a)}function qg(t,s){return La(t,s)}var Ai=null,Yl=null,_o=!1,Mi=!1,Co=!1,Na=0;function Cs(t){t!==Yl&&t.next===null&&(Yl===null?Ai=Yl=t:Yl=Yl.next=t),Mi=!0,_o||(_o=!0,Gg())}function Qn(t,s){if(!Co&&Mi){Co=!0;do for(var a=!1,l=Ai;l!==null;){if(t!==0){var c=l.pendingLanes;if(c===0)var o=0;else{var j=l.suspendedLanes,D=l.pingedLanes;o=(1<<31-Le(42|t)+1)-1,o&=c&~(j&~D),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(a=!0,Fh(l,o))}else o=Ae,o=Rr(l,l===Ye?o:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(o&3)===0||xn(l,o)||(a=!0,Fh(l,o));l=l.next}while(a);Co=!1}}function Bg(){qh()}function qh(){Mi=_o=!1;var t=0;Na!==0&&Kg()&&(t=Na);for(var s=Et(),a=null,l=Ai;l!==null;){var c=l.next,o=Bh(l,s);o===0?(l.next=null,a===null?Ai=c:a.next=c,c===null&&(Yl=a)):(a=l,(t!==0||(o&3)!==0)&&(Mi=!0)),l=c}ht!==0&&ht!==5||Qn(t),Na!==0&&(Na=0)}function Bh(t,s){for(var a=t.suspendedLanes,l=t.pingedLanes,c=t.expirationTimes,o=t.pendingLanes&-62914561;0<o;){var j=31-Le(o),D=1<<j,B=c[j];B===-1?((D&a)===0||(D&l)!==0)&&(c[j]=hf(D,s)):B<=s&&(t.expiredLanes|=D),o&=~D}if(s=Ye,a=Ae,a=Rr(t,t===s?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===s&&(He===2||He===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&mn(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||xn(t,a)){if(s=a&-a,s===t.callbackPriority)return s;switch(l!==null&&mn(l),qc(a)){case 2:case 8:a=Ar;break;case 32:a=ol;break;case 268435456:a=ml;break;default:a=ol}return l=Gh.bind(null,t),a=La(a,l),t.callbackPriority=s,t.callbackNode=a,s}return l!==null&&l!==null&&mn(l),t.callbackPriority=2,t.callbackNode=null,2}function Gh(t,s){if(ht!==0&&ht!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(ki()&&t.callbackNode!==a)return null;var l=Ae;return l=Rr(t,t===Ye?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(wh(t,l,s),Bh(t,Et()),t.callbackNode!=null&&t.callbackNode===a?Gh.bind(null,t):null)}function Fh(t,s){if(ki())return null;wh(t,s,!0)}function Gg(){eb(function(){(Oe&6)!==0?La(kr,Bg):qh()})}function ko(){if(Na===0){var t=El;t===0&&(t=Er,Er<<=1,(Er&261888)===0&&(Er=256)),Na=t}return Na}function Ph(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ur(""+t)}function Yh(t,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,t.id&&a.setAttribute("form",t.id),s.parentNode.insertBefore(a,s),t=new FormData(t),a.parentNode.removeChild(a),t}function Fg(t,s,a,l,c){if(s==="submit"&&a&&a.stateNode===c){var o=Ph((c[zt]||null).action),j=l.submitter;j&&(s=(s=j[zt]||null)?Ph(s.formAction):j.getAttribute("formAction"),s!==null&&(o=s,j=null));var D=new Br("action","action",null,l,c);t.push({event:D,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Na!==0){var B=j?Yh(c,j):new FormData(c);Vd(a,{pending:!0,data:B,method:c.method,action:o},null,B)}}else typeof o=="function"&&(D.preventDefault(),B=j?Yh(c,j):new FormData(c),Vd(a,{pending:!0,data:B,method:c.method,action:o},o,B))},currentTarget:c}]})}}for(var Ao=0;Ao<dd.length;Ao++){var Mo=dd[Ao],Pg=Mo.toLowerCase(),Yg=Mo[0].toUpperCase()+Mo.slice(1);ps(Pg,"on"+Yg)}ps(vu,"onAnimationEnd"),ps(wu,"onAnimationIteration"),ps(Su,"onAnimationStart"),ps("dblclick","onDoubleClick"),ps("focusin","onFocus"),ps("focusout","onBlur"),ps(ig,"onTransitionRun"),ps(cg,"onTransitionStart"),ps(dg,"onTransitionCancel"),ps(_u,"onTransitionEnd"),fl("onMouseEnter",["mouseout","mouseover"]),fl("onMouseLeave",["mouseout","mouseover"]),fl("onPointerEnter",["pointerout","pointerover"]),fl("onPointerLeave",["pointerout","pointerover"]),Ha("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ha("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ha("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ha("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ha("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ha("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var In="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(In));function Vh(t,s){s=(s&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],c=l.event;l=l.listeners;e:{var o=void 0;if(s)for(var j=l.length-1;0<=j;j--){var D=l[j],B=D.instance,J=D.currentTarget;if(D=D.listener,B!==o&&c.isPropagationStopped())break e;o=D,c.currentTarget=J;try{o(c)}catch(ae){Pr(ae)}c.currentTarget=null,o=B}else for(j=0;j<l.length;j++){if(D=l[j],B=D.instance,J=D.currentTarget,D=D.listener,B!==o&&c.isPropagationStopped())break e;o=D,c.currentTarget=J;try{o(c)}catch(ae){Pr(ae)}c.currentTarget=null,o=B}}}}function ke(t,s){var a=s[Bc];a===void 0&&(a=s[Bc]=new Set);var l=t+"__bubble";a.has(l)||(Xh(s,t,2,!1),a.add(l))}function Eo(t,s,a){var l=0;s&&(l|=4),Xh(a,t,l,s)}var Ei="_reactListening"+Math.random().toString(36).slice(2);function To(t){if(!t[Ei]){t[Ei]=!0,qm.forEach(function(a){a!=="selectionchange"&&(Vg.has(a)||Eo(a,!1,t),Eo(a,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Ei]||(s[Ei]=!0,Eo("selectionchange",!1,s))}}function Xh(t,s,a,l){switch(vp(s)){case 2:var c=yb;break;case 8:c=Nb;break;default:c=Vo}a=c.bind(null,s,a,t),c=void 0,!Zc||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(c=!0),l?c!==void 0?t.addEventListener(s,a,{capture:!0,passive:c}):t.addEventListener(s,a,!0):c!==void 0?t.addEventListener(s,a,{passive:c}):t.addEventListener(s,a,!1)}function Do(t,s,a,l,c){var o=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var j=l.tag;if(j===3||j===4){var D=l.stateNode.containerInfo;if(D===c)break;if(j===4)for(j=l.return;j!==null;){var B=j.tag;if((B===3||B===4)&&j.stateNode.containerInfo===c)return;j=j.return}for(;D!==null;){if(j=xl(D),j===null)return;if(B=j.tag,B===5||B===6||B===26||B===27){l=o=j;continue e}D=D.parentNode}}l=l.return}Km(function(){var J=o,ae=Qc(a),ne=[];e:{var K=Cu.get(t);if(K!==void 0){var se=Br,pe=t;switch(t){case"keypress":if($r(a)===0)break e;case"keydown":case"keyup":se=$f;break;case"focusin":pe="focus",se=ed;break;case"focusout":pe="blur",se=ed;break;case"beforeblur":case"afterblur":se=ed;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=tu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=kf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=Gf;break;case vu:case wu:case Su:se=Ef;break;case _u:se=Pf;break;case"scroll":case"scrollend":se=_f;break;case"wheel":se=Vf;break;case"copy":case"cut":case"paste":se=Df;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=au;break;case"toggle":case"beforetoggle":se=Qf}var be=(s&4)!==0,Pe=!be&&(t==="scroll"||t==="scrollend"),V=be?K!==null?K+"Capture":null:K;be=[];for(var Y=J,I;Y!==null;){var le=Y;if(I=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||I===null||V===null||(le=gn(Y,V),le!=null&&be.push(Zn(Y,le,I))),Pe)break;Y=Y.return}0<be.length&&(K=new se(K,pe,null,a,ae),ne.push({event:K,listeners:be}))}}if((s&7)===0){e:{if(K=t==="mouseover"||t==="pointerover",se=t==="mouseout"||t==="pointerout",K&&a!==Xc&&(pe=a.relatedTarget||a.fromElement)&&(xl(pe)||pe[ul]))break e;if((se||K)&&(K=ae.window===ae?ae:(K=ae.ownerDocument)?K.defaultView||K.parentWindow:window,se?(pe=a.relatedTarget||a.toElement,se=J,pe=pe?xl(pe):null,pe!==null&&(Pe=u(pe),be=pe.tag,pe!==Pe||be!==5&&be!==27&&be!==6)&&(pe=null)):(se=null,pe=J),se!==pe)){if(be=tu,le="onMouseLeave",V="onMouseEnter",Y="mouse",(t==="pointerout"||t==="pointerover")&&(be=au,le="onPointerLeave",V="onPointerEnter",Y="pointer"),Pe=se==null?K:fn(se),I=pe==null?K:fn(pe),K=new be(le,Y+"leave",se,a,ae),K.target=Pe,K.relatedTarget=I,le=null,xl(ae)===J&&(be=new be(V,Y+"enter",pe,a,ae),be.target=I,be.relatedTarget=Pe,le=be),Pe=le,se&&pe)t:{for(be=Xg,V=se,Y=pe,I=0,le=V;le;le=be(le))I++;le=0;for(var ge=Y;ge;ge=be(ge))le++;for(;0<I-le;)V=be(V),I--;for(;0<le-I;)Y=be(Y),le--;for(;I--;){if(V===Y||Y!==null&&V===Y.alternate){be=V;break t}V=be(V),Y=be(Y)}be=null}else be=null;se!==null&&Qh(ne,K,se,be,!1),pe!==null&&Pe!==null&&Qh(ne,Pe,pe,be,!0)}}e:{if(K=J?fn(J):window,se=K.nodeName&&K.nodeName.toLowerCase(),se==="select"||se==="input"&&K.type==="file")var Re=mu;else if(du(K))if(uu)Re=lg;else{Re=sg;var fe=tg}else se=K.nodeName,!se||se.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?J&&Vc(J.elementType)&&(Re=mu):Re=ag;if(Re&&(Re=Re(t,J))){ou(ne,Re,a,ae);break e}fe&&fe(t,K,J),t==="focusout"&&J&&K.type==="number"&&J.memoizedProps.value!=null&&Yc(K,"number",K.value)}switch(fe=J?fn(J):window,t){case"focusin":(du(fe)||fe.contentEditable==="true")&&(vl=fe,rd=J,_n=null);break;case"focusout":_n=rd=vl=null;break;case"mousedown":id=!0;break;case"contextmenu":case"mouseup":case"dragend":id=!1,yu(ne,a,ae);break;case"selectionchange":if(rg)break;case"keydown":case"keyup":yu(ne,a,ae)}var _e;if(sd)e:{switch(t){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else Nl?iu(t,a)&&(Me="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Me="onCompositionStart");Me&&(lu&&a.locale!=="ko"&&(Nl||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&Nl&&(_e=Wm()):(na=ae,Jc="value"in na?na.value:na.textContent,Nl=!0)),fe=Ti(J,Me),0<fe.length&&(Me=new su(Me,t,null,a,ae),ne.push({event:Me,listeners:fe}),_e?Me.data=_e:(_e=cu(a),_e!==null&&(Me.data=_e)))),(_e=Zf?Jf(t,a):Kf(t,a))&&(Me=Ti(J,"onBeforeInput"),0<Me.length&&(fe=new su("onBeforeInput","beforeinput",null,a,ae),ne.push({event:fe,listeners:Me}),fe.data=_e)),Fg(ne,t,J,a,ae)}Vh(ne,s)})}function Zn(t,s,a){return{instance:t,listener:s,currentTarget:a}}function Ti(t,s){for(var a=s+"Capture",l=[];t!==null;){var c=t,o=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||o===null||(c=gn(t,a),c!=null&&l.unshift(Zn(t,c,o)),c=gn(t,s),c!=null&&l.push(Zn(t,c,o))),t.tag===3)return l;t=t.return}return[]}function Xg(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Qh(t,s,a,l,c){for(var o=s._reactName,j=[];a!==null&&a!==l;){var D=a,B=D.alternate,J=D.stateNode;if(D=D.tag,B!==null&&B===l)break;D!==5&&D!==26&&D!==27||J===null||(B=J,c?(J=gn(a,o),J!=null&&j.unshift(Zn(a,J,B))):c||(J=gn(a,o),J!=null&&j.push(Zn(a,J,B)))),a=a.return}j.length!==0&&t.push({event:s,listeners:j})}var Qg=/\r\n?/g,Ig=/\u0000|\uFFFD/g;function Ih(t){return(typeof t=="string"?t:""+t).replace(Qg,`
`).replace(Ig,"")}function Zh(t,s){return s=Ih(s),Ih(t)===s}function Fe(t,s,a,l,c,o){switch(a){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||bl(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&bl(t,""+l);break;case"className":Lr(t,"class",l);break;case"tabIndex":Lr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Lr(t,a,l);break;case"style":Zm(t,l,o);break;case"data":if(s!=="object"){Lr(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ur(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(a==="formAction"?(s!=="input"&&Fe(t,s,"name",c.name,c,null),Fe(t,s,"formEncType",c.formEncType,c,null),Fe(t,s,"formMethod",c.formMethod,c,null),Fe(t,s,"formTarget",c.formTarget,c,null)):(Fe(t,s,"encType",c.encType,c,null),Fe(t,s,"method",c.method,c,null),Fe(t,s,"target",c.target,c,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ur(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Rs);break;case"onScroll":l!=null&&ke("scroll",t);break;case"onScrollEnd":l!=null&&ke("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(a=l.__html,a!=null){if(c.children!=null)throw Error(d(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ur(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":ke("beforetoggle",t),ke("toggle",t),zr(t,"popover",l);break;case"xlinkActuate":Ds(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ds(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ds(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ds(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ds(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ds(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ds(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ds(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ds(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":zr(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=wf.get(a)||a,zr(t,a,l))}}function Ro(t,s,a,l,c,o){switch(a){case"style":Zm(t,l,o);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(d(61));if(a=l.__html,a!=null){if(c.children!=null)throw Error(d(60));t.innerHTML=a}}break;case"children":typeof l=="string"?bl(t,l):(typeof l=="number"||typeof l=="bigint")&&bl(t,""+l);break;case"onScroll":l!=null&&ke("scroll",t);break;case"onScrollEnd":l!=null&&ke("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Rs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Bm.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),s=a.slice(2,c?a.length-7:void 0),o=t[zt]||null,o=o!=null?o[a]:null,typeof o=="function"&&t.removeEventListener(s,o,c),typeof l=="function")){typeof o!="function"&&o!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(s,l,c);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):zr(t,a,l)}}}function St(t,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",t),ke("load",t);var l=!1,c=!1,o;for(o in a)if(a.hasOwnProperty(o)){var j=a[o];if(j!=null)switch(o){case"src":l=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,s));default:Fe(t,s,o,j,a,null)}}c&&Fe(t,s,"srcSet",a.srcSet,a,null),l&&Fe(t,s,"src",a.src,a,null);return;case"input":ke("invalid",t);var D=o=j=c=null,B=null,J=null;for(l in a)if(a.hasOwnProperty(l)){var ae=a[l];if(ae!=null)switch(l){case"name":c=ae;break;case"type":j=ae;break;case"checked":B=ae;break;case"defaultChecked":J=ae;break;case"value":o=ae;break;case"defaultValue":D=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(d(137,s));break;default:Fe(t,s,l,ae,a,null)}}Vm(t,o,D,B,J,j,c,!1);return;case"select":ke("invalid",t),l=j=o=null;for(c in a)if(a.hasOwnProperty(c)&&(D=a[c],D!=null))switch(c){case"value":o=D;break;case"defaultValue":j=D;break;case"multiple":l=D;default:Fe(t,s,c,D,a,null)}s=o,a=j,t.multiple=!!l,s!=null?gl(t,!!l,s,!1):a!=null&&gl(t,!!l,a,!0);return;case"textarea":ke("invalid",t),o=c=l=null;for(j in a)if(a.hasOwnProperty(j)&&(D=a[j],D!=null))switch(j){case"value":l=D;break;case"defaultValue":c=D;break;case"children":o=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(d(91));break;default:Fe(t,s,j,D,a,null)}Qm(t,l,c,o);return;case"option":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Fe(t,s,B,l,a,null)}return;case"dialog":ke("beforetoggle",t),ke("toggle",t),ke("cancel",t),ke("close",t);break;case"iframe":case"object":ke("load",t);break;case"video":case"audio":for(l=0;l<In.length;l++)ke(In[l],t);break;case"image":ke("error",t),ke("load",t);break;case"details":ke("toggle",t);break;case"embed":case"source":case"link":ke("error",t),ke("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in a)if(a.hasOwnProperty(J)&&(l=a[J],l!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,s));default:Fe(t,s,J,l,a,null)}return;default:if(Vc(s)){for(ae in a)a.hasOwnProperty(ae)&&(l=a[ae],l!==void 0&&Ro(t,s,ae,l,a,void 0));return}}for(D in a)a.hasOwnProperty(D)&&(l=a[D],l!=null&&Fe(t,s,D,l,a,null))}function Zg(t,s,a,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,o=null,j=null,D=null,B=null,J=null,ae=null;for(se in a){var ne=a[se];if(a.hasOwnProperty(se)&&ne!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":B=ne;default:l.hasOwnProperty(se)||Fe(t,s,se,null,l,ne)}}for(var K in l){var se=l[K];if(ne=a[K],l.hasOwnProperty(K)&&(se!=null||ne!=null))switch(K){case"type":o=se;break;case"name":c=se;break;case"checked":J=se;break;case"defaultChecked":ae=se;break;case"value":j=se;break;case"defaultValue":D=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(d(137,s));break;default:se!==ne&&Fe(t,s,K,se,l,ne)}}Pc(t,j,D,B,J,ae,o,c);return;case"select":se=j=D=K=null;for(o in a)if(B=a[o],a.hasOwnProperty(o)&&B!=null)switch(o){case"value":break;case"multiple":se=B;default:l.hasOwnProperty(o)||Fe(t,s,o,null,l,B)}for(c in l)if(o=l[c],B=a[c],l.hasOwnProperty(c)&&(o!=null||B!=null))switch(c){case"value":K=o;break;case"defaultValue":D=o;break;case"multiple":j=o;default:o!==B&&Fe(t,s,c,o,l,B)}s=D,a=j,l=se,K!=null?gl(t,!!a,K,!1):!!l!=!!a&&(s!=null?gl(t,!!a,s,!0):gl(t,!!a,a?[]:"",!1));return;case"textarea":se=K=null;for(D in a)if(c=a[D],a.hasOwnProperty(D)&&c!=null&&!l.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:Fe(t,s,D,null,l,c)}for(j in l)if(c=l[j],o=a[j],l.hasOwnProperty(j)&&(c!=null||o!=null))switch(j){case"value":K=c;break;case"defaultValue":se=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(d(91));break;default:c!==o&&Fe(t,s,j,c,l,o)}Xm(t,K,se);return;case"option":for(var pe in a)if(K=a[pe],a.hasOwnProperty(pe)&&K!=null&&!l.hasOwnProperty(pe))switch(pe){case"selected":t.selected=!1;break;default:Fe(t,s,pe,null,l,K)}for(B in l)if(K=l[B],se=a[B],l.hasOwnProperty(B)&&K!==se&&(K!=null||se!=null))switch(B){case"selected":t.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:Fe(t,s,B,K,l,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in a)K=a[be],a.hasOwnProperty(be)&&K!=null&&!l.hasOwnProperty(be)&&Fe(t,s,be,null,l,K);for(J in l)if(K=l[J],se=a[J],l.hasOwnProperty(J)&&K!==se&&(K!=null||se!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(d(137,s));break;default:Fe(t,s,J,K,l,se)}return;default:if(Vc(s)){for(var Pe in a)K=a[Pe],a.hasOwnProperty(Pe)&&K!==void 0&&!l.hasOwnProperty(Pe)&&Ro(t,s,Pe,void 0,l,K);for(ae in l)K=l[ae],se=a[ae],!l.hasOwnProperty(ae)||K===se||K===void 0&&se===void 0||Ro(t,s,ae,K,l,se);return}}for(var V in a)K=a[V],a.hasOwnProperty(V)&&K!=null&&!l.hasOwnProperty(V)&&Fe(t,s,V,null,l,K);for(ne in l)K=l[ne],se=a[ne],!l.hasOwnProperty(ne)||K===se||K==null&&se==null||Fe(t,s,ne,K,l,se)}function Jh(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Jg(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var c=a[l],o=c.transferSize,j=c.initiatorType,D=c.duration;if(o&&D&&Jh(j)){for(j=0,D=c.responseEnd,l+=1;l<a.length;l++){var B=a[l],J=B.startTime;if(J>D)break;var ae=B.transferSize,ne=B.initiatorType;ae&&Jh(ne)&&(B=B.responseEnd,j+=ae*(B<D?1:(D-J)/(B-J)))}if(--l,s+=8*(o+j)/(c.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var zo=null,Lo=null;function Di(t){return t.nodeType===9?t:t.ownerDocument}function Kh(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Wh(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Oo(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Uo=null;function Kg(){var t=window.event;return t&&t.type==="popstate"?t===Uo?!1:(Uo=t,!0):(Uo=null,!1)}var ep=typeof setTimeout=="function"?setTimeout:void 0,Wg=typeof clearTimeout=="function"?clearTimeout:void 0,tp=typeof Promise=="function"?Promise:void 0,eb=typeof queueMicrotask=="function"?queueMicrotask:typeof tp<"u"?function(t){return tp.resolve(null).then(t).catch(tb)}:ep;function tb(t){setTimeout(function(){throw t})}function va(t){return t==="head"}function sp(t,s){var a=s,l=0;do{var c=a.nextSibling;if(t.removeChild(a),c&&c.nodeType===8)if(a=c.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(c),Il(s);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Jn(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Jn(a);for(var o=a.firstChild;o;){var j=o.nextSibling,D=o.nodeName;o[pn]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&o.rel.toLowerCase()==="stylesheet"||a.removeChild(o),o=j}}else a==="body"&&Jn(t.ownerDocument.body);a=c}while(a);Il(s)}function ap(t,s){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function Ho(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ho(a),Gc(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function sb(t,s,a,l){for(;t.nodeType===1;){var c=a;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[pn])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(o=t.getAttribute("rel"),o==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(o!==c.rel||t.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||t.getAttribute("title")!==(c.title==null?null:c.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(o=t.getAttribute("src"),(o!==(c.src==null?null:c.src)||t.getAttribute("type")!==(c.type==null?null:c.type)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&o&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var o=c.name==null?null:""+c.name;if(c.type==="hidden"&&t.getAttribute("name")===o)return t}else return t;if(t=rs(t.nextSibling),t===null)break}return null}function ab(t,s,a){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=rs(t.nextSibling),t===null))return null;return t}function lp(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=rs(t.nextSibling),t===null))return null;return t}function $o(t){return t.data==="$?"||t.data==="$~"}function qo(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function lb(t,s){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||a.readyState!=="loading")s();else{var l=function(){s(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function rs(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var Bo=null;function np(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(s===0)return rs(t.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}t=t.nextSibling}return null}function rp(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return t;s--}else a!=="/$"&&a!=="/&"||s++}t=t.previousSibling}return null}function ip(t,s,a){switch(s=Di(a),t){case"html":if(t=s.documentElement,!t)throw Error(d(452));return t;case"head":if(t=s.head,!t)throw Error(d(453));return t;case"body":if(t=s.body,!t)throw Error(d(454));return t;default:throw Error(d(451))}}function Jn(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Gc(t)}var is=new Map,cp=new Set;function Ri(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Is=P.d;P.d={f:nb,r:rb,D:ib,C:cb,L:db,m:ob,X:ub,S:mb,M:xb};function nb(){var t=Is.f(),s=Si();return t||s}function rb(t){var s=hl(t);s!==null&&s.tag===5&&s.type==="form"?_x(s):Is.r(t)}var Vl=typeof document>"u"?null:document;function dp(t,s,a){var l=Vl;if(l&&typeof s=="string"&&s){var c=Wt(s);c='link[rel="'+t+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),cp.has(c)||(cp.add(c),t={rel:t,crossOrigin:a,href:s},l.querySelector(c)===null&&(s=l.createElement("link"),St(s,"link",t),gt(s),l.head.appendChild(s)))}}function ib(t){Is.D(t),dp("dns-prefetch",t,null)}function cb(t,s){Is.C(t,s),dp("preconnect",t,s)}function db(t,s,a){Is.L(t,s,a);var l=Vl;if(l&&t&&s){var c='link[rel="preload"][as="'+Wt(s)+'"]';s==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+Wt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+Wt(a.imageSizes)+'"]')):c+='[href="'+Wt(t)+'"]';var o=c;switch(s){case"style":o=Xl(t);break;case"script":o=Ql(t)}is.has(o)||(t=v({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:t,as:s},a),is.set(o,t),l.querySelector(c)!==null||s==="style"&&l.querySelector(Kn(o))||s==="script"&&l.querySelector(Wn(o))||(s=l.createElement("link"),St(s,"link",t),gt(s),l.head.appendChild(s)))}}function ob(t,s){Is.m(t,s);var a=Vl;if(a&&t){var l=s&&typeof s.as=="string"?s.as:"script",c='link[rel="modulepreload"][as="'+Wt(l)+'"][href="'+Wt(t)+'"]',o=c;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Ql(t)}if(!is.has(o)&&(t=v({rel:"modulepreload",href:t},s),is.set(o,t),a.querySelector(c)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Wn(o)))return}l=a.createElement("link"),St(l,"link",t),gt(l),a.head.appendChild(l)}}}function mb(t,s,a){Is.S(t,s,a);var l=Vl;if(l&&t){var c=pl(l).hoistableStyles,o=Xl(t);s=s||"default";var j=c.get(o);if(!j){var D={loading:0,preload:null};if(j=l.querySelector(Kn(o)))D.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":s},a),(a=is.get(o))&&Go(t,a);var B=j=l.createElement("link");gt(B),St(B,"link",t),B._p=new Promise(function(J,ae){B.onload=J,B.onerror=ae}),B.addEventListener("load",function(){D.loading|=1}),B.addEventListener("error",function(){D.loading|=2}),D.loading|=4,zi(j,s,l)}j={type:"stylesheet",instance:j,count:1,state:D},c.set(o,j)}}}function ub(t,s){Is.X(t,s);var a=Vl;if(a&&t){var l=pl(a).hoistableScripts,c=Ql(t),o=l.get(c);o||(o=a.querySelector(Wn(c)),o||(t=v({src:t,async:!0},s),(s=is.get(c))&&Fo(t,s),o=a.createElement("script"),gt(o),St(o,"link",t),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},l.set(c,o))}}function xb(t,s){Is.M(t,s);var a=Vl;if(a&&t){var l=pl(a).hoistableScripts,c=Ql(t),o=l.get(c);o||(o=a.querySelector(Wn(c)),o||(t=v({src:t,async:!0,type:"module"},s),(s=is.get(c))&&Fo(t,s),o=a.createElement("script"),gt(o),St(o,"link",t),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},l.set(c,o))}}function op(t,s,a,l){var c=(c=je.current)?Ri(c):null;if(!c)throw Error(d(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Xl(a.href),a=pl(c).hoistableStyles,l=a.get(s),l||(l={type:"style",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=Xl(a.href);var o=pl(c).hoistableStyles,j=o.get(t);if(j||(c=c.ownerDocument||c,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(t,j),(o=c.querySelector(Kn(t)))&&!o._p&&(j.instance=o,j.state.loading=5),is.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},is.set(t,a),o||hb(c,t,a,j.state))),s&&l===null)throw Error(d(528,""));return j}if(s&&l!==null)throw Error(d(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ql(a),a=pl(c).hoistableScripts,l=a.get(s),l||(l={type:"script",instance:null,count:0,state:null},a.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,t))}}function Xl(t){return'href="'+Wt(t)+'"'}function Kn(t){return'link[rel="stylesheet"]['+t+"]"}function mp(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function hb(t,s,a,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),St(s,"link",a),gt(s),t.head.appendChild(s))}function Ql(t){return'[src="'+Wt(t)+'"]'}function Wn(t){return"script[async]"+t}function up(t,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+Wt(a.href)+'"]');if(l)return s.instance=l,gt(l),l;var c=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),gt(l),St(l,"style",c),zi(l,a.precedence,t),s.instance=l;case"stylesheet":c=Xl(a.href);var o=t.querySelector(Kn(c));if(o)return s.state.loading|=4,s.instance=o,gt(o),o;l=mp(a),(c=is.get(c))&&Go(l,c),o=(t.ownerDocument||t).createElement("link"),gt(o);var j=o;return j._p=new Promise(function(D,B){j.onload=D,j.onerror=B}),St(o,"link",l),s.state.loading|=4,zi(o,a.precedence,t),s.instance=o;case"script":return o=Ql(a.src),(c=t.querySelector(Wn(o)))?(s.instance=c,gt(c),c):(l=a,(c=is.get(o))&&(l=v({},a),Fo(l,c)),t=t.ownerDocument||t,c=t.createElement("script"),gt(c),St(c,"link",l),t.head.appendChild(c),s.instance=c);case"void":return null;default:throw Error(d(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,zi(l,a.precedence,t));return s.instance}function zi(t,s,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=l.length?l[l.length-1]:null,o=c,j=0;j<l.length;j++){var D=l[j];if(D.dataset.precedence===s)o=D;else if(o!==c)break}o?o.parentNode.insertBefore(t,o.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(t,s.firstChild))}function Go(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Fo(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Li=null;function xp(t,s,a){if(Li===null){var l=new Map,c=Li=new Map;c.set(a,l)}else c=Li,l=c.get(a),l||(l=new Map,c.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),c=0;c<a.length;c++){var o=a[c];if(!(o[pn]||o[yt]||t==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var j=o.getAttribute(s)||"";j=t+j;var D=l.get(j);D?D.push(o):l.set(j,[o])}}return l}function hp(t,s,a){t=t.ownerDocument||t,t.head.insertBefore(a,s==="title"?t.querySelector("head > title"):null)}function pb(t,s,a){if(a===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function pp(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function fb(t,s,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var c=Xl(l.href),o=s.querySelector(Kn(c));if(o){s=o._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Oi.bind(t),s.then(t,t)),a.state.loading|=4,a.instance=o,gt(o);return}o=s.ownerDocument||s,l=mp(l),(c=is.get(c))&&Go(l,c),o=o.createElement("link"),gt(o);var j=o;j._p=new Promise(function(D,B){j.onload=D,j.onerror=B}),St(o,"link",l),a.instance=o}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Oi.bind(t),s.addEventListener("load",a),s.addEventListener("error",a))}}var Po=0;function gb(t,s){return t.stylesheets&&t.count===0&&Hi(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Hi(t,t.stylesheets),t.unsuspend){var o=t.unsuspend;t.unsuspend=null,o()}},6e4+s);0<t.imgBytes&&Po===0&&(Po=62500*Jg());var c=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Hi(t,t.stylesheets),t.unsuspend)){var o=t.unsuspend;t.unsuspend=null,o()}},(t.imgBytes>Po?50:800)+s);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(c)}}:null}function Oi(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Hi(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ui=null;function Hi(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ui=new Map,s.forEach(bb,t),Ui=null,Oi.call(t))}function bb(t,s){if(!(s.state.loading&4)){var a=Ui.get(t);if(a)var l=a.get(null);else{a=new Map,Ui.set(t,a);for(var c=t.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<c.length;o++){var j=c[o];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(a.set(j.dataset.precedence,j),l=j)}l&&a.set(null,l)}c=s.instance,j=c.getAttribute("data-precedence"),o=a.get(j)||l,o===l&&a.set(null,c),a.set(j,c),this.count++,l=Oi.bind(this),c.addEventListener("load",l),c.addEventListener("error",l),o?o.parentNode.insertBefore(c,o.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(c,t.firstChild)),s.state.loading|=4}}var er={$$typeof:k,Provider:null,Consumer:null,_currentValue:re,_currentValue2:re,_threadCount:0};function jb(t,s,a,l,c,o,j,D,B){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hc(0),this.hiddenUpdates=Hc(null),this.identifierPrefix=l,this.onUncaughtError=c,this.onCaughtError=o,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function fp(t,s,a,l,c,o,j,D,B,J,ae,ne){return t=new jb(t,s,a,j,B,J,ae,ne,D),s=1,o===!0&&(s|=24),o=Yt(3,null,null,s),t.current=o,o.stateNode=t,s=vd(),s.refCount++,t.pooledCache=s,s.refCount++,o.memoizedState={element:l,isDehydrated:a,cache:s},Cd(o),t}function gp(t){return t?(t=_l,t):_l}function bp(t,s,a,l,c,o){c=gp(c),l.context===null?l.context=c:l.pendingContext=c,l=ma(s),l.payload={element:a},o=o===void 0?null:o,o!==null&&(l.callback=o),a=ua(t,l,s),a!==null&&(qt(a,t,s),Dn(a,t,s))}function jp(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<s?a:s}}function Yo(t,s){jp(t,s),(t=t.alternate)&&jp(t,s)}function yp(t){if(t.tag===13||t.tag===31){var s=Ga(t,67108864);s!==null&&qt(s,t,67108864),Yo(t,67108864)}}function Np(t){if(t.tag===13||t.tag===31){var s=Zt();s=$c(s);var a=Ga(t,s);a!==null&&qt(a,t,s),Yo(t,s)}}var $i=!0;function yb(t,s,a,l){var c=O.T;O.T=null;var o=P.p;try{P.p=2,Vo(t,s,a,l)}finally{P.p=o,O.T=c}}function Nb(t,s,a,l){var c=O.T;O.T=null;var o=P.p;try{P.p=8,Vo(t,s,a,l)}finally{P.p=o,O.T=c}}function Vo(t,s,a,l){if($i){var c=Xo(l);if(c===null)Do(t,s,l,qi,a),wp(t,l);else if(wb(c,t,s,a,l))l.stopPropagation();else if(wp(t,l),s&4&&-1<vb.indexOf(t)){for(;c!==null;){var o=hl(c);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var j=Ua(o.pendingLanes);if(j!==0){var D=o;for(D.pendingLanes|=2,D.entangledLanes|=2;j;){var B=1<<31-Le(j);D.entanglements[1]|=B,j&=~B}Cs(o),(Oe&6)===0&&(vi=Et()+500,Qn(0))}}break;case 31:case 13:D=Ga(o,2),D!==null&&qt(D,o,2),Si(),Yo(o,2)}if(o=Xo(l),o===null&&Do(t,s,l,qi,a),o===c)break;c=o}c!==null&&l.stopPropagation()}else Do(t,s,l,null,a)}}function Xo(t){return t=Qc(t),Qo(t)}var qi=null;function Qo(t){if(qi=null,t=xl(t),t!==null){var s=u(t);if(s===null)t=null;else{var a=s.tag;if(a===13){if(t=x(s),t!==null)return t;t=null}else if(a===31){if(t=p(s),t!==null)return t;t=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return qi=t,null}function vp(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Lc()){case kr:return 2;case Ar:return 8;case ol:case Mr:return 32;case ml:return 268435456;default:return 32}default:return 32}}var Io=!1,wa=null,Sa=null,_a=null,tr=new Map,sr=new Map,Ca=[],vb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wp(t,s){switch(t){case"focusin":case"focusout":wa=null;break;case"dragenter":case"dragleave":Sa=null;break;case"mouseover":case"mouseout":_a=null;break;case"pointerover":case"pointerout":tr.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":sr.delete(s.pointerId)}}function ar(t,s,a,l,c,o){return t===null||t.nativeEvent!==o?(t={blockedOn:s,domEventName:a,eventSystemFlags:l,nativeEvent:o,targetContainers:[c]},s!==null&&(s=hl(s),s!==null&&yp(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,c!==null&&s.indexOf(c)===-1&&s.push(c),t)}function wb(t,s,a,l,c){switch(s){case"focusin":return wa=ar(wa,t,s,a,l,c),!0;case"dragenter":return Sa=ar(Sa,t,s,a,l,c),!0;case"mouseover":return _a=ar(_a,t,s,a,l,c),!0;case"pointerover":var o=c.pointerId;return tr.set(o,ar(tr.get(o)||null,t,s,a,l,c)),!0;case"gotpointercapture":return o=c.pointerId,sr.set(o,ar(sr.get(o)||null,t,s,a,l,c)),!0}return!1}function Sp(t){var s=xl(t.target);if(s!==null){var a=u(s);if(a!==null){if(s=a.tag,s===13){if(s=x(a),s!==null){t.blockedOn=s,Hm(t.priority,function(){Np(a)});return}}else if(s===31){if(s=p(a),s!==null){t.blockedOn=s,Hm(t.priority,function(){Np(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Bi(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var a=Xo(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Xc=l,a.target.dispatchEvent(l),Xc=null}else return s=hl(a),s!==null&&yp(s),t.blockedOn=a,!1;s.shift()}return!0}function _p(t,s,a){Bi(t)&&a.delete(s)}function Sb(){Io=!1,wa!==null&&Bi(wa)&&(wa=null),Sa!==null&&Bi(Sa)&&(Sa=null),_a!==null&&Bi(_a)&&(_a=null),tr.forEach(_p),sr.forEach(_p)}function Gi(t,s){t.blockedOn===s&&(t.blockedOn=null,Io||(Io=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Sb)))}var Fi=null;function Cp(t){Fi!==t&&(Fi=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Fi===t&&(Fi=null);for(var s=0;s<t.length;s+=3){var a=t[s],l=t[s+1],c=t[s+2];if(typeof l!="function"){if(Qo(l||a)===null)continue;break}var o=hl(a);o!==null&&(t.splice(s,3),s-=3,Vd(o,{pending:!0,data:c,method:a.method,action:l},l,c))}}))}function Il(t){function s(B){return Gi(B,t)}wa!==null&&Gi(wa,t),Sa!==null&&Gi(Sa,t),_a!==null&&Gi(_a,t),tr.forEach(s),sr.forEach(s);for(var a=0;a<Ca.length;a++){var l=Ca[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Ca.length&&(a=Ca[0],a.blockedOn===null);)Sp(a),a.blockedOn===null&&Ca.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var c=a[l],o=a[l+1],j=c[zt]||null;if(typeof o=="function")j||Cp(a);else if(j){var D=null;if(o&&o.hasAttribute("formAction")){if(c=o,j=o[zt]||null)D=j.formAction;else if(Qo(c)!==null)continue}else D=j.action;typeof D=="function"?a[l+1]=D:(a.splice(l,3),l-=3),Cp(a)}}}function kp(){function t(o){o.canIntercept&&o.info==="react-transition"&&o.intercept({handler:function(){return new Promise(function(j){return c=j})},focusReset:"manual",scroll:"manual"})}function s(){c!==null&&(c(),c=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var o=navigation.currentEntry;o&&o.url!=null&&navigation.navigate(o.url,{state:o.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,c=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),c!==null&&(c(),c=null)}}}function Zo(t){this._internalRoot=t}Pi.prototype.render=Zo.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(d(409));var a=s.current,l=Zt();bp(a,l,t,s,null,null)},Pi.prototype.unmount=Zo.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;bp(t.current,2,null,t,null,null),Si(),s[ul]=null}};function Pi(t){this._internalRoot=t}Pi.prototype.unstable_scheduleHydration=function(t){if(t){var s=Um();t={blockedOn:null,target:t,priority:s};for(var a=0;a<Ca.length&&s!==0&&s<Ca[a].priority;a++);Ca.splice(a,0,t),a===0&&Sp(t)}};var Ap=r.version;if(Ap!=="19.2.0")throw Error(d(527,Ap,"19.2.0"));P.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(d(188)):(t=Object.keys(t).join(","),Error(d(268,t)));return t=g(s),t=t!==null?h(t):null,t=t===null?null:t.stateNode,t};var _b={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yi.isDisabled&&Yi.supportsFiber)try{Oa=Yi.inject(_b),L=Yi}catch{}}return nr.createRoot=function(t,s){if(!m(t))throw Error(d(299));var a=!1,l="",c=Lx,o=Ox,j=Ux;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(c=s.onUncaughtError),s.onCaughtError!==void 0&&(o=s.onCaughtError),s.onRecoverableError!==void 0&&(j=s.onRecoverableError)),s=fp(t,1,!1,null,null,a,l,null,c,o,j,kp),t[ul]=s.current,To(t),new Zo(s)},nr.hydrateRoot=function(t,s,a){if(!m(t))throw Error(d(299));var l=!1,c="",o=Lx,j=Ox,D=Ux,B=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(o=a.onUncaughtError),a.onCaughtError!==void 0&&(j=a.onCaughtError),a.onRecoverableError!==void 0&&(D=a.onRecoverableError),a.formState!==void 0&&(B=a.formState)),s=fp(t,1,!0,s,a??null,l,c,B,o,j,D,kp),s.context=gp(null),a=s.current,l=Zt(),l=$c(l),c=ma(l),c.callback=null,ua(a,c,l),a=l,s.current.lanes=a,hn(s,a),Cs(s),t[ul]=s.current,To(t),new Pi(s)},nr.version="19.2.0",nr}var Hp;function Ob(){if(Hp)return Wo.exports;Hp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),Wo.exports=Lb(),Wo.exports}var Ub=Ob();var $p="popstate";function Hb(n={}){function r(d,m){let{pathname:u,search:x,hash:p}=d.location;return dm("",{pathname:u,search:x,hash:p},m.state&&m.state.usr||null,m.state&&m.state.key||"default")}function i(d,m){return typeof m=="string"?m:hr(m)}return qb(r,i,null,n)}function et(n,r){if(n===!1||n===null||typeof n>"u")throw new Error(r)}function Jt(n,r){if(!n){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function $b(){return Math.random().toString(36).substring(2,10)}function qp(n,r){return{usr:n.state,key:n.key,idx:r}}function dm(n,r,i=null,d){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof r=="string"?an(r):r,state:i,key:r&&r.key||d||$b()}}function hr({pathname:n="/",search:r="",hash:i=""}){return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(n+=i.charAt(0)==="#"?i:"#"+i),n}function an(n){let r={};if(n){let i=n.indexOf("#");i>=0&&(r.hash=n.substring(i),n=n.substring(0,i));let d=n.indexOf("?");d>=0&&(r.search=n.substring(d),n=n.substring(0,d)),n&&(r.pathname=n)}return r}function qb(n,r,i,d={}){let{window:m=document.defaultView,v5Compat:u=!1}=d,x=m.history,p="POP",b=null,g=h();g==null&&(g=0,x.replaceState({...x.state,idx:g},""));function h(){return(x.state||{idx:null}).idx}function v(){p="POP";let R=h(),C=R==null?null:R-g;g=R,b&&b({action:p,location:M.location,delta:C})}function w(R,C){p="PUSH";let y=dm(M.location,R,C);g=h()+1;let k=qp(y,g),_=M.createHref(y);try{x.pushState(k,"",_)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;m.location.assign(_)}u&&b&&b({action:p,location:M.location,delta:1})}function A(R,C){p="REPLACE";let y=dm(M.location,R,C);g=h();let k=qp(y,g),_=M.createHref(y);x.replaceState(k,"",_),u&&b&&b({action:p,location:M.location,delta:0})}function T(R){return Bb(R)}let M={get action(){return p},get location(){return n(m,x)},listen(R){if(b)throw new Error("A history only accepts one active listener");return m.addEventListener($p,v),b=R,()=>{m.removeEventListener($p,v),b=null}},createHref(R){return r(m,R)},createURL:T,encodeLocation(R){let C=T(R);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:w,replace:A,go(R){return x.go(R)}};return M}function Bb(n,r=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),et(i,"No window.location.(origin|href) available to create URL");let d=typeof n=="string"?n:hr(n);return d=d.replace(/ $/,"%20"),!r&&d.startsWith("//")&&(d=i+d),new URL(d,i)}function f0(n,r,i="/"){return Gb(n,r,i,!1)}function Gb(n,r,i,d){let m=typeof r=="string"?an(r):r,u=Ws(m.pathname||"/",i);if(u==null)return null;let x=g0(n);Fb(x);let p=null;for(let b=0;p==null&&b<x.length;++b){let g=ej(u);p=Kb(x[b],g,d)}return p}function g0(n,r=[],i=[],d="",m=!1){let u=(x,p,b=m,g)=>{let h={relativePath:g===void 0?x.path||"":g,caseSensitive:x.caseSensitive===!0,childrenIndex:p,route:x};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(d)&&b)return;et(h.relativePath.startsWith(d),`Absolute route path "${h.relativePath}" nested under path "${d}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(d.length)}let v=Zs([d,h.relativePath]),w=i.concat(h);x.children&&x.children.length>0&&(et(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),g0(x.children,r,w,v,b)),!(x.path==null&&!x.index)&&r.push({path:v,score:Zb(v,x.index),routesMeta:w})};return n.forEach((x,p)=>{if(x.path===""||!x.path?.includes("?"))u(x,p);else for(let b of b0(x.path))u(x,p,!0,b)}),r}function b0(n){let r=n.split("/");if(r.length===0)return[];let[i,...d]=r,m=i.endsWith("?"),u=i.replace(/\?$/,"");if(d.length===0)return m?[u,""]:[u];let x=b0(d.join("/")),p=[];return p.push(...x.map(b=>b===""?u:[u,b].join("/"))),m&&p.push(...x),p.map(b=>n.startsWith("/")&&b===""?"/":b)}function Fb(n){n.sort((r,i)=>r.score!==i.score?i.score-r.score:Jb(r.routesMeta.map(d=>d.childrenIndex),i.routesMeta.map(d=>d.childrenIndex)))}var Pb=/^:[\w-]+$/,Yb=3,Vb=2,Xb=1,Qb=10,Ib=-2,Bp=n=>n==="*";function Zb(n,r){let i=n.split("/"),d=i.length;return i.some(Bp)&&(d+=Ib),r&&(d+=Vb),i.filter(m=>!Bp(m)).reduce((m,u)=>m+(Pb.test(u)?Yb:u===""?Xb:Qb),d)}function Jb(n,r){return n.length===r.length&&n.slice(0,-1).every((d,m)=>d===r[m])?n[n.length-1]-r[r.length-1]:0}function Kb(n,r,i=!1){let{routesMeta:d}=n,m={},u="/",x=[];for(let p=0;p<d.length;++p){let b=d[p],g=p===d.length-1,h=u==="/"?r:r.slice(u.length)||"/",v=gc({path:b.relativePath,caseSensitive:b.caseSensitive,end:g},h),w=b.route;if(!v&&g&&i&&!d[d.length-1].route.index&&(v=gc({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},h)),!v)return null;Object.assign(m,v.params),x.push({params:m,pathname:Zs([u,v.pathname]),pathnameBase:nj(Zs([u,v.pathnameBase])),route:w}),v.pathnameBase!=="/"&&(u=Zs([u,v.pathnameBase]))}return x}function gc(n,r){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[i,d]=Wb(n.path,n.caseSensitive,n.end),m=r.match(i);if(!m)return null;let u=m[0],x=u.replace(/(.)\/+$/,"$1"),p=m.slice(1);return{params:d.reduce((g,{paramName:h,isOptional:v},w)=>{if(h==="*"){let T=p[w]||"";x=u.slice(0,u.length-T.length).replace(/(.)\/+$/,"$1")}const A=p[w];return v&&!A?g[h]=void 0:g[h]=(A||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:x,pattern:n}}function Wb(n,r=!1,i=!0){Jt(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let d=[],m="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(x,p,b)=>(d.push({paramName:p,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(d.push({paramName:"*"}),m+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?m+="\\/*$":n!==""&&n!=="/"&&(m+="(?:(?=\\/|$))"),[new RegExp(m,r?void 0:"i"),d]}function ej(n){try{return n.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Jt(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),n}}function Ws(n,r){if(r==="/")return n;if(!n.toLowerCase().startsWith(r.toLowerCase()))return null;let i=r.endsWith("/")?r.length-1:r.length,d=n.charAt(i);return d&&d!=="/"?null:n.slice(i)||"/"}var tj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sj=n=>tj.test(n);function aj(n,r="/"){let{pathname:i,search:d="",hash:m=""}=typeof n=="string"?an(n):n,u;if(i)if(sj(i))u=i;else{if(i.includes("//")){let x=i;i=i.replace(/\/\/+/g,"/"),Jt(!1,`Pathnames cannot have embedded double slashes - normalizing ${x} -> ${i}`)}i.startsWith("/")?u=Gp(i.substring(1),"/"):u=Gp(i,r)}else u=r;return{pathname:u,search:rj(d),hash:ij(m)}}function Gp(n,r){let i=r.replace(/\/+$/,"").split("/");return n.split("/").forEach(m=>{m===".."?i.length>1&&i.pop():m!=="."&&i.push(m)}),i.length>1?i.join("/"):"/"}function am(n,r,i,d){return`Cannot include a '${n}' character in a manually specified \`to.${r}\` field [${JSON.stringify(d)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function lj(n){return n.filter((r,i)=>i===0||r.route.path&&r.route.path.length>0)}function ym(n){let r=lj(n);return r.map((i,d)=>d===r.length-1?i.pathname:i.pathnameBase)}function Nm(n,r,i,d=!1){let m;typeof n=="string"?m=an(n):(m={...n},et(!m.pathname||!m.pathname.includes("?"),am("?","pathname","search",m)),et(!m.pathname||!m.pathname.includes("#"),am("#","pathname","hash",m)),et(!m.search||!m.search.includes("#"),am("#","search","hash",m)));let u=n===""||m.pathname==="",x=u?"/":m.pathname,p;if(x==null)p=i;else{let v=r.length-1;if(!d&&x.startsWith("..")){let w=x.split("/");for(;w[0]==="..";)w.shift(),v-=1;m.pathname=w.join("/")}p=v>=0?r[v]:"/"}let b=aj(m,p),g=x&&x!=="/"&&x.endsWith("/"),h=(u||x===".")&&i.endsWith("/");return!b.pathname.endsWith("/")&&(g||h)&&(b.pathname+="/"),b}var Zs=n=>n.join("/").replace(/\/\/+/g,"/"),nj=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),rj=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,ij=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function cj(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var j0=["POST","PUT","PATCH","DELETE"];new Set(j0);var dj=["GET",...j0];new Set(dj);var ln=f.createContext(null);ln.displayName="DataRouter";var Nc=f.createContext(null);Nc.displayName="DataRouterState";f.createContext(!1);var y0=f.createContext({isTransitioning:!1});y0.displayName="ViewTransition";var oj=f.createContext(new Map);oj.displayName="Fetchers";var mj=f.createContext(null);mj.displayName="Await";var ys=f.createContext(null);ys.displayName="Navigation";var fr=f.createContext(null);fr.displayName="Location";var us=f.createContext({outlet:null,matches:[],isDataRoute:!1});us.displayName="Route";var vm=f.createContext(null);vm.displayName="RouteError";function uj(n,{relative:r}={}){et(nn(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:d}=f.useContext(ys),{hash:m,pathname:u,search:x}=gr(n,{relative:r}),p=u;return i!=="/"&&(p=u==="/"?i:Zs([i,u])),d.createHref({pathname:p,search:x,hash:m})}function nn(){return f.useContext(fr)!=null}function xs(){return et(nn(),"useLocation() may be used only in the context of a <Router> component."),f.useContext(fr).location}var N0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function v0(n){f.useContext(ys).static||f.useLayoutEffect(n)}function ft(){let{isDataRoute:n}=f.useContext(us);return n?kj():xj()}function xj(){et(nn(),"useNavigate() may be used only in the context of a <Router> component.");let n=f.useContext(ln),{basename:r,navigator:i}=f.useContext(ys),{matches:d}=f.useContext(us),{pathname:m}=xs(),u=JSON.stringify(ym(d)),x=f.useRef(!1);return v0(()=>{x.current=!0}),f.useCallback((b,g={})=>{if(Jt(x.current,N0),!x.current)return;if(typeof b=="number"){i.go(b);return}let h=Nm(b,JSON.parse(u),m,g.relative==="path");n==null&&r!=="/"&&(h.pathname=h.pathname==="/"?r:Zs([r,h.pathname])),(g.replace?i.replace:i.push)(h,g.state,g)},[r,i,u,m,n])}var hj=f.createContext(null);function pj(n){let r=f.useContext(us).outlet;return f.useMemo(()=>r&&f.createElement(hj.Provider,{value:n},r),[r,n])}function w0(){let{matches:n}=f.useContext(us),r=n[n.length-1];return r?r.params:{}}function gr(n,{relative:r}={}){let{matches:i}=f.useContext(us),{pathname:d}=xs(),m=JSON.stringify(ym(i));return f.useMemo(()=>Nm(n,JSON.parse(m),d,r==="path"),[n,m,d,r])}function fj(n,r){return S0(n,r)}function S0(n,r,i,d,m){et(nn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=f.useContext(ys),{matches:x}=f.useContext(us),p=x[x.length-1],b=p?p.params:{},g=p?p.pathname:"/",h=p?p.pathnameBase:"/",v=p&&p.route;{let y=v&&v.path||"";_0(g,!v||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let w=xs(),A;if(r){let y=typeof r=="string"?an(r):r;et(h==="/"||y.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${y.pathname}" was given in the \`location\` prop.`),A=y}else A=w;let T=A.pathname||"/",M=T;if(h!=="/"){let y=h.replace(/^\//,"").split("/");M="/"+T.replace(/^\//,"").split("/").slice(y.length).join("/")}let R=f0(n,{pathname:M});Jt(v||R!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),Jt(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=Nj(R&&R.map(y=>Object.assign({},y,{params:Object.assign({},b,y.params),pathname:Zs([h,u.encodeLocation?u.encodeLocation(y.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?h:Zs([h,u.encodeLocation?u.encodeLocation(y.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:y.pathnameBase])})),x,i,d,m);return r&&C?f.createElement(fr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},C):C}function gj(){let n=Cj(),r=cj(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),i=n instanceof Error?n.stack:null,d="rgba(200,200,200, 0.5)",m={padding:"0.5rem",backgroundColor:d},u={padding:"2px 4px",backgroundColor:d},x=null;return console.error("Error handled by React Router default ErrorBoundary:",n),x=f.createElement(f.Fragment,null,f.createElement("p",null," Hey developer "),f.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",f.createElement("code",{style:u},"ErrorBoundary")," or"," ",f.createElement("code",{style:u},"errorElement")," prop on your route.")),f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},r),i?f.createElement("pre",{style:m},i):null,x)}var bj=f.createElement(gj,null),jj=class extends f.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,r){return r.location!==n.location||r.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:r.error,location:r.location,revalidation:n.revalidation||r.revalidation}}componentDidCatch(n,r){this.props.onError?this.props.onError(n,r):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?f.createElement(us.Provider,{value:this.props.routeContext},f.createElement(vm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function yj({routeContext:n,match:r,children:i}){let d=f.useContext(ln);return d&&d.static&&d.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(d.staticContext._deepestRenderedBoundaryId=r.route.id),f.createElement(us.Provider,{value:n},i)}function Nj(n,r=[],i=null,d=null,m=null){if(n==null){if(!i)return null;if(i.errors)n=i.matches;else if(r.length===0&&!i.initialized&&i.matches.length>0)n=i.matches;else return null}let u=n,x=i?.errors;if(x!=null){let h=u.findIndex(v=>v.route.id&&x?.[v.route.id]!==void 0);et(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),u=u.slice(0,Math.min(u.length,h+1))}let p=!1,b=-1;if(i)for(let h=0;h<u.length;h++){let v=u[h];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(b=h),v.route.id){let{loaderData:w,errors:A}=i,T=v.route.loader&&!w.hasOwnProperty(v.route.id)&&(!A||A[v.route.id]===void 0);if(v.route.lazy||T){p=!0,b>=0?u=u.slice(0,b+1):u=[u[0]];break}}}let g=i&&d?(h,v)=>{d(h,{location:i.location,params:i.matches?.[0]?.params??{},errorInfo:v})}:void 0;return u.reduceRight((h,v,w)=>{let A,T=!1,M=null,R=null;i&&(A=x&&v.route.id?x[v.route.id]:void 0,M=v.route.errorElement||bj,p&&(b<0&&w===0?(_0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),T=!0,R=null):b===w&&(T=!0,R=v.route.hydrateFallbackElement||null)));let C=r.concat(u.slice(0,w+1)),y=()=>{let k;return A?k=M:T?k=R:v.route.Component?k=f.createElement(v.route.Component,null):v.route.element?k=v.route.element:k=h,f.createElement(yj,{match:v,routeContext:{outlet:h,matches:C,isDataRoute:i!=null},children:k})};return i&&(v.route.ErrorBoundary||v.route.errorElement||w===0)?f.createElement(jj,{location:i.location,revalidation:i.revalidation,component:M,error:A,children:y(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:g}):y()},null)}function wm(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vj(n){let r=f.useContext(ln);return et(r,wm(n)),r}function wj(n){let r=f.useContext(Nc);return et(r,wm(n)),r}function Sj(n){let r=f.useContext(us);return et(r,wm(n)),r}function Sm(n){let r=Sj(n),i=r.matches[r.matches.length-1];return et(i.route.id,`${n} can only be used on routes that contain a unique "id"`),i.route.id}function _j(){return Sm("useRouteId")}function Cj(){let n=f.useContext(vm),r=wj("useRouteError"),i=Sm("useRouteError");return n!==void 0?n:r.errors?.[i]}function kj(){let{router:n}=vj("useNavigate"),r=Sm("useNavigate"),i=f.useRef(!1);return v0(()=>{i.current=!0}),f.useCallback(async(m,u={})=>{Jt(i.current,N0),i.current&&(typeof m=="number"?n.navigate(m):await n.navigate(m,{fromRouteId:r,...u}))},[n,r])}var Fp={};function _0(n,r,i){!r&&!Fp[n]&&(Fp[n]=!0,Jt(!1,i))}f.memo(Aj);function Aj({routes:n,future:r,state:i,unstable_onError:d}){return S0(n,void 0,i,d,r)}function As({to:n,replace:r,state:i,relative:d}){et(nn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:m}=f.useContext(ys);Jt(!m,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=f.useContext(us),{pathname:x}=xs(),p=ft(),b=Nm(n,ym(u),x,d==="path"),g=JSON.stringify(b);return f.useEffect(()=>{p(JSON.parse(g),{replace:r,state:i,relative:d})},[p,g,d,r,i]),null}function Mj(n){return pj(n.context)}function me(n){et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ej({basename:n="/",children:r=null,location:i,navigationType:d="POP",navigator:m,static:u=!1}){et(!nn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let x=n.replace(/^\/*/,"/"),p=f.useMemo(()=>({basename:x,navigator:m,static:u,future:{}}),[x,m,u]);typeof i=="string"&&(i=an(i));let{pathname:b="/",search:g="",hash:h="",state:v=null,key:w="default"}=i,A=f.useMemo(()=>{let T=Ws(b,x);return T==null?null:{location:{pathname:T,search:g,hash:h,state:v,key:w},navigationType:d}},[x,b,g,h,v,w,d]);return Jt(A!=null,`<Router basename="${x}"> is not able to match the URL "${b}${g}${h}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:f.createElement(ys.Provider,{value:p},f.createElement(fr.Provider,{children:r,value:A}))}function Tj({children:n,location:r}){return fj(om(n),r)}function om(n,r=[]){let i=[];return f.Children.forEach(n,(d,m)=>{if(!f.isValidElement(d))return;let u=[...r,m];if(d.type===f.Fragment){i.push.apply(i,om(d.props.children,u));return}et(d.type===me,`[${typeof d.type=="string"?d.type:d.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),et(!d.props.index||!d.props.children,"An index route cannot have child routes.");let x={id:d.props.id||u.join("-"),caseSensitive:d.props.caseSensitive,element:d.props.element,Component:d.props.Component,index:d.props.index,path:d.props.path,middleware:d.props.middleware,loader:d.props.loader,action:d.props.action,hydrateFallbackElement:d.props.hydrateFallbackElement,HydrateFallback:d.props.HydrateFallback,errorElement:d.props.errorElement,ErrorBoundary:d.props.ErrorBoundary,hasErrorBoundary:d.props.hasErrorBoundary===!0||d.props.ErrorBoundary!=null||d.props.errorElement!=null,shouldRevalidate:d.props.shouldRevalidate,handle:d.props.handle,lazy:d.props.lazy};d.props.children&&(x.children=om(d.props.children,u)),i.push(x)}),i}var ic="get",cc="application/x-www-form-urlencoded";function vc(n){return n!=null&&typeof n.tagName=="string"}function Dj(n){return vc(n)&&n.tagName.toLowerCase()==="button"}function Rj(n){return vc(n)&&n.tagName.toLowerCase()==="form"}function zj(n){return vc(n)&&n.tagName.toLowerCase()==="input"}function Lj(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Oj(n,r){return n.button===0&&(!r||r==="_self")&&!Lj(n)}function mm(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((r,i)=>{let d=n[i];return r.concat(Array.isArray(d)?d.map(m=>[i,m]):[[i,d]])},[]))}function Uj(n,r){let i=mm(n);return r&&r.forEach((d,m)=>{i.has(m)||r.getAll(m).forEach(u=>{i.append(m,u)})}),i}var Xi=null;function Hj(){if(Xi===null)try{new FormData(document.createElement("form"),0),Xi=!1}catch{Xi=!0}return Xi}var $j=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function lm(n){return n!=null&&!$j.has(n)?(Jt(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${cc}"`),null):n}function qj(n,r){let i,d,m,u,x;if(Rj(n)){let p=n.getAttribute("action");d=p?Ws(p,r):null,i=n.getAttribute("method")||ic,m=lm(n.getAttribute("enctype"))||cc,u=new FormData(n)}else if(Dj(n)||zj(n)&&(n.type==="submit"||n.type==="image")){let p=n.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=n.getAttribute("formaction")||p.getAttribute("action");if(d=b?Ws(b,r):null,i=n.getAttribute("formmethod")||p.getAttribute("method")||ic,m=lm(n.getAttribute("formenctype"))||lm(p.getAttribute("enctype"))||cc,u=new FormData(p,n),!Hj()){let{name:g,type:h,value:v}=n;if(h==="image"){let w=g?`${g}.`:"";u.append(`${w}x`,"0"),u.append(`${w}y`,"0")}else g&&u.append(g,v)}}else{if(vc(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=ic,d=null,m=cc,x=n}return u&&m==="text/plain"&&(x=u,u=void 0),{action:d,method:i.toLowerCase(),encType:m,formData:u,body:x}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function _m(n,r){if(n===!1||n===null||typeof n>"u")throw new Error(r)}function Bj(n,r,i){let d=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return d.pathname==="/"?d.pathname=`_root.${i}`:r&&Ws(d.pathname,r)==="/"?d.pathname=`${r.replace(/\/$/,"")}/_root.${i}`:d.pathname=`${d.pathname.replace(/\/$/,"")}.${i}`,d}async function Gj(n,r){if(n.id in r)return r[n.id];try{let i=await import(n.module);return r[n.id]=i,i}catch(i){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Fj(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Pj(n,r,i){let d=await Promise.all(n.map(async m=>{let u=r.routes[m.route.id];if(u){let x=await Gj(u,i);return x.links?x.links():[]}return[]}));return Qj(d.flat(1).filter(Fj).filter(m=>m.rel==="stylesheet"||m.rel==="preload").map(m=>m.rel==="stylesheet"?{...m,rel:"prefetch",as:"style"}:{...m,rel:"prefetch"}))}function Pp(n,r,i,d,m,u){let x=(b,g)=>i[g]?b.route.id!==i[g].route.id:!0,p=(b,g)=>i[g].pathname!==b.pathname||i[g].route.path?.endsWith("*")&&i[g].params["*"]!==b.params["*"];return u==="assets"?r.filter((b,g)=>x(b,g)||p(b,g)):u==="data"?r.filter((b,g)=>{let h=d.routes[b.route.id];if(!h||!h.hasLoader)return!1;if(x(b,g)||p(b,g))return!0;if(b.route.shouldRevalidate){let v=b.route.shouldRevalidate({currentUrl:new URL(m.pathname+m.search+m.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function Yj(n,r,{includeHydrateFallback:i}={}){return Vj(n.map(d=>{let m=r.routes[d.route.id];if(!m)return[];let u=[m.module];return m.clientActionModule&&(u=u.concat(m.clientActionModule)),m.clientLoaderModule&&(u=u.concat(m.clientLoaderModule)),i&&m.hydrateFallbackModule&&(u=u.concat(m.hydrateFallbackModule)),m.imports&&(u=u.concat(m.imports)),u}).flat(1))}function Vj(n){return[...new Set(n)]}function Xj(n){let r={},i=Object.keys(n).sort();for(let d of i)r[d]=n[d];return r}function Qj(n,r){let i=new Set;return new Set(r),n.reduce((d,m)=>{let u=JSON.stringify(Xj(m));return i.has(u)||(i.add(u),d.push({key:u,link:m})),d},[])}function C0(){let n=f.useContext(ln);return _m(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Ij(){let n=f.useContext(Nc);return _m(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Cm=f.createContext(void 0);Cm.displayName="FrameworkContext";function k0(){let n=f.useContext(Cm);return _m(n,"You must render this element inside a <HydratedRouter> element"),n}function Zj(n,r){let i=f.useContext(Cm),[d,m]=f.useState(!1),[u,x]=f.useState(!1),{onFocus:p,onBlur:b,onMouseEnter:g,onMouseLeave:h,onTouchStart:v}=r,w=f.useRef(null);f.useEffect(()=>{if(n==="render"&&x(!0),n==="viewport"){let M=C=>{C.forEach(y=>{x(y.isIntersecting)})},R=new IntersectionObserver(M,{threshold:.5});return w.current&&R.observe(w.current),()=>{R.disconnect()}}},[n]),f.useEffect(()=>{if(d){let M=setTimeout(()=>{x(!0)},100);return()=>{clearTimeout(M)}}},[d]);let A=()=>{m(!0)},T=()=>{m(!1),x(!1)};return i?n!=="intent"?[u,w,{}]:[u,w,{onFocus:rr(p,A),onBlur:rr(b,T),onMouseEnter:rr(g,A),onMouseLeave:rr(h,T),onTouchStart:rr(v,A)}]:[!1,w,{}]}function rr(n,r){return i=>{n&&n(i),i.defaultPrevented||r(i)}}function Jj({page:n,...r}){let{router:i}=C0(),d=f.useMemo(()=>f0(i.routes,n,i.basename),[i.routes,n,i.basename]);return d?f.createElement(Wj,{page:n,matches:d,...r}):null}function Kj(n){let{manifest:r,routeModules:i}=k0(),[d,m]=f.useState([]);return f.useEffect(()=>{let u=!1;return Pj(n,r,i).then(x=>{u||m(x)}),()=>{u=!0}},[n,r,i]),d}function Wj({page:n,matches:r,...i}){let d=xs(),{manifest:m,routeModules:u}=k0(),{basename:x}=C0(),{loaderData:p,matches:b}=Ij(),g=f.useMemo(()=>Pp(n,r,b,m,d,"data"),[n,r,b,m,d]),h=f.useMemo(()=>Pp(n,r,b,m,d,"assets"),[n,r,b,m,d]),v=f.useMemo(()=>{if(n===d.pathname+d.search+d.hash)return[];let T=new Set,M=!1;if(r.forEach(C=>{let y=m.routes[C.route.id];!y||!y.hasLoader||(!g.some(k=>k.route.id===C.route.id)&&C.route.id in p&&u[C.route.id]?.shouldRevalidate||y.hasClientLoader?M=!0:T.add(C.route.id))}),T.size===0)return[];let R=Bj(n,x,"data");return M&&T.size>0&&R.searchParams.set("_routes",r.filter(C=>T.has(C.route.id)).map(C=>C.route.id).join(",")),[R.pathname+R.search]},[x,p,d,m,g,r,n,u]),w=f.useMemo(()=>Yj(h,m),[h,m]),A=Kj(h);return f.createElement(f.Fragment,null,v.map(T=>f.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...i})),w.map(T=>f.createElement("link",{key:T,rel:"modulepreload",href:T,...i})),A.map(({key:T,link:M})=>f.createElement("link",{key:T,nonce:i.nonce,...M})))}function ey(...n){return r=>{n.forEach(i=>{typeof i=="function"?i(r):i!=null&&(i.current=r)})}}var A0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{A0&&(window.__reactRouterVersion="7.9.6")}catch{}function ty({basename:n,children:r,window:i}){let d=f.useRef();d.current==null&&(d.current=Hb({window:i,v5Compat:!0}));let m=d.current,[u,x]=f.useState({action:m.action,location:m.location}),p=f.useCallback(b=>{f.startTransition(()=>x(b))},[x]);return f.useLayoutEffect(()=>m.listen(p),[m,p]),f.createElement(Ej,{basename:n,children:r,location:u.location,navigationType:u.action,navigator:m})}var M0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ds=f.forwardRef(function({onClick:r,discover:i="render",prefetch:d="none",relative:m,reloadDocument:u,replace:x,state:p,target:b,to:g,preventScrollReset:h,viewTransition:v,...w},A){let{basename:T}=f.useContext(ys),M=typeof g=="string"&&M0.test(g),R,C=!1;if(typeof g=="string"&&M&&(R=g,A0))try{let S=new URL(window.location.href),U=g.startsWith("//")?new URL(S.protocol+g):new URL(g),q=Ws(U.pathname,T);U.origin===S.origin&&q!=null?g=q+U.search+U.hash:C=!0}catch{Jt(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=uj(g,{relative:m}),[k,_,G]=Zj(d,w),z=ny(g,{replace:x,state:p,target:b,preventScrollReset:h,relative:m,viewTransition:v});function N(S){r&&r(S),S.defaultPrevented||z(S)}let E=f.createElement("a",{...w,...G,href:R||y,onClick:C||u?r:N,ref:ey(A,_),target:b,"data-discover":!M&&i==="render"?"true":void 0});return k&&!M?f.createElement(f.Fragment,null,E,f.createElement(Jj,{page:y})):E});ds.displayName="Link";var sy=f.forwardRef(function({"aria-current":r="page",caseSensitive:i=!1,className:d="",end:m=!1,style:u,to:x,viewTransition:p,children:b,...g},h){let v=gr(x,{relative:g.relative}),w=xs(),A=f.useContext(Nc),{navigator:T,basename:M}=f.useContext(ys),R=A!=null&&my(v)&&p===!0,C=T.encodeLocation?T.encodeLocation(v).pathname:v.pathname,y=w.pathname,k=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;i||(y=y.toLowerCase(),k=k?k.toLowerCase():null,C=C.toLowerCase()),k&&M&&(k=Ws(k,M)||k);const _=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let G=y===C||!m&&y.startsWith(C)&&y.charAt(_)==="/",z=k!=null&&(k===C||!m&&k.startsWith(C)&&k.charAt(C.length)==="/"),N={isActive:G,isPending:z,isTransitioning:R},E=G?r:void 0,S;typeof d=="function"?S=d(N):S=[d,G?"active":null,z?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let U=typeof u=="function"?u(N):u;return f.createElement(ds,{...g,"aria-current":E,className:S,ref:h,style:U,to:x,viewTransition:p},typeof b=="function"?b(N):b)});sy.displayName="NavLink";var ay=f.forwardRef(({discover:n="render",fetcherKey:r,navigate:i,reloadDocument:d,replace:m,state:u,method:x=ic,action:p,onSubmit:b,relative:g,preventScrollReset:h,viewTransition:v,...w},A)=>{let T=dy(),M=oy(p,{relative:g}),R=x.toLowerCase()==="get"?"get":"post",C=typeof p=="string"&&M0.test(p),y=k=>{if(b&&b(k),k.defaultPrevented)return;k.preventDefault();let _=k.nativeEvent.submitter,G=_?.getAttribute("formmethod")||x;T(_||k.currentTarget,{fetcherKey:r,method:G,navigate:i,replace:m,state:u,relative:g,preventScrollReset:h,viewTransition:v})};return f.createElement("form",{ref:A,method:R,action:M,onSubmit:d?b:y,...w,"data-discover":!C&&n==="render"?"true":void 0})});ay.displayName="Form";function ly(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function E0(n){let r=f.useContext(ln);return et(r,ly(n)),r}function ny(n,{target:r,replace:i,state:d,preventScrollReset:m,relative:u,viewTransition:x}={}){let p=ft(),b=xs(),g=gr(n,{relative:u});return f.useCallback(h=>{if(Oj(h,r)){h.preventDefault();let v=i!==void 0?i:hr(b)===hr(g);p(n,{replace:v,state:d,preventScrollReset:m,relative:u,viewTransition:x})}},[b,p,g,i,d,r,n,m,u,x])}function ry(n){Jt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let r=f.useRef(mm(n)),i=f.useRef(!1),d=xs(),m=f.useMemo(()=>Uj(d.search,i.current?null:r.current),[d.search]),u=ft(),x=f.useCallback((p,b)=>{const g=mm(typeof p=="function"?p(new URLSearchParams(m)):p);i.current=!0,u("?"+g,b)},[u,m]);return[m,x]}var iy=0,cy=()=>`__${String(++iy)}__`;function dy(){let{router:n}=E0("useSubmit"),{basename:r}=f.useContext(ys),i=_j();return f.useCallback(async(d,m={})=>{let{action:u,method:x,encType:p,formData:b,body:g}=qj(d,r);if(m.navigate===!1){let h=m.fetcherKey||cy();await n.fetch(h,i,m.action||u,{preventScrollReset:m.preventScrollReset,formData:b,body:g,formMethod:m.method||x,formEncType:m.encType||p,flushSync:m.flushSync})}else await n.navigate(m.action||u,{preventScrollReset:m.preventScrollReset,formData:b,body:g,formMethod:m.method||x,formEncType:m.encType||p,replace:m.replace,state:m.state,fromRouteId:i,flushSync:m.flushSync,viewTransition:m.viewTransition})},[n,r,i])}function oy(n,{relative:r}={}){let{basename:i}=f.useContext(ys),d=f.useContext(us);et(d,"useFormAction must be used inside a RouteContext");let[m]=d.matches.slice(-1),u={...gr(n||".",{relative:r})},x=xs();if(n==null){u.search=x.search;let p=new URLSearchParams(u.search),b=p.getAll("index");if(b.some(h=>h==="")){p.delete("index"),b.filter(v=>v).forEach(v=>p.append("index",v));let h=p.toString();u.search=h?`?${h}`:""}}return(!n||n===".")&&m.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(u.pathname=u.pathname==="/"?i:Zs([i,u.pathname])),hr(u)}function my(n,{relative:r}={}){let i=f.useContext(y0);et(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:d}=E0("useViewTransitionState"),m=gr(n,{relative:r});if(!i.isTransitioning)return!1;let u=Ws(i.currentLocation.pathname,d)||i.currentLocation.pathname,x=Ws(i.nextLocation.pathname,d)||i.nextLocation.pathname;return gc(m.pathname,x)!=null||gc(m.pathname,u)!=null}const Yp=n=>{let r;const i=new Set,d=(g,h)=>{const v=typeof g=="function"?g(r):g;if(!Object.is(v,r)){const w=r;r=h??(typeof v!="object"||v===null)?v:Object.assign({},r,v),i.forEach(A=>A(r,w))}},m=()=>r,p={setState:d,getState:m,getInitialState:()=>b,subscribe:g=>(i.add(g),()=>i.delete(g))},b=r=n(d,m,p);return p},uy=(n=>n?Yp(n):Yp),xy=n=>n;function hy(n,r=xy){const i=Vi.useSyncExternalStore(n.subscribe,Vi.useCallback(()=>r(n.getState()),[n,r]),Vi.useCallback(()=>r(n.getInitialState()),[n,r]));return Vi.useDebugValue(i),i}const Vp=n=>{const r=uy(n),i=d=>hy(r,d);return Object.assign(i,r),i},km=(n=>n?Vp(n):Vp),py=()=>{try{const n=localStorage.getItem("user");return n?JSON.parse(n):null}catch{return null}},Ze=km(n=>({user:py(),token:localStorage.getItem("token")||null,isAuthenticated:!!localStorage.getItem("token"),login:(r,i)=>{localStorage.setItem("user",JSON.stringify(r)),localStorage.setItem("token",i),n({user:r,token:i,isAuthenticated:!0})},logout:()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),n({user:null,token:null,isAuthenticated:!1})},updateUser:r=>{localStorage.setItem("user",JSON.stringify(r)),n({user:r})}}));function T0(n,r){return function(){return n.apply(r,arguments)}}const{toString:fy}=Object.prototype,{getPrototypeOf:Am}=Object,{iterator:wc,toStringTag:D0}=Symbol,Sc=(n=>r=>{const i=fy.call(r);return n[i]||(n[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Ns=n=>(n=n.toLowerCase(),r=>Sc(r)===n),_c=n=>r=>typeof r===n,{isArray:rn}=Array,tn=_c("undefined");function br(n){return n!==null&&!tn(n)&&n.constructor!==null&&!tn(n.constructor)&&Gt(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const R0=Ns("ArrayBuffer");function gy(n){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(n):r=n&&n.buffer&&R0(n.buffer),r}const by=_c("string"),Gt=_c("function"),z0=_c("number"),jr=n=>n!==null&&typeof n=="object",jy=n=>n===!0||n===!1,dc=n=>{if(Sc(n)!=="object")return!1;const r=Am(n);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(D0 in n)&&!(wc in n)},yy=n=>{if(!jr(n)||br(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},Ny=Ns("Date"),vy=Ns("File"),wy=Ns("Blob"),Sy=Ns("FileList"),_y=n=>jr(n)&&Gt(n.pipe),Cy=n=>{let r;return n&&(typeof FormData=="function"&&n instanceof FormData||Gt(n.append)&&((r=Sc(n))==="formdata"||r==="object"&&Gt(n.toString)&&n.toString()==="[object FormData]"))},ky=Ns("URLSearchParams"),[Ay,My,Ey,Ty]=["ReadableStream","Request","Response","Headers"].map(Ns),Dy=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function yr(n,r,{allOwnKeys:i=!1}={}){if(n===null||typeof n>"u")return;let d,m;if(typeof n!="object"&&(n=[n]),rn(n))for(d=0,m=n.length;d<m;d++)r.call(null,n[d],d,n);else{if(br(n))return;const u=i?Object.getOwnPropertyNames(n):Object.keys(n),x=u.length;let p;for(d=0;d<x;d++)p=u[d],r.call(null,n[p],p,n)}}function L0(n,r){if(br(n))return null;r=r.toLowerCase();const i=Object.keys(n);let d=i.length,m;for(;d-- >0;)if(m=i[d],r===m.toLowerCase())return m;return null}const ll=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,O0=n=>!tn(n)&&n!==ll;function um(){const{caseless:n,skipUndefined:r}=O0(this)&&this||{},i={},d=(m,u)=>{const x=n&&L0(i,u)||u;dc(i[x])&&dc(m)?i[x]=um(i[x],m):dc(m)?i[x]=um({},m):rn(m)?i[x]=m.slice():(!r||!tn(m))&&(i[x]=m)};for(let m=0,u=arguments.length;m<u;m++)arguments[m]&&yr(arguments[m],d);return i}const Ry=(n,r,i,{allOwnKeys:d}={})=>(yr(r,(m,u)=>{i&&Gt(m)?n[u]=T0(m,i):n[u]=m},{allOwnKeys:d}),n),zy=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),Ly=(n,r,i,d)=>{n.prototype=Object.create(r.prototype,d),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:r.prototype}),i&&Object.assign(n.prototype,i)},Oy=(n,r,i,d)=>{let m,u,x;const p={};if(r=r||{},n==null)return r;do{for(m=Object.getOwnPropertyNames(n),u=m.length;u-- >0;)x=m[u],(!d||d(x,n,r))&&!p[x]&&(r[x]=n[x],p[x]=!0);n=i!==!1&&Am(n)}while(n&&(!i||i(n,r))&&n!==Object.prototype);return r},Uy=(n,r,i)=>{n=String(n),(i===void 0||i>n.length)&&(i=n.length),i-=r.length;const d=n.indexOf(r,i);return d!==-1&&d===i},Hy=n=>{if(!n)return null;if(rn(n))return n;let r=n.length;if(!z0(r))return null;const i=new Array(r);for(;r-- >0;)i[r]=n[r];return i},$y=(n=>r=>n&&r instanceof n)(typeof Uint8Array<"u"&&Am(Uint8Array)),qy=(n,r)=>{const d=(n&&n[wc]).call(n);let m;for(;(m=d.next())&&!m.done;){const u=m.value;r.call(n,u[0],u[1])}},By=(n,r)=>{let i;const d=[];for(;(i=n.exec(r))!==null;)d.push(i);return d},Gy=Ns("HTMLFormElement"),Fy=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,d,m){return d.toUpperCase()+m}),Xp=(({hasOwnProperty:n})=>(r,i)=>n.call(r,i))(Object.prototype),Py=Ns("RegExp"),U0=(n,r)=>{const i=Object.getOwnPropertyDescriptors(n),d={};yr(i,(m,u)=>{let x;(x=r(m,u,n))!==!1&&(d[u]=x||m)}),Object.defineProperties(n,d)},Yy=n=>{U0(n,(r,i)=>{if(Gt(n)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const d=n[i];if(Gt(d)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},Vy=(n,r)=>{const i={},d=m=>{m.forEach(u=>{i[u]=!0})};return rn(n)?d(n):d(String(n).split(r)),i},Xy=()=>{},Qy=(n,r)=>n!=null&&Number.isFinite(n=+n)?n:r;function Iy(n){return!!(n&&Gt(n.append)&&n[D0]==="FormData"&&n[wc])}const Zy=n=>{const r=new Array(10),i=(d,m)=>{if(jr(d)){if(r.indexOf(d)>=0)return;if(br(d))return d;if(!("toJSON"in d)){r[m]=d;const u=rn(d)?[]:{};return yr(d,(x,p)=>{const b=i(x,m+1);!tn(b)&&(u[p]=b)}),r[m]=void 0,u}}return d};return i(n,0)},Jy=Ns("AsyncFunction"),Ky=n=>n&&(jr(n)||Gt(n))&&Gt(n.then)&&Gt(n.catch),H0=((n,r)=>n?setImmediate:r?((i,d)=>(ll.addEventListener("message",({source:m,data:u})=>{m===ll&&u===i&&d.length&&d.shift()()},!1),m=>{d.push(m),ll.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",Gt(ll.postMessage)),Wy=typeof queueMicrotask<"u"?queueMicrotask.bind(ll):typeof process<"u"&&process.nextTick||H0,eN=n=>n!=null&&Gt(n[wc]),ee={isArray:rn,isArrayBuffer:R0,isBuffer:br,isFormData:Cy,isArrayBufferView:gy,isString:by,isNumber:z0,isBoolean:jy,isObject:jr,isPlainObject:dc,isEmptyObject:yy,isReadableStream:Ay,isRequest:My,isResponse:Ey,isHeaders:Ty,isUndefined:tn,isDate:Ny,isFile:vy,isBlob:wy,isRegExp:Py,isFunction:Gt,isStream:_y,isURLSearchParams:ky,isTypedArray:$y,isFileList:Sy,forEach:yr,merge:um,extend:Ry,trim:Dy,stripBOM:zy,inherits:Ly,toFlatObject:Oy,kindOf:Sc,kindOfTest:Ns,endsWith:Uy,toArray:Hy,forEachEntry:qy,matchAll:By,isHTMLForm:Gy,hasOwnProperty:Xp,hasOwnProp:Xp,reduceDescriptors:U0,freezeMethods:Yy,toObjectSet:Vy,toCamelCase:Fy,noop:Xy,toFiniteNumber:Qy,findKey:L0,global:ll,isContextDefined:O0,isSpecCompliantForm:Iy,toJSONObject:Zy,isAsyncFn:Jy,isThenable:Ky,setImmediate:H0,asap:Wy,isIterable:eN};function we(n,r,i,d,m){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",r&&(this.code=r),i&&(this.config=i),d&&(this.request=d),m&&(this.response=m,this.status=m.status?m.status:null)}ee.inherits(we,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ee.toJSONObject(this.config),code:this.code,status:this.status}}});const $0=we.prototype,q0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{q0[n]={value:n}});Object.defineProperties(we,q0);Object.defineProperty($0,"isAxiosError",{value:!0});we.from=(n,r,i,d,m,u)=>{const x=Object.create($0);ee.toFlatObject(n,x,function(h){return h!==Error.prototype},g=>g!=="isAxiosError");const p=n&&n.message?n.message:"Error",b=r==null&&n?n.code:r;return we.call(x,p,b,i,d,m),n&&x.cause==null&&Object.defineProperty(x,"cause",{value:n,configurable:!0}),x.name=n&&n.name||"Error",u&&Object.assign(x,u),x};const tN=null;function xm(n){return ee.isPlainObject(n)||ee.isArray(n)}function B0(n){return ee.endsWith(n,"[]")?n.slice(0,-2):n}function Qp(n,r,i){return n?n.concat(r).map(function(m,u){return m=B0(m),!i&&u?"["+m+"]":m}).join(i?".":""):r}function sN(n){return ee.isArray(n)&&!n.some(xm)}const aN=ee.toFlatObject(ee,{},null,function(r){return/^is[A-Z]/.test(r)});function Cc(n,r,i){if(!ee.isObject(n))throw new TypeError("target must be an object");r=r||new FormData,i=ee.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(M,R){return!ee.isUndefined(R[M])});const d=i.metaTokens,m=i.visitor||h,u=i.dots,x=i.indexes,b=(i.Blob||typeof Blob<"u"&&Blob)&&ee.isSpecCompliantForm(r);if(!ee.isFunction(m))throw new TypeError("visitor must be a function");function g(T){if(T===null)return"";if(ee.isDate(T))return T.toISOString();if(ee.isBoolean(T))return T.toString();if(!b&&ee.isBlob(T))throw new we("Blob is not supported. Use a Buffer instead.");return ee.isArrayBuffer(T)||ee.isTypedArray(T)?b&&typeof Blob=="function"?new Blob([T]):Buffer.from(T):T}function h(T,M,R){let C=T;if(T&&!R&&typeof T=="object"){if(ee.endsWith(M,"{}"))M=d?M:M.slice(0,-2),T=JSON.stringify(T);else if(ee.isArray(T)&&sN(T)||(ee.isFileList(T)||ee.endsWith(M,"[]"))&&(C=ee.toArray(T)))return M=B0(M),C.forEach(function(k,_){!(ee.isUndefined(k)||k===null)&&r.append(x===!0?Qp([M],_,u):x===null?M:M+"[]",g(k))}),!1}return xm(T)?!0:(r.append(Qp(R,M,u),g(T)),!1)}const v=[],w=Object.assign(aN,{defaultVisitor:h,convertValue:g,isVisitable:xm});function A(T,M){if(!ee.isUndefined(T)){if(v.indexOf(T)!==-1)throw Error("Circular reference detected in "+M.join("."));v.push(T),ee.forEach(T,function(C,y){(!(ee.isUndefined(C)||C===null)&&m.call(r,C,ee.isString(y)?y.trim():y,M,w))===!0&&A(C,M?M.concat(y):[y])}),v.pop()}}if(!ee.isObject(n))throw new TypeError("data must be an object");return A(n),r}function Ip(n){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(d){return r[d]})}function Mm(n,r){this._pairs=[],n&&Cc(n,this,r)}const G0=Mm.prototype;G0.append=function(r,i){this._pairs.push([r,i])};G0.toString=function(r){const i=r?function(d){return r.call(this,d,Ip)}:Ip;return this._pairs.map(function(m){return i(m[0])+"="+i(m[1])},"").join("&")};function lN(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function F0(n,r,i){if(!r)return n;const d=i&&i.encode||lN;ee.isFunction(i)&&(i={serialize:i});const m=i&&i.serialize;let u;if(m?u=m(r,i):u=ee.isURLSearchParams(r)?r.toString():new Mm(r,i).toString(d),u){const x=n.indexOf("#");x!==-1&&(n=n.slice(0,x)),n+=(n.indexOf("?")===-1?"?":"&")+u}return n}class Zp{constructor(){this.handlers=[]}use(r,i,d){return this.handlers.push({fulfilled:r,rejected:i,synchronous:d?d.synchronous:!1,runWhen:d?d.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){ee.forEach(this.handlers,function(d){d!==null&&r(d)})}}const P0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},nN=typeof URLSearchParams<"u"?URLSearchParams:Mm,rN=typeof FormData<"u"?FormData:null,iN=typeof Blob<"u"?Blob:null,cN={isBrowser:!0,classes:{URLSearchParams:nN,FormData:rN,Blob:iN},protocols:["http","https","file","blob","url","data"]},Em=typeof window<"u"&&typeof document<"u",hm=typeof navigator=="object"&&navigator||void 0,dN=Em&&(!hm||["ReactNative","NativeScript","NS"].indexOf(hm.product)<0),oN=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",mN=Em&&window.location.href||"http://localhost",uN=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Em,hasStandardBrowserEnv:dN,hasStandardBrowserWebWorkerEnv:oN,navigator:hm,origin:mN},Symbol.toStringTag,{value:"Module"})),kt={...uN,...cN};function xN(n,r){return Cc(n,new kt.classes.URLSearchParams,{visitor:function(i,d,m,u){return kt.isNode&&ee.isBuffer(i)?(this.append(d,i.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)},...r})}function hN(n){return ee.matchAll(/\w+|\[(\w*)]/g,n).map(r=>r[0]==="[]"?"":r[1]||r[0])}function pN(n){const r={},i=Object.keys(n);let d;const m=i.length;let u;for(d=0;d<m;d++)u=i[d],r[u]=n[u];return r}function Y0(n){function r(i,d,m,u){let x=i[u++];if(x==="__proto__")return!0;const p=Number.isFinite(+x),b=u>=i.length;return x=!x&&ee.isArray(m)?m.length:x,b?(ee.hasOwnProp(m,x)?m[x]=[m[x],d]:m[x]=d,!p):((!m[x]||!ee.isObject(m[x]))&&(m[x]=[]),r(i,d,m[x],u)&&ee.isArray(m[x])&&(m[x]=pN(m[x])),!p)}if(ee.isFormData(n)&&ee.isFunction(n.entries)){const i={};return ee.forEachEntry(n,(d,m)=>{r(hN(d),m,i,0)}),i}return null}function fN(n,r,i){if(ee.isString(n))try{return(r||JSON.parse)(n),ee.trim(n)}catch(d){if(d.name!=="SyntaxError")throw d}return(i||JSON.stringify)(n)}const Nr={transitional:P0,adapter:["xhr","http","fetch"],transformRequest:[function(r,i){const d=i.getContentType()||"",m=d.indexOf("application/json")>-1,u=ee.isObject(r);if(u&&ee.isHTMLForm(r)&&(r=new FormData(r)),ee.isFormData(r))return m?JSON.stringify(Y0(r)):r;if(ee.isArrayBuffer(r)||ee.isBuffer(r)||ee.isStream(r)||ee.isFile(r)||ee.isBlob(r)||ee.isReadableStream(r))return r;if(ee.isArrayBufferView(r))return r.buffer;if(ee.isURLSearchParams(r))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let p;if(u){if(d.indexOf("application/x-www-form-urlencoded")>-1)return xN(r,this.formSerializer).toString();if((p=ee.isFileList(r))||d.indexOf("multipart/form-data")>-1){const b=this.env&&this.env.FormData;return Cc(p?{"files[]":r}:r,b&&new b,this.formSerializer)}}return u||m?(i.setContentType("application/json",!1),fN(r)):r}],transformResponse:[function(r){const i=this.transitional||Nr.transitional,d=i&&i.forcedJSONParsing,m=this.responseType==="json";if(ee.isResponse(r)||ee.isReadableStream(r))return r;if(r&&ee.isString(r)&&(d&&!this.responseType||m)){const x=!(i&&i.silentJSONParsing)&&m;try{return JSON.parse(r,this.parseReviver)}catch(p){if(x)throw p.name==="SyntaxError"?we.from(p,we.ERR_BAD_RESPONSE,this,null,this.response):p}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:kt.classes.FormData,Blob:kt.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ee.forEach(["delete","get","head","post","put","patch"],n=>{Nr.headers[n]={}});const gN=ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),bN=n=>{const r={};let i,d,m;return n&&n.split(`
`).forEach(function(x){m=x.indexOf(":"),i=x.substring(0,m).trim().toLowerCase(),d=x.substring(m+1).trim(),!(!i||r[i]&&gN[i])&&(i==="set-cookie"?r[i]?r[i].push(d):r[i]=[d]:r[i]=r[i]?r[i]+", "+d:d)}),r},Jp=Symbol("internals");function ir(n){return n&&String(n).trim().toLowerCase()}function oc(n){return n===!1||n==null?n:ee.isArray(n)?n.map(oc):String(n)}function jN(n){const r=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let d;for(;d=i.exec(n);)r[d[1]]=d[2];return r}const yN=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function nm(n,r,i,d,m){if(ee.isFunction(d))return d.call(this,r,i);if(m&&(r=i),!!ee.isString(r)){if(ee.isString(d))return r.indexOf(d)!==-1;if(ee.isRegExp(d))return d.test(r)}}function NN(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,i,d)=>i.toUpperCase()+d)}function vN(n,r){const i=ee.toCamelCase(" "+r);["get","set","has"].forEach(d=>{Object.defineProperty(n,d+i,{value:function(m,u,x){return this[d].call(this,r,m,u,x)},configurable:!0})})}let Ft=class{constructor(r){r&&this.set(r)}set(r,i,d){const m=this;function u(p,b,g){const h=ir(b);if(!h)throw new Error("header name must be a non-empty string");const v=ee.findKey(m,h);(!v||m[v]===void 0||g===!0||g===void 0&&m[v]!==!1)&&(m[v||b]=oc(p))}const x=(p,b)=>ee.forEach(p,(g,h)=>u(g,h,b));if(ee.isPlainObject(r)||r instanceof this.constructor)x(r,i);else if(ee.isString(r)&&(r=r.trim())&&!yN(r))x(bN(r),i);else if(ee.isObject(r)&&ee.isIterable(r)){let p={},b,g;for(const h of r){if(!ee.isArray(h))throw TypeError("Object iterator must return a key-value pair");p[g=h[0]]=(b=p[g])?ee.isArray(b)?[...b,h[1]]:[b,h[1]]:h[1]}x(p,i)}else r!=null&&u(i,r,d);return this}get(r,i){if(r=ir(r),r){const d=ee.findKey(this,r);if(d){const m=this[d];if(!i)return m;if(i===!0)return jN(m);if(ee.isFunction(i))return i.call(this,m,d);if(ee.isRegExp(i))return i.exec(m);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,i){if(r=ir(r),r){const d=ee.findKey(this,r);return!!(d&&this[d]!==void 0&&(!i||nm(this,this[d],d,i)))}return!1}delete(r,i){const d=this;let m=!1;function u(x){if(x=ir(x),x){const p=ee.findKey(d,x);p&&(!i||nm(d,d[p],p,i))&&(delete d[p],m=!0)}}return ee.isArray(r)?r.forEach(u):u(r),m}clear(r){const i=Object.keys(this);let d=i.length,m=!1;for(;d--;){const u=i[d];(!r||nm(this,this[u],u,r,!0))&&(delete this[u],m=!0)}return m}normalize(r){const i=this,d={};return ee.forEach(this,(m,u)=>{const x=ee.findKey(d,u);if(x){i[x]=oc(m),delete i[u];return}const p=r?NN(u):String(u).trim();p!==u&&delete i[u],i[p]=oc(m),d[p]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const i=Object.create(null);return ee.forEach(this,(d,m)=>{d!=null&&d!==!1&&(i[m]=r&&ee.isArray(d)?d.join(", "):d)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,i])=>r+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...i){const d=new this(r);return i.forEach(m=>d.set(m)),d}static accessor(r){const d=(this[Jp]=this[Jp]={accessors:{}}).accessors,m=this.prototype;function u(x){const p=ir(x);d[p]||(vN(m,x),d[p]=!0)}return ee.isArray(r)?r.forEach(u):u(r),this}};Ft.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ee.reduceDescriptors(Ft.prototype,({value:n},r)=>{let i=r[0].toUpperCase()+r.slice(1);return{get:()=>n,set(d){this[i]=d}}});ee.freezeMethods(Ft);function rm(n,r){const i=this||Nr,d=r||i,m=Ft.from(d.headers);let u=d.data;return ee.forEach(n,function(p){u=p.call(i,u,m.normalize(),r?r.status:void 0)}),m.normalize(),u}function V0(n){return!!(n&&n.__CANCEL__)}function cn(n,r,i){we.call(this,n??"canceled",we.ERR_CANCELED,r,i),this.name="CanceledError"}ee.inherits(cn,we,{__CANCEL__:!0});function X0(n,r,i){const d=i.config.validateStatus;!i.status||!d||d(i.status)?n(i):r(new we("Request failed with status code "+i.status,[we.ERR_BAD_REQUEST,we.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function wN(n){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return r&&r[1]||""}function SN(n,r){n=n||10;const i=new Array(n),d=new Array(n);let m=0,u=0,x;return r=r!==void 0?r:1e3,function(b){const g=Date.now(),h=d[u];x||(x=g),i[m]=b,d[m]=g;let v=u,w=0;for(;v!==m;)w+=i[v++],v=v%n;if(m=(m+1)%n,m===u&&(u=(u+1)%n),g-x<r)return;const A=h&&g-h;return A?Math.round(w*1e3/A):void 0}}function _N(n,r){let i=0,d=1e3/r,m,u;const x=(g,h=Date.now())=>{i=h,m=null,u&&(clearTimeout(u),u=null),n(...g)};return[(...g)=>{const h=Date.now(),v=h-i;v>=d?x(g,h):(m=g,u||(u=setTimeout(()=>{u=null,x(m)},d-v)))},()=>m&&x(m)]}const bc=(n,r,i=3)=>{let d=0;const m=SN(50,250);return _N(u=>{const x=u.loaded,p=u.lengthComputable?u.total:void 0,b=x-d,g=m(b),h=x<=p;d=x;const v={loaded:x,total:p,progress:p?x/p:void 0,bytes:b,rate:g||void 0,estimated:g&&p&&h?(p-x)/g:void 0,event:u,lengthComputable:p!=null,[r?"download":"upload"]:!0};n(v)},i)},Kp=(n,r)=>{const i=n!=null;return[d=>r[0]({lengthComputable:i,total:n,loaded:d}),r[1]]},Wp=n=>(...r)=>ee.asap(()=>n(...r)),CN=kt.hasStandardBrowserEnv?((n,r)=>i=>(i=new URL(i,kt.origin),n.protocol===i.protocol&&n.host===i.host&&(r||n.port===i.port)))(new URL(kt.origin),kt.navigator&&/(msie|trident)/i.test(kt.navigator.userAgent)):()=>!0,kN=kt.hasStandardBrowserEnv?{write(n,r,i,d,m,u,x){if(typeof document>"u")return;const p=[`${n}=${encodeURIComponent(r)}`];ee.isNumber(i)&&p.push(`expires=${new Date(i).toUTCString()}`),ee.isString(d)&&p.push(`path=${d}`),ee.isString(m)&&p.push(`domain=${m}`),u===!0&&p.push("secure"),ee.isString(x)&&p.push(`SameSite=${x}`),document.cookie=p.join("; ")},read(n){if(typeof document>"u")return null;const r=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return r?decodeURIComponent(r[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function AN(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function MN(n,r){return r?n.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):n}function Q0(n,r,i){let d=!AN(r);return n&&(d||i==!1)?MN(n,r):r}const e0=n=>n instanceof Ft?{...n}:n;function rl(n,r){r=r||{};const i={};function d(g,h,v,w){return ee.isPlainObject(g)&&ee.isPlainObject(h)?ee.merge.call({caseless:w},g,h):ee.isPlainObject(h)?ee.merge({},h):ee.isArray(h)?h.slice():h}function m(g,h,v,w){if(ee.isUndefined(h)){if(!ee.isUndefined(g))return d(void 0,g,v,w)}else return d(g,h,v,w)}function u(g,h){if(!ee.isUndefined(h))return d(void 0,h)}function x(g,h){if(ee.isUndefined(h)){if(!ee.isUndefined(g))return d(void 0,g)}else return d(void 0,h)}function p(g,h,v){if(v in r)return d(g,h);if(v in n)return d(void 0,g)}const b={url:u,method:u,data:u,baseURL:x,transformRequest:x,transformResponse:x,paramsSerializer:x,timeout:x,timeoutMessage:x,withCredentials:x,withXSRFToken:x,adapter:x,responseType:x,xsrfCookieName:x,xsrfHeaderName:x,onUploadProgress:x,onDownloadProgress:x,decompress:x,maxContentLength:x,maxBodyLength:x,beforeRedirect:x,transport:x,httpAgent:x,httpsAgent:x,cancelToken:x,socketPath:x,responseEncoding:x,validateStatus:p,headers:(g,h,v)=>m(e0(g),e0(h),v,!0)};return ee.forEach(Object.keys({...n,...r}),function(h){const v=b[h]||m,w=v(n[h],r[h],h);ee.isUndefined(w)&&v!==p||(i[h]=w)}),i}const I0=n=>{const r=rl({},n);let{data:i,withXSRFToken:d,xsrfHeaderName:m,xsrfCookieName:u,headers:x,auth:p}=r;if(r.headers=x=Ft.from(x),r.url=F0(Q0(r.baseURL,r.url,r.allowAbsoluteUrls),n.params,n.paramsSerializer),p&&x.set("Authorization","Basic "+btoa((p.username||"")+":"+(p.password?unescape(encodeURIComponent(p.password)):""))),ee.isFormData(i)){if(kt.hasStandardBrowserEnv||kt.hasStandardBrowserWebWorkerEnv)x.setContentType(void 0);else if(ee.isFunction(i.getHeaders)){const b=i.getHeaders(),g=["content-type","content-length"];Object.entries(b).forEach(([h,v])=>{g.includes(h.toLowerCase())&&x.set(h,v)})}}if(kt.hasStandardBrowserEnv&&(d&&ee.isFunction(d)&&(d=d(r)),d||d!==!1&&CN(r.url))){const b=m&&u&&kN.read(u);b&&x.set(m,b)}return r},EN=typeof XMLHttpRequest<"u",TN=EN&&function(n){return new Promise(function(i,d){const m=I0(n);let u=m.data;const x=Ft.from(m.headers).normalize();let{responseType:p,onUploadProgress:b,onDownloadProgress:g}=m,h,v,w,A,T;function M(){A&&A(),T&&T(),m.cancelToken&&m.cancelToken.unsubscribe(h),m.signal&&m.signal.removeEventListener("abort",h)}let R=new XMLHttpRequest;R.open(m.method.toUpperCase(),m.url,!0),R.timeout=m.timeout;function C(){if(!R)return;const k=Ft.from("getAllResponseHeaders"in R&&R.getAllResponseHeaders()),G={data:!p||p==="text"||p==="json"?R.responseText:R.response,status:R.status,statusText:R.statusText,headers:k,config:n,request:R};X0(function(N){i(N),M()},function(N){d(N),M()},G),R=null}"onloadend"in R?R.onloadend=C:R.onreadystatechange=function(){!R||R.readyState!==4||R.status===0&&!(R.responseURL&&R.responseURL.indexOf("file:")===0)||setTimeout(C)},R.onabort=function(){R&&(d(new we("Request aborted",we.ECONNABORTED,n,R)),R=null)},R.onerror=function(_){const G=_&&_.message?_.message:"Network Error",z=new we(G,we.ERR_NETWORK,n,R);z.event=_||null,d(z),R=null},R.ontimeout=function(){let _=m.timeout?"timeout of "+m.timeout+"ms exceeded":"timeout exceeded";const G=m.transitional||P0;m.timeoutErrorMessage&&(_=m.timeoutErrorMessage),d(new we(_,G.clarifyTimeoutError?we.ETIMEDOUT:we.ECONNABORTED,n,R)),R=null},u===void 0&&x.setContentType(null),"setRequestHeader"in R&&ee.forEach(x.toJSON(),function(_,G){R.setRequestHeader(G,_)}),ee.isUndefined(m.withCredentials)||(R.withCredentials=!!m.withCredentials),p&&p!=="json"&&(R.responseType=m.responseType),g&&([w,T]=bc(g,!0),R.addEventListener("progress",w)),b&&R.upload&&([v,A]=bc(b),R.upload.addEventListener("progress",v),R.upload.addEventListener("loadend",A)),(m.cancelToken||m.signal)&&(h=k=>{R&&(d(!k||k.type?new cn(null,n,R):k),R.abort(),R=null)},m.cancelToken&&m.cancelToken.subscribe(h),m.signal&&(m.signal.aborted?h():m.signal.addEventListener("abort",h)));const y=wN(m.url);if(y&&kt.protocols.indexOf(y)===-1){d(new we("Unsupported protocol "+y+":",we.ERR_BAD_REQUEST,n));return}R.send(u||null)})},DN=(n,r)=>{const{length:i}=n=n?n.filter(Boolean):[];if(r||i){let d=new AbortController,m;const u=function(g){if(!m){m=!0,p();const h=g instanceof Error?g:this.reason;d.abort(h instanceof we?h:new cn(h instanceof Error?h.message:h))}};let x=r&&setTimeout(()=>{x=null,u(new we(`timeout ${r} of ms exceeded`,we.ETIMEDOUT))},r);const p=()=>{n&&(x&&clearTimeout(x),x=null,n.forEach(g=>{g.unsubscribe?g.unsubscribe(u):g.removeEventListener("abort",u)}),n=null)};n.forEach(g=>g.addEventListener("abort",u));const{signal:b}=d;return b.unsubscribe=()=>ee.asap(p),b}},RN=function*(n,r){let i=n.byteLength;if(i<r){yield n;return}let d=0,m;for(;d<i;)m=d+r,yield n.slice(d,m),d=m},zN=async function*(n,r){for await(const i of LN(n))yield*RN(i,r)},LN=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const r=n.getReader();try{for(;;){const{done:i,value:d}=await r.read();if(i)break;yield d}}finally{await r.cancel()}},t0=(n,r,i,d)=>{const m=zN(n,r);let u=0,x,p=b=>{x||(x=!0,d&&d(b))};return new ReadableStream({async pull(b){try{const{done:g,value:h}=await m.next();if(g){p(),b.close();return}let v=h.byteLength;if(i){let w=u+=v;i(w)}b.enqueue(new Uint8Array(h))}catch(g){throw p(g),g}},cancel(b){return p(b),m.return()}},{highWaterMark:2})},s0=64*1024,{isFunction:Qi}=ee,ON=(({Request:n,Response:r})=>({Request:n,Response:r}))(ee.global),{ReadableStream:a0,TextEncoder:l0}=ee.global,n0=(n,...r)=>{try{return!!n(...r)}catch{return!1}},UN=n=>{n=ee.merge.call({skipUndefined:!0},ON,n);const{fetch:r,Request:i,Response:d}=n,m=r?Qi(r):typeof fetch=="function",u=Qi(i),x=Qi(d);if(!m)return!1;const p=m&&Qi(a0),b=m&&(typeof l0=="function"?(T=>M=>T.encode(M))(new l0):async T=>new Uint8Array(await new i(T).arrayBuffer())),g=u&&p&&n0(()=>{let T=!1;const M=new i(kt.origin,{body:new a0,method:"POST",get duplex(){return T=!0,"half"}}).headers.has("Content-Type");return T&&!M}),h=x&&p&&n0(()=>ee.isReadableStream(new d("").body)),v={stream:h&&(T=>T.body)};m&&["text","arrayBuffer","blob","formData","stream"].forEach(T=>{!v[T]&&(v[T]=(M,R)=>{let C=M&&M[T];if(C)return C.call(M);throw new we(`Response type '${T}' is not supported`,we.ERR_NOT_SUPPORT,R)})});const w=async T=>{if(T==null)return 0;if(ee.isBlob(T))return T.size;if(ee.isSpecCompliantForm(T))return(await new i(kt.origin,{method:"POST",body:T}).arrayBuffer()).byteLength;if(ee.isArrayBufferView(T)||ee.isArrayBuffer(T))return T.byteLength;if(ee.isURLSearchParams(T)&&(T=T+""),ee.isString(T))return(await b(T)).byteLength},A=async(T,M)=>{const R=ee.toFiniteNumber(T.getContentLength());return R??w(M)};return async T=>{let{url:M,method:R,data:C,signal:y,cancelToken:k,timeout:_,onDownloadProgress:G,onUploadProgress:z,responseType:N,headers:E,withCredentials:S="same-origin",fetchOptions:U}=I0(T),q=r||fetch;N=N?(N+"").toLowerCase():"text";let Z=DN([y,k&&k.toAbortSignal()],_),W=null;const ie=Z&&Z.unsubscribe&&(()=>{Z.unsubscribe()});let F;try{if(z&&g&&R!=="get"&&R!=="head"&&(F=await A(E,C))!==0){let H=new i(M,{method:"POST",body:C,duplex:"half"}),te;if(ee.isFormData(C)&&(te=H.headers.get("content-type"))&&E.setContentType(te),H.body){const[ce,ue]=Kp(F,bc(Wp(z)));C=t0(H.body,s0,ce,ue)}}ee.isString(S)||(S=S?"include":"omit");const O=u&&"credentials"in i.prototype,P={...U,signal:Z,method:R.toUpperCase(),headers:E.normalize().toJSON(),body:C,duplex:"half",credentials:O?S:void 0};W=u&&new i(M,P);let re=await(u?q(W,U):q(M,P));const xe=h&&(N==="stream"||N==="response");if(h&&(G||xe&&ie)){const H={};["status","statusText","headers"].forEach(ye=>{H[ye]=re[ye]});const te=ee.toFiniteNumber(re.headers.get("content-length")),[ce,ue]=G&&Kp(te,bc(Wp(G),!0))||[];re=new d(t0(re.body,s0,ce,()=>{ue&&ue(),ie&&ie()}),H)}N=N||"text";let Q=await v[ee.findKey(v,N)||"text"](re,T);return!xe&&ie&&ie(),await new Promise((H,te)=>{X0(H,te,{data:Q,headers:Ft.from(re.headers),status:re.status,statusText:re.statusText,config:T,request:W})})}catch(O){throw ie&&ie(),O&&O.name==="TypeError"&&/Load failed|fetch/i.test(O.message)?Object.assign(new we("Network Error",we.ERR_NETWORK,T,W),{cause:O.cause||O}):we.from(O,O&&O.code,T,W)}}},HN=new Map,Z0=n=>{let r=n&&n.env||{};const{fetch:i,Request:d,Response:m}=r,u=[d,m,i];let x=u.length,p=x,b,g,h=HN;for(;p--;)b=u[p],g=h.get(b),g===void 0&&h.set(b,g=p?new Map:UN(r)),h=g;return g};Z0();const Tm={http:tN,xhr:TN,fetch:{get:Z0}};ee.forEach(Tm,(n,r)=>{if(n){try{Object.defineProperty(n,"name",{value:r})}catch{}Object.defineProperty(n,"adapterName",{value:r})}});const r0=n=>`- ${n}`,$N=n=>ee.isFunction(n)||n===null||n===!1;function qN(n,r){n=ee.isArray(n)?n:[n];const{length:i}=n;let d,m;const u={};for(let x=0;x<i;x++){d=n[x];let p;if(m=d,!$N(d)&&(m=Tm[(p=String(d)).toLowerCase()],m===void 0))throw new we(`Unknown adapter '${p}'`);if(m&&(ee.isFunction(m)||(m=m.get(r))))break;u[p||"#"+x]=m}if(!m){const x=Object.entries(u).map(([b,g])=>`adapter ${b} `+(g===!1?"is not supported by the environment":"is not available in the build"));let p=i?x.length>1?`since :
`+x.map(r0).join(`
`):" "+r0(x[0]):"as no adapter specified";throw new we("There is no suitable adapter to dispatch the request "+p,"ERR_NOT_SUPPORT")}return m}const J0={getAdapter:qN,adapters:Tm};function im(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new cn(null,n)}function i0(n){return im(n),n.headers=Ft.from(n.headers),n.data=rm.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),J0.getAdapter(n.adapter||Nr.adapter,n)(n).then(function(d){return im(n),d.data=rm.call(n,n.transformResponse,d),d.headers=Ft.from(d.headers),d},function(d){return V0(d)||(im(n),d&&d.response&&(d.response.data=rm.call(n,n.transformResponse,d.response),d.response.headers=Ft.from(d.response.headers))),Promise.reject(d)})}const K0="1.13.2",kc={};["object","boolean","number","function","string","symbol"].forEach((n,r)=>{kc[n]=function(d){return typeof d===n||"a"+(r<1?"n ":" ")+n}});const c0={};kc.transitional=function(r,i,d){function m(u,x){return"[Axios v"+K0+"] Transitional option '"+u+"'"+x+(d?". "+d:"")}return(u,x,p)=>{if(r===!1)throw new we(m(x," has been removed"+(i?" in "+i:"")),we.ERR_DEPRECATED);return i&&!c0[x]&&(c0[x]=!0,console.warn(m(x," has been deprecated since v"+i+" and will be removed in the near future"))),r?r(u,x,p):!0}};kc.spelling=function(r){return(i,d)=>(console.warn(`${d} is likely a misspelling of ${r}`),!0)};function BN(n,r,i){if(typeof n!="object")throw new we("options must be an object",we.ERR_BAD_OPTION_VALUE);const d=Object.keys(n);let m=d.length;for(;m-- >0;){const u=d[m],x=r[u];if(x){const p=n[u],b=p===void 0||x(p,u,n);if(b!==!0)throw new we("option "+u+" must be "+b,we.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new we("Unknown option "+u,we.ERR_BAD_OPTION)}}const mc={assertOptions:BN,validators:kc},ks=mc.validators;let nl=class{constructor(r){this.defaults=r||{},this.interceptors={request:new Zp,response:new Zp}}async request(r,i){try{return await this._request(r,i)}catch(d){if(d instanceof Error){let m={};Error.captureStackTrace?Error.captureStackTrace(m):m=new Error;const u=m.stack?m.stack.replace(/^.+\n/,""):"";try{d.stack?u&&!String(d.stack).endsWith(u.replace(/^.+\n.+\n/,""))&&(d.stack+=`
`+u):d.stack=u}catch{}}throw d}}_request(r,i){typeof r=="string"?(i=i||{},i.url=r):i=r||{},i=rl(this.defaults,i);const{transitional:d,paramsSerializer:m,headers:u}=i;d!==void 0&&mc.assertOptions(d,{silentJSONParsing:ks.transitional(ks.boolean),forcedJSONParsing:ks.transitional(ks.boolean),clarifyTimeoutError:ks.transitional(ks.boolean)},!1),m!=null&&(ee.isFunction(m)?i.paramsSerializer={serialize:m}:mc.assertOptions(m,{encode:ks.function,serialize:ks.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),mc.assertOptions(i,{baseUrl:ks.spelling("baseURL"),withXsrfToken:ks.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let x=u&&ee.merge(u.common,u[i.method]);u&&ee.forEach(["delete","get","head","post","put","patch","common"],T=>{delete u[T]}),i.headers=Ft.concat(x,u);const p=[];let b=!0;this.interceptors.request.forEach(function(M){typeof M.runWhen=="function"&&M.runWhen(i)===!1||(b=b&&M.synchronous,p.unshift(M.fulfilled,M.rejected))});const g=[];this.interceptors.response.forEach(function(M){g.push(M.fulfilled,M.rejected)});let h,v=0,w;if(!b){const T=[i0.bind(this),void 0];for(T.unshift(...p),T.push(...g),w=T.length,h=Promise.resolve(i);v<w;)h=h.then(T[v++],T[v++]);return h}w=p.length;let A=i;for(;v<w;){const T=p[v++],M=p[v++];try{A=T(A)}catch(R){M.call(this,R);break}}try{h=i0.call(this,A)}catch(T){return Promise.reject(T)}for(v=0,w=g.length;v<w;)h=h.then(g[v++],g[v++]);return h}getUri(r){r=rl(this.defaults,r);const i=Q0(r.baseURL,r.url,r.allowAbsoluteUrls);return F0(i,r.params,r.paramsSerializer)}};ee.forEach(["delete","get","head","options"],function(r){nl.prototype[r]=function(i,d){return this.request(rl(d||{},{method:r,url:i,data:(d||{}).data}))}});ee.forEach(["post","put","patch"],function(r){function i(d){return function(u,x,p){return this.request(rl(p||{},{method:r,headers:d?{"Content-Type":"multipart/form-data"}:{},url:u,data:x}))}}nl.prototype[r]=i(),nl.prototype[r+"Form"]=i(!0)});let GN=class W0{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(u){i=u});const d=this;this.promise.then(m=>{if(!d._listeners)return;let u=d._listeners.length;for(;u-- >0;)d._listeners[u](m);d._listeners=null}),this.promise.then=m=>{let u;const x=new Promise(p=>{d.subscribe(p),u=p}).then(m);return x.cancel=function(){d.unsubscribe(u)},x},r(function(u,x,p){d.reason||(d.reason=new cn(u,x,p),i(d.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const i=this._listeners.indexOf(r);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const r=new AbortController,i=d=>{r.abort(d)};return this.subscribe(i),r.signal.unsubscribe=()=>this.unsubscribe(i),r.signal}static source(){let r;return{token:new W0(function(m){r=m}),cancel:r}}};function FN(n){return function(i){return n.apply(null,i)}}function PN(n){return ee.isObject(n)&&n.isAxiosError===!0}const pm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(pm).forEach(([n,r])=>{pm[r]=n});function ef(n){const r=new nl(n),i=T0(nl.prototype.request,r);return ee.extend(i,nl.prototype,r,{allOwnKeys:!0}),ee.extend(i,r,null,{allOwnKeys:!0}),i.create=function(m){return ef(rl(n,m))},i}const $=ef(Nr);$.Axios=nl;$.CanceledError=cn;$.CancelToken=GN;$.isCancel=V0;$.VERSION=K0;$.toFormData=Cc;$.AxiosError=we;$.Cancel=$.CanceledError;$.all=function(r){return Promise.all(r)};$.spread=FN;$.isAxiosError=PN;$.mergeConfig=rl;$.AxiosHeaders=Ft;$.formToJSON=n=>Y0(ee.isHTMLForm(n)?new FormData(n):n);$.getAdapter=J0.getAdapter;$.HttpStatusCode=pm;$.default=$;const{Axios:F6,AxiosError:P6,CanceledError:Y6,isCancel:V6,CancelToken:X6,VERSION:Q6,all:I6,Cancel:Z6,isAxiosError:J6,spread:K6,toFormData:W6,AxiosHeaders:ew,HttpStatusCode:tw,formToJSON:sw,getAdapter:aw,mergeConfig:lw}=$,YN="http://localhost/McSMS/backend/api",ur=$.create({baseURL:YN,headers:{"Content-Type":"application/json"},withCredentials:!0});ur.interceptors.request.use(n=>{const r=localStorage.getItem("token");return r&&(n.headers.Authorization=`Bearer ${r}`),n},n=>Promise.reject(n));ur.interceptors.response.use(n=>n,n=>(n.response?.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(n)));const VN={login:n=>$.post("http://localhost/McSMS/backend/api/debug_login.php",n),register:n=>ur.post("/auth/register",n),logout:()=>ur.post("/auth/logout"),me:()=>ur.get("/auth/me")},Zl={getAll:()=>$.get("http://localhost/McSMS/backend/api/users.php"),getById:n=>$.get(`http://localhost/McSMS/backend/api/users.php?id=${n}`),create:n=>$.post("http://localhost/McSMS/backend/api/users.php",n),update:(n,r)=>$.put(`http://localhost/McSMS/backend/api/users.php?id=${n}`,r),delete:n=>$.delete(`http://localhost/McSMS/backend/api/users.php?id=${n}`)},bs={getAll:n=>$.get("http://localhost/McSMS/backend/api/students.php",{params:n}),getById:n=>$.get(`http://localhost/McSMS/backend/api/students.php?id=${n}`),create:n=>$.post("http://localhost/McSMS/backend/api/students.php",n),update:(n,r)=>$.put(`http://localhost/McSMS/backend/api/students.php?id=${n}`,r),delete:n=>$.delete(`http://localhost/McSMS/backend/api/students.php?id=${n}`),uploadPhoto:n=>$.post("http://localhost/McSMS/backend/api/upload_photo.php",n,{headers:{"Content-Type":"multipart/form-data"}})},uc={getAll:n=>$.get("http://localhost/McSMS/backend/api/applications.php",{params:n}),getById:n=>$.get(`http://localhost/McSMS/backend/api/applications.php?id=${n}`),create:n=>$.post("http://localhost/McSMS/backend/api/applications.php",n),approve:(n,r)=>$.post(`http://localhost/McSMS/backend/api/applications.php?id=${n}&action=approve`,r),reject:(n,r)=>$.post(`http://localhost/McSMS/backend/api/applications.php?id=${n}&action=reject`,r)},Aa={getAll:n=>$.get("http://localhost/McSMS/backend/api/classes.php",{params:n}),getById:n=>$.get(`http://localhost/McSMS/backend/api/classes.php?id=${n}`),create:n=>$.post("http://localhost/McSMS/backend/api/classes.php",n),update:(n,r)=>$.put(`http://localhost/McSMS/backend/api/classes.php?id=${n}`,r),delete:n=>$.delete(`http://localhost/McSMS/backend/api/classes.php?id=${n}`)},Wl={getAll:()=>$.get("http://localhost/McSMS/backend/api/subjects.php"),getById:n=>$.get(`http://localhost/McSMS/backend/api/subjects.php?id=${n}`),create:n=>$.post("http://localhost/McSMS/backend/api/subjects.php",n),update:(n,r)=>$.put(`http://localhost/McSMS/backend/api/subjects.php?id=${n}`,r),delete:n=>$.delete(`http://localhost/McSMS/backend/api/subjects.php?id=${n}`)},Jl={getAll:()=>$.get("http://localhost/McSMS/backend/api/terms.php"),getById:n=>$.get(`http://localhost/McSMS/backend/api/terms.php?id=${n}`),create:n=>$.post("http://localhost/McSMS/backend/api/terms.php",n),update:(n,r)=>$.put(`http://localhost/McSMS/backend/api/terms.php?id=${n}`,r),delete:n=>$.delete(`http://localhost/McSMS/backend/api/terms.php?id=${n}`),activate:n=>$.post(`http://localhost/McSMS/backend/api/terms.php?id=${n}&action=activate`)},Ii={getAll:()=>$.get("http://localhost/McSMS/backend/api/teachers.php"),getById:n=>$.get(`http://localhost/McSMS/backend/api/teachers.php?id=${n}`),create:n=>$.post("http://localhost/McSMS/backend/api/teachers.php",n),update:(n,r)=>$.put(`http://localhost/McSMS/backend/api/teachers.php?id=${n}`,r),delete:n=>$.delete(`http://localhost/McSMS/backend/api/teachers.php?id=${n}`)},cr={getAll:()=>$.get("http://localhost/McSMS/backend/api/fee_groups.php"),getById:n=>$.get(`http://localhost/McSMS/backend/api/fee_groups.php?id=${n}`),create:n=>$.post("http://localhost/McSMS/backend/api/fee_groups.php",n),update:(n,r)=>$.put(`http://localhost/McSMS/backend/api/fee_groups.php?id=${n}`,r),delete:n=>$.delete(`http://localhost/McSMS/backend/api/fee_groups.php?id=${n}`)},Kl={getAll:()=>$.get("http://localhost/McSMS/backend/api/fee_items.php"),getById:n=>$.get(`http://localhost/McSMS/backend/api/fee_items.php?id=${n}`),create:n=>$.post("http://localhost/McSMS/backend/api/fee_items.php",n),update:(n,r)=>$.put(`http://localhost/McSMS/backend/api/fee_items.php?id=${n}`,r),delete:n=>$.delete(`http://localhost/McSMS/backend/api/fee_items.php?id=${n}`)},pt={getDashboardStats:()=>$.get("http://localhost/McSMS/backend/api/finance.php?resource=dashboard"),getFeeRules:()=>$.get("http://localhost/McSMS/backend/api/finance.php?resource=fee_rules"),getFeeRuleById:n=>$.get(`http://localhost/McSMS/backend/api/finance.php?resource=fee_rules&id=${n}`),createFeeRule:n=>$.post("http://localhost/McSMS/backend/api/finance.php?resource=fee_rules",n),updateFeeRule:(n,r)=>$.put(`http://localhost/McSMS/backend/api/finance.php?resource=fee_rules&id=${n}`,r),deleteFeeRule:n=>$.delete(`http://localhost/McSMS/backend/api/finance.php?resource=fee_rules&id=${n}`),getInstallmentPlans:()=>$.get("http://localhost/McSMS/backend/api/finance.php?resource=installment_plans"),getInstallmentPlanById:n=>$.get(`http://localhost/McSMS/backend/api/finance.php?resource=installment_plans&id=${n}`),createInstallmentPlan:n=>$.post("http://localhost/McSMS/backend/api/finance.php?resource=installment_plans",n),updateInstallmentPlan:(n,r)=>$.put(`http://localhost/McSMS/backend/api/finance.php?resource=installment_plans&id=${n}`,r),deleteInstallmentPlan:n=>$.delete(`http://localhost/McSMS/backend/api/finance.php?resource=installment_plans&id=${n}`),getInvoices:n=>$.get("http://localhost/McSMS/backend/api/finance.php?resource=invoices",{params:n}),getInvoiceById:n=>$.get(`http://localhost/McSMS/backend/api/finance.php?resource=invoices&id=${n}`),getInvoiceStats:()=>$.get("http://localhost/McSMS/backend/api/finance.php?resource=invoices&action=stats"),createInvoice:n=>$.post("http://localhost/McSMS/backend/api/finance.php?resource=invoices",n),approveInvoice:(n,r)=>$.post(`http://localhost/McSMS/backend/api/finance.php?resource=invoices&id=${n}&action=approve`,r),rejectInvoice:(n,r)=>$.post(`http://localhost/McSMS/backend/api/finance.php?resource=invoices&id=${n}&action=reject`,r),getPayments:()=>$.get("http://localhost/McSMS/backend/api/finance.php?resource=payments"),getPaymentById:n=>$.get(`http://localhost/McSMS/backend/api/finance.php?resource=payments&id=${n}`),createPayment:n=>$.post("http://localhost/McSMS/backend/api/finance.php?resource=payments",n)};function vr(){const[n,r]=f.useState({school_name:"McSMS Pro",school_logo:null,school_tagline:"School Management System",school_address:"",school_phone:"",school_email:""}),[i,d]=f.useState(!0);return f.useEffect(()=>{(async()=>{try{const u=await $.get("http://localhost/McSMS/backend/api/public_settings.php");u.data.success&&r(u.data.settings)}catch(u){console.error("Failed to fetch school settings:",u)}finally{d(!1)}})()},[]),{settings:n,loading:i}}const XN=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),QN=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,i,d)=>d?d.toUpperCase():i.toLowerCase()),d0=n=>{const r=QN(n);return r.charAt(0).toUpperCase()+r.slice(1)},tf=(...n)=>n.filter((r,i,d)=>!!r&&r.trim()!==""&&d.indexOf(r)===i).join(" ").trim(),IN=n=>{for(const r in n)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};var ZN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const JN=f.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:d,className:m="",children:u,iconNode:x,...p},b)=>f.createElement("svg",{ref:b,...ZN,width:r,height:r,stroke:n,strokeWidth:d?Number(i)*24/Number(r):i,className:tf("lucide",m),...!u&&!IN(p)&&{"aria-hidden":"true"},...p},[...x.map(([g,h])=>f.createElement(g,h)),...Array.isArray(u)?u:[u]]));const oe=(n,r)=>{const i=f.forwardRef(({className:d,...m},u)=>f.createElement(JN,{ref:u,iconNode:r,className:tf(`lucide-${XN(d0(n))}`,`lucide-${n}`,d),...m}));return i.displayName=d0(n),i};const KN=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Ma=oe("activity",KN);const WN=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],ev=oe("arrow-down-right",WN);const tv=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],dl=oe("arrow-left",tv);const sv=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],en=oe("arrow-right",sv);const av=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Ea=oe("arrow-up-right",av);const lv=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],dt=oe("award",lv);const nv=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],wr=oe("bell",nv);const rv=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],qe=oe("book-open",rv);const iv=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],sa=oe("brain",iv);const cv=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Js=oe("briefcase",cv);const dv=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Ac=oe("building",dv);const ov=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ue=oe("calendar",ov);const mv=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Dm=oe("camera",mv);const uv=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],vs=oe("chart-column",uv);const xv=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Mc=oe("chart-pie",xv);const hv=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],pv=oe("check",hv);const fv=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],xc=oe("chevron-down",fv);const gv=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],cm=oe("chevron-up",gv);const bv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],jt=oe("circle-alert",bv);const jv=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],he=oe("circle-check-big",jv);const yv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],cs=oe("circle-x",yv);const Nv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],vv=oe("circle",Nv);const wv=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],Sv=oe("clipboard-check",wv);const _v=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],fm=oe("clipboard-list",_v);const Cv=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],at=oe("clock",Cv);const kv=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],_t=oe("credit-card",kv);const Av=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Ee=oe("dollar-sign",Av);const Mv=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],At=oe("download",Mv);const Ev=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],o0=oe("eye-off",Ev);const Tv=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],os=oe("eye",Tv);const Dv=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Rv=oe("file-check",Dv);const zv=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Be=oe("file-text",zv);const Lv=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],sf=oe("fingerprint-pattern",Lv);const Ov=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],dn=oe("funnel",Ov);const Uv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Hv=oe("globe",Uv);const $v=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Ke=oe("graduation-cap",$v);const qv=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Bv=oe("heart",qv);const Gv=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],Fv=oe("history",Gv);const Pv=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],af=oe("house",Pv);const Yv=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],lf=oe("image",Yv);const Vv=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],nf=oe("inbox",Vv);const Xv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Ta=oe("info",Xv);const Qv=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Iv=oe("key",Qv);const Zv=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],hc=oe("layout-dashboard",Zv);const Jv=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],m0=oe("lightbulb",Jv);const Kv=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],il=oe("lock",Kv);const Wv=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],e2=oe("log-out",Wv);const t2=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],js=oe("mail",t2);const s2=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Ec=oe("map-pin",s2);const a2=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],cl=oe("message-square",a2);const l2=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],pr=oe("phone",l2);const n2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],lt=oe("plus",n2);const r2=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],jc=oe("printer",r2);const i2=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],rf=oe("receipt",i2);const c2=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],cf=oe("refresh-cw",c2);const d2=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],u0=oe("rocket",d2);const o2=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ms=oe("save",o2);const m2=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],sn=oe("school",m2);const u2=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Sr=oe("search",u2);const x2=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],pc=oe("send",x2);const h2=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xr=oe("settings",h2);const p2=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]],f2=oe("shield-x",p2);const g2=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ks=oe("shield",g2);const b2=[["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M12 21v-9",key:"17s77i"}],["path",{d:"M12 8V3",key:"13r4qs"}],["path",{d:"M17 16h4",key:"h1uq16"}],["path",{d:"M19 12V3",key:"o1uvq1"}],["path",{d:"M19 21v-5",key:"qua636"}],["path",{d:"M3 14h4",key:"bcjad9"}],["path",{d:"M5 10V3",key:"cb8scm"}],["path",{d:"M5 21v-7",key:"1w1uti"}]],j2=oe("sliders-vertical",b2);const y2=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],ea=oe("sparkles",y2);const N2=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Dt=oe("square-pen",N2);const v2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],w2=oe("target",v2);const S2=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Bt=oe("trash-2",S2);const _2=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],C2=oe("trending-down",_2);const k2=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],We=oe("trending-up",k2);const A2=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ms=oe("triangle-alert",A2);const M2=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],gm=oe("truck",M2);const E2=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Es=oe("upload",E2);const T2=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ta=oe("user-check",T2);const D2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],df=oe("user-plus",D2);const R2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Tc=oe("user-x",R2);const z2=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Mt=oe("user",z2);const L2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Se=oe("users",L2);const O2=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],fc=oe("video",O2);const U2=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],yc=oe("wallet",U2);const H2=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],$2=oe("wrench",H2);const q2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ve=oe("x",q2);function B2(){const n=ft(),r=Ze(h=>h.login),{settings:i}=vr(),[d,m]=f.useState({email:"",password:""}),[u,x]=f.useState(""),[p,b]=f.useState(!1),g=async h=>{h.preventDefault(),x(""),b(!0);try{const v=await VN.login(d),{user:w,token:A}=v.data;switch(r(w,A),w.user_type){case"admin":n("/admin/dashboard");break;case"parent":n("/parent/dashboard");break;case"teacher":n("/teacher/dashboard");break;case"finance":n("/finance/dashboard");break;default:n("/dashboard")}}catch(v){x(v.response?.data?.message||"Login failed. Please check your credentials.")}finally{b(!1)}};return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-[60%] relative bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-700 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute top-20 left-20 w-72 h-72 bg-white/10 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-purple-300/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-blue-300/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}})]}),e.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center w-full px-12 text-white",children:e.jsxs("div",{className:"text-center space-y-6 animate-fade-in",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-white/20 backdrop-blur-lg rounded-full mb-6 animate-bounce-slow",children:e.jsx(Ke,{className:"w-14 h-14 text-white"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h1",{className:"text-6xl font-bold animate-slide-up",children:"Welcome to"}),e.jsx("h2",{className:"text-5xl font-extrabold bg-gradient-to-r from-yellow-200 via-pink-200 to-purple-200 bg-clip-text text-transparent animate-slide-up",style:{animationDelay:"0.2s"},children:i.school_name}),e.jsxs("div",{className:"flex items-center justify-center gap-2 animate-slide-up",style:{animationDelay:"0.4s"},children:[e.jsx(ea,{className:"w-6 h-6 text-yellow-300 animate-pulse"}),e.jsx("p",{className:"text-2xl font-light text-blue-100",children:i.school_tagline}),e.jsx(ea,{className:"w-6 h-6 text-yellow-300 animate-pulse"})]})]}),e.jsxs("div",{className:"mt-12 grid grid-cols-2 gap-6 max-w-2xl animate-slide-up",style:{animationDelay:"0.6s"},children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 hover:bg-white/20 transition-all duration-300 hover:scale-105",children:[e.jsx("div",{className:"text-3xl mb-2",children:""}),e.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Smart Learning"}),e.jsx("p",{className:"text-sm text-blue-100",children:"AI-powered education platform"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 hover:bg-white/20 transition-all duration-300 hover:scale-105",children:[e.jsx("div",{className:"text-3xl mb-2",children:""}),e.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Analytics"}),e.jsx("p",{className:"text-sm text-blue-100",children:"Real-time insights & reports"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 hover:bg-white/20 transition-all duration-300 hover:scale-105",children:[e.jsx("div",{className:"text-3xl mb-2",children:""}),e.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Transport"}),e.jsx("p",{className:"text-sm text-blue-100",children:"GPS tracking & management"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 hover:bg-white/20 transition-all duration-300 hover:scale-105",children:[e.jsx("div",{className:"text-3xl mb-2",children:""}),e.jsx("h3",{className:"font-semibold text-lg mb-1",children:"AI Features"}),e.jsx("p",{className:"text-sm text-blue-100",children:"Intelligent automation"})]})]}),e.jsx("p",{className:"text-xl text-blue-100 mt-8 animate-slide-up",style:{animationDelay:"0.8s"},children:"Ghana Schools - GES & Cambridge Curriculum"})]})})]}),e.jsx("div",{className:"w-full lg:w-[40%] flex items-center justify-center p-8 bg-gray-50",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"lg:hidden text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full mb-4",children:e.jsx(Ke,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:i.school_name})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[e.jsx("div",{className:"flex justify-center mb-6",children:i.school_logo?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:i.school_logo,alt:i.school_name,className:"h-20 w-auto object-contain",onError:h=>{console.error("Logo failed to load:",i.school_logo),h.target.style.display="none",h.target.nextElementSibling.style.display="flex"},onLoad:()=>console.log("Logo loaded successfully:",i.school_logo)}),e.jsx("div",{className:"hidden items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl",children:e.jsx(Ke,{className:"w-12 h-12 text-white"})})]}):e.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl",children:e.jsx(Ke,{className:"w-12 h-12 text-white"})})}),e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),e.jsx("p",{className:"text-gray-600",children:"Sign in to continue to your dashboard"})]}),u&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[e.jsx(jt,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-700",children:u})]}),e.jsxs("form",{onSubmit:g,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(js,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",required:!0,className:"w-full pl-11 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"admin@school.com",value:d.email,onChange:h=>m({...d,email:h.target.value})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(il,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"password",required:!0,className:"w-full pl-11 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",placeholder:"",value:d.password,onChange:h=>m({...d,password:h.target.value})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"w-4 h-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Remember me"})]}),e.jsx(ds,{to:"/forgot-password",className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Forgot password?"})]}),e.jsx("button",{type:"submit",disabled:p,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-lg font-semibold text-lg hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-[1.02]",children:p?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign In"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx(ds,{to:"/register",className:"text-blue-600 hover:text-blue-700 font-semibold",children:"Register here"})]})})]}),e.jsx("div",{className:"mt-8 text-center text-gray-500 text-sm",children:e.jsxs("p",{children:[" 2025 ",i.school_name,". All rights reserved."]})})]})}),e.jsx("style",{children:`
        @keyframes fade-in {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }

        @keyframes slide-up {
          from {
            opacity: 0;
            transform: translateY(30px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        @keyframes bounce-slow {
          0%, 100% {
            transform: translateY(0);
          }
          50% {
            transform: translateY(-20px);
          }
        }

        .animate-fade-in {
          animation: fade-in 1s ease-out;
        }

        .animate-slide-up {
          animation: slide-up 0.8s ease-out forwards;
          opacity: 0;
        }

        .animate-bounce-slow {
          animation: bounce-slow 3s ease-in-out infinite;
        }
      `})]})}function G2(){ft();const{settings:n}=vr(),[r,i]=f.useState(!1),[d,m]=f.useState(!1),[u,x]=f.useState({name:"",email:"",phone:"",password:"",confirmPassword:""}),[p,b]=f.useState(""),g=async h=>{if(h.preventDefault(),b(""),u.password!==u.confirmPassword){b("Passwords do not match");return}if(u.password.length<6){b("Password must be at least 6 characters");return}try{i(!0),console.log("Submitting registration...",u);const v=await $.post("http://localhost/McSMS/backend/api/test_register.php",{name:u.name,email:u.email,phone:u.phone,password:u.password,user_type:"pending",status:"pending"});console.log("Registration response:",v.data),v.data.success?m(!0):b("Registration failed. Please try again.")}catch(v){console.error("Registration error:",v),console.error("Error response:",v.response?.data);let w="Registration failed. Please try again.";v.response?.data&&((typeof v.response.data=="string"?v.response.data:JSON.stringify(v.response.data)).includes("Email already exists")?w="This email is already registered. Please use a different email or try logging in.":v.response.data.error&&(w=v.response.data.error)),b(w)}finally{i(!1)}};return d?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-600 to-emerald-700 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce",children:e.jsx(he,{className:"w-12 h-12 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Registration Successful!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your account has been created and is pending approval from an administrator. You will receive an email once your account is approved."}),e.jsx(ds,{to:"/login",className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 text-white py-3 rounded-lg font-semibold hover:from-green-700 hover:to-emerald-700 transition-all duration-200 inline-block",children:"Go to Login"})]})})}):e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-[60%] relative bg-gradient-to-br from-emerald-600 via-teal-600 to-cyan-700 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute top-20 left-20 w-72 h-72 bg-white/10 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-teal-300/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-cyan-300/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}})]}),e.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center w-full px-12 text-white",children:e.jsxs("div",{className:"text-center space-y-6 animate-fade-in",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-white/20 backdrop-blur-lg rounded-full mb-6 animate-bounce-slow",children:e.jsx(Se,{className:"w-14 h-14 text-white"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h1",{className:"text-6xl font-bold animate-slide-up",children:"Join"}),e.jsx("h2",{className:"text-5xl font-extrabold bg-gradient-to-r from-yellow-200 via-green-200 to-cyan-200 bg-clip-text text-transparent animate-slide-up",style:{animationDelay:"0.2s"},children:n.school_name}),e.jsxs("div",{className:"flex items-center justify-center gap-2 animate-slide-up",style:{animationDelay:"0.4s"},children:[e.jsx(ea,{className:"w-6 h-6 text-yellow-300 animate-pulse"}),e.jsx("p",{className:"text-2xl font-light text-emerald-100",children:n.school_tagline}),e.jsx(ea,{className:"w-6 h-6 text-yellow-300 animate-pulse"})]})]}),e.jsxs("div",{className:"mt-12 space-y-4 max-w-lg animate-slide-up",style:{animationDelay:"0.6s"},children:[e.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 hover:bg-white/20 transition-all duration-300 hover:scale-105",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(qe,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Access Learning Resources"}),e.jsx("p",{className:"text-sm text-emerald-100",children:"Complete course materials and assignments"})]})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 hover:bg-white/20 transition-all duration-300 hover:scale-105",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(dt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Track Your Progress"}),e.jsx("p",{className:"text-sm text-emerald-100",children:"Monitor grades, attendance, and achievements"})]})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 hover:bg-white/20 transition-all duration-300 hover:scale-105",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(Se,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Connect with Community"}),e.jsx("p",{className:"text-sm text-emerald-100",children:"Engage with teachers, students, and parents"})]})]})})]}),e.jsx("p",{className:"text-xl text-emerald-100 mt-8 animate-slide-up",style:{animationDelay:"0.8s"},children:"Empowering Education in Ghana"})]})})]}),e.jsx("div",{className:"w-full lg:w-[40%] flex items-center justify-center p-8 bg-gray-50",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"lg:hidden text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-emerald-600 to-teal-600 rounded-full mb-4",children:e.jsx(Ke,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n.school_name})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[e.jsx("div",{className:"flex justify-center mb-6",children:n.school_logo?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:n.school_logo,alt:n.school_name,className:"h-20 w-auto object-contain",onError:h=>{console.error("Logo failed to load:",n.school_logo),h.target.style.display="none",h.target.nextElementSibling.style.display="flex"},onLoad:()=>console.log("Logo loaded successfully:",n.school_logo)}),e.jsx("div",{className:"hidden items-center justify-center w-20 h-20 bg-gradient-to-br from-emerald-600 to-teal-600 rounded-xl",children:e.jsx(Ke,{className:"w-12 h-12 text-white"})})]}):e.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-gradient-to-br from-emerald-600 to-teal-600 rounded-xl",children:e.jsx(Ke,{className:"w-12 h-12 text-white"})})}),e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Create Account"}),e.jsx("p",{className:"text-gray-600",children:"Register to access the system"})]}),p&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:e.jsx("div",{className:"text-red-600 text-sm",children:p})}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Full Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",required:!0,value:u.name,onChange:h=>x({...u,name:h.target.value}),className:"w-full pl-11 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-200",placeholder:"Enter your full name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx(js,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",required:!0,value:u.email,onChange:h=>x({...u,email:h.target.value}),className:"w-full pl-11 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-200",placeholder:"your.email@example.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Phone Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx(pr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"tel",required:!0,value:u.phone,onChange:h=>x({...u,phone:h.target.value}),className:"w-full pl-11 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-200",placeholder:"0244123456"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(il,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"password",required:!0,value:u.password,onChange:h=>x({...u,password:h.target.value}),className:"w-full pl-11 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-200",placeholder:"Minimum 6 characters"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(il,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"password",required:!0,value:u.confirmPassword,onChange:h=>x({...u,confirmPassword:h.target.value}),className:"w-full pl-11 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all duration-200",placeholder:"Re-enter password"})]})]}),e.jsx("button",{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-emerald-600 to-teal-600 text-white py-3 rounded-lg font-semibold text-lg hover:from-emerald-700 hover:to-teal-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-[1.02]",children:r?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Account..."]}):"Create Account"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx(ds,{to:"/login",className:"text-emerald-600 hover:text-emerald-700 font-semibold",children:"Sign In"})]})})]}),e.jsx("div",{className:"mt-8 text-center text-gray-500 text-sm",children:e.jsxs("p",{children:[" 2025 ",n.school_name,". All rights reserved."]})})]})}),e.jsx("style",{children:`
        @keyframes fade-in {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }

        @keyframes slide-up {
          from {
            opacity: 0;
            transform: translateY(30px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        @keyframes bounce-slow {
          0%, 100% {
            transform: translateY(0);
          }
          50% {
            transform: translateY(-20px);
          }
        }

        .animate-fade-in {
          animation: fade-in 1s ease-out;
        }

        .animate-slide-up {
          animation: slide-up 0.8s ease-out forwards;
          opacity: 0;
        }

        .animate-bounce-slow {
          animation: bounce-slow 3s ease-in-out infinite;
        }
      `})]})}function F2(){const{settings:n}=vr(),[r,i]=f.useState(""),[d,m]=f.useState(!1),[u,x]=f.useState(!1),[p,b]=f.useState(""),g=async h=>{h.preventDefault(),b(""),m(!0);try{const v=await $.post("http://localhost/McSMS/backend/api/auth.php?action=forgot_password",{email:r});v.data.success?x(!0):b(v.data.message||"Failed to send reset link. Please try again.")}catch{b("An error occurred. Please try again later.")}finally{m(!1)}};return u?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-600 to-red-700 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce",children:e.jsx(he,{className:"w-12 h-12 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Check Your Email!"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["We've sent a password reset link to ",e.jsx("strong",{children:r}),". Please check your inbox and follow the instructions to reset your password."]}),e.jsx(ds,{to:"/login",className:"w-full bg-gradient-to-r from-orange-600 to-red-600 text-white py-3 rounded-lg font-semibold hover:from-orange-700 hover:to-red-700 transition-all duration-200 inline-block",children:"Back to Login"})]})})}):e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-[60%] relative bg-gradient-to-br from-orange-600 via-red-600 to-pink-700 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute top-20 left-20 w-72 h-72 bg-white/10 rounded-full blur-3xl animate-pulse"}),e.jsx("div",{className:"absolute bottom-20 right-20 w-96 h-96 bg-pink-300/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-red-300/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}})]}),e.jsx("div",{className:"relative z-10 flex flex-col items-center justify-center w-full px-12 text-white",children:e.jsxs("div",{className:"text-center space-y-6 animate-fade-in",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-white/20 backdrop-blur-lg rounded-full mb-6 animate-bounce-slow",children:e.jsx(Ks,{className:"w-14 h-14 text-white"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h1",{className:"text-6xl font-bold animate-slide-up",children:n.school_name}),e.jsx("h2",{className:"text-5xl font-extrabold bg-gradient-to-r from-yellow-200 via-orange-200 to-pink-200 bg-clip-text text-transparent animate-slide-up",style:{animationDelay:"0.2s"},children:"Password Reset"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 animate-slide-up",style:{animationDelay:"0.4s"},children:[e.jsx(ea,{className:"w-6 h-6 text-yellow-300 animate-pulse"}),e.jsx("p",{className:"text-2xl font-light text-orange-100",children:n.school_tagline}),e.jsx(ea,{className:"w-6 h-6 text-yellow-300 animate-pulse"})]})]}),e.jsxs("div",{className:"mt-12 space-y-4 max-w-lg animate-slide-up",style:{animationDelay:"0.6s"},children:[e.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 hover:bg-white/20 transition-all duration-300 hover:scale-105",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(js,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Email Verification"}),e.jsx("p",{className:"text-sm text-orange-100",children:"Secure reset link sent to your inbox"})]})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 hover:bg-white/20 transition-all duration-300 hover:scale-105",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(Iv,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"One-Time Link"}),e.jsx("p",{className:"text-sm text-orange-100",children:"Reset link expires after single use"})]})]})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-xl p-6 hover:bg-white/20 transition-all duration-300 hover:scale-105",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx(il,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Encrypted Process"}),e.jsx("p",{className:"text-sm text-orange-100",children:"Your data is protected end-to-end"})]})]})})]}),e.jsx("p",{className:"text-xl text-orange-100 mt-8 animate-slide-up",style:{animationDelay:"0.8s"},children:"Your Security is Our Priority"})]})})]}),e.jsx("div",{className:"w-full lg:w-[40%] flex items-center justify-center p-8 bg-gray-50",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"lg:hidden text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-orange-600 to-red-600 rounded-full mb-4",children:e.jsx(Ke,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n.school_name})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 border border-gray-100",children:[e.jsx("div",{className:"flex justify-center mb-6",children:n.school_logo?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:n.school_logo,alt:n.school_name,className:"h-20 w-auto object-contain",onError:h=>{console.error("Logo failed to load:",n.school_logo),h.target.style.display="none",h.target.nextElementSibling.style.display="flex"},onLoad:()=>console.log("Logo loaded successfully:",n.school_logo)}),e.jsx("div",{className:"hidden items-center justify-center w-20 h-20 bg-gradient-to-br from-orange-600 to-red-600 rounded-xl",children:e.jsx(Ke,{className:"w-12 h-12 text-white"})})]}):e.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-gradient-to-br from-orange-600 to-red-600 rounded-xl",children:e.jsx(Ke,{className:"w-12 h-12 text-white"})})}),e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Forgot Password?"}),e.jsx("p",{className:"text-gray-600",children:"No worries! Enter your email and we'll send you reset instructions."})]}),p&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-700",children:p})}),e.jsxs("form",{onSubmit:g,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(js,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",required:!0,value:r,onChange:h=>i(h.target.value),className:"w-full pl-11 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200",placeholder:"your.email@example.com"})]})]}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-orange-600 to-red-600 text-white py-3 rounded-lg font-semibold text-lg hover:from-orange-700 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-[1.02]",children:d?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending Reset Link..."]}):"Send Reset Link"})]}),e.jsx("div",{className:"mt-8",children:e.jsxs(ds,{to:"/login",className:"flex items-center justify-center gap-2 text-gray-600 hover:text-gray-900 font-medium transition-colors",children:[e.jsx(dl,{className:"w-4 h-4"}),"Back to Login"]})})]}),e.jsx("div",{className:"mt-8 text-center text-gray-500 text-sm",children:e.jsxs("p",{children:[" 2025 ",n.school_name,". All rights reserved."]})})]})}),e.jsx("style",{children:`
        @keyframes fade-in {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }

        @keyframes slide-up {
          from {
            opacity: 0;
            transform: translateY(30px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        @keyframes bounce-slow {
          0%, 100% {
            transform: translateY(0);
          }
          50% {
            transform: translateY(-20px);
          }
        }

        .animate-fade-in {
          animation: fade-in 1s ease-out;
        }

        .animate-slide-up {
          animation: slide-up 0.8s ease-out forwards;
          opacity: 0;
        }

        .animate-bounce-slow {
          animation: bounce-slow 3s ease-in-out infinite;
        }
      `})]})}function P2(){const n=xs(),{user:r,logout:i}=Ze(),{settings:d}=vr(),u=(()=>{if(d.school_abbreviation)return d.school_abbreviation.toUpperCase();const w=d.school_name;if(!w)return"McSMS";const A=w.split(" ").filter(T=>T.length>0);return A.length===1?w.substring(0,Math.min(5,w.length)).toUpperCase():A.slice(0,5).map(T=>T.charAt(0).toUpperCase()).join("")})(),x=[{icon:hc,label:"Dashboard",path:"/admin/dashboard"},{icon:Se,label:"Users",path:"/admin/users"},{icon:Ks,label:"Roles & Permissions",path:"/admin/roles"},{icon:Ke,label:"Students",path:"/admin/students"},{icon:Sv,label:"Admissions",path:"/admin/admissions"},{icon:Se,label:"Teachers",path:"/admin/teachers"},{icon:sn,label:"Classes",path:"/admin/classes"},{icon:qe,label:"Class Curriculum",path:"/admin/class-subjects"},{icon:qe,label:"Subjects",path:"/admin/subjects"},{icon:Ue,label:"Terms",path:"/admin/terms"},{icon:at,label:"Timetable",path:"/admin/timetable",badge:"Pro"},{icon:Rv,label:"Exams",path:"/admin/exams",badge:"Pro"},{icon:fc,label:"LMS",path:"/admin/lms",badge:"Pro"},{icon:Ee,label:"Finance",path:"/admin/finance"},{icon:_t,label:"Fee Structure",path:"/admin/fee-structure"},{icon:Be,label:"Invoices",path:"/admin/invoices"},{icon:Ee,label:"Payments",path:"/admin/payments"},{icon:he,label:"Attendance",path:"/admin/attendance"},{icon:dt,label:"Grading",path:"/admin/grading"},{icon:qe,label:"Homework",path:"/admin/homework"},{icon:We,label:"Analytics",path:"/admin/analytics",badge:"Pro"},{icon:gm,label:"Transport",path:"/admin/transport",badge:"Pro"},{icon:Js,label:"HR & Payroll",path:"/admin/hr-payroll",badge:"Pro"},{icon:sf,label:"Biometric",path:"/admin/biometric",badge:"Pro"},{icon:Ac,label:"Multi-School",path:"/admin/multi-school",badge:"Pro"},{icon:sa,label:"AI Features",path:"/admin/ai-features",badge:"Pro"},{icon:vs,label:"Reports",path:"/admin/reports"},{icon:Es,label:"Bulk Import",path:"/admin/import"},{icon:j2,label:"System Configuration",path:"/admin/system-config"},{icon:xr,label:"Settings",path:"/admin/settings"},{icon:Ma,label:"System Logs",path:"/admin/logs"}],p=[{icon:hc,label:"Dashboard",path:"/teacher/dashboard"},{icon:sn,label:"My Classes",path:"/teacher/classes"},{icon:he,label:"Attendance",path:"/teacher/attendance"},{icon:qe,label:"Homework",path:"/teacher/homework"},{icon:dt,label:"Grading",path:"/teacher/grading"},{icon:Be,label:"Student Reports",path:"/teacher/reports"},{icon:cl,label:"Messages",path:"/teacher/messages"},{icon:xr,label:"Settings",path:"/teacher/settings"}],b=[{icon:hc,label:"Dashboard",path:"/parent/dashboard"},{icon:df,label:"Apply for Admission",path:"/parent/apply"},{icon:he,label:"Enroll for Term",path:"/parent/enroll"},{icon:Be,label:"Invoices",path:"/parent/invoices"},{icon:Ee,label:"Payments",path:"/parent/payments"},{icon:cl,label:"Messages",path:"/parent/messages"},{icon:xr,label:"Settings",path:"/parent/settings"}],h=(()=>{switch(r?.user_type){case"admin":return x;case"teacher":return p;case"parent":return b;default:return x}})(),v=w=>n.pathname===w;return e.jsxs("div",{className:"w-64 bg-white border-r border-gray-200 h-screen flex flex-col",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-3",children:[d.school_logo?e.jsx("img",{src:d.school_logo,alt:d.school_name,className:"w-10 h-10 object-contain rounded-lg",onError:w=>{w.target.style.display="none",w.target.nextElementSibling.style.display="flex"}}):null,e.jsx("div",{className:`w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center ${d.school_logo?"hidden":""}`,children:e.jsx(Ke,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-900",children:u}),e.jsx("p",{className:"text-xs text-gray-500",children:d.school_tagline||"School Management"})]})]})}),e.jsx("nav",{className:"flex-1 overflow-y-auto p-4",children:e.jsx("div",{className:"space-y-1",children:h.map(w=>{const A=w.icon,T=v(w.path);return e.jsxs(ds,{to:w.path,className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${T?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(A,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-medium flex-1",children:w.label}),w.badge&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold bg-gradient-to-r from-purple-500 to-blue-500 text-white rounded-full",children:w.badge})]},w.path)})})})]})}function Y2(){const{user:n,logout:r}=Ze(),i=ft(),[d,m]=f.useState(!1),[u,x]=f.useState(!1),[p,b]=f.useState(!1),[g,h]=f.useState(""),v=f.useRef(null),w=f.useRef(null),A=f.useRef(null);f.useEffect(()=>{const N=E=>{v.current&&!v.current.contains(E.target)&&m(!1),w.current&&!w.current.contains(E.target)&&x(!1),A.current&&!A.current.contains(E.target)&&b(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]);const T=[{id:1,type:"info",title:"New Student Enrolled",message:"John Doe has been enrolled in Primary 1",time:"5 min ago",icon:Mt},{id:2,type:"success",title:"Homework Submitted",message:"15 students submitted Math homework",time:"1 hour ago",icon:Be},{id:3,type:"warning",title:"Low Attendance",message:"Primary 2 attendance is below 80%",time:"2 hours ago",icon:Ue},{id:4,type:"info",title:"Assessment Graded",message:"Science quiz has been graded",time:"3 hours ago",icon:dt}],M=[{id:1,from:"Jane Smith",message:"Regarding my child's performance...",time:"10 min ago",unread:!0},{id:2,from:"Admin Office",message:"Staff meeting tomorrow at 9 AM",time:"1 hour ago",unread:!0},{id:3,from:"Michael Brown",message:"Thank you for the feedback",time:"2 hours ago",unread:!1}],R=T.length,C=M.filter(N=>N.unread).length,y=()=>{r(),i("/login")},k=N=>{N.preventDefault(),g.trim()&&console.log("Searching for:",g)},_=N=>{const E={info:"bg-blue-100 text-blue-600",success:"bg-green-100 text-green-600",warning:"bg-orange-100 text-orange-600",error:"bg-red-100 text-red-600"};return E[N]||E.info},G=()=>n?.user_type==="admin"?"/admin":n?.user_type==="teacher"?"/teacher":n?.user_type==="parent"?"/parent":"/admin",z=()=>n?.user_type==="teacher"||n?.user_type==="parent";return e.jsxs("div",{className:"h-16 bg-white border-b border-gray-200 px-6 flex items-center justify-between",children:[e.jsx("div",{className:"flex-1 max-w-xl",children:e.jsxs("form",{onSubmit:k,className:"relative",children:[e.jsx(Sr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:g,onChange:N=>h(N.target.value),placeholder:"Search students, staff, events...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",ref:v,children:[e.jsxs("button",{onClick:()=>m(!d),className:"relative p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(wr,{className:"w-5 h-5"}),R>0&&e.jsx("span",{className:"absolute top-1 right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:R})]}),d&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Notifications"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[R," new notifications"]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:T.map(N=>{const E=N.icon;return e.jsx("div",{className:"p-4 hover:bg-gray-50 border-b border-gray-100 cursor-pointer",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${_(N.type)}`,children:e.jsx(E,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:N.title}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:N.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:N.time})]})]})},N.id)})}),e.jsx("div",{className:"p-3 border-t border-gray-200 text-center",children:e.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View All Notifications"})})]})]}),e.jsxs("div",{className:"relative",ref:w,children:[e.jsxs("button",{onClick:()=>x(!u),className:"relative p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(js,{className:"w-5 h-5"}),C>0&&e.jsx("span",{className:"absolute top-1 right-1 w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center text-white text-xs font-bold",children:C})]}),u&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Messages"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[C," unread messages"]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:M.map(N=>e.jsx("div",{onClick:()=>{z()&&(x(!1),i(`${G()}/messages`))},className:`p-4 hover:bg-gray-50 border-b border-gray-100 ${z()?"cursor-pointer":"cursor-default"} ${N.unread?"bg-blue-50":""}`,children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-gray-600 font-semibold text-sm",children:N.from.charAt(0)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:N.from}),N.unread&&e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),e.jsx("p",{className:"text-xs text-gray-600 mt-1 truncate",children:N.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:N.time})]})]})},N.id))}),z()&&e.jsx("div",{className:"p-3 border-t border-gray-200 text-center",children:e.jsx("button",{onClick:()=>{x(!1),i(`${G()}/messages`)},className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View All Messages"})})]})]}),e.jsxs("div",{className:"relative",ref:A,children:[e.jsxs("div",{className:"flex items-center gap-3 pl-4 border-l border-gray-200",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n?.first_name&&n?.last_name?`${n.first_name} ${n.last_name}`:n?.name||"User"}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:n?.user_type||"User"})]}),e.jsxs("button",{onClick:()=>b(!p),className:"flex items-center gap-2 p-2 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-semibold",children:n?.first_name?.charAt(0).toUpperCase()||n?.name?.charAt(0).toUpperCase()||"U"})}),e.jsx(xc,{className:"w-4 h-4 text-gray-600"})]})]}),p&&e.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 z-50",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:n?.first_name&&n?.last_name?`${n.first_name} ${n.last_name}`:n?.name||"User"}),e.jsx("p",{className:"text-sm text-gray-500",children:n?.email||"user@school.com"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1 capitalize",children:[n?.user_type||"User"," Account"]})]}),e.jsxs("div",{className:"py-2",children:[e.jsxs("button",{onClick:()=>{b(!1),i(`${G()}/dashboard`)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-3",children:[e.jsx(Mt,{className:"w-4 h-4"}),"My Profile"]}),e.jsxs("button",{onClick:()=>{b(!1),i(`${G()}/settings`)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-3",children:[e.jsx(xr,{className:"w-4 h-4"}),"Settings"]}),z()&&e.jsxs("button",{onClick:()=>{b(!1),i(`${G()}/messages`)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-3",children:[e.jsx(cl,{className:"w-4 h-4"}),"Messages"]})]}),e.jsx("div",{className:"border-t border-gray-200 py-2",children:e.jsxs("button",{onClick:y,className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-3",children:[e.jsx(e2,{className:"w-4 h-4"}),"Logout"]})})]})]})]})]})}function tl(){return e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx(P2,{}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(Y2,{}),e.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:e.jsx(Mj,{})})]})]})}function V2({isOpen:n,onClose:r,onStart:i,onSkip:d}){const{settings:m}=vr(),[u,x]=f.useState(1);if(!n)return null;const p=[{icon:"",title:"Student Management",description:"Manage enrollments, attendance, and records"},{icon:"",title:"Fee Management",description:"Track payments, invoices, and financial reports"},{icon:"",title:"Academic Tracking",description:"Monitor grades, homework, and performance"},{icon:"",title:"Parent Portal",description:"Keep parents informed and engaged"}];return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"relative bg-gradient-to-r from-blue-600 to-purple-600 text-white p-8 rounded-t-2xl",children:[e.jsx("button",{onClick:r,className:"absolute top-4 right-4 p-2 hover:bg-white/20 rounded-lg transition",children:e.jsx(Ve,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-center",children:[m.school_logo?e.jsx("img",{src:m.school_logo,alt:m.school_name,className:"h-20 w-auto mx-auto mb-4"}):e.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ea,{className:"w-12 h-12"})}),e.jsxs("h1",{className:"text-4xl font-bold mb-2",children:["Welcome to ",m.school_name,"!"]}),e.jsx("p",{className:"text-xl text-blue-100",children:"Let's set up your school management system"})]})]}),e.jsx("div",{className:"p-8",children:u===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:" You're all set to get started!"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"We'll guide you through setting up your school in just a few simple steps."})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-8",children:p.map((b,g)=>e.jsxs("div",{className:"p-6 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:shadow-lg transition",children:[e.jsx("div",{className:"text-4xl mb-3",children:b.icon}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:b.title}),e.jsx("p",{className:"text-sm text-gray-600",children:b.description})]},g))}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-6",children:[e.jsxs("h3",{className:"font-semibold text-blue-900 mb-4 flex items-center gap-2",children:[e.jsx(u0,{className:"w-5 h-5"}),"What to expect:"]}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(he,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("span",{className:"text-blue-900",children:[e.jsx("strong",{children:"School Information:"})," Add your school logo, name, and basic details"]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(he,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("span",{className:"text-blue-900",children:[e.jsx("strong",{children:"Academic Setup:"})," Configure terms, classes, and subjects"]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(he,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("span",{className:"text-blue-900",children:[e.jsx("strong",{children:"Import Data:"})," Bulk upload students, teachers, and more (optional)"]})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(he,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("span",{className:"text-blue-900",children:[e.jsx("strong",{children:"Start Managing:"})," Begin using all features immediately"]})]})]})]}),e.jsx("div",{className:"text-center text-gray-600",children:e.jsxs("p",{className:"text-sm",children:[" Estimated time: ",e.jsx("strong",{children:"5-10 minutes"})]})})]})}),e.jsxs("div",{className:"border-t border-gray-200 p-6 bg-gray-50 rounded-b-2xl flex items-center justify-between",children:[e.jsx("button",{onClick:d,className:"text-gray-600 hover:text-gray-900 font-medium",children:"I'll do this later"}),e.jsxs("button",{onClick:i,className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition flex items-center gap-2",children:[e.jsx(u0,{className:"w-5 h-5"}),"Let's Get Started!"]})]})]})})}function X2({onDismiss:n}){const r=ft(),[i,d]=f.useState(null),[m,u]=f.useState(!0),[x,p]=f.useState(!1),b=[{id:"school_setup",title:"School Information",description:"Add logo, name, and contact details",icon:sn,route:"/admin/settings",field:"school_setup_completed"},{id:"academic_config",title:"Academic Configuration",description:"Set up academic year and terms",icon:Ue,route:"/admin/terms",field:"academic_config_completed"},{id:"classes",title:"Create Classes",description:"Add your school classes/grades",icon:sn,route:"/admin/classes",field:"classes_created"},{id:"subjects",title:"Add Subjects",description:"Define subjects taught",icon:qe,route:"/admin/subjects",field:"subjects_created"},{id:"users",title:"Add Users",description:"Invite teachers and add students",icon:Se,route:"/admin/students",field:"users_added"},{id:"import",title:"Import Data (Optional)",description:"Bulk upload existing data",icon:Es,route:"/admin/import",field:"data_imported",optional:!0}];f.useEffect(()=>{g()},[]);const g=async()=>{try{const v=await $.get("http://localhost/McSMS/backend/api/onboarding.php?action=system_status");v.data.success&&d(v.data)}catch(v){console.error("Failed to fetch onboarding status:",v)}finally{u(!1)}},h=v=>{r(v.route)};return m?e.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})}):!i||i.completion_percentage===100?null:x?e.jsx("div",{onClick:()=>p(!1),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl shadow-lg p-4 cursor-pointer hover:shadow-xl transition",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ea,{className:"w-5 h-5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold",children:["Setup Progress: ",i.completion_percentage,"%"]}),e.jsxs("p",{className:"text-sm text-blue-100",children:[i.completed_steps," of ",i.total_steps," completed"]})]})]}),e.jsx(en,{className:"w-5 h-5"})]})}):e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ea,{className:"w-6 h-6"}),e.jsx("h3",{className:"text-xl font-bold",children:"Setup Your School"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>p(!0),className:"p-1 hover:bg-white/20 rounded transition",children:e.jsx(en,{className:"w-5 h-5"})}),e.jsx("button",{onClick:n,className:"p-1 hover:bg-white/20 rounded transition",children:e.jsx(Ve,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsxs("span",{children:[i.completion_percentage,"% Complete"]}),e.jsxs("span",{children:[i.completed_steps," of ",i.total_steps," steps"]})]}),e.jsx("div",{className:"w-full bg-white/20 rounded-full h-3",children:e.jsx("div",{className:"bg-white rounded-full h-3 transition-all duration-500",style:{width:`${i.completion_percentage}%`}})})]})]}),e.jsx("div",{className:"p-6 space-y-3",children:b.map(v=>{const w=v.icon,A=i.status[v.field];return e.jsxs("div",{onClick:()=>!A&&h(v),className:`
                flex items-start gap-4 p-4 rounded-lg border-2 transition-all
                ${A?"bg-green-50 border-green-200":"border-gray-200 hover:border-blue-500 hover:shadow-md cursor-pointer"}
              `,children:[e.jsx("div",{className:`
                flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center
                ${A?"bg-green-500":"bg-gray-200"}
              `,children:A?e.jsx(he,{className:"w-6 h-6 text-white"}):e.jsx(vv,{className:"w-6 h-6 text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(w,{className:`w-4 h-4 ${A?"text-green-600":"text-gray-600"}`}),e.jsxs("h4",{className:`font-semibold ${A?"text-green-900":"text-gray-900"}`,children:[v.title,v.optional&&e.jsx("span",{className:"ml-2 text-xs text-gray-500 font-normal",children:"(Optional)"})]})]}),e.jsx("p",{className:`text-sm ${A?"text-green-700":"text-gray-600"}`,children:v.description})]}),!A&&e.jsx(en,{className:"w-5 h-5 text-gray-400 flex-shrink-0 mt-2"})]},v.id)})}),i.completion_percentage===100&&e.jsxs("div",{className:"bg-green-50 border-t border-green-200 p-6 text-center",children:[e.jsx(he,{className:"w-12 h-12 text-green-600 mx-auto mb-3"}),e.jsx("h4",{className:"font-bold text-green-900 mb-2",children:"Setup Complete! "}),e.jsx("p",{className:"text-sm text-green-700 mb-4",children:"Your school is ready to go. Start managing students, fees, and more!"}),e.jsx("button",{onClick:n,className:"btn btn-primary",children:"Go to Dashboard"})]})]})}function Q2(){const n=ft(),[r,i]=f.useState(!0),[d,m]=f.useState(!1),[u,x]=f.useState(!1),[p,b]=f.useState(null),[g,h]=f.useState({totalStudents:0,totalTeachers:0,totalRevenue:0,pendingPayments:0,activeClasses:0,totalSubjects:0,currentTerm:"Loading...",attendanceRate:0});f.useEffect(()=>{v(),M()},[]);const v=async()=>{try{const k=await $.get("http://localhost/McSMS/backend/api/onboarding.php?action=system_status");k.data.success&&(b(k.data),k.data.completion_percentage===0?m(!0):k.data.completion_percentage<100&&x(!0))}catch(k){console.error("Error checking onboarding status:",k)}},w=()=>{m(!1),x(!0)},A=()=>{m(!1)},T=()=>{x(!1)},M=async()=>{try{i(!0);const _=(await $.get("http://localhost/McSMS/backend/api/students.php")).data.students||[],z=(await $.get("http://localhost/McSMS/backend/api/teachers.php")).data.teachers||[],E=(await $.get("http://localhost/McSMS/backend/api/classes.php")).data.classes||[],U=(await $.get("http://localhost/McSMS/backend/api/subjects.php")).data.subjects||[],Z=(await $.get("http://localhost/McSMS/backend/api/invoices.php")).data.invoices||[],W=Z.reduce((re,xe)=>re+parseFloat(xe.paid_amount||0),0),ie=Z.filter(re=>re.status!=="paid"&&re.status!=="cancelled").reduce((re,xe)=>re+parseFloat(xe.balance||0),0),P=((await $.get("http://localhost/McSMS/backend/api/terms.php")).data.terms||[]).find(re=>re.status==="active");h({totalStudents:_.length,totalTeachers:z.length,totalRevenue:W,pendingPayments:ie,activeClasses:E.filter(re=>re.status==="active").length,totalSubjects:U.length,currentTerm:P?`${P.term_name}, ${P.academic_year}`:"No active term",attendanceRate:94.5})}catch(k){console.error("Error fetching dashboard stats:",k)}finally{i(!1)}},R=[{title:"Total Students",value:g.totalStudents.toLocaleString(),icon:Ke,color:"blue",change:"+12%",changeType:"increase"},{title:"Total Teachers",value:g.totalTeachers,icon:Se,color:"green",change:"+5%",changeType:"increase"},{title:"Total Revenue",value:`GH${g.totalRevenue.toLocaleString("en-GH",{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:Ee,color:"purple",change:"+18%",changeType:"increase"},{title:"Pending Payments",value:`GH${g.pendingPayments.toLocaleString("en-GH",{minimumFractionDigits:2,maximumFractionDigits:2})}`,icon:jt,color:"orange",change:"-8%",changeType:"decrease"},{title:"Active Classes",value:g.activeClasses,icon:qe,color:"indigo",change:"+3",changeType:"increase"},{title:"Attendance Rate",value:`${g.attendanceRate}%`,icon:ta,color:"teal",change:"+2.5%",changeType:"increase"}],C={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",purple:"bg-purple-100 text-purple-600",orange:"bg-orange-100 text-orange-600",indigo:"bg-indigo-100 text-indigo-600",teal:"bg-teal-100 text-teal-600"},y=[{id:1,action:"New student enrolled",student:"Kwame Mensah",time:"5 minutes ago",type:"enrollment"},{id:2,action:"Payment received",student:"Ama Asante",amount:"GH 2,500",time:"15 minutes ago",type:"payment"},{id:3,action:"New teacher added",student:"Mr. Osei Tutu",time:"1 hour ago",type:"staff"},{id:4,action:"Class created",student:"Form 3A",time:"2 hours ago",type:"class"},{id:5,action:"Report generated",student:"Term 1 Results",time:"3 hours ago",type:"report"}];return r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(V2,{isOpen:d,onClose:A,onStart:w,onSkip:A}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Welcome back! Here's what's happening today."})]}),u&&p&&p.completion_percentage<100&&e.jsx(X2,{onDismiss:T}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.map((k,_)=>{const G=k.icon;return e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:k.title}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:k.value}),e.jsxs("p",{className:`text-sm mt-2 ${k.changeType==="increase"?"text-green-600":"text-red-600"}`,children:[k.change," from last month"]})]}),e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${C[k.color]}`,children:e.jsx(G,{className:"w-6 h-6"})})]})},_)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 card",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:y.map(k=>e.jsxs("div",{className:"flex items-start gap-4 pb-4 border-b border-gray-100 last:border-0 last:pb-0",children:[e.jsxs("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${k.type==="enrollment"?"bg-blue-100 text-blue-600":k.type==="payment"?"bg-green-100 text-green-600":k.type==="staff"?"bg-purple-100 text-purple-600":k.type==="class"?"bg-orange-100 text-orange-600":"bg-gray-100 text-gray-600"}`,children:[k.type==="enrollment"&&e.jsx(Ke,{className:"w-5 h-5"}),k.type==="payment"&&e.jsx(Ee,{className:"w-5 h-5"}),k.type==="staff"&&e.jsx(Se,{className:"w-5 h-5"}),k.type==="class"&&e.jsx(qe,{className:"w-5 h-5"}),k.type==="report"&&e.jsx(We,{className:"w-5 h-5"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:k.action}),e.jsxs("p",{className:"text-sm text-gray-600",children:[k.student," ",k.amount&&` ${k.amount}`]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:k.time})]})]},k.id))})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>n("/admin/admissions"),className:"w-full btn btn-primary text-left flex items-center gap-3",children:[e.jsx(Ke,{className:"w-5 h-5"}),e.jsx("span",{children:"Enroll New Student"})]}),e.jsxs("button",{onClick:()=>n("/admin/teachers"),className:"w-full btn bg-green-600 text-white hover:bg-green-700 text-left flex items-center gap-3",children:[e.jsx(Se,{className:"w-5 h-5"}),e.jsx("span",{children:"Add Teacher"})]}),e.jsxs("button",{onClick:()=>n("/admin/classes"),className:"w-full btn bg-purple-600 text-white hover:bg-purple-700 text-left flex items-center gap-3",children:[e.jsx(qe,{className:"w-5 h-5"}),e.jsx("span",{children:"Create Class"})]}),e.jsxs("button",{onClick:()=>n("/admin/payments"),className:"w-full btn bg-orange-600 text-white hover:bg-orange-700 text-left flex items-center gap-3",children:[e.jsx(Ee,{className:"w-5 h-5"}),e.jsx("span",{children:"Record Payment"})]}),e.jsxs("button",{onClick:()=>n("/admin/terms"),className:"w-full btn bg-indigo-600 text-white hover:bg-indigo-700 text-left flex items-center gap-3",children:[e.jsx(Ue,{className:"w-5 h-5"}),e.jsx("span",{children:"View Terms"})]})]})}),e.jsx("div",{className:"p-6 border-t border-gray-200 bg-blue-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ue,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Current Term"}),e.jsx("p",{className:"text-sm text-gray-600",children:g.currentTerm})]})]})})]})]})]})}function of({type:n,id:r,currentPicture:i,onUploadSuccess:d}){const[m,u]=f.useState(!1),[x,p]=f.useState(i),[b,g]=f.useState(!1),h=f.useRef(null),v=M=>{const R=M.target.files[0];if(R){if(!R.type.startsWith("image/")){alert("Please select an image file");return}if(R.size>5*1024*1024){alert("File size must be less than 5MB");return}const C=new FileReader;C.onloadend=()=>{p(C.result)},C.readAsDataURL(R),w(R)}},w=async M=>{try{u(!0);const R=new FormData;R.append("profile_picture",M),R.append("type",n),R.append("id",r);const C=await $.post("http://localhost/McSMS/backend/api/upload_profile_picture.php",R,{headers:{"Content-Type":"multipart/form-data"}});C.data.success&&(p(C.data.url),alert("Profile picture uploaded successfully!"),d&&d(C.data.filename,C.data.url),g(!1))}catch(R){console.error("Upload error:",R),alert("Failed to upload picture: "+(R.response?.data?.error||R.message))}finally{u(!1)}},A=M=>M?M.startsWith("http")?M:`http://localhost/McSMS/backend/uploads/profiles/${M}`:null,T=A(x||i);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gray-200 border-4 border-white shadow-lg",children:T?e.jsx("img",{src:T,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600",children:e.jsx(Mt,{className:"w-12 h-12 text-white"})})}),e.jsx("button",{onClick:()=>g(!0),className:"absolute bottom-0 right-0 bg-blue-600 hover:bg-blue-700 text-white rounded-full p-2 shadow-lg transition-colors",title:"Upload picture",children:e.jsx(Dm,{className:"w-4 h-4"})})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Upload Profile Picture"}),e.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ve,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-32 h-32 rounded-full overflow-hidden bg-gray-200 border-4 border-gray-300",children:x?e.jsx("img",{src:typeof x=="string"&&x.startsWith("data:")?x:A(x),alt:"Preview",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600",children:e.jsx(Mt,{className:"w-16 h-16 text-white"})})})}),e.jsxs("div",{children:[e.jsx("input",{ref:h,type:"file",accept:"image/*",onChange:v,className:"hidden"}),e.jsx("button",{onClick:()=>h.current?.click(),disabled:m,className:"w-full btn btn-primary flex items-center justify-center gap-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Es,{className:"w-5 h-5"}),"Choose Picture"]})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"JPG, PNG, GIF or WEBP (Max 5MB)"})]})]}),e.jsx("div",{className:"p-6 border-t border-gray-200 flex justify-end",children:e.jsx("button",{onClick:()=>g(!1),className:"btn bg-gray-200 hover:bg-gray-300",children:"Close"})})]})})]})}function I2(){const[n,r]=f.useState([]),[i,d]=f.useState(!0),[m,u]=f.useState(""),[x,p]=f.useState("all"),[b,g]=f.useState(!1),[h,v]=f.useState(null),[w,A]=f.useState(null),[T,M]=f.useState(null),R=f.useRef(null),[C,y]=f.useState({name:"",email:"",phone:"",user_type:"teacher",password:"",status:"active"}),k=F=>{const O=F.target.files[0];if(O){if(!O.type.startsWith("image/")){alert("Please select an image file");return}if(O.size>5*1024*1024){alert("File size must be less than 5MB");return}A(O);const P=new FileReader;P.onloadend=()=>{M(P.result)},P.readAsDataURL(O)}};f.useEffect(()=>{_()},[]);const _=async()=>{try{d(!0),console.log("Fetching users from API...");const F=await Zl.getAll();console.log("API Response:",F.data);const O=F.data.users||[];console.log("Users data:",O),console.log("Number of users:",O.length),r(Array.isArray(O)?O:[])}catch(F){console.error("Error fetching users:",F),console.error("Error details:",F.response?.data),r([]),alert("Failed to load users: "+(F.response?.data?.error||F.message))}finally{d(!1)}},G=()=>{v(null),A(null),M(null),y({name:"",email:"",phone:"",user_type:"teacher",password:"",status:"active"}),g(!0)},z=F=>{v(F),A(null),M(null),y({name:F.name,email:F.email,phone:F.phone,user_type:F.user_type,password:"",status:F.status}),g(!0)},N=async(F,O)=>{try{const P=await Zl.update(F,{status:"active",user_type:O});r(n.map(re=>re.id===F?P.data.user:re)),alert("User approved successfully!")}catch(P){console.error("Error approving user:",P),alert("Failed to approve user: "+(P.response?.data?.error||P.message))}},E=async F=>{if(window.confirm("Are you sure you want to reject this user registration?"))try{await Zl.delete(F),r(n.filter(O=>O.id!==F)),alert("User registration rejected!")}catch(O){console.error("Error rejecting user:",O),alert("Failed to reject user: "+(O.response?.data?.error||O.message))}},S=async F=>{if(window.confirm("Are you sure you want to delete this user?"))try{await Zl.delete(F),r(n.filter(O=>O.id!==F)),alert("User deleted successfully!")}catch(O){console.error("Error deleting user:",O),alert("Failed to delete user: "+(O.response?.data?.error||O.message))}},U=async F=>{F.preventDefault();try{let O;if(h){const P=await Zl.update(h.id,C);r(n.map(re=>re.id===h.id?P.data.user:re)),O=h.id,alert("User updated successfully!")}else{const P=await Zl.create(C);r([P.data.user,...n]),O=P.data.user.id,alert("User added successfully!")}if(w&&O){const P=new FormData;P.append("profile_picture",w),P.append("type","user"),P.append("id",O),await $.post("http://localhost/McSMS/backend/api/upload_profile_picture.php",P,{headers:{"Content-Type":"multipart/form-data"}})}g(!1),_()}catch(O){console.error("Error saving user:",O),alert("Failed to save user: "+(O.response?.data?.error||O.message))}},q=n.filter(F=>F&&F.status==="pending"),Z=n.filter(F=>F&&F.status!=="pending");console.log("Total users:",n.length),console.log("Pending users:",q.length,q),console.log("Active users:",Z.length);const W=Z.filter(F=>{if(!F||!F.name||!F.email)return!1;const O=F.name.toLowerCase().includes(m.toLowerCase())||F.email.toLowerCase().includes(m.toLowerCase()),P=x==="all"||F.user_type===x;return O&&P}),ie={admin:"bg-purple-100 text-purple-700",teacher:"bg-blue-100 text-blue-700",parent:"bg-green-100 text-green-700",finance:"bg-orange-100 text-orange-700"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage system users and their roles"})]}),e.jsxs("button",{onClick:G,className:"btn btn-primary flex items-center gap-2",children:[e.jsx(lt,{className:"w-5 h-5"}),"Add New User"]})]}),q.length>0&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 bg-orange-50",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Ks,{className:"w-5 h-5 text-orange-600"}),"Pending Registrations (",q.length,")"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Review and approve new user registrations"})]}),e.jsx("div",{className:"p-6 space-y-4",children:q.map(F=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-orange-600 font-semibold",children:F.name.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:F.name}),e.jsx("p",{className:"text-sm text-gray-600",children:F.email}),e.jsx("p",{className:"text-sm text-gray-500",children:F.phone})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{id:`role-${F.id}`,defaultValue:"teacher",className:"input text-sm",children:[e.jsx("option",{value:"teacher",children:"Teacher"}),e.jsx("option",{value:"parent",children:"Parent"}),e.jsx("option",{value:"finance",children:"Finance"}),e.jsx("option",{value:"admin",children:"Admin"})]}),e.jsxs("button",{onClick:()=>{const O=document.getElementById(`role-${F.id}`).value;N(F.id,O)},className:"btn bg-green-600 text-white hover:bg-green-700 flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4"}),"Approve"]}),e.jsxs("button",{onClick:()=>E(F.id),className:"btn bg-red-600 text-white hover:bg-red-700 flex items-center gap-2",children:[e.jsx(cs,{className:"w-4 h-4"}),"Reject"]})]})]},F.id))})]}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Sr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name or email...",value:m,onChange:F=>u(F.target.value),className:"input pl-10"})]}),e.jsxs("select",{value:x,onChange:F=>p(F.target.value),className:"input",children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"teacher",children:"Teacher"}),e.jsx("option",{value:"parent",children:"Parent"}),e.jsx("option",{value:"finance",children:"Finance"})]})]})}),e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-8 text-center text-gray-500",children:"Loading users..."})}):W.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-8 text-center text-gray-500",children:"No users found"})}):W.map(F=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:F.name.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:F.name}),e.jsx("p",{className:"text-sm text-gray-500",children:F.email})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(pr,{className:"w-4 h-4"}),F.phone]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${ie[F.user_type]}`,children:[e.jsx(Ks,{className:"w-3 h-3"}),F.user_type.charAt(0).toUpperCase()+F.user_type.slice(1)]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`inline-flex px-2.5 py-0.5 rounded-full text-xs font-medium ${F.status==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:F.status.charAt(0).toUpperCase()+F.status.slice(1)})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(F.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>z(F),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit user",children:e.jsx(Dt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>S(F.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete user",children:e.jsx(Bt,{className:"w-4 h-4"})})]})})]},F.id))})]})})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:h?"Edit User":"Add New User"}),e.jsx("button",{onClick:()=>g(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Ve,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:U,className:"p-6",children:[e.jsx("div",{className:"mb-6 flex justify-center",children:h?e.jsx(of,{type:"user",id:h.id,currentPicture:h.profile_picture,onUploadSuccess:()=>_()}):e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gray-200 border-4 border-white shadow-lg mx-auto mb-3",children:T?e.jsx("img",{src:T,alt:"Preview",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600",children:e.jsx(Mt,{className:"w-12 h-12 text-white"})})}),e.jsx("input",{ref:R,type:"file",accept:"image/*",onChange:k,className:"hidden"}),e.jsxs("button",{type:"button",onClick:()=>R.current?.click(),className:"btn btn-sm bg-gray-200 hover:bg-gray-300 flex items-center gap-2 mx-auto",children:[e.jsx(Es,{className:"w-4 h-4"}),w?"Change Picture":"Upload Picture"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Optional - JPG, PNG, GIF (Max 5MB)"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),e.jsx("input",{type:"text",required:!0,value:C.name,onChange:F=>y({...C,name:F.target.value}),className:"input",placeholder:"Enter full name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),e.jsx("input",{type:"email",required:!0,value:C.email,onChange:F=>y({...C,email:F.target.value}),className:"input",placeholder:"email@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),e.jsx("input",{type:"tel",required:!0,value:C.phone,onChange:F=>y({...C,phone:F.target.value}),className:"input",placeholder:"0244123456"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User Role *"}),e.jsxs("select",{required:!0,value:C.user_type,onChange:F=>y({...C,user_type:F.target.value}),className:"input",children:[e.jsx("option",{value:"teacher",children:"Teacher"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"parent",children:"Parent"}),e.jsx("option",{value:"finance",children:"Finance"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Password ",!h&&"*"]}),e.jsx("input",{type:"password",required:!h,value:C.password,onChange:F=>y({...C,password:F.target.value}),className:"input",placeholder:h?"Leave blank to keep current":"Enter password"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),e.jsxs("select",{required:!0,value:C.status,onChange:F=>y({...C,status:F.target.value}),className:"input",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:h?"Update User":"Add User"})]})]})]})})]})}function Z2(){const n=ft(),[r,i]=f.useState([]),[d,m]=f.useState(!0),[u,x]=f.useState(""),[p,b]=f.useState("all"),[g,h]=f.useState(!1),[v,w]=f.useState(null),[A,T]=f.useState({student_id:"",first_name:"",last_name:"",other_names:"",date_of_birth:"",gender:"male",email:"",phone:"",address:"",admission_date:"",status:"active",guardian_name:"",guardian_phone:"",guardian_email:""});f.useEffect(()=>{M()},[]);const M=async()=>{try{m(!0);const N=await bs.getAll();i(N.data.students||[])}catch(N){console.error("Error fetching students:",N),alert("Failed to load students")}finally{m(!1)}},R=()=>{w(null),T({student_id:`STU${new Date().getFullYear()}${String(r.length+1).padStart(3,"0")}`,first_name:"",last_name:"",other_names:"",date_of_birth:"",gender:"male",email:"",phone:"",address:"",admission_date:new Date().toISOString().split("T")[0],status:"active",guardian_name:"",guardian_phone:"",guardian_email:""}),h(!0)},C=N=>{w(N),T({student_id:N.student_id,first_name:N.first_name,last_name:N.last_name,other_names:N.other_names||"",date_of_birth:N.date_of_birth,gender:N.gender,email:N.email||"",phone:N.phone||"",address:N.address||"",admission_date:N.admission_date,status:N.status,guardian_name:N.guardian_name||"",guardian_phone:N.guardian_phone||"",guardian_email:N.guardian_email||""}),h(!0)},y=async N=>{if(window.confirm("Are you sure you want to delete this student?"))try{await bs.delete(N),i(r.filter(E=>E.id!==N)),alert("Student deleted successfully!")}catch(E){console.error("Error deleting student:",E),alert("Failed to delete student")}},k=async N=>{N.preventDefault();try{if(v){const E=await bs.update(v.id,A);i(r.map(S=>S.id===v.id?E.data.student:S)),alert("Student updated successfully!")}else{const E=await bs.create(A);i([E.data.student,...r]),alert("Student added successfully!")}h(!1),M()}catch(E){console.error("Error saving student:",E),alert("Failed to save student: "+(E.response?.data?.error||E.message))}},_=r.filter(N=>{if(!N)return!1;const E=N.first_name?.toLowerCase().includes(u.toLowerCase())||N.last_name?.toLowerCase().includes(u.toLowerCase())||N.student_id?.toLowerCase().includes(u.toLowerCase())||N.email?.toLowerCase().includes(u.toLowerCase()),S=p==="all"||N.status===p;return E&&S}),G=[{label:"Total Students",value:r.length,icon:Se,color:"bg-blue-500"},{label:"Active",value:r.filter(N=>N.status==="active").length,icon:ta,color:"bg-green-500"},{label:"Inactive",value:r.filter(N=>N.status==="inactive").length,icon:Tc,color:"bg-orange-500"}],z=N=>{const E=new Date,S=new Date(N);let U=E.getFullYear()-S.getFullYear();const q=E.getMonth()-S.getMonth();return(q<0||q===0&&E.getDate()<S.getDate())&&U--,U};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage student records and enrollment"})]}),e.jsxs("button",{onClick:R,className:"btn btn-primary flex items-center gap-2",children:[e.jsx(lt,{className:"w-5 h-5"}),"Add New Student"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:G.map((N,E)=>e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:N.label}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:N.value})]}),e.jsx("div",{className:`${N.color} w-12 h-12 rounded-lg flex items-center justify-center`,children:e.jsx(N.icon,{className:"w-6 h-6 text-white"})})]})},E))}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2 relative",children:[e.jsx(Sr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name, student ID, or email...",value:u,onChange:N=>x(N.target.value),className:"input pl-10"})]}),e.jsxs("select",{value:p,onChange:N=>b(N.target.value),className:"input",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"graduated",children:"Graduated"}),e.jsx("option",{value:"transferred",children:"Transferred"})]})]})}),e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Student ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Age/Gender"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Guardian"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:d?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-12 text-center text-gray-500",children:"Loading students..."})}):_.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-12 text-center text-gray-500",children:"No students found"})}):_.map(N=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-blue-600 font-semibold",children:[N.first_name?.charAt(0),N.last_name?.charAt(0)]})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[N.first_name," ",N.last_name]}),N.email&&e.jsx("p",{className:"text-sm text-gray-500",children:N.email})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-mono text-sm text-gray-900",children:N.student_id})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("p",{className:"text-gray-900",children:[z(N.date_of_birth)," years"]}),e.jsx("p",{className:"text-sm text-gray-500 capitalize",children:N.gender})]}),e.jsxs("td",{className:"px-6 py-4",children:[N.phone&&e.jsx("p",{className:"text-sm text-gray-900",children:N.phone}),N.address&&e.jsx("p",{className:"text-sm text-gray-500 truncate max-w-xs",children:N.address})]}),e.jsx("td",{className:"px-6 py-4",children:N.guardian_name&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-900",children:N.guardian_name}),e.jsx("p",{className:"text-sm text-gray-500",children:N.guardian_phone})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${N.status==="active"?"bg-green-100 text-green-700":N.status==="inactive"?"bg-gray-100 text-gray-700":N.status==="graduated"?"bg-blue-100 text-blue-700":"bg-orange-100 text-orange-700"}`,children:N.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>n(`/admin/students/${N.id}`),className:"text-green-600 hover:text-green-700",title:"View Profile",children:e.jsx(os,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>C(N),className:"text-blue-600 hover:text-blue-700",title:"Edit",children:e.jsx(Dt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>y(N.id),className:"text-red-600 hover:text-red-700",title:"Delete",children:e.jsx(Bt,{className:"w-4 h-4"})})]})})]},N.id))})]})})}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:v?"Edit Student":"Add New Student"}),e.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ve,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:k,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Student ID *"}),e.jsx("input",{type:"text",required:!0,value:A.student_id,onChange:N=>T({...A,student_id:N.target.value}),className:"input",placeholder:"STU2024001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admission Date *"}),e.jsx("input",{type:"date",required:!0,value:A.admission_date,onChange:N=>T({...A,admission_date:N.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),e.jsx("input",{type:"text",required:!0,value:A.first_name,onChange:N=>T({...A,first_name:N.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",required:!0,value:A.last_name,onChange:N=>T({...A,last_name:N.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Other Names"}),e.jsx("input",{type:"text",value:A.other_names,onChange:N=>T({...A,other_names:N.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth *"}),e.jsx("input",{type:"date",required:!0,value:A.date_of_birth,onChange:N=>T({...A,date_of_birth:N.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender *"}),e.jsxs("select",{required:!0,value:A.gender,onChange:N=>T({...A,gender:N.target.value}),className:"input",children:[e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:A.status,onChange:N=>T({...A,status:N.target.value}),className:"input",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"graduated",children:"Graduated"}),e.jsx("option",{value:"transferred",children:"Transferred"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:A.email,onChange:N=>T({...A,email:N.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx("input",{type:"tel",value:A.phone,onChange:N=>T({...A,phone:N.target.value}),className:"input"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsx("textarea",{value:A.address,onChange:N=>T({...A,address:N.target.value}),className:"input",rows:"2"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Guardian Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Guardian Name"}),e.jsx("input",{type:"text",value:A.guardian_name,onChange:N=>T({...A,guardian_name:N.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Guardian Phone"}),e.jsx("input",{type:"tel",value:A.guardian_phone,onChange:N=>T({...A,guardian_phone:N.target.value}),className:"input"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Guardian Email"}),e.jsx("input",{type:"email",value:A.guardian_email,onChange:N=>T({...A,guardian_email:N.target.value}),className:"input"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>h(!1),className:"btn bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:v?"Update Student":"Add Student"})]})]})]})})]})}function J2(){const{studentId:n}=w0(),r=ft(),[i,d]=f.useState(null),[m,u]=f.useState([]),[x,p]=f.useState(!0),[b,g]=f.useState(!1),[h,v]=f.useState(!1),[w,A]=f.useState(!1),[T,M]=f.useState(null),[R,C]=f.useState(null),[y,k]=f.useState({});f.useEffect(()=>{_(),G()},[n]);const _=async()=>{try{const q=await bs.getById(n);d(q.data.student),k(q.data.student)}catch(q){console.error("Error fetching student:",q),alert("Failed to load student data")}finally{p(!1)}},G=async()=>{try{const q=await Aa.getAll();u(q.data.classes||[])}catch(q){console.error("Error fetching classes:",q)}},z=async q=>{q.preventDefault();try{await bs.update(n,y),alert("Student updated successfully!"),g(!1),_()}catch{alert("Failed to update student")}},N=async q=>{q.preventDefault();try{await bs.update(n,{class_id:y.class_id}),alert("Student promoted successfully!"),v(!1),_()}catch{alert("Failed to promote student")}},E=q=>{const Z=q.target.files[0];if(Z){M(Z);const W=new FileReader;W.onloadend=()=>{C(W.result)},W.readAsDataURL(Z)}},S=async()=>{if(!T){alert("Please select a photo");return}const q=new FormData;q.append("photo",T),q.append("student_id",n);try{const Z=await bs.uploadPhoto(q);alert("Photo uploaded successfully!"),A(!1),_()}catch{alert("Failed to upload photo")}},U=q=>{const Z=new Date,W=new Date(q);let ie=Z.getFullYear()-W.getFullYear();const F=Z.getMonth()-W.getMonth();return(F<0||F===0&&Z.getDate()<W.getDate())&&ie--,ie};return x?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-gray-500",children:"Loading..."})}):i?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>r("/admin/students"),className:"text-gray-600 hover:text-gray-900",children:e.jsx(dl,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[i.first_name," ",i.last_name]}),e.jsx("p",{className:"text-gray-600",children:i.student_id})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>A(!0),className:"btn bg-purple-600 text-white hover:bg-purple-700 flex items-center gap-2",children:[e.jsx(Es,{className:"w-4 h-4"}),"Upload Photo"]}),e.jsxs("button",{onClick:()=>v(!0),className:"btn bg-green-600 text-white hover:bg-green-700 flex items-center gap-2",children:[e.jsx(We,{className:"w-4 h-4"}),"Promote"]}),e.jsxs("button",{onClick:()=>g(!0),className:"btn btn-primary flex items-center gap-2",children:[e.jsx(Dt,{className:"w-4 h-4"}),"Edit Profile"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"text-center",children:[i.photo?e.jsx("img",{src:`http://localhost/McSMS/backend/${i.photo}`,alt:i.first_name,className:"w-32 h-32 rounded-full mx-auto mb-4 object-cover border-4 border-blue-100"}):e.jsx("div",{className:"w-32 h-32 rounded-full mx-auto mb-4 bg-blue-100 flex items-center justify-center border-4 border-blue-200",children:e.jsx(Mt,{className:"w-16 h-16 text-blue-600"})}),e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:[i.first_name," ",i.last_name]}),e.jsx("p",{className:"text-gray-600 font-mono",children:i.student_id}),e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-sm font-medium mt-2 ${i.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:i.status})]}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx(Ue,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Age"}),e.jsxs("p",{className:"font-medium",children:[U(i.date_of_birth)," years"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx(Mt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Gender"}),e.jsx("p",{className:"font-medium capitalize",children:i.gender})]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx(dt,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:"Class"}),e.jsx("p",{className:"font-medium",children:i.class_name||"Not assigned"})]})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Full Name"}),e.jsxs("p",{className:"font-medium",children:[i.first_name," ",i.other_names," ",i.last_name]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Date of Birth"}),e.jsx("p",{className:"font-medium",children:new Date(i.date_of_birth).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Blood Group"}),e.jsx("p",{className:"font-medium",children:i.blood_group||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Nationality"}),e.jsx("p",{className:"font-medium",children:i.nationality||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Religion"}),e.jsx("p",{className:"font-medium",children:i.religion||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Admission Date"}),e.jsx("p",{className:"font-medium",children:new Date(i.admission_date).toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(js,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),e.jsx("p",{className:"font-medium",children:i.email||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(pr,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Phone"}),e.jsx("p",{className:"font-medium",children:i.phone||"N/A"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 col-span-2",children:[e.jsx(Ec,{className:"w-5 h-5 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Address"}),e.jsx("p",{className:"font-medium",children:i.address||"N/A"})]})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Guardian Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Guardian Name"}),e.jsx("p",{className:"font-medium",children:i.guardian_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Guardian Phone"}),e.jsx("p",{className:"font-medium",children:i.guardian_phone||"N/A"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Guardian Email"}),e.jsx("p",{className:"font-medium",children:i.guardian_email||"N/A"})]})]})]})]})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between sticky top-0 bg-white",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Edit Student Profile"}),e.jsx("button",{onClick:()=>g(!1),children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:z,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"First Name *"}),e.jsx("input",{type:"text",required:!0,value:y.first_name||"",onChange:q=>k({...y,first_name:q.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",required:!0,value:y.last_name||"",onChange:q=>k({...y,last_name:q.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Other Names"}),e.jsx("input",{type:"text",value:y.other_names||"",onChange:q=>k({...y,other_names:q.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date of Birth *"}),e.jsx("input",{type:"date",required:!0,value:y.date_of_birth||"",onChange:q=>k({...y,date_of_birth:q.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Gender *"}),e.jsxs("select",{value:y.gender||"male",onChange:q=>k({...y,gender:q.target.value}),className:"input",children:[e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Blood Group"}),e.jsx("input",{type:"text",value:y.blood_group||"",onChange:q=>k({...y,blood_group:q.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),e.jsx("input",{type:"email",value:y.email||"",onChange:q=>k({...y,email:q.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone"}),e.jsx("input",{type:"tel",value:y.phone||"",onChange:q=>k({...y,phone:q.target.value}),className:"input"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Address"}),e.jsx("input",{type:"text",value:y.address||"",onChange:q=>k({...y,address:q.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Guardian Name"}),e.jsx("input",{type:"text",value:y.guardian_name||"",onChange:q=>k({...y,guardian_name:q.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Guardian Phone"}),e.jsx("input",{type:"tel",value:y.guardian_phone||"",onChange:q=>k({...y,guardian_phone:q.target.value}),className:"input"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>g(!1),className:"btn bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save Changes"})]})]})]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Promote Student"}),e.jsx("button",{onClick:()=>v(!1),children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:N,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Current Class"}),e.jsx("input",{type:"text",value:i.class_name||"Not assigned",disabled:!0,className:"input bg-gray-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Promote to Class *"}),e.jsxs("select",{required:!0,value:y.class_id||"",onChange:q=>k({...y,class_id:q.target.value}),className:"input",children:[e.jsx("option",{value:"",children:"Select Class"}),m.map(q=>e.jsx("option",{value:q.id,children:q.class_name},q.id))]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>v(!1),className:"btn bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Promote Student"})]})]})]})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Upload Student Photo"}),e.jsx("button",{onClick:()=>A(!1),children:e.jsx(X,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"text-center",children:R?e.jsx("img",{src:R,alt:"Preview",className:"w-32 h-32 rounded-full mx-auto mb-4 object-cover border-4 border-blue-100"}):e.jsx("div",{className:"w-32 h-32 rounded-full mx-auto mb-4 bg-gray-100 flex items-center justify-center border-4 border-gray-200",children:e.jsx(lf,{className:"w-16 h-16 text-gray-400"})})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Photo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:E,className:"input"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Accepted formats: JPG, PNG (Max 2MB)"})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>A(!1),className:"btn bg-gray-200",children:"Cancel"}),e.jsx("button",{onClick:S,className:"btn btn-primary",children:"Upload Photo"})]})]})]})})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Student not found"})})}function K2(){const[n,r]=f.useState([]),[i,d]=f.useState(!0),[m,u]=f.useState("pending"),[x,p]=f.useState(null),[b,g]=f.useState(!1),[h,v]=f.useState(""),[w,A]=f.useState(""),[T,M]=f.useState(""),{user:R}=Ze();f.useEffect(()=>{C()},[m]);const C=async()=>{try{d(!0);const N=m!=="all"?{status:m}:{},E=await uc.getAll(N);r(E.data.applications||[])}catch(N){console.error("Error fetching applications:",N),alert("Failed to load applications")}finally{d(!1)}},y=N=>{p(N),g(!0),v("view")},k=async()=>{if(x)try{await uc.approve(x.id,{reviewed_by:R.id,admin_notes:w}),alert("Application approved! Student record created."),g(!1),C()}catch(N){console.error("Error approving application:",N),alert("Failed to approve application: "+(N.response?.data?.error||N.message))}},_=async()=>{if(!x||!T){alert("Please provide a rejection reason");return}try{await uc.reject(x.id,{reviewed_by:R.id,rejection_reason:T}),alert("Application rejected."),g(!1),C()}catch(N){console.error("Error rejecting application:",N),alert("Failed to reject application")}},G=[{label:"Pending",value:n.filter(N=>N.status==="pending").length,icon:at,color:"bg-orange-500"},{label:"Approved",value:n.filter(N=>N.status==="approved").length,icon:ta,color:"bg-green-500"},{label:"Rejected",value:n.filter(N=>N.status==="rejected").length,icon:Tc,color:"bg-red-500"}],z=N=>{const E=new Date,S=new Date(N);let U=E.getFullYear()-S.getFullYear();const q=E.getMonth()-S.getMonth();return(q<0||q===0&&E.getDate()<S.getDate())&&U--,U};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admissions"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Review and approve student applications"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:G.map((N,E)=>e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:N.label}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:N.value})]}),e.jsx("div",{className:`${N.color} w-12 h-12 rounded-lg flex items-center justify-center`,children:e.jsx(N.icon,{className:"w-6 h-6 text-white"})})]})},E))}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Filter by Status:"}),e.jsxs("select",{value:m,onChange:N=>u(N.target.value),className:"input max-w-xs",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"approved",children:"Approved"}),e.jsx("option",{value:"rejected",children:"Rejected"}),e.jsx("option",{value:"all",children:"All Applications"})]})]})}),e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Application #"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Student Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Age/Gender"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Guardian"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Applied Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:i?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-12 text-center text-gray-500",children:"Loading applications..."})}):n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-12 text-center text-gray-500",children:"No applications found"})}):n.map(N=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-mono text-sm font-medium text-blue-600",children:N.application_number})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-blue-600 font-semibold",children:[N.first_name?.charAt(0),N.last_name?.charAt(0)]})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[N.first_name," ",N.last_name]}),N.email&&e.jsx("p",{className:"text-sm text-gray-500",children:N.email})]})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsxs("p",{className:"text-gray-900",children:[z(N.date_of_birth)," years"]}),e.jsx("p",{className:"text-sm text-gray-500 capitalize",children:N.gender})]}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"text-sm text-gray-900",children:N.guardian_name}),e.jsx("p",{className:"text-sm text-gray-500",children:N.guardian_phone})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("p",{className:"text-sm text-gray-900",children:new Date(N.application_date).toLocaleDateString()})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${N.status==="pending"?"bg-orange-100 text-orange-700":N.status==="approved"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:N.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>y(N),className:"text-blue-600 hover:text-blue-700 font-medium text-sm",children:"Review"})})]},N.id))})]})})}),b&&x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 sticky top-0 bg-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Application Details"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:x.application_number})]}),e.jsx("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(cs,{className:"w-6 h-6"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Student Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Full Name"}),e.jsxs("p",{className:"font-medium",children:[x.first_name," ",x.last_name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Date of Birth"}),e.jsxs("p",{className:"font-medium",children:[x.date_of_birth," (",z(x.date_of_birth)," years)"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Gender"}),e.jsx("p",{className:"font-medium capitalize",children:x.gender})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Nationality"}),e.jsx("p",{className:"font-medium",children:x.nationality})]}),x.email&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Email"}),e.jsx("p",{className:"font-medium",children:x.email})]}),x.phone&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Phone"}),e.jsx("p",{className:"font-medium",children:x.phone})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Guardian Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Guardian Name"}),e.jsx("p",{className:"font-medium",children:x.guardian_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Phone"}),e.jsx("p",{className:"font-medium",children:x.guardian_phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Email"}),e.jsx("p",{className:"font-medium",children:x.guardian_email})]}),x.guardian_relationship&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Relationship"}),e.jsx("p",{className:"font-medium",children:x.guardian_relationship})]})]})]}),x.previous_school&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Academic Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Previous School"}),e.jsx("p",{className:"font-medium",children:x.previous_school})]}),x.class_applying_for&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Class Applying For"}),e.jsx("p",{className:"font-medium",children:x.class_applying_for})]})]})]}),x.status==="pending"&&e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Review Application"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Admin Notes (Optional)"}),e.jsx("textarea",{value:w,onChange:N=>A(N.target.value),className:"input",rows:"3",placeholder:"Add any notes about this application..."})]}),h==="reject"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rejection Reason *"}),e.jsx("textarea",{value:T,onChange:N=>M(N.target.value),className:"input",rows:"3",placeholder:"Please provide a reason for rejection..."})]}),e.jsx("div",{className:"flex items-center gap-4",children:h==="reject"?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:_,className:"btn bg-red-600 text-white hover:bg-red-700 flex items-center gap-2",children:[e.jsx(cs,{className:"w-4 h-4"}),"Confirm Rejection"]}),e.jsx("button",{onClick:()=>{v("view"),M("")},className:"btn bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:k,className:"btn bg-green-600 text-white hover:bg-green-700 flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4"}),"Approve Application"]}),e.jsxs("button",{onClick:()=>v("reject"),className:"btn bg-red-600 text-white hover:bg-red-700 flex items-center gap-2",children:[e.jsx(cs,{className:"w-4 h-4"}),"Reject Application"]})]})})]})]}),x.status!=="pending"&&e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Review Status"}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("p",{className:"font-medium capitalize",children:x.status}),x.reviewed_date&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Reviewed Date"}),e.jsx("p",{className:"font-medium",children:new Date(x.reviewed_date).toLocaleString()})]}),x.rejection_reason&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Rejection Reason"}),e.jsx("p",{className:"font-medium",children:x.rejection_reason})]})]})]})]})]})})]})}function W2(){const[n,r]=f.useState([]),[i,d]=f.useState([]),[m,u]=f.useState(!0),[x,p]=f.useState(!1),[b,g]=f.useState(null),[h,v]=f.useState({class_name:"",class_code:"",level:"primary",grade:"",section:"",capacity:30,class_teacher_id:"",room_number:"",academic_year:"2024/2025",status:"active",description:""});f.useEffect(()=>{w(),A()},[]);const w=async()=>{try{u(!0);const _=await Aa.getAll();r(_.data.classes||[])}catch(_){console.error("Error fetching classes:",_),alert("Failed to load classes")}finally{u(!1)}},A=async()=>{try{const _=await $.get("http://localhost/McSMS/backend/api/teachers.php");d(_.data.teachers||[])}catch(_){console.error("Error fetching teachers:",_)}},T=()=>{g(null),v({class_name:"",class_code:"",level:"primary",grade:"",section:"",capacity:30,class_teacher_id:"",room_number:"",academic_year:"2024/2025",status:"active",description:""}),p(!0)},M=_=>{g(_),v({class_name:_.class_name,class_code:_.class_code,level:_.level,grade:_.grade||"",section:_.section||"",capacity:_.capacity,class_teacher_id:_.class_teacher_id||"",room_number:_.room_number||"",academic_year:_.academic_year,status:_.status,description:_.description||""}),p(!0)},R=async _=>{if(window.confirm("Are you sure you want to delete this class?"))try{await Aa.delete(_),w(),alert("Class deleted successfully!")}catch(G){console.error("Error deleting class:",G),alert("Failed to delete class")}},C=async _=>{_.preventDefault();try{b?(await Aa.update(b.id,h),alert("Class updated successfully!")):(await Aa.create(h),alert("Class created successfully!")),p(!1),w()}catch(G){console.error("Error saving class:",G),alert("Failed to save class: "+(G.response?.data?.error||G.message))}},y=_=>({creche:"bg-pink-100 text-pink-700",nursery:"bg-purple-100 text-purple-700",kg:"bg-blue-100 text-blue-700",primary:"bg-green-100 text-green-700",jhs:"bg-orange-100 text-orange-700",shs:"bg-red-100 text-red-700"})[_]||"bg-gray-100 text-gray-700",k=[{label:"Total Classes",value:n.length,color:"bg-blue-500"},{label:"Active",value:n.filter(_=>_.status==="active").length,color:"bg-green-500"},{label:"Total Capacity",value:n.reduce((_,G)=>_+parseInt(G.capacity||0),0),color:"bg-purple-500"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Classes Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage school classes and sections"})]}),e.jsxs("button",{onClick:T,className:"btn btn-primary flex items-center gap-2",children:[e.jsx(lt,{className:"w-5 h-5"}),"Add Class"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:k.map((_,G)=>e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:_.label}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:_.value})]}),e.jsx("div",{className:`${_.color} w-12 h-12 rounded-lg flex items-center justify-center`,children:e.jsx(sn,{className:"w-6 h-6 text-white"})})]})},G))}),e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Class Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Level"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Class Teacher"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Room"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Capacity"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:m?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-6 py-12 text-center text-gray-500",children:"Loading..."})}):n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-6 py-12 text-center text-gray-500",children:"No classes found"})}):n.map(_=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:_.class_name}),e.jsx("td",{className:"px-6 py-4 font-mono text-sm text-gray-600",children:_.class_code}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${y(_.level)}`,children:_.level.toUpperCase()})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:_.teacher_name||"-"}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:_.room_number||"-"}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:_.capacity}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${_.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:_.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>M(_),className:"text-blue-600 hover:text-blue-700",children:e.jsx(Dt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>R(_.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Bt,{className:"w-4 h-4"})})]})})]},_.id))})]})})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:b?"Edit Class":"Add New Class"}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ve,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:C,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class Name *"}),e.jsx("input",{type:"text",required:!0,value:h.class_name,onChange:_=>v({...h,class_name:_.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class Code *"}),e.jsx("input",{type:"text",required:!0,value:h.class_code,onChange:_=>v({...h,class_code:_.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Level *"}),e.jsxs("select",{required:!0,value:h.level,onChange:_=>v({...h,level:_.target.value}),className:"input",children:[e.jsx("option",{value:"creche",children:"Creche"}),e.jsx("option",{value:"nursery",children:"Nursery"}),e.jsx("option",{value:"kg",children:"KG"}),e.jsx("option",{value:"primary",children:"Primary"}),e.jsx("option",{value:"jhs",children:"JHS"}),e.jsx("option",{value:"shs",children:"SHS"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Grade"}),e.jsx("input",{type:"number",value:h.grade,onChange:_=>v({...h,grade:_.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Section"}),e.jsx("input",{type:"text",value:h.section,onChange:_=>v({...h,section:_.target.value}),className:"input",placeholder:"A, B, C"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity"}),e.jsx("input",{type:"number",value:h.capacity,onChange:_=>v({...h,capacity:_.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class Teacher"}),e.jsxs("select",{value:h.class_teacher_id,onChange:_=>v({...h,class_teacher_id:_.target.value}),className:"input",children:[e.jsx("option",{value:"",children:"Select Class Teacher"}),i.map(_=>e.jsxs("option",{value:_.id,children:[_.first_name," ",_.last_name]},_.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Room Number"}),e.jsx("input",{type:"text",value:h.room_number,onChange:_=>v({...h,room_number:_.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Academic Year"}),e.jsx("input",{type:"text",value:h.academic_year,onChange:_=>v({...h,academic_year:_.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:h.status,onChange:_=>v({...h,status:_.target.value}),className:"input",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:h.description,onChange:_=>v({...h,description:_.target.value}),className:"input",rows:"3"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>p(!1),className:"btn bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:b?"Update Class":"Add Class"})]})]})]})})]})}function e1(){const[n,r]=f.useState([]),[i,d]=f.useState([]),[m,u]=f.useState([]),[x,p]=f.useState(""),[b,g]=f.useState([]),[h,v]=f.useState(!1),[w,A]=f.useState(!1),[T,M]=f.useState(null),[R,C]=f.useState({subject_id:"",teacher_id:"",periods_per_week:3,is_mandatory:1});f.useEffect(()=>{y(),k(),_()},[]),f.useEffect(()=>{x&&G()},[x]);const y=async()=>{try{const q=await $.get("http://localhost/McSMS/backend/api/classes.php");r(q.data.classes||[])}catch(q){console.error("Error fetching classes:",q)}},k=async()=>{try{const q=await $.get("http://localhost/McSMS/backend/api/subjects.php");d(q.data.subjects||[])}catch(q){console.error("Error fetching subjects:",q)}},_=async()=>{try{const q=await $.get("http://localhost/McSMS/backend/api/teachers.php");u(q.data.teachers||[])}catch(q){console.error("Error fetching teachers:",q)}},G=async()=>{try{v(!0);const q=await $.get(`http://localhost/McSMS/backend/api/class_subjects.php?class_id=${x}`);g(q.data.class_subjects||[])}catch(q){console.error("Error fetching class subjects:",q)}finally{v(!1)}},z=()=>{M(null),C({subject_id:"",teacher_id:"",periods_per_week:3,is_mandatory:1}),A(!0)},N=q=>{M(q),C({subject_id:q.subject_id,teacher_id:q.teacher_id||"",periods_per_week:q.periods_per_week,is_mandatory:q.is_mandatory}),A(!0)},E=async q=>{if(window.confirm("Are you sure you want to remove this subject from the class?"))try{await $.delete(`http://localhost/McSMS/backend/api/class_subjects.php?id=${q}`),G(),alert("Subject removed successfully!")}catch(Z){console.error("Error deleting class subject:",Z),alert("Failed to remove subject")}},S=async q=>{if(q.preventDefault(),!x){alert("Please select a class first");return}try{const Z={class_id:x,...R};T?(await $.put(`http://localhost/McSMS/backend/api/class_subjects.php?id=${T.id}`,Z),alert("Subject updated successfully!")):(await $.post("http://localhost/McSMS/backend/api/class_subjects.php",Z),alert("Subject added successfully!")),A(!1),G()}catch(Z){console.error("Error saving class subject:",Z),alert("Failed to save: "+(Z.response?.data?.error||Z.message))}},U=n.find(q=>q.id==x)?.class_name||"Select a class";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Class Curriculum Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Assign subjects to classes and manage teachers"})]}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Class *"}),e.jsxs("select",{value:x,onChange:q=>p(q.target.value),className:"input text-lg font-medium",children:[e.jsx("option",{value:"",children:"-- Select a Class --"}),n.map(q=>e.jsxs("option",{value:q.id,children:[q.class_name," (",q.class_code,")"]},q.id))]})]}),x&&e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:z,className:"btn btn-primary flex items-center gap-2",children:[e.jsx(lt,{className:"w-5 h-5"}),"Add Subject to Class"]})})]})}),x&&e.jsxs("div",{className:"card overflow-hidden",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 bg-gray-50",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Curriculum for ",U]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[b.length," subject(s) assigned"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subject"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subject Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Teacher"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Periods/Week"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:h?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-12 text-center text-gray-500",children:"Loading subjects..."})}):b.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-12 text-center text-gray-500",children:'No subjects assigned to this class yet. Click "Add Subject to Class" to get started.'})}):b.map(q=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:q.subject_name})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-mono text-sm text-gray-600",children:q.subject_code})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-gray-900",children:q.teacher_name||"-"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:[q.periods_per_week," periods"]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${q.is_mandatory==1?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}`,children:q.is_mandatory==1?"Mandatory":"Optional"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>N(q),className:"text-blue-600 hover:text-blue-700",title:"Edit",children:e.jsx(Dt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>E(q.id),className:"text-red-600 hover:text-red-700",title:"Remove",children:e.jsx(Bt,{className:"w-4 h-4"})})]})})]},q.id))})]})})]}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:T?"Edit Subject":"Add Subject to Class"}),e.jsx("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ve,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:S,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class"}),e.jsx("input",{type:"text",value:U,disabled:!0,className:"input bg-gray-50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject *"}),e.jsxs("select",{required:!0,value:R.subject_id,onChange:q=>C({...R,subject_id:q.target.value}),className:"input",disabled:T,children:[e.jsx("option",{value:"",children:"Select Subject"}),i.map(q=>e.jsxs("option",{value:q.id,children:[q.subject_name," (",q.subject_code,")"]},q.id))]}),T&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Subject cannot be changed when editing"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Teacher"}),e.jsxs("select",{value:R.teacher_id,onChange:q=>C({...R,teacher_id:q.target.value}),className:"input",children:[e.jsx("option",{value:"",children:"No Teacher Assigned"}),m.map(q=>e.jsxs("option",{value:q.id,children:[q.first_name," ",q.last_name]},q.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Periods per Week *"}),e.jsx("input",{type:"number",required:!0,min:"1",max:"10",value:R.periods_per_week,onChange:q=>C({...R,periods_per_week:q.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type *"}),e.jsxs("select",{required:!0,value:R.is_mandatory,onChange:q=>C({...R,is_mandatory:q.target.value}),className:"input",children:[e.jsx("option",{value:"1",children:"Mandatory"}),e.jsx("option",{value:"0",children:"Optional"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>A(!1),className:"btn bg-gray-200 hover:bg-gray-300",children:"Cancel"}),e.jsxs("button",{type:"submit",className:"btn btn-primary flex items-center gap-2",children:[e.jsx(Ms,{className:"w-4 h-4"}),T?"Update":"Add"," Subject"]})]})]})]})})]})}function t1(){const[n,r]=f.useState([]),[i,d]=f.useState(!0),[m,u]=f.useState(!1),[x,p]=f.useState(null),[b,g]=f.useState({subject_name:"",subject_code:"",category:"core",description:"",status:"active"});f.useEffect(()=>{h()},[]);const h=async()=>{try{d(!0);const C=await Wl.getAll();r(C.data.subjects||[])}catch(C){console.error("Error fetching subjects:",C),alert("Failed to load subjects")}finally{d(!1)}},v=()=>{p(null),g({subject_name:"",subject_code:"",category:"core",description:"",status:"active"}),u(!0)},w=C=>{p(C),g({subject_name:C.subject_name,subject_code:C.subject_code,category:C.category,description:C.description||"",status:C.status}),u(!0)},A=async C=>{if(window.confirm("Are you sure you want to delete this subject?"))try{await Wl.delete(C),h(),alert("Subject deleted successfully!")}catch(y){console.error("Error deleting subject:",y),alert("Failed to delete subject")}},T=async C=>{C.preventDefault();try{x?(await Wl.update(x.id,b),alert("Subject updated successfully!")):(await Wl.create(b),alert("Subject created successfully!")),u(!1),h()}catch(y){console.error("Error saving subject:",y),alert("Failed to save subject: "+(y.response?.data?.error||y.message))}},M=C=>({core:"bg-blue-100 text-blue-700",elective:"bg-green-100 text-green-700",optional:"bg-purple-100 text-purple-700",extra:"bg-orange-100 text-orange-700"})[C]||"bg-gray-100 text-gray-700",R=[{label:"Total Subjects",value:n.length,color:"bg-blue-500"},{label:"Core Subjects",value:n.filter(C=>C.category==="core").length,color:"bg-green-500"},{label:"Elective",value:n.filter(C=>C.category==="elective").length,color:"bg-purple-500"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Subjects Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage academic subjects"})]}),e.jsxs("button",{onClick:v,className:"btn btn-primary flex items-center gap-2",children:[e.jsx(lt,{className:"w-5 h-5"}),"Add Subject"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:R.map((C,y)=>e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:C.label}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:C.value})]}),e.jsx("div",{className:`${C.color} w-12 h-12 rounded-lg flex items-center justify-center`,children:e.jsx(qe,{className:"w-6 h-6 text-white"})})]})},y))}),e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subject Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:i?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-12 text-center text-gray-500",children:"Loading..."})}):n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-12 text-center text-gray-500",children:"No subjects found"})}):n.map(C=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:C.subject_name}),e.jsx("td",{className:"px-6 py-4 font-mono text-sm text-gray-600",children:C.subject_code}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${M(C.category)}`,children:C.category})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${C.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:C.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>w(C),className:"text-blue-600 hover:text-blue-700",children:e.jsx(Dt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>A(C.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Bt,{className:"w-4 h-4"})})]})})]},C.id))})]})})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:x?"Edit Subject":"Add New Subject"}),e.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ve,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:T,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject Name *"}),e.jsx("input",{type:"text",required:!0,value:b.subject_name,onChange:C=>g({...b,subject_name:C.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject Code *"}),e.jsx("input",{type:"text",required:!0,value:b.subject_code,onChange:C=>g({...b,subject_code:C.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),e.jsxs("select",{required:!0,value:b.category,onChange:C=>g({...b,category:C.target.value}),className:"input",children:[e.jsx("option",{value:"core",children:"Core"}),e.jsx("option",{value:"elective",children:"Elective"}),e.jsx("option",{value:"optional",children:"Optional"}),e.jsx("option",{value:"extra",children:"Extra"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:b.status,onChange:C=>g({...b,status:C.target.value}),className:"input",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:b.description,onChange:C=>g({...b,description:C.target.value}),className:"input",rows:"3"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>u(!1),className:"btn bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:x?"Update Subject":"Add Subject"})]})]})]})})]})}function s1(){const[n,r]=f.useState([]),[i,d]=f.useState(!0),[m,u]=f.useState(!1),[x,p]=f.useState(null),[b,g]=f.useState({term_name:"",term_code:"",academic_year:"2024/2025",term_number:1,start_date:"",end_date:"",status:"upcoming",description:""});f.useEffect(()=>{h()},[]);const h=async()=>{try{d(!0);const y=await Jl.getAll();r(y.data.terms||[])}catch(y){console.error("Error fetching terms:",y),alert("Failed to load terms")}finally{d(!1)}},v=()=>{p(null),g({term_name:"",term_code:"",academic_year:"2024/2025",term_number:1,start_date:"",end_date:"",status:"upcoming",description:""}),u(!0)},w=y=>{p(y),g({term_name:y.term_name,term_code:y.term_code,academic_year:y.academic_year,term_number:y.term_number,start_date:y.start_date,end_date:y.end_date,status:y.status,description:y.description||""}),u(!0)},A=async y=>{if(window.confirm("Are you sure you want to delete this term?"))try{await Jl.delete(y),h(),alert("Term deleted successfully!")}catch(k){console.error("Error deleting term:",k),alert("Failed to delete term")}},T=async y=>{if(window.confirm("Activate this term? This will deactivate all other terms."))try{await Jl.activate(y),h(),alert("Term activated successfully!")}catch(k){console.error("Error activating term:",k),alert("Failed to activate term")}},M=async y=>{y.preventDefault();try{x?(await Jl.update(x.id,b),alert("Term updated successfully!")):(await Jl.create(b),alert("Term created successfully!")),u(!1),h()}catch(k){console.error("Error saving term:",k),alert("Failed to save term: "+(k.response?.data?.error||k.message))}},R=y=>({upcoming:"bg-blue-100 text-blue-700",active:"bg-green-100 text-green-700",completed:"bg-gray-100 text-gray-700"})[y]||"bg-gray-100 text-gray-700",C=[{label:"Total Terms",value:n.length,color:"bg-blue-500"},{label:"Active Term",value:n.filter(y=>y.is_active).length,color:"bg-green-500"},{label:"Upcoming",value:n.filter(y=>y.status==="upcoming").length,color:"bg-purple-500"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Academic Terms"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage academic terms and sessions"})]}),e.jsxs("button",{onClick:v,className:"btn btn-primary flex items-center gap-2",children:[e.jsx(lt,{className:"w-5 h-5"}),"Add Term"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:C.map((y,k)=>e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:y.label}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:y.value})]}),e.jsx("div",{className:`${y.color} w-12 h-12 rounded-lg flex items-center justify-center`,children:e.jsx(Ue,{className:"w-6 h-6 text-white"})})]})},k))}),e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Term Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Academic Year"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Duration"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:i?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-12 text-center text-gray-500",children:"Loading..."})}):n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-12 text-center text-gray-500",children:"No terms found"})}):n.map(y=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:y.term_name}),y.is_active==1&&e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:"Active"})]})}),e.jsx("td",{className:"px-6 py-4 font-mono text-sm text-gray-600",children:y.term_code}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:y.academic_year}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600",children:[new Date(y.start_date).toLocaleDateString()," - ",new Date(y.end_date).toLocaleDateString()]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${R(y.status)}`,children:y.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[!y.is_active&&e.jsx("button",{onClick:()=>T(y.id),className:"text-green-600 hover:text-green-700",title:"Activate",children:e.jsx(he,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>w(y),className:"text-blue-600 hover:text-blue-700",children:e.jsx(Dt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>A(y.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Bt,{className:"w-4 h-4"})})]})})]},y.id))})]})})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:x?"Edit Term":"Add New Term"}),e.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ve,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:M,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Term Name *"}),e.jsx("input",{type:"text",required:!0,value:b.term_name,onChange:y=>g({...b,term_name:y.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Term Code *"}),e.jsx("input",{type:"text",required:!0,value:b.term_code,onChange:y=>g({...b,term_code:y.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Academic Year *"}),e.jsx("input",{type:"text",required:!0,value:b.academic_year,onChange:y=>g({...b,academic_year:y.target.value}),className:"input",placeholder:"2024/2025"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Term Number *"}),e.jsxs("select",{required:!0,value:b.term_number,onChange:y=>g({...b,term_number:y.target.value}),className:"input",children:[e.jsx("option",{value:"1",children:"Term 1"}),e.jsx("option",{value:"2",children:"Term 2"}),e.jsx("option",{value:"3",children:"Term 3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date *"}),e.jsx("input",{type:"date",required:!0,value:b.start_date,onChange:y=>g({...b,start_date:y.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date *"}),e.jsx("input",{type:"date",required:!0,value:b.end_date,onChange:y=>g({...b,end_date:y.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:b.status,onChange:y=>g({...b,status:y.target.value}),className:"input",children:[e.jsx("option",{value:"upcoming",children:"Upcoming"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"completed",children:"Completed"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:b.description,onChange:y=>g({...b,description:y.target.value}),className:"input",rows:"3"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>u(!1),className:"btn bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:x?"Update Term":"Add Term"})]})]})]})})]})}function a1(){const[n,r]=f.useState([]),[i,d]=f.useState(!0),[m,u]=f.useState(!1),[x,p]=f.useState(null),[b,g]=f.useState(null),[h,v]=f.useState(null),w=f.useRef(null),[A,T]=f.useState({first_name:"",last_name:"",email:"",phone:"",date_of_birth:"",gender:"male",address:"",qualification:"",specialization:"",hire_date:"",employment_type:"full-time",status:"active"});f.useEffect(()=>{R()},[]);const M=z=>{const N=z.target.files[0];if(N){if(!N.type.startsWith("image/")){alert("Please select an image file");return}if(N.size>5*1024*1024){alert("File size must be less than 5MB");return}g(N);const E=new FileReader;E.onloadend=()=>{v(E.result)},E.readAsDataURL(N)}},R=async()=>{try{d(!0);const z=await Ii.getAll();r(z.data.teachers||[])}catch(z){console.error("Error fetching teachers:",z),alert("Failed to load teachers")}finally{d(!1)}},C=()=>{p(null),g(null),v(null),T({first_name:"",last_name:"",email:"",phone:"",date_of_birth:"",gender:"male",address:"",qualification:"",specialization:"",hire_date:new Date().toISOString().split("T")[0],employment_type:"full-time",status:"active"}),u(!0)},y=z=>{p(z),g(null),v(null),T({first_name:z.first_name,last_name:z.last_name,email:z.email,phone:z.phone||"",date_of_birth:z.date_of_birth||"",gender:z.gender||"male",address:z.address||"",qualification:z.qualification||"",specialization:z.specialization||"",hire_date:z.hire_date||"",employment_type:z.employment_type,status:z.status}),u(!0)},k=async z=>{if(window.confirm("Are you sure you want to delete this teacher?"))try{await Ii.delete(z),R(),alert("Teacher deleted successfully!")}catch(N){console.error("Error deleting teacher:",N),alert("Failed to delete teacher")}},_=async z=>{z.preventDefault();try{let N;if(x?(await Ii.update(x.id,A),N=x.id,alert("Teacher updated successfully!")):(N=(await Ii.create(A)).data.teacher.id,alert("Teacher created successfully!")),b&&N){const E=new FormData;E.append("profile_picture",b),E.append("type","teacher"),E.append("id",N),await $.post("http://localhost/McSMS/backend/api/upload_profile_picture.php",E,{headers:{"Content-Type":"multipart/form-data"}})}u(!1),R()}catch(N){console.error("Error saving teacher:",N),alert("Failed to save teacher: "+(N.response?.data?.error||N.message))}},G=[{label:"Total Teachers",value:n.length,color:"bg-blue-500"},{label:"Active",value:n.filter(z=>z.status==="active").length,color:"bg-green-500"},{label:"Full-Time",value:n.filter(z=>z.employment_type==="full-time").length,color:"bg-purple-500"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Teachers Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage teaching staff"})]}),e.jsxs("button",{onClick:C,className:"btn btn-primary flex items-center gap-2",children:[e.jsx(lt,{className:"w-5 h-5"}),"Add Teacher"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:G.map((z,N)=>e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:z.label}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:z.value})]}),e.jsx("div",{className:`${z.color} w-12 h-12 rounded-lg flex items-center justify-center`,children:e.jsx(Se,{className:"w-6 h-6 text-white"})})]})},N))}),e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Teacher"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Teacher ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Specialization"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Contact"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Employment"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:i?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-12 text-center text-gray-500",children:"Loading..."})}):n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"px-6 py-12 text-center text-gray-500",children:"No teachers found"})}):n.map(z=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-blue-600 font-semibold",children:[z.first_name?.charAt(0),z.last_name?.charAt(0)]})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[z.first_name," ",z.last_name]}),e.jsx("p",{className:"text-sm text-gray-500",children:z.email})]})]})}),e.jsx("td",{className:"px-6 py-4 font-mono text-sm text-gray-600",children:z.teacher_id}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:z.specialization||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:z.phone||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-600 capitalize",children:z.employment_type})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${z.status==="active"?"bg-green-100 text-green-700":z.status==="on-leave"?"bg-orange-100 text-orange-700":"bg-gray-100 text-gray-700"}`,children:z.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>y(z),className:"text-blue-600 hover:text-blue-700",children:e.jsx(Dt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>k(z.id),className:"text-red-600 hover:text-red-700",children:e.jsx(Bt,{className:"w-4 h-4"})})]})})]},z.id))})]})})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between sticky top-0 bg-white",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:x?"Edit Teacher":"Add New Teacher"}),e.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ve,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:_,className:"p-6 space-y-4",children:[e.jsx("div",{className:"mb-6 flex justify-center",children:x?e.jsx(of,{type:"teacher",id:x.id,currentPicture:x.profile_picture,onUploadSuccess:()=>R()}):e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-gray-200 border-4 border-white shadow-lg mx-auto mb-3",children:h?e.jsx("img",{src:h,alt:"Preview",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600",children:e.jsx(Mt,{className:"w-12 h-12 text-white"})})}),e.jsx("input",{ref:w,type:"file",accept:"image/*",onChange:M,className:"hidden"}),e.jsxs("button",{type:"button",onClick:()=>w.current?.click(),className:"btn btn-sm bg-gray-200 hover:bg-gray-300 flex items-center gap-2 mx-auto",children:[e.jsx(Es,{className:"w-4 h-4"}),b?"Change Picture":"Upload Picture"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Optional - JPG, PNG, GIF (Max 5MB)"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),e.jsx("input",{type:"text",required:!0,value:A.first_name,onChange:z=>T({...A,first_name:z.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",required:!0,value:A.last_name,onChange:z=>T({...A,last_name:z.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",required:!0,value:A.email,onChange:z=>T({...A,email:z.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx("input",{type:"tel",value:A.phone,onChange:z=>T({...A,phone:z.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),e.jsx("input",{type:"date",value:A.date_of_birth,onChange:z=>T({...A,date_of_birth:z.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender"}),e.jsxs("select",{value:A.gender,onChange:z=>T({...A,gender:z.target.value}),className:"input",children:[e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsx("textarea",{value:A.address,onChange:z=>T({...A,address:z.target.value}),className:"input",rows:"2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Qualification"}),e.jsx("input",{type:"text",value:A.qualification,onChange:z=>T({...A,qualification:z.target.value}),className:"input",placeholder:"e.g., B.Ed Mathematics"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Specialization"}),e.jsx("input",{type:"text",value:A.specialization,onChange:z=>T({...A,specialization:z.target.value}),className:"input",placeholder:"e.g., Mathematics"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hire Date"}),e.jsx("input",{type:"date",value:A.hire_date,onChange:z=>T({...A,hire_date:z.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Employment Type"}),e.jsxs("select",{value:A.employment_type,onChange:z=>T({...A,employment_type:z.target.value}),className:"input",children:[e.jsx("option",{value:"full-time",children:"Full-Time"}),e.jsx("option",{value:"part-time",children:"Part-Time"}),e.jsx("option",{value:"contract",children:"Contract"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:A.status,onChange:z=>T({...A,status:z.target.value}),className:"input",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"on-leave",children:"On Leave"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>u(!1),className:"btn bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:x?"Update Teacher":"Add Teacher"})]})]})]})})]})}function l1(){const[n,r]=f.useState(null),[i,d]=f.useState(!0),m=ft();f.useEffect(()=>{u()},[]);const u=async()=>{try{d(!0);const g=await pt.getDashboardStats();r(g.data.stats)}catch(g){console.error("Error fetching stats:",g)}finally{d(!1)}},x=g=>new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS"}).format(g||0),p=[{title:"Total Revenue",value:x(n?.total_revenue),icon:Ee,color:"bg-blue-500",description:"Total invoiced amount"},{title:"Total Collected",value:x(n?.total_collected),icon:We,color:"bg-green-500",description:"Payments received"},{title:"Outstanding",value:x(n?.total_outstanding),icon:at,color:"bg-orange-500",description:"Pending payments"},{title:"Pending Invoices",value:n?.pending_invoices||0,icon:Be,color:"bg-purple-500",description:"Awaiting approval"},{title:"Approved Invoices",value:n?.approved_invoices||0,icon:he,color:"bg-teal-500",description:"Ready for payment"},{title:"Paid Invoices",value:n?.paid_invoices||0,icon:he,color:"bg-green-600",description:"Fully paid"},{title:"Today's Payments",value:n?.today_payments||0,icon:_t,color:"bg-indigo-500",description:"Payments today"},{title:"Today's Amount",value:x(n?.today_amount),icon:Ee,color:"bg-pink-500",description:"Collected today"}],b=[{title:"Fee Structure",description:"Manage fee groups, items, and rules",icon:Be,color:"bg-blue-500",path:"/admin/fee-structure"},{title:"Invoices",description:"Review and approve invoices",icon:Be,color:"bg-purple-500",path:"/admin/invoices"},{title:"Payments",description:"Record and track payments",icon:_t,color:"bg-green-500",path:"/admin/payments"}];return i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-gray-500",children:"Loading finance dashboard..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Finance Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Overview of financial operations"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:p.map((g,h)=>e.jsxs("div",{className:"card p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsx("div",{className:`${g.color} w-12 h-12 rounded-lg flex items-center justify-center`,children:e.jsx(g.icon,{className:"w-6 h-6 text-white"})})}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:g.title}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:g.value}),e.jsx("p",{className:"text-xs text-gray-500",children:g.description})]},h))}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Collection Rate"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Payment Collection"}),e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[n?.total_revenue>0?(n?.total_collected/n?.total_revenue*100).toFixed(1):0,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-green-500 h-3 rounded-full transition-all",style:{width:`${n?.total_revenue>0?n?.total_collected/n?.total_revenue*100:0}%`}})})]})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:b.map((g,h)=>e.jsxs("button",{onClick:()=>m(g.path),className:"card p-6 hover:shadow-lg transition-shadow text-left",children:[e.jsx("div",{className:`${g.color} w-12 h-12 rounded-lg flex items-center justify-center mb-4`,children:e.jsx(g.icon,{className:"w-6 h-6 text-white"})}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:g.title}),e.jsx("p",{className:"text-sm text-gray-600",children:g.description})]},h))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Invoice Status"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(at,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Pending Approval"})]}),e.jsx("span",{className:"font-semibold text-gray-900",children:n?.pending_invoices||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4 text-teal-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Approved"})]}),e.jsx("span",{className:"font-semibold text-gray-900",children:n?.approved_invoices||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Paid"})]}),e.jsx("span",{className:"font-semibold text-gray-900",children:n?.paid_invoices||0})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Today's Activity"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_t,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Payments Received"})]}),e.jsx("span",{className:"font-semibold text-gray-900",children:n?.today_payments||0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Amount Collected"})]}),e.jsx("span",{className:"font-semibold text-gray-900",children:x(n?.today_amount)})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"card p-6 bg-blue-50 border-2 border-blue-200",children:[e.jsx(Be,{className:"w-8 h-8 text-blue-600 mb-3"}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Fee Structure"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Manage fee groups, items, and pricing rules for different classes and terms"})]}),e.jsxs("div",{className:"card p-6 bg-purple-50 border-2 border-purple-200",children:[e.jsx(jt,{className:"w-8 h-8 text-purple-600 mb-3"}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Invoice Approval"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Review and approve parent-submitted invoices before payment processing"})]}),e.jsxs("div",{className:"card p-6 bg-green-50 border-2 border-green-200",children:[e.jsx(_t,{className:"w-8 h-8 text-green-600 mb-3"}),e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Payment Tracking"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Record payments and track installments with automatic balance updates"})]})]})]})}function n1(){const[n,r]=f.useState("groups"),[i,d]=f.useState([]),[m,u]=f.useState([]),[x,p]=f.useState([]),[b,g]=f.useState([]),[h,v]=f.useState(!0),[w,A]=f.useState(!1),[T,M]=f.useState(""),[R,C]=f.useState(null),[y,k]=f.useState({group_name:"",group_code:"",description:"",status:"active"}),[_,G]=f.useState({fee_group_id:"",item_name:"",item_code:"",description:"",frequency:"term",is_optional:0,status:"active"}),[z,N]=f.useState({fee_item_id:"",level:"",amount:"",academic_year:"2024/2025",is_active:1}),[E,S]=f.useState({plan_name:"",plan_code:"",description:"",installments:[{percentage:100,due_days:0,label:"Full Payment"}],is_default:0,status:"active"});f.useEffect(()=>{U()},[n]);const U=async()=>{try{if(v(!0),n==="groups"){const Q=await cr.getAll();d(Q.data.fee_groups||[])}else if(n==="items"){const Q=await Kl.getAll();u(Q.data.fee_items||[]);const H=await cr.getAll();d(H.data.fee_groups||[])}else if(n==="rules"){const Q=await pt.getFeeRules();p(Q.data.fee_rules||[]);const H=await Kl.getAll();u(H.data.fee_items||[])}else if(n==="plans"){const Q=await pt.getInstallmentPlans();g(Q.data.installment_plans||[])}}catch(Q){console.error("Error fetching data:",Q)}finally{v(!1)}},q=()=>{M("group"),C(null),k({group_name:"",group_code:"",description:"",status:"active"}),A(!0)},Z=()=>{M("item"),C(null),G({fee_group_id:"",item_name:"",item_code:"",description:"",frequency:"term",is_optional:0,status:"active"}),A(!0)},W=()=>{M("rule"),C(null),N({fee_item_id:"",level:"",amount:"",academic_year:"2024/2025",is_active:1}),A(!0)},ie=()=>{M("plan"),C(null),S({plan_name:"",plan_code:"",description:"",installments:[{percentage:100,due_days:0,label:"Full Payment"}],is_default:0,status:"active"}),A(!0)},F=async Q=>{Q.preventDefault();try{R?await cr.update(R.id,y):await cr.create(y),A(!1),U(),alert("Fee group saved successfully!")}catch(H){alert("Error: "+(H.response?.data?.error||H.message))}},O=async Q=>{Q.preventDefault();try{R?await Kl.update(R.id,_):await Kl.create(_),A(!1),U(),alert("Fee item saved successfully!")}catch(H){alert("Error: "+(H.response?.data?.error||H.message))}},P=async Q=>{Q.preventDefault();try{R?await pt.updateFeeRule(R.id,z):await pt.createFeeRule(z),A(!1),U(),alert("Fee rule saved successfully!")}catch(H){alert("Error: "+(H.response?.data?.error||H.message))}},re=async Q=>{Q.preventDefault();try{const H={...E,installments:JSON.stringify(E.installments)};R?await pt.updateInstallmentPlan(R.id,H):await pt.createInstallmentPlan(H),A(!1),U(),alert("Installment plan saved successfully!")}catch(H){alert("Error: "+(H.response?.data?.error||H.message))}},xe=async(Q,H)=>{if(window.confirm("Are you sure you want to delete this item?"))try{Q==="group"?await cr.delete(H):Q==="item"?await Kl.delete(H):Q==="rule"?await pt.deleteFeeRule(H):Q==="plan"&&await pt.deleteInstallmentPlan(H),U(),alert("Deleted successfully!")}catch(te){alert("Error deleting: "+te.message)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Fee Structure Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage fee groups, items, and pricing rules"})]}),e.jsxs("button",{onClick:()=>{n==="groups"?q():n==="items"?Z():n==="rules"?W():ie()},className:"btn btn-primary flex items-center gap-2",children:[e.jsx(lt,{className:"w-5 h-5"}),"Add ",n==="groups"?"Group":n==="items"?"Item":n==="rules"?"Rule":"Plan"]})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-8",children:["groups","items","rules","plans"].map(Q=>e.jsx("button",{onClick:()=>r(Q),className:`py-4 px-1 border-b-2 font-medium text-sm ${n===Q?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:Q==="plans"?"Installment Plans":Q.charAt(0).toUpperCase()+Q.slice(1)},Q))})}),n==="groups"&&e.jsx("div",{className:"card overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Group Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",children:i.map(Q=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:Q.group_name}),e.jsx("td",{className:"px-6 py-4 font-mono text-sm",children:Q.group_code}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:Q.description||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Q.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:Q.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{C(Q),k(Q),M("group"),A(!0)},className:"text-blue-600",children:e.jsx(Dt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>xe("group",Q.id),className:"text-red-600",children:e.jsx(Bt,{className:"w-4 h-4"})})]})})]},Q.id))})]})}),n==="items"&&e.jsx("div",{className:"card overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Item Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Group"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Frequency"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",children:m.map(Q=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:Q.item_name}),e.jsx("td",{className:"px-6 py-4 font-mono text-sm",children:Q.item_code}),e.jsx("td",{className:"px-6 py-4 text-sm",children:Q.group_name}),e.jsx("td",{className:"px-6 py-4 text-sm capitalize",children:Q.frequency}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Q.is_optional==1?"bg-purple-100 text-purple-700":"bg-blue-100 text-blue-700"}`,children:Q.is_optional==1?"Optional":"Mandatory"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{C(Q),G(Q),M("item"),A(!0)},className:"text-blue-600",children:e.jsx(Dt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>xe("item",Q.id),className:"text-red-600",children:e.jsx(Bt,{className:"w-4 h-4"})})]})})]},Q.id))})]})}),n==="rules"&&e.jsx("div",{className:"card overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Fee Item"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Level"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Academic Year"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",children:x.map(Q=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:Q.item_name}),e.jsx("td",{className:"px-6 py-4 text-sm uppercase",children:Q.level||"All"}),e.jsxs("td",{className:"px-6 py-4 font-semibold text-green-600",children:["GHS ",parseFloat(Q.amount).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 text-sm",children:Q.academic_year}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Q.is_active==1?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:Q.is_active==1?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{C(Q),N(Q),M("rule"),A(!0)},className:"text-blue-600",children:e.jsx(Dt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>xe("rule",Q.id),className:"text-red-600",children:e.jsx(Bt,{className:"w-4 h-4"})})]})})]},Q.id))})]})}),n==="plans"&&e.jsx("div",{className:"card overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Plan Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Installments"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Default"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",children:b.map(Q=>{const H=typeof Q.installments=="string"?JSON.parse(Q.installments):Q.installments;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:Q.plan_name}),e.jsx("td",{className:"px-6 py-4 font-mono text-sm",children:Q.plan_code}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:Q.description||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm",children:H.map((te,ce)=>e.jsxs("div",{className:"text-xs",children:[te.percentage,"% - ",te.label," (",te.due_days," days)"]},ce))}),e.jsx("td",{className:"px-6 py-4",children:Q.is_default==1&&e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-700",children:"Default"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Q.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:Q.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{const te=typeof Q.installments=="string"?JSON.parse(Q.installments):Q.installments;C(Q),S({...Q,installments:te}),M("plan"),A(!0)},className:"text-blue-600",children:e.jsx(Dt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>xe("plan",Q.id),className:"text-red-600",children:e.jsx(Bt,{className:"w-4 h-4"})})]})})]},Q.id)})})]})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold",children:[R?"Edit":"Add"," ",T==="group"?"Fee Group":T==="item"?"Fee Item":T==="rule"?"Fee Rule":"Installment Plan"]}),e.jsx("button",{onClick:()=>A(!1),children:e.jsx(Ve,{className:"w-6 h-6"})})]}),T==="group"&&e.jsxs("form",{onSubmit:F,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Group Name *"}),e.jsx("input",{type:"text",required:!0,value:y.group_name,onChange:Q=>k({...y,group_name:Q.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Group Code *"}),e.jsx("input",{type:"text",required:!0,value:y.group_code,onChange:Q=>k({...y,group_code:Q.target.value}),className:"input"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),e.jsx("textarea",{value:y.description,onChange:Q=>k({...y,description:Q.target.value}),className:"input",rows:"3"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>A(!1),className:"btn bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save"})]})]}),T==="item"&&e.jsxs("form",{onSubmit:O,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Fee Group *"}),e.jsxs("select",{required:!0,value:_.fee_group_id,onChange:Q=>G({..._,fee_group_id:Q.target.value}),className:"input",children:[e.jsx("option",{value:"",children:"Select Group"}),i.map(Q=>e.jsx("option",{value:Q.id,children:Q.group_name},Q.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Item Code *"}),e.jsx("input",{type:"text",required:!0,value:_.item_code,onChange:Q=>G({..._,item_code:Q.target.value}),className:"input"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Item Name *"}),e.jsx("input",{type:"text",required:!0,value:_.item_name,onChange:Q=>G({..._,item_name:Q.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Frequency"}),e.jsxs("select",{value:_.frequency,onChange:Q=>G({..._,frequency:Q.target.value}),className:"input",children:[e.jsx("option",{value:"term",children:"Term"}),e.jsx("option",{value:"session",children:"Session"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"one-time",children:"One-time"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Type"}),e.jsxs("select",{value:_.is_optional,onChange:Q=>G({..._,is_optional:Q.target.value}),className:"input",children:[e.jsx("option",{value:"0",children:"Mandatory"}),e.jsx("option",{value:"1",children:"Optional"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>A(!1),className:"btn bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save"})]})]}),T==="rule"&&e.jsxs("form",{onSubmit:P,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Fee Item *"}),e.jsxs("select",{required:!0,value:z.fee_item_id,onChange:Q=>N({...z,fee_item_id:Q.target.value}),className:"input",children:[e.jsx("option",{value:"",children:"Select Item"}),m.map(Q=>e.jsx("option",{value:Q.id,children:Q.item_name},Q.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Level"}),e.jsxs("select",{value:z.level,onChange:Q=>N({...z,level:Q.target.value}),className:"input",children:[e.jsx("option",{value:"",children:"All Levels"}),e.jsx("option",{value:"creche",children:"Creche"}),e.jsx("option",{value:"nursery",children:"Nursery"}),e.jsx("option",{value:"kg",children:"KG"}),e.jsx("option",{value:"primary",children:"Primary"}),e.jsx("option",{value:"jhs",children:"JHS"}),e.jsx("option",{value:"shs",children:"SHS"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Amount (GHS) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:z.amount,onChange:Q=>N({...z,amount:Q.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Academic Year"}),e.jsx("input",{type:"text",value:z.academic_year,onChange:Q=>N({...z,academic_year:Q.target.value}),className:"input"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>A(!1),className:"btn bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save"})]})]}),T==="plan"&&e.jsxs("form",{onSubmit:re,className:"p-6 space-y-4 max-h-[70vh] overflow-y-auto",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Plan Name *"}),e.jsx("input",{type:"text",required:!0,value:E.plan_name,onChange:Q=>S({...E,plan_name:Q.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Plan Code *"}),e.jsx("input",{type:"text",required:!0,value:E.plan_code,onChange:Q=>S({...E,plan_code:Q.target.value}),className:"input"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),e.jsx("textarea",{value:E.description,onChange:Q=>S({...E,description:Q.target.value}),className:"input",rows:"2"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Installments *"}),e.jsxs("div",{className:"space-y-3 border rounded-lg p-4 bg-gray-50",children:[E.installments.map((Q,H)=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 items-end",children:[e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-xs mb-1",children:"Percentage"}),e.jsx("input",{type:"number",required:!0,min:"1",max:"100",value:Q.percentage,onChange:te=>{const ce=[...E.installments];ce[H].percentage=parseInt(te.target.value)||0,S({...E,installments:ce})},className:"input text-sm"})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsx("label",{className:"block text-xs mb-1",children:"Due Days"}),e.jsx("input",{type:"number",required:!0,min:"0",value:Q.due_days,onChange:te=>{const ce=[...E.installments];ce[H].due_days=parseInt(te.target.value)||0,S({...E,installments:ce})},className:"input text-sm"})]}),e.jsxs("div",{className:"col-span-5",children:[e.jsx("label",{className:"block text-xs mb-1",children:"Label"}),e.jsx("input",{type:"text",required:!0,value:Q.label,onChange:te=>{const ce=[...E.installments];ce[H].label=te.target.value,S({...E,installments:ce})},className:"input text-sm"})]}),e.jsx("div",{className:"col-span-1",children:E.installments.length>1&&e.jsx("button",{type:"button",onClick:()=>{const te=E.installments.filter((ce,ue)=>ue!==H);S({...E,installments:te})},className:"btn bg-red-100 text-red-600 hover:bg-red-200 p-2",children:e.jsx(Bt,{className:"w-4 h-4"})})})]},H)),e.jsxs("button",{type:"button",onClick:()=>{S({...E,installments:[...E.installments,{percentage:0,due_days:0,label:""}]})},className:"btn bg-blue-100 text-blue-600 hover:bg-blue-200 text-sm w-full",children:[e.jsx(lt,{className:"w-4 h-4 inline mr-1"})," Add Installment"]}),e.jsxs("p",{className:"text-xs text-gray-600 mt-2",children:["Total: ",E.installments.reduce((Q,H)=>Q+(H.percentage||0),0),"% (must equal 100%)"]})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:E.is_default==1,onChange:Q=>S({...E,is_default:Q.target.checked?1:0}),className:"rounded"}),e.jsx("span",{className:"text-sm font-medium",children:"Set as Default Plan"})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status"}),e.jsxs("select",{value:E.status,onChange:Q=>S({...E,status:Q.target.value}),className:"input",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>A(!1),className:"btn bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save Plan"})]})]})]})})]})}function r1(){const[n,r]=f.useState([]),[i,d]=f.useState(null),[m,u]=f.useState(!0),[x,p]=f.useState("all"),[b,g]=f.useState(!1),[h,v]=f.useState(null);f.useEffect(()=>{w()},[x]);const w=async()=>{try{u(!0);const k=x!=="all"?{status:x}:{},[_,G]=await Promise.all([pt.getInvoices(k),pt.getInvoiceStats()]);r(_.data.invoices||[]),d(G.data.stats)}catch(k){console.error("Error fetching invoices:",k)}finally{u(!1)}},A=async k=>{try{const _=await pt.getInvoiceById(k.id);v(_.data.invoice),g(!0)}catch{alert("Error loading invoice details")}},T=async()=>{if(window.confirm("Approve this invoice?"))try{await pt.approveInvoice(h.id,{approved_by:1}),g(!1),w(),alert("Invoice approved successfully!")}catch{alert("Error approving invoice")}},M=async()=>{const k=prompt("Enter rejection reason:");if(k)try{await pt.rejectInvoice(h.id,{rejection_reason:k}),g(!1),w(),alert("Invoice rejected")}catch{alert("Error rejecting invoice")}},R=k=>new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS"}).format(k||0),C=k=>({draft:"bg-gray-100 text-gray-700",pending_finance:"bg-orange-100 text-orange-700",approved:"bg-teal-100 text-teal-700",rejected:"bg-red-100 text-red-700",partial:"bg-blue-100 text-blue-700",paid:"bg-green-100 text-green-700"})[k]||"bg-gray-100 text-gray-700",y=[{label:"Total Invoices",value:i?.total_invoices||0,color:"bg-blue-500"},{label:"Pending",value:i?.pending||0,color:"bg-orange-500"},{label:"Approved",value:i?.approved||0,color:"bg-teal-500"},{label:"Paid",value:i?.paid||0,color:"bg-green-500"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Invoice Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Review and approve student invoices"})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:y.map((k,_)=>e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:k.label}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:k.value})]}),e.jsx("div",{className:`${k.color} w-12 h-12 rounded-lg flex items-center justify-center`,children:e.jsx(Be,{className:"w-6 h-6 text-white"})})]})},_))}),e.jsx("div",{className:"flex gap-2",children:["all","pending_finance","approved","paid","rejected"].map(k=>e.jsx("button",{onClick:()=>p(k),className:`px-4 py-2 rounded-lg text-sm font-medium ${x===k?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:k==="all"?"All":k.replace("_"," ").replace(/\b\w/g,_=>_.toUpperCase())},k))}),e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Invoice #"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Class"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Term"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Paid"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Balance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",children:m?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"px-6 py-12 text-center text-gray-500",children:"Loading..."})}):n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"px-6 py-12 text-center text-gray-500",children:"No invoices found"})}):n.map(k=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 font-mono text-sm",children:k.invoice_number}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[k.first_name," ",k.last_name]}),e.jsx("p",{className:"text-sm text-gray-500",children:k.student_id})]})}),e.jsx("td",{className:"px-6 py-4 text-sm",children:k.class_name}),e.jsx("td",{className:"px-6 py-4 text-sm",children:k.term_name}),e.jsx("td",{className:"px-6 py-4 font-semibold",children:R(k.total_amount)}),e.jsx("td",{className:"px-6 py-4 text-green-600",children:R(k.paid_amount)}),e.jsx("td",{className:"px-6 py-4 font-semibold",children:R(k.balance)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${C(k.status)}`,children:k.status.replace("_"," ")})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:()=>A(k),className:"text-blue-600 hover:text-blue-700",children:e.jsx(os,{className:"w-4 h-4"})})})]},k.id))})]})})}),b&&h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between sticky top-0 bg-white",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Invoice Details"}),e.jsx("button",{onClick:()=>g(!1),children:e.jsx(Ve,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Invoice Number"}),e.jsx("p",{className:"font-mono font-semibold text-lg",children:h.invoice_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Status"}),e.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${C(h.status)}`,children:h.status.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Student"}),e.jsxs("p",{className:"font-medium",children:[h.first_name," ",h.last_name]}),e.jsx("p",{className:"text-sm text-gray-500",children:h.student_id})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Parent"}),e.jsx("p",{className:"font-medium",children:h.parent_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Class"}),e.jsx("p",{className:"font-medium",children:h.class_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Term"}),e.jsx("p",{className:"font-medium",children:h.term_name})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Invoice Items"}),e.jsxs("table",{className:"w-full border",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-sm",children:"Description"}),e.jsx("th",{className:"px-4 py-2 text-right text-sm",children:"Qty"}),e.jsx("th",{className:"px-4 py-2 text-right text-sm",children:"Unit Price"}),e.jsx("th",{className:"px-4 py-2 text-right text-sm",children:"Amount"})]})}),e.jsx("tbody",{className:"divide-y",children:h.items?.map((k,_)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2",children:k.description}),e.jsx("td",{className:"px-4 py-2 text-right",children:k.quantity}),e.jsx("td",{className:"px-4 py-2 text-right",children:R(k.unit_price)}),e.jsx("td",{className:"px-4 py-2 text-right font-semibold",children:R(k.amount)})]},_))}),e.jsxs("tfoot",{className:"bg-gray-50 font-semibold",children:[e.jsxs("tr",{children:[e.jsx("td",{colSpan:"3",className:"px-4 py-2 text-right",children:"Total:"}),e.jsx("td",{className:"px-4 py-2 text-right",children:R(h.total_amount)})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:"3",className:"px-4 py-2 text-right text-green-600",children:"Paid:"}),e.jsx("td",{className:"px-4 py-2 text-right text-green-600",children:R(h.paid_amount)})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:"3",className:"px-4 py-2 text-right",children:"Balance:"}),e.jsx("td",{className:"px-4 py-2 text-right",children:R(h.balance)})]})]})]})]}),h.status==="pending_finance"&&e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 border-t",children:[e.jsxs("button",{onClick:M,className:"btn bg-red-600 text-white hover:bg-red-700 flex items-center gap-2",children:[e.jsx(cs,{className:"w-5 h-5"}),"Reject"]}),e.jsxs("button",{onClick:T,className:"btn btn-primary flex items-center gap-2",children:[e.jsx(he,{className:"w-5 h-5"}),"Approve Invoice"]})]})]})]})})]})}function i1(){const[n,r]=f.useState([]),[i,d]=f.useState([]),[m,u]=f.useState(!0),[x,p]=f.useState(!1),[b,g]=f.useState({invoice_id:"",student_id:"",parent_id:"",amount:"",payment_method:"cash",payment_date:new Date().toISOString().split("T")[0],reference_number:"",notes:""});f.useEffect(()=>{h()},[]);const h=async()=>{try{u(!0);const[y,k]=await Promise.all([pt.getPayments(),pt.getInvoices()]);r(y.data.payments||[]);const _=(k.data.invoices||[]).filter(G=>(G.status==="approved"||G.status==="pending_payment")&&parseFloat(G.balance||0)>0);d(_),console.log("Unpaid invoices:",_)}catch(y){console.error("Error fetching data:",y)}finally{u(!1)}},v=y=>{const k=y.target.value,_=i.find(G=>G.id==k);_&&g({...b,invoice_id:k,student_id:_.student_id,parent_id:_.parent_id,amount:_.balance})},w=async y=>{y.preventDefault();try{await pt.createPayment(b),p(!1),h(),alert("Payment recorded successfully!"),g({invoice_id:"",student_id:"",parent_id:"",amount:"",payment_method:"cash",payment_date:new Date().toISOString().split("T")[0],reference_number:"",notes:""})}catch(k){alert("Error recording payment: "+(k.response?.data?.error||k.message))}},A=y=>new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS"}).format(y||0),T=y=>({cash:"bg-green-100 text-green-700",bank_transfer:"bg-blue-100 text-blue-700",mobile_money:"bg-purple-100 text-purple-700",cheque:"bg-orange-100 text-orange-700",card:"bg-pink-100 text-pink-700"})[y]||"bg-gray-100 text-gray-700",M=n.reduce((y,k)=>y+parseFloat(k.amount||0),0),R=n.filter(y=>y.payment_date===new Date().toISOString().split("T")[0]),C=R.reduce((y,k)=>y+parseFloat(k.amount||0),0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payment Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Record and track student payments"})]}),e.jsxs("button",{onClick:()=>p(!0),className:"btn btn-primary flex items-center gap-2",children:[e.jsx(lt,{className:"w-5 h-5"}),"Record Payment"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Payments"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:n.length})]}),e.jsx("div",{className:"bg-blue-500 w-12 h-12 rounded-lg flex items-center justify-center",children:e.jsx(_t,{className:"w-6 h-6 text-white"})})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Amount"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:A(M)})]}),e.jsx("div",{className:"bg-green-500 w-12 h-12 rounded-lg flex items-center justify-center",children:e.jsx(Ee,{className:"w-6 h-6 text-white"})})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Today's Payments"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:R.length})]}),e.jsx("div",{className:"bg-purple-500 w-12 h-12 rounded-lg flex items-center justify-center",children:e.jsx(_t,{className:"w-6 h-6 text-white"})})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Today's Total"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:A(C)})]}),e.jsx("div",{className:"bg-orange-500 w-12 h-12 rounded-lg flex items-center justify-center",children:e.jsx(Ee,{className:"w-6 h-6 text-white"})})]})})]}),e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Payment #"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Invoice #"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Method"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Reference"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y",children:m?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-6 py-12 text-center text-gray-500",children:"Loading..."})}):n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-6 py-12 text-center text-gray-500",children:"No payments recorded"})}):n.map(y=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 font-mono text-sm",children:y.payment_number}),e.jsx("td",{className:"px-6 py-4 text-sm",children:new Date(y.payment_date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 font-mono text-sm",children:y.invoice_number}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900",children:[y.first_name," ",y.last_name]}),e.jsx("p",{className:"text-sm text-gray-500",children:y.student_id})]})}),e.jsx("td",{className:"px-6 py-4 font-semibold text-green-600",children:A(y.amount)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${T(y.payment_method)}`,children:y.payment_method.replace("_"," ")})}),e.jsx("td",{className:"px-6 py-4 text-sm",children:y.reference_number||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${y.status==="completed"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:y.status})})]},y.id))})]})})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Record Payment"}),e.jsx("button",{onClick:()=>p(!1),children:e.jsx(Ve,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:w,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Invoice *"}),e.jsxs("select",{required:!0,value:b.invoice_id,onChange:v,className:"input",children:[e.jsx("option",{value:"",children:i.length===0?"No unpaid invoices available":"Select an invoice"}),i.map(y=>e.jsxs("option",{value:y.id,children:[y.invoice_number," - ",y.student_name||`${y.first_name} ${y.last_name}`," - Balance: ",A(y.balance)]},y.id))]}),i.length===0&&e.jsx("p",{className:"text-sm text-orange-600 mt-2",children:"No invoices available for payment. Please ensure invoices are approved in the Finance section."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount (GHS) *"}),e.jsx("input",{type:"number",step:"0.01",required:!0,value:b.amount,onChange:y=>g({...b,amount:y.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Date *"}),e.jsx("input",{type:"date",required:!0,value:b.payment_date,onChange:y=>g({...b,payment_date:y.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method *"}),e.jsxs("select",{required:!0,value:b.payment_method,onChange:y=>g({...b,payment_method:y.target.value}),className:"input",children:[e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),e.jsx("option",{value:"mobile_money",children:"Mobile Money"}),e.jsx("option",{value:"cheque",children:"Cheque"}),e.jsx("option",{value:"card",children:"Card"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reference Number"}),e.jsx("input",{type:"text",value:b.reference_number,onChange:y=>g({...b,reference_number:y.target.value}),className:"input",placeholder:"Transaction reference"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes"}),e.jsx("textarea",{value:b.notes,onChange:y=>g({...b,notes:y.target.value}),className:"input",rows:"3",placeholder:"Additional notes..."})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>p(!1),className:"btn bg-gray-200 text-gray-700 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Record Payment"})]})]})]})})]})}function c1(){const[n,r]=f.useState([]),[i,d]=f.useState([]),[m,u]=f.useState(""),[x,p]=f.useState(new Date().toISOString().split("T")[0]),[b,g]=f.useState({}),[h,v]=f.useState(null),[w,A]=f.useState(!1);f.useEffect(()=>{T()},[]),f.useEffect(()=>{m&&(M(),R())},[m,x]);const T=async()=>{try{const z=await Aa.getAll();r(z.data.classes||[])}catch(z){console.error("Error fetching classes:",z)}},M=async()=>{try{const z=await bs.getAll({class_id:m});d(z.data.students||[]);const N={};z.data.students.forEach(E=>{N[E.id]={status:"present",time_in:"07:45"}}),g(N)}catch(z){console.error("Error fetching students:",z)}},R=async()=>{try{const[z,N]=await Promise.all([$.get(`http://localhost/McSMS/backend/api/academic.php?resource=attendance&class_id=${m}&date=${x}`),$.get(`http://localhost/McSMS/backend/api/academic.php?resource=attendance&action=stats&class_id=${m}&date=${x}`)]),E={};z.data.attendance.forEach(S=>{E[S.student_id]={status:S.status,time_in:S.time_in||"07:45"}}),g(S=>({...S,...E})),v(N.data.stats)}catch(z){console.error("Error fetching attendance:",z)}},C=(z,N)=>{g(E=>({...E,[z]:{...E[z],status:N}}))},y=(z,N)=>{g(E=>({...E,[z]:{...E[z],time_in:N}}))},k=async()=>{if(!m){alert("Please select a class");return}try{A(!0);const z=i.map(N=>({student_id:N.id,status:b[N.id]?.status||"present",time_in:b[N.id]?.time_in||null}));await $.post("http://localhost/McSMS/backend/api/academic.php?resource=attendance&action=mark_class",{class_id:m,term_id:1,date:x,students:z,marked_by:1}),alert("Attendance marked successfully!"),R()}catch(z){console.error("Error marking attendance:",z),alert("Failed to mark attendance")}finally{A(!1)}},_=z=>{const N={present:"bg-green-100 text-green-700 border-green-300",absent:"bg-red-100 text-red-700 border-red-300",late:"bg-orange-100 text-orange-700 border-orange-300",excused:"bg-blue-100 text-blue-700 border-blue-300"};return N[z]||N.present},G=[{label:"Total",value:h?.total||0,icon:Se,color:"bg-blue-500"},{label:"Present",value:h?.present||0,icon:he,color:"bg-green-500"},{label:"Absent",value:h?.absent||0,icon:cs,color:"bg-red-500"},{label:"Late",value:h?.late||0,icon:at,color:"bg-orange-500"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Attendance Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Mark and track student attendance"})]}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Class *"}),e.jsxs("select",{value:m,onChange:z=>u(z.target.value),className:"input",children:[e.jsx("option",{value:"",children:"Choose a class"}),n.map(z=>e.jsx("option",{value:z.id,children:z.class_name},z.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),e.jsx("input",{type:"date",value:x,onChange:z=>p(z.target.value),className:"input"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:k,disabled:!m||w,className:"btn btn-primary w-full disabled:opacity-50",children:w?"Saving...":"Save Attendance"})})]})}),h&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:G.map((z,N)=>e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:z.label}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:z.value})]}),e.jsx("div",{className:`${z.color} w-12 h-12 rounded-lg flex items-center justify-center`,children:e.jsx(z.icon,{className:"w-6 h-6 text-white"})})]})},N))}),m&&i.length>0?e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Student ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Time In"})]})}),e.jsx("tbody",{className:"divide-y",children:i.map(z=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-blue-600 font-semibold",children:[z.first_name?.charAt(0),z.last_name?.charAt(0)]})}),e.jsx("div",{children:e.jsxs("p",{className:"font-medium text-gray-900",children:[z.first_name," ",z.last_name]})})]})}),e.jsx("td",{className:"px-6 py-4 font-mono text-sm",children:z.student_id}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex gap-2",children:["present","absent","late","excused"].map(N=>e.jsx("button",{onClick:()=>C(z.id,N),className:`px-3 py-1 text-xs font-medium rounded-full border-2 transition-all ${b[z.id]?.status===N?_(N):"bg-gray-50 text-gray-600 border-gray-200 hover:bg-gray-100"}`,children:N.charAt(0).toUpperCase()+N.slice(1)},N))})}),e.jsx("td",{className:"px-6 py-4",children:b[z.id]?.status!=="absent"&&e.jsx("input",{type:"time",value:b[z.id]?.time_in||"07:45",onChange:N=>y(z.id,N.target.value),className:"input w-32"})})]},z.id))})]})})}):m?e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx(jt,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No students found in this class"})]}):e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx(Ue,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Select a class to mark attendance"})]})]})}function d1(){const[n,r]=f.useState("assessments"),[i,d]=f.useState([]),[m,u]=f.useState([]),[x,p]=f.useState([]),[b,g]=f.useState(!1),[h,v]=f.useState(!1),[w,A]=f.useState(null),[T,M]=f.useState([]),[R,C]=f.useState(!1),[y,k]=f.useState({class_id:"",subject_id:"",term_id:1,assessment_name:"",assessment_type:"test",total_marks:100,weight_percentage:100,assessment_date:new Date().toISOString().split("T")[0],description:""});f.useEffect(()=>{_()},[]);const _=async()=>{try{const[U,q,Z]=await Promise.all([$.get("http://localhost/McSMS/backend/api/academic.php?resource=assessments"),Aa.getAll(),Wl.getAll()]);d(U.data.assessments||[]),u(q.data.classes||[]),p(Z.data.subjects||[])}catch(U){console.error("Error fetching data:",U)}},G=async U=>{U.preventDefault();try{await $.post("http://localhost/McSMS/backend/api/academic.php?resource=assessments",y),g(!1),_(),alert("Assessment created successfully!"),k({class_id:"",subject_id:"",term_id:1,assessment_name:"",assessment_type:"test",total_marks:100,weight_percentage:100,assessment_date:new Date().toISOString().split("T")[0],description:""})}catch{alert("Error creating assessment")}},z=async U=>{try{C(!0);const Z=(await $.get(`http://localhost/McSMS/backend/api/academic.php?resource=grades&action=by_assessment&assessment_id=${U.id}`)).data.grades||[],F=((await $.get(`http://localhost/McSMS/backend/api/students.php?class_id=${U.class_id}`)).data.students||[]).map(O=>{const P=Z.find(re=>re.student_id==O.id);return{student_id:O.id,first_name:O.first_name,last_name:O.last_name,student_id_code:O.student_id,marks_obtained:P?.marks_obtained||"",grade:P?.grade||""}});M(F),A(U),v(!0)}catch{alert("Error loading grades")}finally{C(!1)}},N=(U,q,Z)=>{M(W=>W.map(ie=>ie.student_id===U?{...ie,[q]:Z}:ie))},E=(U,q)=>{const Z=U/q*100;return Z>=80?"A":Z>=70?"B":Z>=60?"C":Z>=50?"D":"F"},S=async()=>{try{C(!0);const U=T.map(q=>({student_id:q.student_id,marks_obtained:q.marks_obtained,grade:q.grade||E(q.marks_obtained,w.total_marks)}));await $.post("http://localhost/McSMS/backend/api/academic.php?resource=grades&action=bulk",{assessment_id:w.id,grades:U,graded_by:1}),v(!1),alert("Grades saved successfully!")}catch{alert("Error saving grades")}finally{C(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Grading & Assessments"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Create assessments and record grades"})]}),e.jsxs("button",{onClick:()=>g(!0),className:"btn btn-primary flex items-center gap-2",children:[e.jsx(lt,{className:"w-5 h-5"}),"Create Assessment"]})]}),e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Assessment"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Class"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subject"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Marks"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",children:i.map(U=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:U.assessment_name}),e.jsx("td",{className:"px-6 py-4 text-sm",children:U.class_name}),e.jsx("td",{className:"px-6 py-4 text-sm",children:U.subject_name}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-700 capitalize",children:U.assessment_type})}),e.jsx("td",{className:"px-6 py-4 font-semibold",children:U.total_marks}),e.jsx("td",{className:"px-6 py-4 text-sm",children:new Date(U.assessment_date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("button",{onClick:()=>z(U),className:"text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[e.jsx(dt,{className:"w-4 h-4"}),"Grade"]})})]},U.id))})]})})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Create Assessment"}),e.jsx("button",{onClick:()=>g(!1),children:e.jsx(Ve,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:G,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Class *"}),e.jsxs("select",{required:!0,value:y.class_id,onChange:U=>k({...y,class_id:U.target.value}),className:"input",children:[e.jsx("option",{value:"",children:"Select Class"}),m.map(U=>e.jsx("option",{value:U.id,children:U.class_name},U.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Subject *"}),e.jsxs("select",{required:!0,value:y.subject_id,onChange:U=>k({...y,subject_id:U.target.value}),className:"input",children:[e.jsx("option",{value:"",children:"Select Subject"}),x.map(U=>e.jsx("option",{value:U.id,children:U.subject_name},U.id))]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Assessment Name *"}),e.jsx("input",{type:"text",required:!0,value:y.assessment_name,onChange:U=>k({...y,assessment_name:U.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Type *"}),e.jsxs("select",{value:y.assessment_type,onChange:U=>k({...y,assessment_type:U.target.value}),className:"input",children:[e.jsx("option",{value:"quiz",children:"Quiz"}),e.jsx("option",{value:"test",children:"Test"}),e.jsx("option",{value:"exam",children:"Exam"}),e.jsx("option",{value:"assignment",children:"Assignment"}),e.jsx("option",{value:"project",children:"Project"}),e.jsx("option",{value:"midterm",children:"Midterm"}),e.jsx("option",{value:"final",children:"Final"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Total Marks *"}),e.jsx("input",{type:"number",required:!0,value:y.total_marks,onChange:U=>k({...y,total_marks:U.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Weight %"}),e.jsx("input",{type:"number",value:y.weight_percentage,onChange:U=>k({...y,weight_percentage:U.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date *"}),e.jsx("input",{type:"date",required:!0,value:y.assessment_date,onChange:U=>k({...y,assessment_date:U.target.value}),className:"input"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>g(!1),className:"btn bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Create Assessment"})]})]})]})}),h&&w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between sticky top-0 bg-white",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:w.assessment_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[w.class_name," - ",w.subject_name," (Total: ",w.total_marks," marks)"]})]}),e.jsx("button",{onClick:()=>v(!1),children:e.jsx(Ve,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-sm",children:"Student"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm",children:"Student ID"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm",children:"Marks Obtained"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm",children:"Grade"})]})}),e.jsx("tbody",{className:"divide-y",children:T.map(U=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-4 py-3",children:[U.first_name," ",U.last_name]}),e.jsx("td",{className:"px-4 py-3 font-mono text-sm",children:U.student_id_code}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"number",step:"0.01",max:w.total_marks,value:U.marks_obtained,onChange:q=>N(U.student_id,"marks_obtained",q.target.value),className:"input w-24"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"text",value:U.grade||(U.marks_obtained?E(U.marks_obtained,w.total_marks):""),onChange:q=>N(U.student_id,"grade",q.target.value),className:"input w-16"})})]},U.student_id))})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t mt-6",children:[e.jsx("button",{onClick:()=>v(!1),className:"btn bg-gray-200",children:"Cancel"}),e.jsx("button",{onClick:S,disabled:R,className:"btn btn-primary",children:R?"Saving...":"Save Grades"})]})]})]})})]})}function o1(){const[n,r]=f.useState([]),[i,d]=f.useState([]),[m,u]=f.useState([]),[x,p]=f.useState(!1),[b,g]=f.useState(!1),[h,v]=f.useState(null),[w,A]=f.useState([]),[T,M]=f.useState(!1),[R,C]=f.useState({class_id:"",subject_id:"",term_id:1,teacher_id:1,title:"",description:"",due_date:"",total_marks:100,status:"active"});f.useEffect(()=>{y()},[]);const y=async()=>{try{const[E,S,U]=await Promise.all([$.get("http://localhost/McSMS/backend/api/academic.php?resource=homework"),Aa.getAll(),Wl.getAll()]);r(E.data.homework||[]),d(S.data.classes||[]),u(U.data.subjects||[])}catch(E){console.error("Error fetching data:",E)}},k=async E=>{E.preventDefault();try{await $.post("http://localhost/McSMS/backend/api/academic.php?resource=homework",R),p(!1),y(),alert("Homework created successfully!"),C({class_id:"",subject_id:"",term_id:1,teacher_id:1,title:"",description:"",due_date:"",total_marks:100,status:"active"})}catch{alert("Error creating homework")}},_=async E=>{try{M(!0);const S=await $.get(`http://localhost/McSMS/backend/api/academic.php?resource=homework&id=${E.id}`);v(S.data.homework),A(S.data.homework.submissions||[]),g(!0)}catch{alert("Error loading submissions")}finally{M(!1)}},G=async(E,S,U)=>{try{await $.post(`http://localhost/McSMS/backend/api/academic.php?resource=homework_submissions&action=grade&id=${E}`,{marks_obtained:S,feedback:U,graded_by:1}),alert("Submission graded successfully!"),_(h)}catch{alert("Error grading submission")}},z=E=>{const S={active:"bg-green-100 text-green-700",closed:"bg-gray-100 text-gray-700",cancelled:"bg-red-100 text-red-700"};return S[E]||S.active},N=E=>{const S={pending:"bg-orange-100 text-orange-700",submitted:"bg-blue-100 text-blue-700",late:"bg-red-100 text-red-700",graded:"bg-green-100 text-green-700"};return S[E]||S.pending};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Homework Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Assign and grade homework"})]}),e.jsxs("button",{onClick:()=>p(!0),className:"btn btn-primary flex items-center gap-2",children:[e.jsx(lt,{className:"w-5 h-5"}),"Assign Homework"]})]}),e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Class"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subject"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Due Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Submissions"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",children:n.map(E=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:E.title}),e.jsx("td",{className:"px-6 py-4 text-sm",children:E.class_name}),e.jsx("td",{className:"px-6 py-4 text-sm",children:E.subject_name}),e.jsx("td",{className:"px-6 py-4 text-sm",children:new Date(E.due_date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 font-semibold text-blue-600",children:E.submission_count||0}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${z(E.status)}`,children:E.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("button",{onClick:()=>_(E),className:"text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[e.jsx(os,{className:"w-4 h-4"}),"View"]})})]},E.id))})]})})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Assign Homework"}),e.jsx("button",{onClick:()=>p(!1),children:e.jsx(Ve,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:k,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Class *"}),e.jsxs("select",{required:!0,value:R.class_id,onChange:E=>C({...R,class_id:E.target.value}),className:"input",children:[e.jsx("option",{value:"",children:"Select Class"}),i.map(E=>e.jsx("option",{value:E.id,children:E.class_name},E.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Subject *"}),e.jsxs("select",{required:!0,value:R.subject_id,onChange:E=>C({...R,subject_id:E.target.value}),className:"input",children:[e.jsx("option",{value:"",children:"Select Subject"}),m.map(E=>e.jsx("option",{value:E.id,children:E.subject_name},E.id))]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title *"}),e.jsx("input",{type:"text",required:!0,value:R.title,onChange:E=>C({...R,title:E.target.value}),className:"input"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description *"}),e.jsx("textarea",{required:!0,value:R.description,onChange:E=>C({...R,description:E.target.value}),className:"input",rows:"4"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Due Date *"}),e.jsx("input",{type:"date",required:!0,value:R.due_date,onChange:E=>C({...R,due_date:E.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Total Marks"}),e.jsx("input",{type:"number",value:R.total_marks,onChange:E=>C({...R,total_marks:E.target.value}),className:"input"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>p(!1),className:"btn bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Assign Homework"})]})]})]})}),b&&h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between sticky top-0 bg-white",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:h.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:[h.class_name," - ",h.subject_name]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Due: ",new Date(h.due_date).toLocaleDateString()]})]}),e.jsx("button",{onClick:()=>g(!1),children:e.jsx(Ve,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Description:"}),e.jsx("p",{className:"text-gray-600 mb-6",children:h.description}),e.jsxs("h3",{className:"font-semibold mb-4",children:["Submissions (",w.length,"):"]}),w.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(qe,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No submissions yet"})]}):e.jsx("div",{className:"space-y-4",children:w.map(E=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[E.first_name," ",E.last_name]}),e.jsx("p",{className:"text-sm text-gray-500",children:E.student_id}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Submitted: ",E.submitted_at?new Date(E.submitted_at).toLocaleString():"Not submitted"]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${N(E.status)}`,children:E.status})]}),E.submission_text&&e.jsx("div",{className:"bg-gray-50 p-3 rounded mb-3",children:e.jsx("p",{className:"text-sm",children:E.submission_text})}),E.status==="submitted"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",placeholder:"Marks",max:h.total_marks,className:"input w-24",id:`marks-${E.id}`}),e.jsx("input",{type:"text",placeholder:"Feedback",className:"input flex-1",id:`feedback-${E.id}`}),e.jsxs("button",{onClick:()=>{const S=document.getElementById(`marks-${E.id}`).value,U=document.getElementById(`feedback-${E.id}`).value;G(E.id,S,U)},className:"btn btn-primary flex items-center gap-1",children:[e.jsx(he,{className:"w-4 h-4"}),"Grade"]})]}),E.status==="graded"&&e.jsxs("div",{className:"bg-green-50 p-3 rounded",children:[e.jsxs("p",{className:"text-sm font-semibold text-green-700",children:["Marks: ",E.marks_obtained,"/",h.total_marks]}),E.feedback&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Feedback: ",E.feedback]})]})]},E.id))})]})]})})]})}function m1(){const[n,r]=f.useState([]),[i,d]=f.useState([]),[m,u]=f.useState(!0),[x,p]=f.useState(!1),[b,g]=f.useState(!1),[h,v]=f.useState(null),[w,A]=f.useState(null),[T,M]=f.useState([]),[R,C]=f.useState({role_name:"",role_code:"",description:"",category:"administrative",status:"active"});f.useEffect(()=>{y(),k()},[]);const y=async()=>{try{u(!0);const W=await $.get("http://localhost/McSMS/backend/api/roles.php");r(W.data.roles||[])}catch(W){console.error("Error fetching roles:",W),alert("Failed to load roles")}finally{u(!1)}},k=async()=>{try{const W=await $.get("http://localhost/McSMS/backend/api/permissions.php");d(W.data.permissions||[])}catch(W){console.error("Error fetching permissions:",W)}},_=async W=>{try{const ie=await $.get(`http://localhost/McSMS/backend/api/roles.php?id=${W}&include_permissions=true`);M(ie.data.permissions||[])}catch(ie){console.error("Error fetching role permissions:",ie)}},G=()=>{v(null),C({role_name:"",role_code:"",description:"",category:"administrative",status:"active"}),p(!0)},z=W=>{v(W),C({role_name:W.role_name,role_code:W.role_code,description:W.description||"",category:W.category||"administrative",status:W.status}),p(!0)},N=async W=>{A(W),await _(W.id),g(!0)},E=async W=>{W.preventDefault();try{h?(await $.put(`http://localhost/McSMS/backend/api/roles.php?id=${h.id}`,R),alert("Role updated successfully!")):(await $.post("http://localhost/McSMS/backend/api/roles.php",R),alert("Role created successfully!")),p(!1),y()}catch(ie){alert("Error: "+(ie.response?.data?.error||ie.message))}},S=async W=>{if(window.confirm("Are you sure you want to delete this role?"))try{await $.delete(`http://localhost/McSMS/backend/api/roles.php?id=${W}`),alert("Role deleted successfully!"),y()}catch(ie){alert("Error deleting role: "+ie.message)}},U=async W=>{const ie=T.some(F=>F.id===W);try{ie?await $.delete(`http://localhost/McSMS/backend/api/role_permissions.php?role_id=${w.id}&permission_id=${W}`):await $.post("http://localhost/McSMS/backend/api/role_permissions.php",{role_id:w.id,permission_id:W}),await _(w.id)}catch(F){alert("Error updating permission: "+F.message)}},q={leadership:"bg-purple-100 text-purple-700",academic:"bg-blue-100 text-blue-700",administrative:"bg-green-100 text-green-700",finance:"bg-orange-100 text-orange-700",student_services:"bg-teal-100 text-teal-700",support:"bg-pink-100 text-pink-700"},Z=i.reduce((W,ie)=>{const F=ie.module||"other";return W[F]||(W[F]=[]),W[F].push(ie),W},{});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Role Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage system roles and permissions"})]}),e.jsxs("button",{onClick:G,className:"btn btn-primary flex items-center gap-2",children:[e.jsx(lt,{className:"w-5 h-5"}),"Add Role"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Ks,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Roles"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.length})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(pv,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Roles"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.filter(W=>W.status==="active").length})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(Ks,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Permissions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(Se,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Categories"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:"6"})]})]})})]}),e.jsx("div",{className:"card overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Role Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",children:m?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-8 text-center text-gray-500",children:"Loading roles..."})}):n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-8 text-center text-gray-500",children:"No roles found"})}):n.map(W=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:W.role_name}),e.jsx("td",{className:"px-6 py-4 font-mono text-sm",children:W.role_code}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${q[W.category]||"bg-gray-100 text-gray-700"}`,children:W.category})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:W.description||"-"}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${W.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:W.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>N(W),className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg",title:"Manage Permissions",children:e.jsx(Ks,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>z(W),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Edit Role",children:e.jsx(Dt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>S(W.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Delete Role",children:e.jsx(Bt,{className:"w-4 h-4"})})]})})]},W.id))})]})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:h?"Edit Role":"Add New Role"}),e.jsx("button",{onClick:()=>p(!1),children:e.jsx(Ve,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:E,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Role Name *"}),e.jsx("input",{type:"text",required:!0,value:R.role_name,onChange:W=>C({...R,role_name:W.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Role Code *"}),e.jsx("input",{type:"text",required:!0,value:R.role_code,onChange:W=>C({...R,role_code:W.target.value.toUpperCase()}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Category *"}),e.jsxs("select",{required:!0,value:R.category,onChange:W=>C({...R,category:W.target.value}),className:"input",children:[e.jsx("option",{value:"leadership",children:"Leadership"}),e.jsx("option",{value:"academic",children:"Academic"}),e.jsx("option",{value:"administrative",children:"Administrative"}),e.jsx("option",{value:"finance",children:"Finance"}),e.jsx("option",{value:"student_services",children:"Student Services"}),e.jsx("option",{value:"support",children:"Support"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Status *"}),e.jsxs("select",{required:!0,value:R.status,onChange:W=>C({...R,status:W.target.value}),className:"input",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),e.jsx("textarea",{value:R.description,onChange:W=>C({...R,description:W.target.value}),className:"input",rows:"3"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>p(!1),className:"btn bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:h?"Update Role":"Create Role"})]})]})]})}),b&&w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold",children:["Manage Permissions: ",w.role_name]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[T.length," of ",i.length," permissions assigned"]})]}),e.jsx("button",{onClick:()=>g(!1),children:e.jsx(Ve,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:Object.entries(Z).map(([W,ie])=>e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3 capitalize",children:[W," Module"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:ie.map(F=>{const O=T.some(P=>P.id===F.id);return e.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg border-2 cursor-pointer transition-colors ${O?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("input",{type:"checkbox",checked:O,onChange:()=>U(F.id),className:"rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:F.permission_name}),e.jsx("p",{className:"text-xs text-gray-500",children:F.permission_key})]})]},F.id)})})]},W))}),e.jsx("div",{className:"p-6 border-t flex justify-end",children:e.jsx("button",{onClick:()=>g(!1),className:"btn btn-primary",children:"Done"})})]})})]})}function u1(){const[n,r]=f.useState(!0),[i,d]=f.useState(!1),[m,u]=f.useState("general"),[x,p]=f.useState(!1),[b,g]=f.useState(null),[h,v]=f.useState({school_name:"",school_abbreviation:"",school_code:"",school_motto:"",school_email:"",school_phone:"",school_address:"",school_website:"",school_logo:"",school_tagline:"",current_academic_year:"",current_term:"",grading_system:"percentage",pass_mark:"50",currency:"GHS",currency_symbol:"",tax_rate:"0",late_payment_fee:"0",timezone:"Africa/Accra",date_format:"Y-m-d",time_format:"24",language:"en",email_notifications:!0,sms_notifications:!1,push_notifications:!0,session_timeout:"30",password_min_length:"8",require_password_change:!1,two_factor_auth:!1});f.useEffect(()=>{w()},[]),f.useEffect(()=>{h.school_logo&&g(h.school_logo)},[h.school_logo]);const w=async()=>{try{r(!0);const C=await $.get("http://localhost/McSMS/backend/api/settings.php");C.data.settings&&v(y=>({...y,...C.data.settings}))}catch(C){console.error("Error fetching settings:",C)}finally{r(!1)}},A=async()=>{try{d(!0),await $.post("http://localhost/McSMS/backend/api/settings.php",h),alert("Settings saved successfully!")}catch(C){alert("Error saving settings: "+C.message)}finally{d(!1)}},T=(C,y)=>{v(k=>({...k,[C]:y}))},M=async C=>{const y=C.target.files[0];if(y){if(!y.type.startsWith("image/")){alert("Please upload an image file");return}if(y.size>2*1024*1024){alert("File size must be less than 2MB");return}try{p(!0);const k=new FormData;k.append("logo",y);const _=await $.post("http://localhost/McSMS/backend/api/upload_logo.php",k,{headers:{"Content-Type":"multipart/form-data"}});if(_.data.success){const G=_.data.logo_url;v(z=>({...z,school_logo:G})),g(G),alert("Logo uploaded successfully!")}else alert("Upload failed: "+(_.data.error||"Unknown error"))}catch(k){console.error("Upload error:",k),alert("Error uploading logo: "+k.message)}finally{p(!1)}}},R=[{id:"general",label:"General",icon:sn},{id:"academic",label:"Academic",icon:Ue},{id:"finance",label:"Finance",icon:Ee},{id:"system",label:"System",icon:xr},{id:"notifications",label:"Notifications",icon:js},{id:"security",label:"Security",icon:Hv}];return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading settings..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"System Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure system-wide settings and preferences"})]}),e.jsxs("button",{onClick:A,disabled:i,className:"btn btn-primary flex items-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5"}),i?"Saving...":"Save Changes"]})]}),e.jsx("div",{className:"border-b",children:e.jsx("div",{className:"flex gap-4",children:R.map(C=>{const y=C.icon;return e.jsxs("button",{onClick:()=>u(C.id),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ${m===C.id?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[e.jsx(y,{className:"w-4 h-4"}),C.label]},C.id)})})}),e.jsxs("div",{className:"card p-6",children:[m==="general"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"General Information"}),e.jsx("div",{className:"bg-gray-50 p-6 rounded-lg border-2 border-dashed border-gray-300",children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:h.school_logo||b?e.jsx("img",{src:b||h.school_logo,alt:"School Logo",className:"w-32 h-32 object-contain rounded-lg border-2 border-gray-200 bg-white p-2"}):e.jsx("div",{className:"w-32 h-32 bg-gray-200 rounded-lg flex items-center justify-center",children:e.jsx(lf,{className:"w-12 h-12 text-gray-400"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"School Logo"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Upload your school logo. This will appear on login pages and throughout the system.",e.jsx("br",{}),e.jsx("span",{className:"text-xs text-gray-500",children:"Recommended: 200x200px, PNG or JPG, max 2MB"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"btn btn-secondary cursor-pointer flex items-center gap-2",children:[e.jsx(Es,{className:"w-4 h-4"}),x?"Uploading...":"Upload Logo",e.jsx("input",{type:"file",accept:"image/*",onChange:M,disabled:x,className:"hidden"})]}),h.school_logo&&e.jsx("button",{onClick:()=>{v(C=>({...C,school_logo:""})),g(null)},className:"text-sm text-red-600 hover:text-red-700",children:"Remove Logo"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"School Name *"}),e.jsx("input",{type:"text",value:h.school_name,onChange:C=>T("school_name",C.target.value),className:"input",placeholder:"e.g., St. Mary's School"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["School Abbreviation",e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Auto-generated if empty)"})]}),e.jsx("input",{type:"text",value:h.school_abbreviation,onChange:C=>T("school_abbreviation",C.target.value),className:"input",placeholder:"e.g., SMS or STMARY"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"School Code"}),e.jsx("input",{type:"text",value:h.school_code,onChange:C=>T("school_code",C.target.value),className:"input",placeholder:"e.g., SMS001"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"School Tagline"}),e.jsx("input",{type:"text",value:h.school_tagline,onChange:C=>T("school_tagline",C.target.value),className:"input",placeholder:"e.g., Excellence in Education"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"School Motto"}),e.jsx("input",{type:"text",value:h.school_motto,onChange:C=>T("school_motto",C.target.value),className:"input",placeholder:"e.g., Knowledge is Power"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email"}),e.jsx("input",{type:"email",value:h.school_email,onChange:C=>T("school_email",C.target.value),className:"input",placeholder:"info@school.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone"}),e.jsx("input",{type:"tel",value:h.school_phone,onChange:C=>T("school_phone",C.target.value),className:"input",placeholder:"+233 XX XXX XXXX"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Address"}),e.jsx("textarea",{value:h.school_address,onChange:C=>T("school_address",C.target.value),className:"input",rows:"3",placeholder:"School physical address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Website"}),e.jsx("input",{type:"url",value:h.school_website,onChange:C=>T("school_website",C.target.value),className:"input",placeholder:"https://school.com"})]})]})]}),m==="academic"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Academic Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Current Academic Year"}),e.jsx("input",{type:"text",value:h.current_academic_year,onChange:C=>T("current_academic_year",C.target.value),className:"input",placeholder:"2024/2025"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Current Term"}),e.jsxs("select",{value:h.current_term,onChange:C=>T("current_term",C.target.value),className:"input",children:[e.jsx("option",{value:"",children:"Select Term"}),e.jsx("option",{value:"1",children:"Term 1"}),e.jsx("option",{value:"2",children:"Term 2"}),e.jsx("option",{value:"3",children:"Term 3"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Grading System"}),e.jsxs("select",{value:h.grading_system,onChange:C=>T("grading_system",C.target.value),className:"input",children:[e.jsx("option",{value:"percentage",children:"Percentage (0-100)"}),e.jsx("option",{value:"gpa",children:"GPA (0-4.0)"}),e.jsx("option",{value:"letter",children:"Letter Grades (A-F)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Pass Mark"}),e.jsx("input",{type:"number",value:h.pass_mark,onChange:C=>T("pass_mark",C.target.value),className:"input",min:"0",max:"100"})]})]})]}),m==="finance"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Finance Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Currency"}),e.jsxs("select",{value:h.currency,onChange:C=>T("currency",C.target.value),className:"input",children:[e.jsx("option",{value:"GHS",children:"Ghana Cedi (GHS)"}),e.jsx("option",{value:"USD",children:"US Dollar (USD)"}),e.jsx("option",{value:"EUR",children:"Euro (EUR)"}),e.jsx("option",{value:"GBP",children:"British Pound (GBP)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Currency Symbol"}),e.jsx("input",{type:"text",value:h.currency_symbol,onChange:C=>T("currency_symbol",C.target.value),className:"input",placeholder:""})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tax Rate (%)"}),e.jsx("input",{type:"number",value:h.tax_rate,onChange:C=>T("tax_rate",C.target.value),className:"input",min:"0",max:"100",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Late Payment Fee"}),e.jsx("input",{type:"number",value:h.late_payment_fee,onChange:C=>T("late_payment_fee",C.target.value),className:"input",min:"0",step:"0.01"})]})]})]}),m==="system"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"System Configuration"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Timezone"}),e.jsxs("select",{value:h.timezone,onChange:C=>T("timezone",C.target.value),className:"input",children:[e.jsx("option",{value:"Africa/Accra",children:"Africa/Accra (GMT)"}),e.jsx("option",{value:"Africa/Lagos",children:"Africa/Lagos (WAT)"}),e.jsx("option",{value:"Africa/Nairobi",children:"Africa/Nairobi (EAT)"}),e.jsx("option",{value:"UTC",children:"UTC"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date Format"}),e.jsxs("select",{value:h.date_format,onChange:C=>T("date_format",C.target.value),className:"input",children:[e.jsx("option",{value:"Y-m-d",children:"YYYY-MM-DD"}),e.jsx("option",{value:"d/m/Y",children:"DD/MM/YYYY"}),e.jsx("option",{value:"m/d/Y",children:"MM/DD/YYYY"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Time Format"}),e.jsxs("select",{value:h.time_format,onChange:C=>T("time_format",C.target.value),className:"input",children:[e.jsx("option",{value:"24",children:"24 Hour"}),e.jsx("option",{value:"12",children:"12 Hour (AM/PM)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Language"}),e.jsxs("select",{value:h.language,onChange:C=>T("language",C.target.value),className:"input",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"fr",children:"French"}),e.jsx("option",{value:"es",children:"Spanish"})]})]})]})]}),m==="notifications"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Notification Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center gap-3 p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:h.email_notifications,onChange:C=>T("email_notifications",C.target.checked),className:"rounded"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive notifications via email"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:h.sms_notifications,onChange:C=>T("sms_notifications",C.target.checked),className:"rounded"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"SMS Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive notifications via SMS"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:h.push_notifications,onChange:C=>T("push_notifications",C.target.checked),className:"rounded"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Push Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive browser push notifications"})]})]})]})]}),m==="security"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Security Settings"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Session Timeout (minutes)"}),e.jsx("input",{type:"number",value:h.session_timeout,onChange:C=>T("session_timeout",C.target.value),className:"input",min:"5",max:"120"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Minimum Password Length"}),e.jsx("input",{type:"number",value:h.password_min_length,onChange:C=>T("password_min_length",C.target.value),className:"input",min:"6",max:"20"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center gap-3 p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:h.require_password_change,onChange:C=>T("require_password_change",C.target.checked),className:"rounded"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Require Periodic Password Change"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Force users to change password every 90 days"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:h.two_factor_auth,onChange:C=>T("two_factor_auth",C.target.checked),className:"rounded"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Enable 2FA for enhanced security"})]})]})]})]})]})]})}function x1({onUpload:n,importType:r,onDownloadTemplate:i}){const[d,m]=f.useState(!1),[u,x]=f.useState(null),[p,b]=f.useState(""),g=R=>{R.preventDefault(),R.stopPropagation(),R.type==="dragenter"||R.type==="dragover"?m(!0):R.type==="dragleave"&&m(!1)},h=R=>{R.preventDefault(),R.stopPropagation(),m(!1),R.dataTransfer.files&&R.dataTransfer.files[0]&&w(R.dataTransfer.files[0])},v=R=>{R.preventDefault(),R.target.files&&R.target.files[0]&&w(R.target.files[0])},w=R=>{if(b(""),!["text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(R.type)){b("Invalid file type. Please upload a CSV or Excel file.");return}if(R.size>10*1024*1024){b("File size exceeds 10MB limit.");return}x(R),n(R)},A=()=>{x(null),b(""),n(null)},T=R=>{if(R===0)return"0 Bytes";const C=1024,y=["Bytes","KB","MB"],k=Math.floor(Math.log(R)/Math.log(C));return Math.round(R/Math.pow(C,k)*100)/100+" "+y[k]},M=()=>({students:"Students",teachers:"Teachers",parents:"Parents",classes:"Classes",subjects:"Subjects",fees:"Fee Structure"})[r]||"Data";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:["Upload ",M()," Data"]}),e.jsxs("p",{className:"text-gray-600",children:["Upload a CSV or Excel file with your ",M().toLowerCase()," data."]})]}),e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Be,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"Need a template?"}),e.jsx("p",{className:"text-sm text-blue-700 mb-4",children:"Download our CSV template with the correct format and sample data to get started quickly."}),e.jsxs("button",{onClick:i,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium",children:[e.jsx(At,{className:"w-4 h-4"}),"Download ",M()," Template"]})]})]})}),e.jsxs("div",{onDragEnter:g,onDragLeave:g,onDragOver:g,onDrop:h,className:`
          relative border-2 border-dashed rounded-xl p-12 text-center transition-all
          ${d?"border-blue-500 bg-blue-50":"border-gray-300 bg-gray-50"}
          ${u?"bg-green-50 border-green-500":""}
          ${p?"bg-red-50 border-red-500":""}
        `,children:[!u&&!p&&e.jsxs(e.Fragment,{children:[e.jsx(Es,{className:`w-16 h-16 mx-auto mb-4 ${d?"text-blue-600":"text-gray-400"}`}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:d?"Drop your file here":"Drag & drop your file here"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"or"}),e.jsxs("label",{className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition cursor-pointer font-medium",children:[e.jsx(Es,{className:"w-5 h-5"}),"Browse Files",e.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:v,className:"hidden"})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Supported formats: CSV, XLS, XLSX (Max 10MB)"})]}),u&&!p&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(he,{className:"w-16 h-16 text-green-600 mx-auto"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-green-900 mb-2",children:"File Uploaded Successfully!"}),e.jsxs("div",{className:"inline-flex items-center gap-3 px-4 py-2 bg-white rounded-lg border border-green-200",children:[e.jsx(Be,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-gray-900",children:u.name}),e.jsx("p",{className:"text-sm text-gray-500",children:T(u.size)})]}),e.jsx("button",{onClick:A,className:"p-1 hover:bg-gray-100 rounded transition",children:e.jsx(Ve,{className:"w-4 h-4 text-gray-600"})})]})]}),e.jsx("button",{onClick:A,className:"text-sm text-gray-600 hover:text-gray-900 underline",children:"Choose a different file"})]}),p&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(jt,{className:"w-16 h-16 text-red-600 mx-auto"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-red-900 mb-2",children:"Upload Failed"}),e.jsx("p",{className:"text-red-700 mb-4",children:p}),e.jsx("button",{onClick:()=>b(""),className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition font-medium",children:"Try Again"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h5",{className:"font-semibold text-gray-900 mb-3",children:"File Requirements:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(he,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"First row must contain column headers"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(he,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Use the template format for best results"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(he,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Remove any empty rows at the end"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(he,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Ensure dates are in YYYY-MM-DD format"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(he,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Maximum file size: 10MB"})]})]})]})]})}function h1({file:n,importType:r,onMapComplete:i}){const[d,m]=f.useState([]),[u,x]=f.useState({}),[p,b]=f.useState([]),[g,h]=f.useState(!0),w={students:[{key:"first_name",label:"First Name",required:!0},{key:"last_name",label:"Last Name",required:!0},{key:"email",label:"Email Address",required:!1},{key:"phone",label:"Phone Number",required:!1},{key:"date_of_birth",label:"Date of Birth",required:!0},{key:"gender",label:"Gender",required:!0},{key:"class",label:"Class/Grade",required:!0},{key:"admission_date",label:"Admission Date",required:!1},{key:"parent_name",label:"Parent Name",required:!1},{key:"parent_email",label:"Parent Email",required:!1},{key:"parent_phone",label:"Parent Phone",required:!1}],teachers:[{key:"first_name",label:"First Name",required:!0},{key:"last_name",label:"Last Name",required:!0},{key:"email",label:"Email Address",required:!0},{key:"phone",label:"Phone Number",required:!0},{key:"subject",label:"Subject/Specialization",required:!1},{key:"qualification",label:"Qualification",required:!1},{key:"hire_date",label:"Hire Date",required:!1}],classes:[{key:"name",label:"Class Name",required:!0},{key:"grade_level",label:"Grade Level",required:!0},{key:"capacity",label:"Capacity",required:!1},{key:"class_teacher",label:"Class Teacher",required:!1}],subjects:[{key:"name",label:"Subject Name",required:!0},{key:"code",label:"Subject Code",required:!1},{key:"description",label:"Description",required:!1}]}[r]||[];f.useEffect(()=>{n&&A(n)},[n]),f.useEffect(()=>{Object.keys(u).length>0&&i(u)},[u]);const A=async k=>{h(!0);try{const G=(await k.text()).split(`
`).filter(E=>E.trim());if(G.length===0)throw new Error("File is empty");const z=G[0].split(",").map(E=>E.trim().replace(/['"]/g,""));m(z);const N=G.slice(1,4).map(E=>{const S=E.split(",").map(U=>U.trim().replace(/['"]/g,""));return z.reduce((U,q,Z)=>(U[q]=S[Z]||"",U),{})});b(N),T(z)}catch(_){console.error("Error parsing CSV:",_)}finally{h(!1)}},T=k=>{const _={};w.forEach(G=>{let z=k.find(N=>N.toLowerCase()===G.key.toLowerCase());z||(z=k.find(N=>N.toLowerCase().includes(G.key.toLowerCase())||G.key.toLowerCase().includes(N.toLowerCase()))),z||(z=k.find(N=>N.toLowerCase().includes(G.label.toLowerCase())||G.label.toLowerCase().includes(N.toLowerCase()))),z&&(_[G.key]=z)}),x(_)},M=(k,_)=>{x(G=>({...G,[k]:_}))},R=()=>{x({})},y=(()=>{const k=w.filter(z=>z.required).every(z=>u[z.key]),_=Object.keys(u).length,G=w.length;return{isValid:k,mapped:_,total:G,requiredMapped:w.filter(z=>z.required&&u[z.key]).length,requiredTotal:w.filter(z=>z.required).length}})();return g?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Analyzing your file..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Map Your Columns"}),e.jsx("p",{className:"text-gray-600",children:"Match your CSV columns to our system fields. We've auto-detected some matches for you."})]}),e.jsx("div",{className:`rounded-lg p-4 ${y.isValid?"bg-green-50 border border-green-200":"bg-yellow-50 border border-yellow-200"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[y.isValid?e.jsx(he,{className:"w-5 h-5 text-green-600 mt-0.5"}):e.jsx(jt,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:`font-semibold ${y.isValid?"text-green-900":"text-yellow-900"}`,children:y.isValid?"All required fields are mapped!":"Please map all required fields to continue"}),e.jsxs("p",{className:`text-sm mt-1 ${y.isValid?"text-green-700":"text-yellow-700"}`,children:["Mapped ",y.requiredMapped," of ",y.requiredTotal," required fields",y.mapped>y.requiredMapped&&` (${y.mapped} total)`]})]}),e.jsxs("button",{onClick:R,className:"text-sm text-gray-600 hover:text-gray-900 flex items-center gap-1",children:[e.jsx(cf,{className:"w-4 h-4"}),"Reset"]})]})}),e.jsx("div",{className:"space-y-3",children:w.map(k=>{const _=!!u[k.key];return e.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border-2 transition ${_?"border-green-200 bg-green-50":"border-gray-200 bg-white"}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[k.label,k.required&&e.jsx("span",{className:"text-red-500 text-sm",children:"*"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"System field"})]}),e.jsx(en,{className:`w-5 h-5 flex-shrink-0 ${_?"text-green-600":"text-gray-400"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("select",{value:u[k.key]||"",onChange:G=>M(k.key,G.target.value),className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 transition ${_?"border-green-300 focus:ring-green-500 bg-white":"border-gray-300 focus:ring-blue-500"}`,children:[e.jsx("option",{value:"",children:"-- Select CSV Column --"}),d.map(G=>e.jsx("option",{value:G,children:G},G))]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Your CSV column"})]}),e.jsx("div",{className:"flex-shrink-0 w-6",children:_&&e.jsx(he,{className:"w-6 h-6 text-green-600"})})]},k.key)})}),p.length>0&&Object.keys(u).length>0&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-4",children:"Preview Mapped Data:"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsx("tr",{children:w.filter(k=>u[k.key]).map(k=>e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-700 uppercase",children:k.label},k.key))})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:p.map((k,_)=>e.jsx("tr",{className:"bg-white",children:w.filter(G=>u[G.key]).map(G=>e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:k[u[G.key]]||"-"},G.key))},_))})]})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Showing first ",p.length," rows as preview"]})]})]})}function p1(){const[n,r]=f.useState(1),[i,d]=f.useState("students"),[m,u]=f.useState(null),[x,p]=f.useState({}),[b,g]=f.useState(!1),[h,v]=f.useState(null),w=[{value:"students",label:"Students",icon:"",description:"Import student records with parent information"},{value:"teachers",label:"Teachers",icon:"",description:"Import teacher profiles and qualifications"},{value:"classes",label:"Classes",icon:"",description:"Import class/grade structure"},{value:"subjects",label:"Subjects",icon:"",description:"Import subject catalog"}],A=()=>{window.open(`http://localhost/McSMS/backend/api/import.php?action=download_template&type=${i}`,"_blank")},T=y=>{u(y),y&&r(2)},M=y=>{p(y)},R=async()=>{if(!m||Object.keys(x).length===0){alert("Please upload a file and map the fields");return}g(!0),r(3);try{const y=new FormData;y.append("file",m),y.append("type",i),y.append("mappings",JSON.stringify(x)),y.append("user_id",1);const k=await $.post("http://localhost/McSMS/backend/api/import.php?action=import",y,{headers:{"Content-Type":"multipart/form-data"}});if(k.data.success)v(k.data);else throw new Error(k.data.error||"Import failed")}catch(y){console.error("Import error:",y),v({success:!1,error:y.message||"Import failed"})}finally{g(!1)}},C=()=>{r(1),u(null),p({}),v(null)};return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Bulk Data Import"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Import your existing data from CSV or Excel files"})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:e.jsx("div",{className:"flex items-center justify-between",children:[{num:1,label:"Select Type & Upload"},{num:2,label:"Map Fields"},{num:3,label:"Import Data"}].map((y,k)=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:`
                flex items-center gap-3
                ${n>=y.num?"text-blue-600":"text-gray-400"}
              `,children:[e.jsx("div",{className:`
                  w-10 h-10 rounded-full flex items-center justify-center font-semibold
                  ${n>y.num?"bg-green-500 text-white":n===y.num?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}
                `,children:n>y.num?"":y.num}),e.jsx("span",{className:"font-medium",children:y.label})]}),k<2&&e.jsx("div",{className:`
                  w-24 h-1 mx-4
                  ${n>y.num?"bg-green-500":"bg-gray-200"}
                `})]},y.num))})}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[n===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Select Import Type"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:w.map(y=>e.jsxs("div",{onClick:()=>d(y.value),className:`
                      p-6 rounded-lg border-2 cursor-pointer transition
                      ${i===y.value?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}
                    `,children:[e.jsx("div",{className:"text-4xl mb-3",children:y.icon}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:y.label}),e.jsx("p",{className:"text-sm text-gray-600",children:y.description})]},y.value))})]}),e.jsx("div",{className:"border-t pt-6",children:e.jsx(x1,{importType:i,onUpload:T,onDownloadTemplate:A})})]}),n===2&&m&&e.jsx("div",{children:e.jsx(h1,{file:m,importType:i,onMapComplete:M})}),n===3&&e.jsx("div",{className:"text-center py-12",children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-600 border-t-transparent rounded-full animate-spin mx-auto mb-6"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Importing Data..."}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we process your file"})]}):h?h.success?e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"w-20 h-20 text-green-600 mx-auto mb-6"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Import Successful!"}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 max-w-md mx-auto mb-6",children:e.jsxs("div",{className:"space-y-2 text-left",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700",children:"Total Rows:"}),e.jsx("span",{className:"font-semibold",children:h.total_rows})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Successfully Imported:"}),e.jsx("span",{className:"font-semibold text-green-700",children:h.imported})]}),h.failed>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-red-700",children:"Failed:"}),e.jsx("span",{className:"font-semibold text-red-700",children:h.failed})]})]})}),h.errors&&h.errors.length>0&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 max-w-md mx-auto mb-6",children:[e.jsx("p",{className:"text-sm font-semibold text-yellow-900 mb-2",children:"Some rows had errors:"}),e.jsxs("div",{className:"text-left text-xs text-yellow-800 space-y-1 max-h-40 overflow-y-auto",children:[h.errors.slice(0,5).map((y,k)=>e.jsxs("div",{children:["Row ",y.row,": ",y.error]},k)),h.errors.length>5&&e.jsxs("div",{className:"text-yellow-600",children:["...and ",h.errors.length-5," more"]})]})]}),e.jsx("button",{onClick:C,className:"btn btn-primary",children:"Import More Data"})]}):e.jsxs(e.Fragment,{children:[e.jsx(jt,{className:"w-20 h-20 text-red-600 mx-auto mb-6"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Import Failed"}),e.jsx("p",{className:"text-red-600 mb-6",children:h.error||"An error occurred during import"}),e.jsx("button",{onClick:C,className:"btn btn-secondary",children:"Try Again"})]}):null})]}),n<3&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("button",{onClick:()=>n===2?r(1):null,disabled:n===1,className:"btn btn-secondary flex items-center gap-2",children:[e.jsx(dl,{className:"w-4 h-4"}),"Back"]}),e.jsx("button",{onClick:()=>n===2?R():null,disabled:n===1||n===2&&Object.keys(x).length===0,className:"btn btn-primary",children:n===2?"Start Import":"Next"})]})]})}function f1(){const[n,r]=f.useState([]),[i,d]=f.useState(!0),[m,u]=f.useState({type:"all",user:"",dateFrom:"",dateTo:"",search:""}),[x,p]=f.useState({total:0,today:0,errors:0,warnings:0});f.useEffect(()=>{b(),g()},[]);const b=async()=>{try{d(!0);const A=new URLSearchParams;m.type!=="all"&&A.append("type",m.type),m.user&&A.append("user",m.user),m.dateFrom&&A.append("date_from",m.dateFrom),m.dateTo&&A.append("date_to",m.dateTo),m.search&&A.append("search",m.search);const T=await $.get(`http://localhost/McSMS/backend/api/logs.php?${A}`);r(T.data.logs||[])}catch(A){console.error("Error fetching logs:",A)}finally{d(!1)}},g=async()=>{try{const A=await $.get("http://localhost/McSMS/backend/api/logs.php?stats=true");p(A.data.stats||x)}catch(A){console.error("Error fetching stats:",A)}},h=async()=>{try{const A=await $.get("http://localhost/McSMS/backend/api/logs.php?export=csv",{responseType:"blob"}),T=window.URL.createObjectURL(new Blob([A.data])),M=document.createElement("a");M.href=T,M.setAttribute("download",`system_logs_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(M),M.click(),M.remove()}catch(A){alert("Error exporting logs: "+A.message)}},v=A=>{switch(A){case"error":return e.jsx(cs,{className:"w-5 h-5 text-red-600"});case"warning":return e.jsx(jt,{className:"w-5 h-5 text-orange-600"});case"success":return e.jsx(he,{className:"w-5 h-5 text-green-600"});default:return e.jsx(Ta,{className:"w-5 h-5 text-blue-600"})}},w=A=>{const T={error:"bg-red-100 text-red-700",warning:"bg-orange-100 text-orange-700",success:"bg-green-100 text-green-700",info:"bg-blue-100 text-blue-700"};return T[A]||T.info};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"System Logs"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Monitor system activity and events"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:b,className:"btn bg-gray-200 flex items-center gap-2",children:[e.jsx(cf,{className:"w-4 h-4"}),"Refresh"]}),e.jsxs("button",{onClick:h,className:"btn btn-primary flex items-center gap-2",children:[e.jsx(At,{className:"w-4 h-4"}),"Export"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Ma,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Logs"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.total})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(he,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Today's Logs"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.today})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(cs,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Errors"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.errors})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(jt,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Warnings"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.warnings})]})]})})]}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Type"}),e.jsxs("select",{value:m.type,onChange:A=>u({...m,type:A.target.value}),className:"input",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"info",children:"Info"}),e.jsx("option",{value:"success",children:"Success"}),e.jsx("option",{value:"warning",children:"Warning"}),e.jsx("option",{value:"error",children:"Error"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date From"}),e.jsx("input",{type:"date",value:m.dateFrom,onChange:A=>u({...m,dateFrom:A.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date To"}),e.jsx("input",{type:"date",value:m.dateTo,onChange:A=>u({...m,dateTo:A.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Search"}),e.jsx("input",{type:"text",value:m.search,onChange:A=>u({...m,search:A.target.value}),placeholder:"Search logs...",className:"input"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:b,className:"btn btn-primary w-full flex items-center justify-center gap-2",children:[e.jsx(dn,{className:"w-4 h-4"}),"Apply Filters"]})})]})}),e.jsx("div",{className:"card overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Message"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"User"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"IP Address"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Timestamp"})]})}),e.jsx("tbody",{className:"divide-y",children:i?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-8 text-center text-gray-500",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),"Loading logs..."]})})}):n.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"px-6 py-8 text-center text-gray-500",children:"No logs found"})}):n.map(A=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[v(A.type),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${w(A.type)}`,children:A.type})]})}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("p",{className:"text-sm text-gray-900",children:A.message}),A.details&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:A.details})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:A.user_name||"System"}),e.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-600",children:A.ip_address||"-"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(A.created_at).toLocaleString()})]},A.id))})]})})]})}function g1(){const[n,r]=f.useState(!0),[i,d]=f.useState(!1),[m,u]=f.useState("payment"),[x,p]=f.useState({hubtel_secret:!1,mnotify_key:!1}),[b,g]=f.useState({hubtel_client_id:"",hubtel_client_secret:"",hubtel_merchant_number:"",hubtel_mode:"sandbox",hubtel_enabled:!1,mnotify_api_key:"",mnotify_sender_id:"",mnotify_enabled:!1,sms_payment_confirmation:!0,sms_invoice_reminder:!0,sms_enrollment_confirmation:!0,sms_attendance_alert:!1});f.useEffect(()=>{h()},[]);const h=async()=>{try{r(!0);const M=await $.get("http://localhost/McSMS/backend/api/system_config.php");M.data.success&&g(M.data.config)}catch(M){console.error("Error fetching configuration:",M)}finally{r(!1)}},v=async()=>{try{d(!0),(await $.post("http://localhost/McSMS/backend/api/system_config.php",b)).data.success?alert("Configuration saved successfully!"):alert("Failed to save configuration. Please try again.")}catch(M){console.error("Error saving configuration:",M),alert("Error saving configuration. Please try again.")}finally{d(!1)}},w=async()=>{try{d(!0);const M=await $.post("http://localhost/McSMS/backend/api/system_config.php?action=test_hubtel",{client_id:b.hubtel_client_id,client_secret:b.hubtel_client_secret,mode:b.hubtel_mode});M.data.success?alert(` Hubtel connection successful!

Your credentials are valid and the API is reachable.`):alert(` Hubtel connection failed!

`+(M.data.message||"Please check your credentials."))}catch(M){console.error("Error testing Hubtel:",M),alert(" Connection test failed. Please check your credentials and try again.")}finally{d(!1)}},A=async()=>{try{d(!0);const M=await $.post("http://localhost/McSMS/backend/api/system_config.php?action=test_mnotify",{api_key:b.mnotify_api_key,sender_id:b.mnotify_sender_id});M.data.success?alert(` mNotify connection successful!

Your API key is valid.`):alert(` mNotify connection failed!

`+(M.data.message||"Please check your API key."))}catch(M){console.error("Error testing mNotify:",M),alert(" Connection test failed. Please check your API key and try again.")}finally{d(!1)}},T=M=>{p(R=>({...R,[M]:!R[M]}))};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"System Configuration"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Configure payment gateway and SMS API settings"})]}),e.jsxs("button",{onClick:v,disabled:i,className:"btn btn-primary",children:[e.jsx(Ms,{className:"w-4 h-4"}),i?"Saving...":"Save Configuration"]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"border-b",children:e.jsxs("div",{className:"flex gap-4 px-6",children:[e.jsxs("button",{onClick:()=>u("payment"),className:`py-4 px-4 border-b-2 font-medium ${m==="payment"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[e.jsx(_t,{className:"w-4 h-4 inline mr-2"}),"Payment Gateway"]}),e.jsxs("button",{onClick:()=>u("sms"),className:`py-4 px-4 border-b-2 font-medium ${m==="sms"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[e.jsx(cl,{className:"w-4 h-4 inline mr-2"}),"SMS API"]})]})}),e.jsxs("div",{className:"p-6",children:[m==="payment"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Hubtel Payment Gateway"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configure Hubtel API for mobile money and card payments"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("span",{className:"text-sm font-medium",children:"Enable"}),e.jsx("input",{type:"checkbox",checked:b.hubtel_enabled,onChange:M=>g({...b,hubtel_enabled:M.target.checked}),className:"toggle"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client ID *"}),e.jsx("input",{type:"text",value:b.hubtel_client_id,onChange:M=>g({...b,hubtel_client_id:M.target.value}),placeholder:"Enter Hubtel Client ID",className:"input"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Get this from your Hubtel dashboard  API Settings"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client Secret *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:x.hubtel_secret?"text":"password",value:b.hubtel_client_secret,onChange:M=>g({...b,hubtel_client_secret:M.target.value}),placeholder:"Enter Hubtel Client Secret",className:"input pr-10"}),e.jsx("button",{type:"button",onClick:()=>T("hubtel_secret"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:x.hubtel_secret?e.jsx(o0,{className:"w-4 h-4"}):e.jsx(os,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Keep this secret secure. Never share it publicly."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Merchant Account Number *"}),e.jsx("input",{type:"text",value:b.hubtel_merchant_number,onChange:M=>g({...b,hubtel_merchant_number:M.target.value}),placeholder:"Enter Merchant Account Number",className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mode"}),e.jsxs("select",{value:b.hubtel_mode,onChange:M=>g({...b,hubtel_mode:M.target.value}),className:"input",children:[e.jsx("option",{value:"sandbox",children:"Sandbox (Testing)"}),e.jsx("option",{value:"live",children:"Live (Production)"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use Sandbox for testing, Live for production payments"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:w,disabled:!b.hubtel_client_id||!b.hubtel_client_secret||i,className:"btn bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(he,{className:"w-4 h-4"}),"Test Connection"]}),e.jsx("a",{href:"https://hubtel.com",target:"_blank",rel:"noopener noreferrer",className:"btn bg-gray-200 hover:bg-gray-300",children:"Get Hubtel Account"})]})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(jt,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-medium mb-1",children:"How to get Hubtel credentials:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-blue-800",children:[e.jsxs("li",{children:["Sign up at ",e.jsx("a",{href:"https://hubtel.com",target:"_blank",className:"underline",children:"hubtel.com"})]}),e.jsx("li",{children:"Complete merchant verification"}),e.jsx("li",{children:"Go to Dashboard  API Settings"}),e.jsx("li",{children:"Copy Client ID and Client Secret"}),e.jsx("li",{children:"Paste them above and test connection"})]})]})]})})]}),m==="sms"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold",children:"mNotify SMS API"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Configure mNotify for sending SMS notifications"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("span",{className:"text-sm font-medium",children:"Enable"}),e.jsx("input",{type:"checkbox",checked:b.mnotify_enabled,onChange:M=>g({...b,mnotify_enabled:M.target.checked}),className:"toggle"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"API Key *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:x.mnotify_key?"text":"password",value:b.mnotify_api_key,onChange:M=>g({...b,mnotify_api_key:M.target.value}),placeholder:"Enter mNotify API Key",className:"input pr-10"}),e.jsx("button",{type:"button",onClick:()=>T("mnotify_key"),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:x.mnotify_key?e.jsx(o0,{className:"w-4 h-4"}):e.jsx(os,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Get this from your mNotify dashboard"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sender ID *"}),e.jsx("input",{type:"text",value:b.mnotify_sender_id,onChange:M=>g({...b,mnotify_sender_id:M.target.value}),placeholder:"e.g., SchoolName",maxLength:11,className:"input"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum 11 characters. This will appear as the sender name."})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:A,disabled:!b.mnotify_api_key||i,className:"btn bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(he,{className:"w-4 h-4"}),"Test Connection"]}),e.jsx("a",{href:"https://mnotify.com",target:"_blank",rel:"noopener noreferrer",className:"btn bg-gray-200 hover:bg-gray-300",children:"Get mNotify Account"})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"SMS Notification Settings"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose which events trigger SMS notifications"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center justify-between p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Payment Confirmation"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Send SMS when payment is successful"})]}),e.jsx("input",{type:"checkbox",checked:b.sms_payment_confirmation,onChange:M=>g({...b,sms_payment_confirmation:M.target.checked}),className:"toggle"})]}),e.jsxs("label",{className:"flex items-center justify-between p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Invoice Reminder"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Send SMS reminder for unpaid invoices"})]}),e.jsx("input",{type:"checkbox",checked:b.sms_invoice_reminder,onChange:M=>g({...b,sms_invoice_reminder:M.target.checked}),className:"toggle"})]}),e.jsxs("label",{className:"flex items-center justify-between p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Enrollment Confirmation"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Send SMS when student is enrolled"})]}),e.jsx("input",{type:"checkbox",checked:b.sms_enrollment_confirmation,onChange:M=>g({...b,sms_enrollment_confirmation:M.target.checked}),className:"toggle"})]}),e.jsxs("label",{className:"flex items-center justify-between p-4 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Attendance Alert"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Send SMS when student is absent"})]}),e.jsx("input",{type:"checkbox",checked:b.sms_attendance_alert,onChange:M=>g({...b,sms_attendance_alert:M.target.checked}),className:"toggle"})]})]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(jt,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-medium mb-1",children:"How to get mNotify credentials:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-blue-800",children:[e.jsxs("li",{children:["Sign up at ",e.jsx("a",{href:"https://mnotify.com",target:"_blank",className:"underline",children:"mnotify.com"})]}),e.jsx("li",{children:"Purchase SMS credits"}),e.jsx("li",{children:"Go to Dashboard  API Settings"}),e.jsx("li",{children:"Copy your API Key"}),e.jsx("li",{children:"Register a Sender ID (takes 1-2 days approval)"})]})]})]})})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:v,disabled:i,className:"btn btn-primary",children:[e.jsx(Ms,{className:"w-4 h-4"}),i?"Saving...":"Save All Changes"]})})]})}function b1(){const[n,r]=f.useState("this_month"),i=[{title:"Academic Reports",icon:Ke,color:"blue",reports:[{name:"Student Performance",description:"View student grades and performance metrics",link:"/admin/reports/academic"},{name:"Class Performance",description:"Compare performance across classes",link:"/admin/reports/academic"},{name:"Subject Analysis",description:"Analyze performance by subject",link:"/admin/reports/academic"},{name:"Attendance Summary",description:"Student attendance statistics",link:"/admin/reports/academic"}]},{title:"Financial Reports",icon:Ee,color:"green",reports:[{name:"Revenue Report",description:"Total revenue and collections",link:"/admin/reports/financial"},{name:"Outstanding Fees",description:"Unpaid invoices and balances",link:"/admin/reports/financial"},{name:"Payment History",description:"Payment transactions over time",link:"/admin/reports/financial"},{name:"Fee Collection Rate",description:"Collection efficiency metrics",link:"/admin/reports/financial"}]},{title:"Student Reports",icon:Se,color:"purple",reports:[{name:"Enrollment Report",description:"Student enrollment statistics",link:"/admin/reports/students"},{name:"Demographics",description:"Student demographic breakdown",link:"/admin/reports/students"},{name:"Class Distribution",description:"Students per class/level",link:"/admin/reports/students"},{name:"New Admissions",description:"Recent admission statistics",link:"/admin/reports/students"}]},{title:"Executive Reports",icon:We,color:"orange",reports:[{name:"Executive Dashboard",description:"High-level overview of all metrics",link:"/admin/reports/executive"},{name:"Monthly Summary",description:"Comprehensive monthly report",link:"/admin/reports/executive"},{name:"Year-over-Year",description:"Compare performance across years",link:"/admin/reports/executive"},{name:"Custom Report Builder",description:"Create custom reports",link:"/admin/reports/custom"}]}],d=[{label:"Total Students",value:"1,234",change:"+5.2%",trend:"up",icon:Se,color:"blue"},{label:"Revenue (This Month)",value:"45,230",change:"+12.3%",trend:"up",icon:Ee,color:"green"},{label:"Attendance Rate",value:"94.5%",change:"+2.1%",trend:"up",icon:Ke,color:"purple"},{label:"Outstanding Fees",value:"12,450",change:"-8.4%",trend:"down",icon:Be,color:"orange"}],m=u=>{const x={blue:"bg-blue-100 text-blue-700 border-blue-200",green:"bg-green-100 text-green-700 border-green-200",purple:"bg-purple-100 text-purple-700 border-purple-200",orange:"bg-orange-100 text-orange-700 border-orange-200"};return x[u]||x.blue};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Reports & Analytics"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Generate and view comprehensive reports"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("select",{value:n,onChange:u=>r(u.target.value),className:"input",children:[e.jsx("option",{value:"today",children:"Today"}),e.jsx("option",{value:"this_week",children:"This Week"}),e.jsx("option",{value:"this_month",children:"This Month"}),e.jsx("option",{value:"this_term",children:"This Term"}),e.jsx("option",{value:"this_year",children:"This Year"}),e.jsx("option",{value:"custom",children:"Custom Range"})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:d.map((u,x)=>{const p=u.icon;return e.jsxs("div",{className:"card p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${m(u.color)}`,children:e.jsx(p,{className:"w-5 h-5"})}),e.jsx("span",{className:`text-sm font-medium ${u.trend==="up"?"text-green-600":"text-red-600"}`,children:u.change})]}),e.jsx("p",{className:"text-sm text-gray-600",children:u.label}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:u.value})]},x)})}),i.map((u,x)=>{const p=u.icon;return e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${m(u.color)}`,children:e.jsx(p,{className:"w-6 h-6"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:u.title})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.reports.map((b,g)=>e.jsx(ds,{to:b.link,className:"p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors group",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900 group-hover:text-blue-600",children:b.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:b.description})]}),e.jsx(vs,{className:"w-5 h-5 text-gray-400 group-hover:text-blue-600"})]})},g))})]},x)}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Recently Generated Reports"}),e.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View All"})]}),e.jsx("div",{className:"space-y-3",children:[{name:"Monthly Financial Summary - November 2024",date:"2024-11-25",size:"245 KB"},{name:"Student Performance Report - Term 1",date:"2024-11-20",size:"1.2 MB"},{name:"Attendance Report - Week 12",date:"2024-11-18",size:"156 KB"}].map((u,x)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Be,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:u.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[u.date,"  ",u.size]})]})]}),e.jsxs("button",{className:"btn bg-gray-200 flex items-center gap-2",children:[e.jsx(At,{className:"w-4 h-4"}),"Download"]})]},x))})]})]})}function j1(){const[n,r]=f.useState("class_performance"),[i,d]=f.useState(null),[m,u]=f.useState(!1),[x,p]=f.useState({date_from:new Date().toISOString().split("T")[0].slice(0,8)+"01",date_to:new Date().toISOString().split("T")[0]});f.useEffect(()=>{b()},[n]);const b=async()=>{try{u(!0);const v=new URLSearchParams({type:n,...x}),w=await $.get(`http://localhost/McSMS/backend/api/reports.php?${v}`);d(w.data.data)}catch(v){console.error("Error fetching report:",v)}finally{u(!1)}},g=v=>{alert(`Exporting as ${v}...`)},h=[{id:"class_performance",label:"Class Performance",icon:dt},{id:"attendance_summary",label:"Attendance Summary",icon:Se},{id:"academic_performance",label:"Student Performance",icon:We}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Academic Reports"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"View and analyze academic performance"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>g("pdf"),className:"btn bg-gray-200 flex items-center gap-2",children:[e.jsx(At,{className:"w-4 h-4"}),"Export PDF"]}),e.jsxs("button",{onClick:()=>g("excel"),className:"btn btn-primary flex items-center gap-2",children:[e.jsx(At,{className:"w-4 h-4"}),"Export Excel"]})]})]}),e.jsxs("div",{className:"card p-4",children:[e.jsx("div",{className:"flex gap-4 border-b pb-4 mb-4",children:h.map(v=>{const w=v.icon;return e.jsxs("button",{onClick:()=>r(v.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${n===v.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(w,{className:"w-4 h-4"}),v.label]},v.id)})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"From Date"}),e.jsx("input",{type:"date",value:x.date_from,onChange:v=>p({...x,date_from:v.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"To Date"}),e.jsx("input",{type:"date",value:x.date_to,onChange:v=>p({...x,date_to:v.target.value}),className:"input"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:b,className:"btn btn-primary w-full flex items-center justify-center gap-2",children:[e.jsx(dn,{className:"w-4 h-4"}),"Apply Filters"]})})]})]}),m?e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading report..."})]}):i?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:i.report_title}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Generated on ",new Date(i.generated_at).toLocaleString()]})]}),n==="class_performance"&&i.classes&&e.jsx("div",{className:"card overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Class"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Level"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Students"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Teacher"})]})}),e.jsx("tbody",{className:"divide-y",children:i.classes.map((v,w)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:v.class_name}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-700",children:v.level.toUpperCase()})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:v.student_count}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:v.teacher_name||"-"})]},w))})]})}),n==="attendance_summary"&&i.summary&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Overall Attendance Rate"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-4xl font-bold text-green-600",children:[i.overall_rate,"%"]}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-4",children:e.jsx("div",{className:"bg-green-600 h-4 rounded-full",style:{width:`${i.overall_rate}%`}})})})]})]}),e.jsx("div",{className:"card overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Class"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Level"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Students"})]})}),e.jsx("tbody",{className:"divide-y",children:i.summary.map((v,w)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:v.class_name}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-purple-100 text-purple-700",children:v.level.toUpperCase()})}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:v.total_students})]},w))})]})})]})]}):e.jsx("div",{className:"card p-12 text-center text-gray-500",children:"Select a report and apply filters to view data"})]})}function y1(){const[n,r]=f.useState("revenue_report"),[i,d]=f.useState(null),[m,u]=f.useState(!1),[x,p]=f.useState({date_from:new Date().toISOString().split("T")[0].slice(0,8)+"01",date_to:new Date().toISOString().split("T")[0]});f.useEffect(()=>{b()},[n]);const b=async()=>{try{u(!0);const w=new URLSearchParams({type:n,...x}),A=await $.get(`http://localhost/McSMS/backend/api/reports.php?${w}`);d(A.data.data)}catch(w){console.error("Error fetching report:",w)}finally{u(!1)}},g=w=>new Intl.NumberFormat("en-GH",{style:"currency",currency:"GHS"}).format(w||0),h=w=>{alert(`Exporting as ${w}...`)},v=[{id:"revenue_report",label:"Revenue Report",icon:Ee},{id:"outstanding_fees",label:"Outstanding Fees",icon:at},{id:"payment_history",label:"Payment History",icon:We},{id:"collection_rate",label:"Collection Rate",icon:jt}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Financial Reports"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive financial analysis and reporting"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>h("pdf"),className:"btn bg-gray-200 flex items-center gap-2",children:[e.jsx(At,{className:"w-4 h-4"}),"Export PDF"]}),e.jsxs("button",{onClick:()=>h("excel"),className:"btn btn-primary flex items-center gap-2",children:[e.jsx(At,{className:"w-4 h-4"}),"Export Excel"]})]})]}),e.jsxs("div",{className:"card p-4",children:[e.jsx("div",{className:"flex gap-4 border-b pb-4 mb-4 overflow-x-auto",children:v.map(w=>{const A=w.icon;return e.jsxs("button",{onClick:()=>r(w.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors whitespace-nowrap ${n===w.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(A,{className:"w-4 h-4"}),w.label]},w.id)})}),n!=="collection_rate"&&e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"From Date"}),e.jsx("input",{type:"date",value:x.date_from,onChange:w=>p({...x,date_from:w.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"To Date"}),e.jsx("input",{type:"date",value:x.date_to,onChange:w=>p({...x,date_to:w.target.value}),className:"input"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:b,className:"btn btn-primary w-full flex items-center justify-center gap-2",children:[e.jsx(dn,{className:"w-4 h-4"}),"Apply Filters"]})})]})]}),m?e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading report..."})]}):i?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:i.report_title}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Generated on ",new Date(i.generated_at).toLocaleString()]}),i.period&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Period: ",new Date(i.period.from).toLocaleDateString()," - ",new Date(i.period.to).toLocaleDateString()]})]}),n==="revenue_report"&&i.totals&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Ee,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Invoiced"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g(i.totals.total_invoiced)})]})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(We,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Collected"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g(i.totals.total_collected)})]})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(at,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Outstanding"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g(i.totals.total_outstanding)})]})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(jt,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Invoices"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.totals.total_invoices})]})]})})]}),i.daily_breakdown&&i.daily_breakdown.length>0&&e.jsxs("div",{className:"card overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h3",{className:"text-lg font-semibold",children:"Daily Breakdown"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Invoices"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Invoiced"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Collected"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Outstanding"})]})}),e.jsx("tbody",{className:"divide-y",children:i.daily_breakdown.map((w,A)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:new Date(w.date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 text-gray-600",children:w.invoice_count}),e.jsx("td",{className:"px-6 py-4 text-gray-900 font-medium",children:g(w.total_invoiced)}),e.jsx("td",{className:"px-6 py-4 text-green-600 font-medium",children:g(w.total_collected)}),e.jsx("td",{className:"px-6 py-4 text-orange-600 font-medium",children:g(w.total_outstanding)})]},A))})]})})]})]}),n==="outstanding_fees"&&i.summary&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Total Outstanding"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:g(i.summary.total_outstanding)})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Overdue Amount"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:g(i.summary.overdue_amount)})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Total Invoices"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:i.summary.total_invoices})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Overdue Invoices"}),e.jsx("p",{className:"text-3xl font-bold text-red-600",children:i.summary.overdue_count})]})]}),i.invoices&&i.invoices.length>0&&e.jsxs("div",{className:"card overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h3",{className:"text-lg font-semibold",children:"Outstanding Invoices"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Invoice #"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Class"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Paid"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Balance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Due Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y",children:i.invoices.map((w,A)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 font-mono text-sm text-gray-900",children:w.invoice_number}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.student_name}),e.jsx("div",{className:"text-xs text-gray-500",children:w.student_id})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:w.class_name}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:g(w.total_amount)}),e.jsx("td",{className:"px-6 py-4 text-sm text-green-600",children:g(w.paid_amount)}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-orange-600",children:g(w.balance)}),e.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600",children:[new Date(w.due_date).toLocaleDateString(),w.days_overdue>0&&e.jsxs("span",{className:"ml-2 text-xs text-red-600",children:["(",w.days_overdue," days overdue)"]})]}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${w.days_overdue>0?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:w.days_overdue>0?"Overdue":w.status})})]},A))})]})})]})]}),n==="payment_history"&&i.payments&&e.jsxs("div",{className:"space-y-6",children:[i.by_method&&i.by_method.length>0&&e.jsx("div",{className:"grid grid-cols-4 gap-4",children:i.by_method.map((w,A)=>e.jsxs("div",{className:"card p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:w.payment_method||"Unknown"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:g(w.total_amount)}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[w.count," payments"]})]},A))}),e.jsxs("div",{className:"card overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h3",{className:"text-lg font-semibold",children:"Payment Transactions"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Invoice #"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Class"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Method"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Reference"})]})}),e.jsx("tbody",{className:"divide-y",children:i.payments.map((w,A)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:new Date(w.payment_date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 font-mono text-sm text-gray-600",children:w.invoice_number}),e.jsxs("td",{className:"px-6 py-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.student_name}),e.jsx("div",{className:"text-xs text-gray-500",children:w.student_id})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:w.class_name}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-green-600",children:g(w.amount)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-700",children:w.payment_method})}),e.jsx("td",{className:"px-6 py-4 font-mono text-xs text-gray-500",children:w.reference_number||"-"})]},A))})]})})]})]}),n==="collection_rate"&&i.summary&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card p-8 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-4",children:"Overall Collection Rate"}),e.jsxs("div",{className:"text-6xl font-bold text-blue-600 mb-4",children:[i.summary.collection_rate.toFixed(1),"%"]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-6 mb-4",children:e.jsx("div",{className:"bg-blue-600 h-6 rounded-full transition-all duration-500",style:{width:`${i.summary.collection_rate}%`}})}),e.jsxs("p",{className:"text-gray-600",children:[g(i.summary.total_collected)," collected out of ",g(i.summary.total_invoiced)," invoiced"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Fully Paid Invoices"}),e.jsx("p",{className:"text-3xl font-bold text-green-600",children:i.summary.paid_invoices}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"100% collected"})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Partially Paid"}),e.jsx("p",{className:"text-3xl font-bold text-orange-600",children:i.summary.partial_invoices}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Partial payment"})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Total Invoices"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:i.summary.total_invoices}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"All invoices"})]})]})]})]}):e.jsx("div",{className:"card p-12 text-center text-gray-500",children:"Select a report and apply filters to view data"})]})}function N1(){const[n,r]=f.useState(!1),[i,d]=f.useState([]),[m,u]=f.useState([]),[x,p]=f.useState("all"),[b,g]=f.useState("all"),[h,v]=f.useState("all"),[w,A]=f.useState(""),[T,M]=f.useState("summary"),[R,C]=f.useState({demographics:!0,enrollment:!0,distribution:!0});f.useEffect(()=>{y()},[]);const y=async()=>{try{r(!0);const F=await $.get("http://localhost/McSMS/backend/api/students.php");d(F.data.students||[]);const O=await $.get("http://localhost/McSMS/backend/api/classes.php");u(O.data.classes||[])}catch(F){console.error("Error fetching data:",F)}finally{r(!1)}},k=i.filter(F=>{const O=x==="all"||F.class_id==x,P=b==="all"||F.status===b,re=h==="all"||F.gender?.toLowerCase()===h,xe=w===""||F.first_name?.toLowerCase().includes(w.toLowerCase())||F.last_name?.toLowerCase().includes(w.toLowerCase())||F.student_id?.toLowerCase().includes(w.toLowerCase());return O&&P&&re&&xe}),_=k.length,G=k.filter(F=>F.status==="active").length;k.filter(F=>F.status==="inactive").length;const z=k.filter(F=>F.gender?.toLowerCase()==="male").length,N=k.filter(F=>F.gender?.toLowerCase()==="female").length,E=F=>{if(!F)return null;const O=new Date,P=new Date(F);let re=O.getFullYear()-P.getFullYear();const xe=O.getMonth()-P.getMonth();return(xe<0||xe===0&&O.getDate()<P.getDate())&&re--,re},S={"0-5":0,"6-10":0,"11-15":0,"16+":0};k.forEach(F=>{const O=E(F.date_of_birth);O!==null&&(O<=5?S["0-5"]++:O<=10?S["6-10"]++:O<=15?S["11-15"]++:S["16+"]++)});const U={};k.forEach(F=>{const O=m.find(P=>P.id==F.class_id)?.class_name||"Unassigned";U[O]=(U[O]||0)+1});const q={};k.forEach(F=>{const O=F.region||"Unknown";q[O]=(q[O]||0)+1});const Z=()=>{window.print()},W=()=>{const F=["Student ID","Name","Gender","Date of Birth","Class","Status","Region"],O=k.map(H=>[H.student_id,`${H.first_name} ${H.last_name}`,H.gender,H.date_of_birth,m.find(te=>te.id==H.class_id)?.class_name||"N/A",H.status,H.region||"N/A"]),P=[F.join(","),...O.map(H=>H.join(","))].join(`
`),re=new Blob([P],{type:"text/csv"}),xe=window.URL.createObjectURL(re),Q=document.createElement("a");Q.href=xe,Q.download=`student-report-${new Date().toISOString().split("T")[0]}.csv`,Q.click()},ie=F=>{C(O=>({...O,[F]:!O[F]}))};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between print:hidden",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Reports"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive student enrollment and demographics"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:Z,className:"btn bg-gray-600 hover:bg-gray-700 text-white",children:[e.jsx(jc,{className:"w-4 h-4"}),"Print"]}),e.jsxs("button",{onClick:W,className:"btn bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(At,{className:"w-4 h-4"}),"Export CSV"]})]})]}),e.jsxs("div",{className:"card p-6 print:hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(dn,{className:"w-5 h-5 text-gray-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class"}),e.jsxs("select",{value:x,onChange:F=>p(F.target.value),className:"input",children:[e.jsx("option",{value:"all",children:"All Classes"}),m.map(F=>e.jsx("option",{value:F.id,children:F.class_name},F.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:b,onChange:F=>g(F.target.value),className:"input",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"graduated",children:"Graduated"}),e.jsx("option",{value:"transferred",children:"Transferred"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender"}),e.jsxs("select",{value:h,onChange:F=>v(F.target.value),className:"input",children:[e.jsx("option",{value:"all",children:"All Genders"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Sr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:w,onChange:F=>A(F.target.value),placeholder:"Search students...",className:"input pl-10"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Se,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_})]})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(ta,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:G})]})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(Se,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Male"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:z})]})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-pink-100 rounded-lg flex items-center justify-center",children:e.jsx(Se,{className:"w-6 h-6 text-pink-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Female"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N})]})]})})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("button",{onClick:()=>ie("demographics"),className:"w-full flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mc,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Demographics"})]}),R.demographics?e.jsx(cm,{className:"w-5 h-5"}):e.jsx(xc,{className:"w-5 h-5"})]}),R.demographics&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-3",children:"Gender Distribution"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Male"}),e.jsxs("span",{className:"font-medium",children:[z," (",_>0?(z/_*100).toFixed(1):0,"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-blue-600 h-3 rounded-full",style:{width:`${_>0?z/_*100:0}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Female"}),e.jsxs("span",{className:"font-medium",children:[N," (",_>0?(N/_*100).toFixed(1):0,"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-pink-600 h-3 rounded-full",style:{width:`${_>0?N/_*100:0}%`}})})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-3",children:"Age Distribution"}),e.jsx("div",{className:"space-y-3",children:Object.entries(S).map(([F,O])=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsxs("span",{children:[F," years"]}),e.jsxs("span",{className:"font-medium",children:[O," (",_>0?(O/_*100).toFixed(1):0,"%)"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-purple-600 h-3 rounded-full",style:{width:`${_>0?O/_*100:0}%`}})})]},F))})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("button",{onClick:()=>ie("distribution"),className:"w-full flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vs,{className:"w-5 h-5 text-green-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Class Distribution"})]}),R.distribution?e.jsx(cm,{className:"w-5 h-5"}):e.jsx(xc,{className:"w-5 h-5"})]}),R.distribution&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Class"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Students"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Percentage"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Distribution"})]})}),e.jsx("tbody",{className:"divide-y",children:Object.entries(U).map(([F,O])=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:F}),e.jsx("td",{className:"px-4 py-3",children:O}),e.jsxs("td",{className:"px-4 py-3",children:[_>0?(O/_*100).toFixed(1):0,"%"]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${_>0?O/_*100:0}%`}})})})]},F))})]})})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("button",{onClick:()=>ie("enrollment"),className:"w-full flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ec,{className:"w-5 h-5 text-orange-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Regional Distribution"})]}),R.enrollment?e.jsx(cm,{className:"w-5 h-5"}):e.jsx(xc,{className:"w-5 h-5"})]}),R.enrollment&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(q).map(([F,O])=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium",children:F}),e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:O})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-600 h-2 rounded-full",style:{width:`${_>0?O/_*100:0}%`}})}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[_>0?(O/_*100).toFixed(1):0,"% of total"]})]},F))})]}),e.jsxs("div",{className:"card p-6 print:break-before-page",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4",children:["Student List (",k.length,")"]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Student ID"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Gender"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Class"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Region"})]})}),e.jsx("tbody",{className:"divide-y",children:k.slice(0,50).map(F=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 font-mono text-sm",children:F.student_id}),e.jsxs("td",{className:"px-4 py-3",children:[F.first_name," ",F.last_name]}),e.jsx("td",{className:"px-4 py-3 capitalize",children:F.gender}),e.jsx("td",{className:"px-4 py-3",children:m.find(O=>O.id==F.class_id)?.class_name||"N/A"}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${F.status==="active"?"bg-green-100 text-green-700":F.status==="inactive"?"bg-gray-100 text-gray-700":"bg-blue-100 text-blue-700"}`,children:F.status})}),e.jsx("td",{className:"px-4 py-3",children:F.region||"N/A"})]},F.id))})]}),k.length>50&&e.jsxs("p",{className:"text-center text-gray-500 mt-4",children:["Showing 50 of ",k.length," students. Export to CSV to see all."]})]})]})]})}function v1(){const[n,r]=f.useState(!1),[i,d]=f.useState("this_month"),[m,u]=f.useState({students:[],classes:[],teachers:[],invoices:[],homework:[],assessments:[]});f.useEffect(()=>{x()},[]);const x=async()=>{try{r(!0);const[E,S,U,q,Z,W]=await Promise.all([$.get("http://localhost/McSMS/backend/api/students.php"),$.get("http://localhost/McSMS/backend/api/classes.php"),$.get("http://localhost/McSMS/backend/api/teachers.php"),$.get("http://localhost/McSMS/backend/api/finance.php?resource=invoices"),$.get("http://localhost/McSMS/backend/api/academic.php?resource=homework"),$.get("http://localhost/McSMS/backend/api/academic.php?resource=assessments")]);u({students:E.data.students||[],classes:S.data.classes||[],teachers:U.data.teachers||[],invoices:q.data.invoices||[],homework:Z.data.homework||[],assessments:W.data.assessments||[]})}catch(E){console.error("Error fetching dashboard data:",E)}finally{r(!1)}},p=m.students.length,b=m.students.filter(E=>E.status==="active").length,g=m.classes.length,h=m.teachers.length,v=m.invoices.filter(E=>E.status==="paid").reduce((E,S)=>E+parseFloat(S.total_amount||0),0),w=m.invoices.filter(E=>E.status==="approved"||E.status==="pending_payment").reduce((E,S)=>E+parseFloat(S.balance||0),0),A=v>0&&w>0?(v/(v+w)*100).toFixed(1):v>0?100:0;m.homework.length;const T=m.homework.filter(E=>E.status==="active").length,M=m.assessments.length,R=92.5,C=5.2,y=12.3,k=2.1,_=m.classes.slice(0,5).map(E=>({name:E.class_name,students:m.students.filter(S=>S.class_id==E.id).length,capacity:E.capacity||30,performance:Math.floor(Math.random()*20)+75})),G=[{month:"Jul",students:1150,revenue:38e3,attendance:91},{month:"Aug",students:1180,revenue:4e4,attendance:90},{month:"Sep",students:1200,revenue:42e3,attendance:92},{month:"Oct",students:1220,revenue:43500,attendance:93},{month:"Nov",students:1234,revenue:45230,attendance:92.5}],z=()=>{window.print()},N=()=>{alert("PDF download functionality will be implemented")};return n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between print:hidden",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Executive Dashboard Report"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive overview of school performance"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:i,onChange:E=>d(E.target.value),className:"input",children:[e.jsx("option",{value:"this_week",children:"This Week"}),e.jsx("option",{value:"this_month",children:"This Month"}),e.jsx("option",{value:"this_term",children:"This Term"}),e.jsx("option",{value:"this_year",children:"This Year"})]}),e.jsxs("button",{onClick:z,className:"btn bg-gray-600 hover:bg-gray-700 text-white",children:[e.jsx(jc,{className:"w-4 h-4"}),"Print"]}),e.jsxs("button",{onClick:N,className:"btn bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(At,{className:"w-4 h-4"}),"Download PDF"]})]})]}),e.jsxs("div",{className:"hidden print:block text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Executive Dashboard Report"}),e.jsxs("p",{className:"text-gray-600 mt-2",children:["Generated on ",new Date().toLocaleDateString()]}),e.jsxs("p",{className:"text-gray-600",children:["Period: ",i.replace("_"," ").toUpperCase()]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Se,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("span",{className:"text-sm font-medium text-green-600",children:["+",C,"%"]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Students"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:p}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[b," active"]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(Ee,{className:"w-6 h-6 text-green-600"})}),e.jsxs("span",{className:"text-sm font-medium text-green-600",children:["+",y,"%"]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:["",(v/1e3).toFixed(1),"K"]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Collection rate: ",A,"%"]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(Ue,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("span",{className:"text-sm font-medium text-green-600",children:["+",k,"%"]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Attendance Rate"}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:[R,"%"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Above target"})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(Ke,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("span",{className:"text-sm font-medium text-blue-600",children:[g," classes"]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Teaching Staff"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:h}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Student-teacher ratio: ",(p/h).toFixed(1),":1"]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Enrollment & Revenue Trends"})]})}),e.jsx("div",{className:"grid grid-cols-5 gap-4",children:G.map((E,S)=>e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:E.month}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Students"}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:E.students})]}),e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Revenue"}),e.jsxs("p",{className:"text-lg font-bold text-green-600",children:["",(E.revenue/1e3).toFixed(0),"K"]})]}),e.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Attendance"}),e.jsxs("p",{className:"text-lg font-bold text-purple-600",children:[E.attendance,"%"]})]})]})]},S))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ee,{className:"w-5 h-5 text-green-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Financial Summary"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 bg-green-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",v.toLocaleString()]})]}),e.jsx(he,{className:"w-8 h-8 text-green-600"})]}),e.jsxs("div",{className:"flex justify-between items-center p-4 bg-orange-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Payments"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["",w.toLocaleString()]})]}),e.jsx(at,{className:"w-8 h-8 text-orange-600"})]}),e.jsxs("div",{className:"flex justify-between items-center p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Collection Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[A,"%"]})]}),e.jsx(We,{className:"w-8 h-8 text-blue-600"})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(dt,{className:"w-5 h-5 text-purple-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Academic Summary"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 bg-purple-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Homework"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:T})]}),e.jsx(Be,{className:"w-8 h-8 text-purple-600"})]}),e.jsxs("div",{className:"flex justify-between items-center p-4 bg-indigo-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Assessments"}),e.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:M})]}),e.jsx(dt,{className:"w-8 h-8 text-indigo-600"})]}),e.jsxs("div",{className:"flex justify-between items-center p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Avg. Attendance"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[R,"%"]})]}),e.jsx(Ue,{className:"w-8 h-8 text-blue-600"})]})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(vs,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Class Performance Overview"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Class"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Students"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Capacity"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Utilization"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Performance"})]})}),e.jsx("tbody",{className:"divide-y",children:_.map((E,S)=>{const U=(E.students/E.capacity*100).toFixed(0);return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 font-medium",children:E.name}),e.jsx("td",{className:"px-4 py-3",children:E.students}),e.jsx("td",{className:"px-4 py-3",children:E.capacity}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-24 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${U>90?"bg-red-600":U>75?"bg-orange-600":"bg-green-600"}`,style:{width:`${U}%`}})}),e.jsxs("span",{className:"text-sm",children:[U,"%"]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:`px-3 py-1 text-sm rounded-full ${E.performance>=85?"bg-green-100 text-green-700":E.performance>=75?"bg-blue-100 text-blue-700":"bg-orange-100 text-orange-700"}`,children:[E.performance,"%"]})})]},S)})})]})})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ma,{className:"w-5 h-5 text-blue-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Key Insights & Recommendations"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"p-4 border-l-4 border-green-500 bg-green-50 rounded",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(he,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900",children:"Strong Enrollment Growth"}),e.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["Student enrollment increased by ",C,"% this period, exceeding targets."]})]})]})}),e.jsx("div",{className:"p-4 border-l-4 border-green-500 bg-green-50 rounded",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(he,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900",children:"Revenue Growth"}),e.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["Revenue increased by ",y,"% with a collection rate of ",A,"%."]})]})]})}),e.jsx("div",{className:"p-4 border-l-4 border-orange-500 bg-orange-50 rounded",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(jt,{className:"w-5 h-5 text-orange-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-orange-900",children:"Class Capacity"}),e.jsx("p",{className:"text-sm text-orange-700 mt-1",children:"Some classes are near capacity. Consider adding sections for high-demand classes."})]})]})}),e.jsx("div",{className:"p-4 border-l-4 border-blue-500 bg-blue-50 rounded",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ma,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:"Attendance Performance"}),e.jsxs("p",{className:"text-sm text-blue-700 mt-1",children:["Attendance rate of ",R,"% is above the 90% target. Maintain current strategies."]})]})]})})]})]}),e.jsx("div",{className:"card p-6 print:break-before-page",children:e.jsxs("div",{className:"text-center text-gray-600",children:[e.jsxs("p",{className:"text-sm",children:["Report generated on ",new Date().toLocaleString()]}),e.jsx("p",{className:"text-xs mt-2",children:"McSMS - School Management System v2.0"})]})})]})}const sl="http://localhost/McSMS/backend/api/timetable.php";function w1(){const[n,r]=f.useState([]),[i,d]=f.useState(null),[m,u]=f.useState([]),[x,p]=f.useState([]),[b,g]=f.useState([]),[h,v]=f.useState([]),[w,A]=f.useState([]),[T,M]=f.useState(null),[R,C]=f.useState(!1),[y,k]=f.useState(null),[_,G]=f.useState([]),z=["Monday","Tuesday","Wednesday","Thursday","Friday"];f.useEffect(()=>{N(),S(),U(),q(),Z()},[]),f.useEffect(()=>{i&&(E(),W())},[i,T]);const N=async()=>{try{const P=await $.get(`${sl}?resource=templates`);r(P.data.templates),P.data.templates.length>0&&!i&&d(P.data.templates[0].id)}catch(P){console.error("Error fetching templates:",P)}},E=async()=>{try{const P={resource:"entries",action:"by_template",template_id:i};T&&(P.class_id=T);const re=await $.get(sl,{params:P});u(re.data.entries)}catch(P){console.error("Error fetching entries:",P)}},S=async()=>{try{const P=await $.get(`${sl}?resource=time_slots`);p(P.data.time_slots)}catch(P){console.error("Error fetching time slots:",P)}},U=async()=>{try{const P=await $.get("http://localhost/McSMS/backend/api/classes.php");g(P.data.classes)}catch(P){console.error("Error fetching classes:",P)}},q=async()=>{try{const P=await $.get("http://localhost/McSMS/backend/api/subjects.php");v(P.data.subjects)}catch(P){console.error("Error fetching subjects:",P)}},Z=async()=>{try{const P=await $.get("http://localhost/McSMS/backend/api/teachers.php");A(P.data.teachers)}catch(P){console.error("Error fetching teachers:",P)}},W=async()=>{try{const P=await $.get(`${sl}?resource=conflicts&template_id=${i}`);G(P.data.conflicts)}catch(P){console.error("Error fetching conflicts:",P)}},ie=(P,re)=>m.find(xe=>xe.day_of_week===P&&xe.time_slot_id===re),F=async P=>{try{y?await $.put(`${sl}?resource=entries&id=${y.id}`,P):await $.post(`${sl}?resource=entries`,{...P,template_id:i}),E(),W(),C(!1),k(null)}catch(re){re.response?.data?.conflicts?alert(`Conflicts detected:
`+re.response.data.conflicts.map(xe=>xe.message).join(`
`)):console.error("Error saving entry:",re)}},O=async P=>{if(confirm("Delete this timetable entry?"))try{await $.delete(`${sl}?resource=entries&id=${P}`),E()}catch(re){console.error("Error deleting entry:",re)}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-800 flex items-center gap-2",children:[e.jsx(Ue,{className:"w-8 h-8 text-indigo-600"}),"Timetable Management"]}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Manage class schedules and teacher assignments"})]}),_.length>0&&e.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(jt,{className:"w-5 h-5 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-800",children:"Scheduling Conflicts Detected"}),e.jsxs("p",{className:"text-sm text-red-600 mt-1",children:[_.length," conflict(s) found in the timetable"]})]})]})}),e.jsxs("div",{className:"mb-6 flex gap-4",children:[e.jsxs("select",{value:i||"",onChange:P=>d(P.target.value),className:"px-4 py-2 border rounded-lg",children:[e.jsx("option",{value:"",children:"Select Template"}),n.map(P=>e.jsx("option",{value:P.id,children:P.template_name},P.id))]}),e.jsxs("select",{value:T||"",onChange:P=>M(P.target.value||null),className:"px-4 py-2 border rounded-lg",children:[e.jsx("option",{value:"",children:"All Classes"}),b.map(P=>e.jsx("option",{value:P.id,children:P.class_name},P.id))]}),e.jsxs("button",{onClick:()=>{k(null),C(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg flex items-center gap-2 hover:bg-indigo-700",children:[e.jsx(lt,{className:"w-4 h-4"}),"Add Entry"]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700 w-32",children:"Time"}),z.map(P=>e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold text-gray-700",children:P},P))]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:x.map(P=>e.jsxs("tr",{className:P.is_break?"bg-gray-50":"",children:[e.jsxs("td",{className:"px-4 py-3 text-sm",children:[e.jsx("div",{className:"font-medium text-gray-900",children:P.slot_name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[P.start_time.substring(0,5)," - ",P.end_time.substring(0,5)]})]}),z.map(re=>{const xe=ie(re,P.id);return e.jsx("td",{className:"px-2 py-2 text-center",children:P.is_break?e.jsx("div",{className:"text-sm text-gray-500 italic",children:"Break"}):xe?e.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded p-2 text-left relative group",children:[e.jsx("div",{className:"text-sm font-medium text-indigo-900",children:xe.subject_name}),e.jsx("div",{className:"text-xs text-indigo-600",children:xe.teacher_name}),xe.room_number&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Room: ",xe.room_number]}),e.jsxs("div",{className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 flex gap-1",children:[e.jsx("button",{onClick:()=>{k(xe),C(!0)},className:"p-1 bg-white rounded hover:bg-gray-100",children:e.jsx(Dt,{className:"w-3 h-3 text-gray-600"})}),e.jsx("button",{onClick:()=>O(xe.id),className:"p-1 bg-white rounded hover:bg-gray-100",children:e.jsx(Bt,{className:"w-3 h-3 text-red-600"})})]})]}):e.jsx("button",{onClick:()=>{k({day_of_week:re,time_slot_id:P.id,class_id:T}),C(!0)},className:"w-full h-full min-h-[60px] border-2 border-dashed border-gray-300 rounded hover:border-indigo-400 hover:bg-indigo-50 transition-colors",children:e.jsx(lt,{className:"w-4 h-4 text-gray-400 mx-auto"})})},re)})]},P.id))})]})}),R&&e.jsx(S1,{entry:y,classes:b,subjects:h,teachers:w,timeSlots:x,onSave:F,onClose:()=>{C(!1),k(null)}})]})}function S1({entry:n,classes:r,subjects:i,teachers:d,timeSlots:m,onSave:u,onClose:x}){const[p,b]=f.useState({class_id:n?.class_id||"",subject_id:n?.subject_id||"",teacher_id:n?.teacher_id||"",day_of_week:n?.day_of_week||"Monday",time_slot_id:n?.time_slot_id||"",room_number:n?.room_number||"",notes:n?.notes||""}),g=h=>{h.preventDefault(),u(p)};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4",children:[n?.id?"Edit":"Add"," Timetable Entry"]}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class"}),e.jsxs("select",{value:p.class_id,onChange:h=>b({...p,class_id:h.target.value}),className:"w-full px-3 py-2 border rounded-lg",required:!0,children:[e.jsx("option",{value:"",children:"Select Class"}),r.map(h=>e.jsx("option",{value:h.id,children:h.class_name},h.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),e.jsxs("select",{value:p.subject_id,onChange:h=>b({...p,subject_id:h.target.value}),className:"w-full px-3 py-2 border rounded-lg",required:!0,children:[e.jsx("option",{value:"",children:"Select Subject"}),i.map(h=>e.jsx("option",{value:h.id,children:h.subject_name},h.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teacher"}),e.jsxs("select",{value:p.teacher_id,onChange:h=>b({...p,teacher_id:h.target.value}),className:"w-full px-3 py-2 border rounded-lg",children:[e.jsx("option",{value:"",children:"Select Teacher"}),d.map(h=>e.jsxs("option",{value:h.id,children:[h.first_name," ",h.last_name]},h.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Day"}),e.jsx("select",{value:p.day_of_week,onChange:h=>b({...p,day_of_week:h.target.value}),className:"w-full px-3 py-2 border rounded-lg",required:!0,children:["Monday","Tuesday","Wednesday","Thursday","Friday"].map(h=>e.jsx("option",{value:h,children:h},h))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Slot"}),e.jsxs("select",{value:p.time_slot_id,onChange:h=>b({...p,time_slot_id:h.target.value}),className:"w-full px-3 py-2 border rounded-lg",required:!0,children:[e.jsx("option",{value:"",children:"Select Time Slot"}),m.filter(h=>!h.is_break).map(h=>e.jsxs("option",{value:h.id,children:[h.slot_name," (",h.start_time.substring(0,5)," - ",h.end_time.substring(0,5),")"]},h.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Room Number"}),e.jsx("input",{type:"text",value:p.room_number,onChange:h=>b({...p,room_number:h.target.value}),className:"w-full px-3 py-2 border rounded-lg",placeholder:"e.g., R101"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Save"}),e.jsx("button",{type:"button",onClick:x,className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]})})}const Zi="http://localhost/McSMS/backend/api";function _1(){const[n,r]=f.useState([]),[i,d]=f.useState([]),[m,u]=f.useState(null),[x,p]=f.useState(!0),[b,g]=f.useState("exams"),[h,v]=f.useState(!1),[w,A]=f.useState({exam_name:"",exam_type_id:1,academic_year:new Date().getFullYear(),term_id:1,start_date:"",end_date:"",status:"scheduled"});f.useEffect(()=>{T()},[]);const T=async()=>{try{const k=await $.get(`${Zi}/exams.php?resource=exams`);k.data.success&&r(k.data.exams)}catch(k){console.error("Error fetching exams:",k)}finally{p(!1)}},M=async k=>{try{const _=await $.get(`${Zi}/exams.php?resource=schedules&action=by_exam&exam_id=${k}`);_.data.success&&d(_.data.schedules)}catch(_){console.error("Error fetching schedules:",_)}},R=async k=>{k.preventDefault();try{(await $.post(`${Zi}/exams.php?resource=exams`,w)).data.success&&(alert("Exam created successfully!"),v(!1),T(),A({exam_name:"",exam_type_id:1,academic_year:new Date().getFullYear(),term_id:1,start_date:"",end_date:"",status:"scheduled"}))}catch(_){console.error("Error creating exam:",_),alert("Failed to create exam")}},C=k=>{u(k),M(k.id),g("schedules")},y=async k=>{if(confirm("Generate automatic seating arrangement?"))try{(await $.get(`${Zi}/exams.php?resource=seating&action=generate&schedule_id=${k}&class_id=1&room_id=1`)).data.success&&alert("Seating arrangement generated successfully!")}catch(_){console.error("Error generating seating:",_),alert("Failed to generate seating")}};return x?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg",children:"Loading exams..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Exam Management"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage exams, schedules, and results"})]}),e.jsxs("button",{onClick:()=>v(!0),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(Be,{size:20}),"Create Exam"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Exams"}),e.jsx("p",{className:"text-2xl font-bold",children:n.length})]}),e.jsx(Ue,{className:"text-blue-600",size:32})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Scheduled"}),e.jsx("p",{className:"text-2xl font-bold",children:n.filter(k=>k.status==="scheduled").length})]}),e.jsx(at,{className:"text-yellow-600",size:32})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Ongoing"}),e.jsx("p",{className:"text-2xl font-bold",children:n.filter(k=>k.status==="ongoing").length})]}),e.jsx(Se,{className:"text-green-600",size:32})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold",children:n.filter(k=>k.status==="completed").length})]}),e.jsx(dt,{className:"text-purple-600",size:32})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"border-b",children:e.jsxs("div",{className:"flex",children:[e.jsx("button",{onClick:()=>g("exams"),className:`px-6 py-3 font-medium ${b==="exams"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:"All Exams"}),m&&e.jsxs("button",{onClick:()=>g("schedules"),className:`px-6 py-3 font-medium ${b==="schedules"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:["Schedules (",m.exam_name,")"]})]})}),e.jsxs("div",{className:"p-6",children:[b==="exams"&&e.jsx("div",{className:"space-y-4",children:n.map(k=>e.jsx("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:k.exam_name}),e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Academic Year:"})," ",k.academic_year]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Period:"})," ",k.start_date," to ",k.end_date]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Status:"})," ",e.jsx("span",{className:`px-2 py-1 rounded text-xs ${k.status==="completed"?"bg-green-100 text-green-800":k.status==="ongoing"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:k.status})]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>C(k),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 text-sm",children:"View Schedules"})})]})},k.id))}),b==="schedules"&&e.jsx("div",{className:"space-y-4",children:i.length===0?e.jsx("p",{className:"text-center text-gray-600 py-8",children:"No schedules found for this exam"}):i.map(k=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold",children:[k.subject_name," - ",k.class_name]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Date: ",k.exam_date," | Time: ",k.start_time," - ",k.end_time]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Duration: ",k.duration_minutes," mins | Max Marks: ",k.max_marks]})]}),e.jsx("button",{onClick:()=>y(k.id),className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 text-sm",children:"Generate Seating"})]})},k.id))})]})]}),h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Create New Exam"}),e.jsxs("form",{onSubmit:R,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Exam Name"}),e.jsx("input",{type:"text",value:w.exam_name,onChange:k=>A({...w,exam_name:k.target.value}),className:"w-full border rounded-lg px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Academic Year"}),e.jsx("input",{type:"number",value:w.academic_year,onChange:k=>A({...w,academic_year:k.target.value}),className:"w-full border rounded-lg px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:w.start_date,onChange:k=>A({...w,start_date:k.target.value}),className:"w-full border rounded-lg px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:w.end_date,onChange:k=>A({...w,end_date:k.target.value}),className:"w-full border rounded-lg px-3 py-2",required:!0})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>v(!1),className:"flex-1 bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Create Exam"})]})]})]})})]})}const Ji="http://localhost/McSMS/backend/api";function C1(){const[n,r]=f.useState([]),[i,d]=f.useState(null),[m,u]=f.useState([]),[x,p]=f.useState([]),[b,g]=f.useState(!0),[h,v]=f.useState("courses"),[w,A]=f.useState(!1),[T,M]=f.useState("course"),[R,C]=f.useState({course_code:"",course_name:"",description:"",status:"draft"});f.useEffect(()=>{y()},[]);const y=async()=>{try{const E=await $.get(`${Ji}/lms.php?resource=courses`);E.data.success&&r(E.data.courses)}catch(E){console.error("Error fetching courses:",E)}finally{g(!1)}},k=async E=>{try{const S=await $.get(`${Ji}/lms.php?resource=lessons&action=by_course&course_id=${E}`);S.data.success&&u(S.data.lessons)}catch(S){console.error("Error fetching lessons:",S)}},_=async E=>{try{const S=await $.get(`${Ji}/lms.php?resource=assignments&action=by_course&course_id=${E}`);S.data.success&&p(S.data.assignments)}catch(S){console.error("Error fetching assignments:",S)}},G=async E=>{E.preventDefault();try{(await $.post(`${Ji}/lms.php?resource=courses`,R)).data.success&&(alert("Course created successfully!"),A(!1),y(),C({course_code:"",course_name:"",description:"",status:"draft"}))}catch(S){console.error("Error creating course:",S),alert("Failed to create course")}},z=E=>{d(E),k(E.id),_(E.id),v("lessons")},N=E=>{M(E),A(!0)};return b?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg",children:"Loading courses..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Learning Management System"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage courses, lessons, and assignments"})]}),e.jsxs("button",{onClick:()=>N("course"),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(qe,{size:20}),"Create Course"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Courses"}),e.jsx("p",{className:"text-2xl font-bold",children:n.length})]}),e.jsx(qe,{className:"text-blue-600",size:32})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Published"}),e.jsx("p",{className:"text-2xl font-bold",children:n.filter(E=>E.status==="published").length})]}),e.jsx(he,{className:"text-green-600",size:32})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Lessons"}),e.jsx("p",{className:"text-2xl font-bold",children:m.length})]}),e.jsx(fc,{className:"text-purple-600",size:32})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Assignments"}),e.jsx("p",{className:"text-2xl font-bold",children:x.length})]}),e.jsx(Be,{className:"text-orange-600",size:32})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"border-b",children:e.jsxs("div",{className:"flex",children:[e.jsx("button",{onClick:()=>v("courses"),className:`px-6 py-3 font-medium ${h==="courses"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:"All Courses"}),i&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>v("lessons"),className:`px-6 py-3 font-medium ${h==="lessons"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:"Lessons"}),e.jsx("button",{onClick:()=>v("assignments"),className:`px-6 py-3 font-medium ${h==="assignments"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:"Assignments"})]})]})}),e.jsxs("div",{className:"p-6",children:[h==="courses"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(E=>e.jsxs("div",{className:"border rounded-lg p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(qe,{className:"text-blue-600",size:24})}),e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${E.status==="published"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:E.status})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:E.course_name}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:E.course_code}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:E.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Se,{size:16}),E.enrollment_count||0," students"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(fc,{size:16}),E.lesson_count||0," lessons"]})]}),e.jsx("button",{onClick:()=>z(E),className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700",children:"View Course"})]},E.id))}),h==="lessons"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Course Lessons"}),e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm",children:"Add Lesson"})]}),m.length===0?e.jsx("p",{className:"text-center text-gray-600 py-8",children:"No lessons found for this course"}):m.map((E,S)=>e.jsxs("div",{className:"border rounded-lg p-4 flex items-start gap-4",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-lg",children:E.lesson_type==="video"?e.jsx(fc,{className:"text-purple-600",size:20}):E.lesson_type==="document"?e.jsx(Be,{className:"text-purple-600",size:20}):e.jsx(qe,{className:"text-purple-600",size:20})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["Lesson ",S+1]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${E.status==="published"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:E.status})]}),e.jsx("h4",{className:"font-semibold text-gray-900",children:E.lesson_title}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Type: ",E.lesson_type," | Duration: ",E.duration_minutes," mins"]})]})]},E.id))]}),h==="assignments"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Course Assignments"}),e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm",children:"Create Assignment"})]}),x.length===0?e.jsx("p",{className:"text-center text-gray-600 py-8",children:"No assignments found for this course"}):x.map(E=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:E.assignment_title}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:E.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-gray-600",children:[e.jsxs("span",{children:["Max Marks: ",E.max_marks]}),e.jsxs("span",{children:["Due: ",E.due_date]}),e.jsx("span",{className:`px-2 py-1 rounded ${E.status==="published"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:E.status})]})]}),e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 text-sm",children:"View Submissions"})]})},E.id))]})]})]}),w&&T==="course"&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Create New Course"}),e.jsxs("form",{onSubmit:G,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Course Code"}),e.jsx("input",{type:"text",value:R.course_code,onChange:E=>C({...R,course_code:E.target.value}),className:"w-full border rounded-lg px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Course Name"}),e.jsx("input",{type:"text",value:R.course_name,onChange:E=>C({...R,course_name:E.target.value}),className:"w-full border rounded-lg px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:R.description,onChange:E=>C({...R,description:E.target.value}),className:"w-full border rounded-lg px-3 py-2",rows:"3"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:()=>A(!1),className:"flex-1 bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Create Course"})]})]})]})})]})}const k1="http://localhost/McSMS/backend/api";function A1(){const[n,r]=f.useState(null),[i,d]=f.useState(!0),[m,u]=f.useState("overview");f.useEffect(()=>{x()},[]);const x=async()=>{try{const p=await $.get(`${k1}/analytics.php?resource=overview`);p.data.success&&r(p.data.overview)}catch(p){console.error("Error fetching overview:",p)}finally{d(!1)}};return i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-lg",children:"Loading analytics..."})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Advanced Analytics"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Comprehensive insights and predictions"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-6 rounded-lg shadow-lg text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Se,{size:32}),e.jsx(We,{size:20})]}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Total Students"}),e.jsx("p",{className:"text-3xl font-bold",children:n?.total_students||0})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 p-6 rounded-lg shadow-lg text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Ee,{size:32}),e.jsx(We,{size:20})]}),e.jsx("p",{className:"text-green-100 text-sm",children:"Revenue YTD"}),e.jsxs("p",{className:"text-3xl font-bold",children:["GHS ",(n?.revenue_ytd||0).toLocaleString()]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 p-6 rounded-lg shadow-lg text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Ue,{size:32}),e.jsx(We,{size:20})]}),e.jsx("p",{className:"text-purple-100 text-sm",children:"Avg Attendance"}),e.jsxs("p",{className:"text-3xl font-bold",children:[(n?.avg_attendance_30days||0).toFixed(1),"%"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 p-6 rounded-lg shadow-lg text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(ms,{size:32}),e.jsx(We,{size:20})]}),e.jsx("p",{className:"text-orange-100 text-sm",children:"Overdue Fees"}),e.jsxs("p",{className:"text-3xl font-bold",children:["GHS ",(n?.overdue_amount||0).toLocaleString()]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"border-b",children:e.jsx("div",{className:"flex overflow-x-auto",children:["overview","students","finance","attendance","exams"].map(p=>e.jsx("button",{onClick:()=>u(p),className:`px-6 py-3 font-medium whitespace-nowrap ${m===p?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-900"}`,children:p.charAt(0).toUpperCase()+p.slice(1)},p))})}),e.jsxs("div",{className:"p-6",children:[m==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Se,{className:"text-blue-600"}),"Student Overview"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Students:"}),e.jsx("span",{className:"font-semibold",children:n?.total_students||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Active Teachers:"}),e.jsx("span",{className:"font-semibold",children:n?.total_teachers||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Active Classes:"}),e.jsx("span",{className:"font-semibold",children:n?.total_classes||0})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Ee,{className:"text-green-600"}),"Financial Overview"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Revenue YTD:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["GHS ",(n?.revenue_ytd||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Overdue Amount:"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["GHS ",(n?.overdue_amount||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Pending Applications:"}),e.jsx("span",{className:"font-semibold",children:n?.pending_applications||0})]})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("button",{className:"bg-blue-600 text-white px-4 py-3 rounded-lg hover:bg-blue-700",children:"Generate Report"}),e.jsx("button",{className:"bg-green-600 text-white px-4 py-3 rounded-lg hover:bg-green-700",children:"View Trends"}),e.jsx("button",{className:"bg-purple-600 text-white px-4 py-3 rounded-lg hover:bg-purple-700",children:"Export Data"})]})]})]}),m==="students"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Se,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Student Analytics"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Detailed student performance and enrollment trends"}),e.jsx("button",{className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Load Student Analytics"})]}),m==="finance"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ee,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Financial Analytics"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Revenue trends, collection rates, and forecasts"}),e.jsx("button",{className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700",children:"Load Financial Analytics"})]}),m==="attendance"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ue,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Attendance Analytics"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Attendance trends and chronic absentee detection"}),e.jsx("button",{className:"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700",children:"Load Attendance Analytics"})]}),m==="exams"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(dt,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Exam Analytics"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Performance trends and grade distributions"}),e.jsx("button",{className:"bg-orange-600 text-white px-6 py-2 rounded-lg hover:bg-orange-700",children:"Load Exam Analytics"})]})]})]})]})}const x0="http://localhost/McSMS/backend/api";function M1(){const[n,r]=f.useState([]),[i,d]=f.useState([]),[m,u]=f.useState(!0),[x,p]=f.useState("vehicles");f.useEffect(()=>{b(),g()},[]);const b=async()=>{try{const h=await $.get(`${x0}/transport.php?resource=vehicles`);h.data.success&&r(h.data.vehicles)}catch(h){console.error("Error:",h)}finally{u(!1)}},g=async()=>{try{const h=await $.get(`${x0}/transport.php?resource=routes`);h.data.success&&d(h.data.routes)}catch(h){console.error("Error:",h)}};return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Transport Management"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Vehicles"}),e.jsx("p",{className:"text-2xl font-bold",children:n.length})]}),e.jsx(gm,{className:"text-blue-600",size:32})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Active Routes"}),e.jsx("p",{className:"text-2xl font-bold",children:i.length})]}),e.jsx(Ec,{className:"text-green-600",size:32})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Active Vehicles"}),e.jsx("p",{className:"text-2xl font-bold",children:n.filter(h=>h.status==="active").length})]}),e.jsx(gm,{className:"text-purple-600",size:32})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Maintenance"}),e.jsx("p",{className:"text-2xl font-bold",children:n.filter(h=>h.status==="maintenance").length})]}),e.jsx($2,{className:"text-orange-600",size:32})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"border-b",children:e.jsxs("div",{className:"flex",children:[e.jsx("button",{onClick:()=>p("vehicles"),className:`px-6 py-3 font-medium ${x==="vehicles"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600"}`,children:"Vehicles"}),e.jsx("button",{onClick:()=>p("routes"),className:`px-6 py-3 font-medium ${x==="routes"?"border-b-2 border-blue-600 text-blue-600":"text-gray-600"}`,children:"Routes"})]})}),e.jsxs("div",{className:"p-6",children:[x==="vehicles"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(h=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:h.vehicle_number}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${h.status==="active"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:h.status})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Type: ",h.vehicle_type]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Capacity: ",h.capacity]})]},h.id))}),x==="routes"&&e.jsx("div",{className:"space-y-4",children:i.map(h=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold",children:h.route_name}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[h.start_location,"  ",h.end_location]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Distance: ",h.total_distance," km | Fare: GHS ",h.fare_amount]})]},h.id))})]})]})]})}const ct="http://localhost/McSMS/backend/api";function E1(){const[n,r]=f.useState([]),[i,d]=f.useState([]),[m,u]=f.useState([]),[x,p]=f.useState([]),[b,g]=f.useState([]),[h,v]=f.useState(!0),[w,A]=f.useState("overview"),[T,M]=f.useState(new Date().toISOString().slice(0,7)),[R,C]=f.useState(!1),[y,k]=f.useState(""),[_,G]=f.useState({}),[z,N]=f.useState(new Date().toISOString().slice(0,10));f.useEffect(()=>{E(),q()},[]),f.useEffect(()=>{w==="payroll"?S():w==="leave"?U():w==="attendance"&&Z()},[w,T]);const E=async()=>{try{const L=await $.get(`${ct}/hr_payroll.php?resource=employees`);L.data.success&&r(L.data.employees)}catch(L){console.error("Error:",L)}finally{v(!1)}},S=async()=>{try{const L=await $.get(`${ct}/hr_payroll.php?resource=payroll&action=by_month&month=${T}`);L.data.success&&d(L.data.payroll)}catch(L){console.error("Error:",L)}},U=async()=>{try{const L=await $.get(`${ct}/hr_payroll.php?resource=leave&action=pending`);L.data.success&&u(L.data.applications)}catch(L){console.error("Error:",L)}},q=async()=>{try{const L=await $.get(`${ct}/hr_payroll.php?resource=leave&action=pending`);L.data.success&&u(L.data.applications)}catch(L){console.error("Error:",L)}},Z=async()=>{try{const L=new Date().toISOString().slice(0,10),de=await $.get(`${ct}/hr_payroll.php?resource=attendance&action=by_date&date=${L}`);de.data.success&&p(de.data.attendance)}catch(L){console.error("Error:",L)}},W=async()=>{try{(await $.get(`${ct}/hr_payroll.php?resource=payroll&action=generate&month=${T}`)).data.success&&(alert("Payroll generated successfully!"),S())}catch(L){console.error("Error:",L),alert("Error generating payroll")}},ie=async L=>{try{(await $.put(`${ct}/hr_payroll.php?resource=leave&id=${L}&action=approve`,{approved_by:1})).data.success&&(alert("Leave approved successfully!"),U(),q())}catch(de){console.error("Error:",de)}},F=async L=>{const de=prompt("Enter rejection reason:");if(de)try{(await $.put(`${ct}/hr_payroll.php?resource=leave&id=${L}&action=reject`,{approved_by:1,rejection_reason:de})).data.success&&(alert("Leave rejected"),U(),q())}catch(Le){console.error("Error:",Le)}},O=()=>i.reduce((L,de)=>L+parseFloat(de.net_salary||0),0).toFixed(2),P=async L=>{L.preventDefault();try{(await $.post(`${ct}/hr_payroll.php?resource=employees`,_)).data.success&&(alert("Employee added successfully!"),C(!1),G({}),E())}catch(de){console.error("Error:",de),alert("Error adding employee")}},re=()=>{k("attendance"),C(!0)},xe=()=>{k("reports"),C(!0)},Q=async L=>{try{const de=await $.get(`${ct}/hr_reports.php?type=${L}&month=${T}`);de.data.success&&(console.log("Report Data:",de.data.report),alert(`${L} report generated successfully!
Check console for data.

In production, this will download PDF/Excel.`))}catch(de){console.error("Error:",de),alert("Error generating report: "+de.message)}},H=()=>{k("salary_components"),C(!0),za()},[te,ce]=f.useState([]),[ue,ye]=f.useState(null),[je,De]=f.useState(null),[nt,Xe]=f.useState(null),[hs,aa]=f.useState([]),[Da,_r]=f.useState([]),[Ts,Ra]=f.useState(!1),za=async()=>{try{const L=await $.get(`${ct}/salary_components.php`);L.data.success&&ce(L.data.components)}catch(L){console.error("Error:",L)}},Dc=async L=>{L.preventDefault();try{(await $.post(`${ct}/salary_components.php`,_)).data.success&&(alert("Salary component added successfully!"),za(),G({}))}catch(de){console.error("Error:",de),alert("Error adding component")}},Cr=L=>{De(L),k("view_employee"),C(!0)},on=async L=>{Xe(L),G(L),k("edit_employee"),C(!0),await La(L.id)},La=async L=>{try{const de=await $.get(`${ct}/salary_components.php?action=by_employee&employee_id=${L}`);de.data.success&&_r(de.data.components)}catch(de){console.error("Error:",de)}},mn=async()=>{Ra(!0),await za()},Rc=async(L,de)=>{try{(await $.post(`${ct}/salary_components.php?action=assign_to_employee`,{employee_id:nt.id,component_id:L,amount:parseFloat(de),effective_from:new Date().toISOString().slice(0,10),status:"active"})).data.success&&(alert("Component assigned successfully!"),await La(nt.id))}catch(Le){console.error("Error:",Le),alert("Error assigning component")}},zc=async L=>{if(confirm("Remove this salary component?"))try{(await $.delete(`${ct}/salary_components.php?action=remove_from_employee&id=${L}`)).data.success&&(alert("Component removed!"),await La(nt.id))}catch(de){console.error("Error:",de),alert("Error removing component")}},Et=async L=>{L.preventDefault();try{(await $.put(`${ct}/hr_payroll.php?resource=employees&id=${nt.id}`,_)).data.success&&(alert("Employee updated successfully!"),C(!1),G({}),Xe(null),E())}catch(de){console.error("Error:",de),alert("Error updating employee")}},Lc=async L=>{try{const de=await $.get(`${ct}/hr_reports.php?type=salary_slips&month=${T}&employee_id=${L}`);console.log("Pay slip response:",de.data),de.data.success?(k("view_payslip"),G({report:de.data.report}),C(!0)):alert("No pay slip found for this employee")}catch(de){console.error("Error:",de),alert("Error fetching pay slip: "+(de.response?.data?.message||de.message))}},kr=async L=>{if(confirm("Mark this payroll as paid?"))try{(await $.put(`${ct}/hr_payroll.php?resource=payroll&id=${L}&action=pay`,{payment_date:new Date().toISOString().slice(0,10),payment_method:"bank_transfer",payment_reference:"PAY-"+Date.now()})).data.success&&(alert("Payroll marked as paid!"),S())}catch(de){console.error("Error:",de),alert("Error marking as paid")}},Ar=async()=>{const L=i.filter(de=>de.status==="processed");if(L.length===0){alert("No processed payroll to pay");return}if(confirm(`Mark ${L.length} employees as paid?`))try{let de=0;for(const Le of L)(await $.put(`${ct}/hr_payroll.php?resource=payroll&id=${Le.id}&action=pay`,{payment_date:new Date().toISOString().slice(0,10),payment_method:"bank_transfer",payment_reference:"BULK-PAY-"+Date.now()})).data.success&&de++;alert(`Successfully paid ${de} out of ${L.length} employees!`),S()}catch(de){console.error("Error:",de),alert("Error processing bulk payment")}},ol=L=>{const de=window.open("","_blank"),Le=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Pay Slip - ${L.employee_name}</title>
        <style>
          @media print {
            @page { margin: 0.5in; }
            body { margin: 0; }
          }
          body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
          }
          .header {
            text-align: center;
            border-bottom: 3px solid #333;
            padding-bottom: 20px;
            margin-bottom: 30px;
          }
          .logo {
            max-width: 150px;
            margin-bottom: 10px;
          }
          .school-name {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin: 10px 0;
          }
          .school-details {
            font-size: 12px;
            color: #666;
          }
          .pay-slip-title {
            font-size: 20px;
            font-weight: bold;
            margin: 20px 0;
            text-align: center;
            color: #2563eb;
          }
          .employee-info {
            background: #f3f4f6;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
          }
          .info-row {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
          }
          .label {
            font-weight: bold;
            color: #374151;
          }
          .value {
            color: #1f2937;
          }
          .salary-section {
            margin: 20px 0;
          }
          .section-title {
            font-size: 16px;
            font-weight: bold;
            margin: 15px 0 10px 0;
            padding-bottom: 5px;
            border-bottom: 2px solid #e5e7eb;
          }
          .earnings { color: #059669; }
          .deductions { color: #dc2626; }
          table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
          }
          td {
            padding: 8px;
            border-bottom: 1px solid #e5e7eb;
          }
          .total-row {
            font-weight: bold;
            background: #f9fafb;
            border-top: 2px solid #333;
          }
          .net-salary {
            background: #dbeafe;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
          }
          .net-salary-label {
            font-size: 14px;
            color: #1e40af;
            margin-bottom: 5px;
          }
          .net-salary-amount {
            font-size: 28px;
            font-weight: bold;
            color: #1e3a8a;
          }
          .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid #e5e7eb;
            font-size: 11px;
            color: #6b7280;
            text-align: center;
          }
          .print-button {
            background: #2563eb;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 20px auto;
            display: block;
          }
          @media print {
            .print-button { display: none; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <img src="/McSMS/assets/logo.png" alt="School Logo" class="logo" onerror="this.style.display='none'">
          <div class="school-name">McSMS School Management System</div>
          <div class="school-details">
            Address: School Address Here | Phone: +233 XXX XXX XXX | Email: info@school.com
          </div>
        </div>

        <div class="pay-slip-title">SALARY SLIP</div>

        <div class="employee-info">
          <div class="info-row">
            <span class="label">Employee Name:</span>
            <span class="value">${L.employee_name}</span>
          </div>
          <div class="info-row">
            <span class="label">Employee Number:</span>
            <span class="value">${L.employee_number}</span>
          </div>
          <div class="info-row">
            <span class="label">Designation:</span>
            <span class="value">${L.designation}</span>
          </div>
          <div class="info-row">
            <span class="label">Department:</span>
            <span class="value">${L.department_name||"N/A"}</span>
          </div>
          <div class="info-row">
            <span class="label">Pay Period:</span>
            <span class="value">${L.month}</span>
          </div>
        </div>

        <div class="salary-section">
          <div class="section-title">Basic Salary</div>
          <table>
            <tr>
              <td>Basic Salary</td>
              <td style="text-align: right;">GHS ${parseFloat(L.basic_salary).toFixed(2)}</td>
            </tr>
          </table>

          <div class="section-title earnings">Earnings</div>
          <table>
            ${L.earnings&&L.earnings.length>0?L.earnings.map(Rt=>`
                <tr>
                  <td>${Rt.component_name}</td>
                  <td style="text-align: right;">GHS ${parseFloat(Rt.amount).toFixed(2)}</td>
                </tr>
              `).join(""):'<tr><td colspan="2" style="text-align: center; color: #9ca3af;">No additional earnings</td></tr>'}
            <tr class="total-row">
              <td>Total Earnings</td>
              <td style="text-align: right;">GHS ${parseFloat(L.total_earnings).toFixed(2)}</td>
            </tr>
          </table>

          <div class="section-title deductions">Deductions</div>
          <table>
            ${L.deductions&&L.deductions.length>0?L.deductions.map(Rt=>`
                <tr>
                  <td>${Rt.component_name}</td>
                  <td style="text-align: right;">GHS ${parseFloat(Rt.amount).toFixed(2)}</td>
                </tr>
              `).join(""):'<tr><td colspan="2" style="text-align: center; color: #9ca3af;">No deductions</td></tr>'}
            <tr class="total-row">
              <td>Total Deductions</td>
              <td style="text-align: right;">GHS ${parseFloat(L.total_deductions).toFixed(2)}</td>
            </tr>
          </table>
        </div>

        <div class="net-salary">
          <div class="net-salary-label">NET SALARY</div>
          <div class="net-salary-amount">GHS ${parseFloat(L.net_salary).toFixed(2)}</div>
        </div>

        <div class="footer">
          <p>This is a computer-generated pay slip and does not require a signature.</p>
          <p>Generated on ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()}</p>
        </div>

        <button class="print-button" onclick="window.print()">Print Pay Slip</button>
      </body>
      </html>
    `;de.document.write(Le),de.document.close()},Mr=()=>{const L=n.map(de=>({employee_id:de.id,employee_name:`${de.first_name} ${de.last_name}`,status:"present",check_in_time:"08:00",check_out_time:"17:00"}));aa(L)},ml=(L,de,Le)=>{aa(Rt=>Rt.map(un=>un.employee_id===L?{...un,[de]:Le}:un))},Oc=async()=>{try{for(const L of hs)await $.post(`${ct}/hr_payroll.php?resource=attendance`,{employee_id:L.employee_id,attendance_date:z,status:L.status,check_in_time:L.check_in_time+":00",check_out_time:L.check_out_time+":00",marked_by:1});alert("Attendance marked successfully!"),C(!1),Z()}catch(L){console.error("Error:",L),alert("Error marking attendance")}},Uc=()=>{k("performance_review"),C(!0)},Oa=async L=>{L.preventDefault();try{(await $.post(`${ct}/hr_payroll.php?resource=performance`,_)).data.success&&(alert("Performance review created successfully!"),C(!1),G({}))}catch(de){console.error("Error:",de),alert("Error creating review")}};return h?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"HR & Payroll Management"}),e.jsxs("button",{onClick:()=>{C(!0),k("employee")},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(df,{size:20}),"Add Employee"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Employees"}),e.jsx("p",{className:"text-2xl font-bold",children:n.length})]}),e.jsx(Se,{className:"text-blue-600",size:32})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:n.filter(L=>L.status==="active").length})]}),e.jsx(We,{className:"text-green-600",size:32})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Monthly Payroll"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["GHS ",O()]})]}),e.jsx(Ee,{className:"text-purple-600",size:32})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Pending Leave"}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:m.length})]}),e.jsx(Ue,{className:"text-orange-600",size:32})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Present Today"}),e.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:x.filter(L=>L.status==="present").length})]}),e.jsx(at,{className:"text-indigo-600",size:32})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"border-b",children:e.jsx("div",{className:"flex overflow-x-auto",children:[{id:"overview",label:"Overview",icon:Mc},{id:"employees",label:"Employees",icon:Se},{id:"payroll",label:"Payroll Processing",icon:Ee},{id:"salary",label:"Salary Structure",icon:_t},{id:"leave",label:"Leave Management",icon:Ue},{id:"attendance",label:"Attendance",icon:at},{id:"performance",label:"Performance",icon:dt},{id:"reports",label:"Reports",icon:Be}].map(L=>e.jsxs("button",{onClick:()=>A(L.id),className:`px-6 py-3 font-medium flex items-center gap-2 whitespace-nowrap ${w===L.id?"border-b-2 border-blue-600 text-blue-600":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx(L.icon,{size:18}),L.label]},L.id))})}),e.jsxs("div",{className:"p-6",children:[w==="overview"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"border rounded-lg p-6",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[e.jsx(Js,{className:"text-blue-600"}),"Quick Actions"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:W,className:"w-full bg-blue-50 hover:bg-blue-100 text-blue-700 px-4 py-3 rounded-lg text-left flex items-center gap-3",children:[e.jsx(Ee,{size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Generate Payroll"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Process monthly salaries"})]})]}),e.jsxs("button",{onClick:re,className:"w-full bg-green-50 hover:bg-green-100 text-green-700 px-4 py-3 rounded-lg text-left flex items-center gap-3",children:[e.jsx(at,{size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Mark Attendance"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Record today's attendance"})]})]}),e.jsxs("button",{onClick:xe,className:"w-full bg-purple-50 hover:bg-purple-100 text-purple-700 px-4 py-3 rounded-lg text-left flex items-center gap-3",children:[e.jsx(Be,{size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Generate Reports"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Download payroll reports"})]})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-6",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[e.jsx(Ue,{className:"text-orange-600"}),"Pending Leave Requests (",m.length,")"]}),e.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[m.slice(0,5).map(L=>e.jsxs("div",{className:"border rounded p-3",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:L.employee_name}),e.jsx("div",{className:"text-sm text-gray-600",children:L.leave_type_name}),e.jsxs("div",{className:"text-sm text-gray-500",children:[L.start_date," to ",L.end_date]})]}),e.jsxs("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded",children:[L.total_days," days"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ie(L.id),className:"flex-1 bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700",children:"Approve"}),e.jsx("button",{onClick:()=>F(L.id),className:"flex-1 bg-red-600 text-white px-3 py-1 rounded text-sm hover:bg-red-700",children:"Reject"})]})]},L.id)),m.length===0&&e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No pending leave requests"})]})]})]})}),w==="employees"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Employee Directory"}),e.jsx("input",{type:"text",placeholder:"Search employees...",className:"border rounded-lg px-4 py-2 w-64"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Employee"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Department"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Designation"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Basic Salary"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",children:n.map(L=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[L.first_name," ",L.last_name]}),e.jsx("div",{className:"text-sm text-gray-600",children:L.email})]})}),e.jsx("td",{className:"px-4 py-3",children:L.department_name||"N/A"}),e.jsx("td",{className:"px-4 py-3",children:L.designation_name||"N/A"}),e.jsxs("td",{className:"px-4 py-3 font-medium",children:["GHS ",L.basic_salary]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${L.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:L.status})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Cr(L),className:"text-blue-600 hover:text-blue-800",title:"View Details",children:e.jsx(os,{size:18})}),e.jsx("button",{onClick:()=>on(L),className:"text-green-600 hover:text-green-800",title:"Edit Employee",children:e.jsx(Dt,{size:18})})]})})]},L.id))})]})})]}),w==="payroll"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Payroll Processing"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"month",value:T,onChange:L=>M(L.target.value),className:"border rounded-lg px-4 py-2"}),e.jsxs("button",{onClick:W,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center gap-2",children:[e.jsx(lt,{size:18}),"Generate Payroll"]}),i.some(L=>L.status==="processed")&&e.jsxs("button",{onClick:Ar,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",title:"Pay all processed employees",children:[e.jsx(he,{size:18}),"Pay All"]})]})]}),i.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Employee"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Basic Salary"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Earnings"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Deductions"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Net Salary"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",children:i.map(L=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-medium",children:L.employee_name}),e.jsx("div",{className:"text-sm text-gray-600",children:L.employee_number})]}),e.jsxs("td",{className:"px-4 py-3",children:["GHS ",parseFloat(L.basic_salary).toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-green-600",children:["GHS ",parseFloat(L.total_earnings).toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-red-600",children:["GHS ",parseFloat(L.total_deductions).toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 font-bold",children:["GHS ",parseFloat(L.net_salary).toFixed(2)]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${L.status==="paid"?"bg-green-100 text-green-800":L.status==="processed"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:L.status})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>Lc(L.employee_id),className:"text-blue-600 hover:text-blue-800 flex items-center gap-1",title:"View Pay Slip",children:[e.jsx(At,{size:18}),"Slip"]}),L.status==="processed"&&e.jsxs("button",{onClick:()=>kr(L.id),className:"text-green-600 hover:text-green-800 flex items-center gap-1",title:"Mark as Paid",children:[e.jsx(he,{size:18}),"Pay"]})]})})]},L.id))}),e.jsx("tfoot",{className:"bg-gray-50 font-bold",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:"4",className:"px-4 py-3 text-right",children:"Total:"}),e.jsxs("td",{className:"px-4 py-3",children:["GHS ",O()]}),e.jsx("td",{colSpan:"2"})]})})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ee,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Payroll Generated"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["Generate payroll for ",T," to view details"]}),e.jsx("button",{onClick:W,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Generate Payroll"})]})]}),w==="salary"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(_t,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Salary Structure Management"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Configure salary components, allowances, and deductions"}),e.jsx("button",{onClick:H,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Configure Salary Components"})]}),w==="leave"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Leave Applications"}),e.jsxs("div",{className:"space-y-4",children:[m.map(L=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h4",{className:"font-semibold",children:L.employee_name}),e.jsx("span",{className:"text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded",children:L.leave_type_name}),e.jsxs("span",{className:"text-sm bg-yellow-100 text-yellow-800 px-2 py-1 rounded",children:[L.total_days," days"]})]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[e.jsx("strong",{children:"Period:"})," ",L.start_date," to ",L.end_date]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("strong",{children:"Reason:"})," ",L.reason]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>ie(L.id),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(he,{size:18}),"Approve"]}),e.jsxs("button",{onClick:()=>F(L.id),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 flex items-center gap-2",children:[e.jsx(cs,{size:18}),"Reject"]})]})]})},L.id)),m.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ue,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Pending Leave Requests"}),e.jsx("p",{className:"text-gray-600",children:"All leave applications have been processed"})]})]})]}),w==="attendance"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(at,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Employee Attendance"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Track daily attendance and working hours"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Present today: ",x.filter(L=>L.status==="present").length," employees"]})]}),w==="performance"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(dt,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Performance Reviews"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Conduct and manage employee performance evaluations"}),e.jsx("button",{onClick:Uc,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Create Performance Review"})]}),w==="reports"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Be,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"HR & Payroll Reports"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Generate comprehensive reports"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-3xl mx-auto mt-6",children:[e.jsx("button",{className:"border-2 border-blue-600 text-blue-600 px-6 py-3 rounded-lg hover:bg-blue-50",children:"Payroll Summary"}),e.jsx("button",{className:"border-2 border-green-600 text-green-600 px-6 py-3 rounded-lg hover:bg-green-50",children:"Attendance Report"}),e.jsx("button",{className:"border-2 border-purple-600 text-purple-600 px-6 py-3 rounded-lg hover:bg-purple-50",children:"Leave Report"})]})]})]})]}),R&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[y==="employee"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Add New Employee"}),e.jsxs("form",{onSubmit:P,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Employee Number"}),e.jsx("input",{type:"text",required:!0,className:"w-full border rounded-lg px-3 py-2",value:_.employee_number||"",onChange:L=>G({..._,employee_number:L.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),e.jsx("input",{type:"email",required:!0,className:"w-full border rounded-lg px-3 py-2",value:_.email||"",onChange:L=>G({..._,email:L.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"First Name"}),e.jsx("input",{type:"text",required:!0,className:"w-full border rounded-lg px-3 py-2",value:_.first_name||"",onChange:L=>G({..._,first_name:L.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Last Name"}),e.jsx("input",{type:"text",required:!0,className:"w-full border rounded-lg px-3 py-2",value:_.last_name||"",onChange:L=>G({..._,last_name:L.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone"}),e.jsx("input",{type:"tel",className:"w-full border rounded-lg px-3 py-2",value:_.phone||"",onChange:L=>G({..._,phone:L.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Date of Birth"}),e.jsx("input",{type:"date",className:"w-full border rounded-lg px-3 py-2",value:_.date_of_birth||"",onChange:L=>G({..._,date_of_birth:L.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gender"}),e.jsxs("select",{className:"w-full border rounded-lg px-3 py-2",value:_.gender||"",onChange:L=>G({..._,gender:L.target.value}),children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Join Date"}),e.jsx("input",{type:"date",required:!0,className:"w-full border rounded-lg px-3 py-2",value:_.join_date||"",onChange:L=>G({..._,join_date:L.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Basic Salary"}),e.jsx("input",{type:"number",required:!0,step:"0.01",className:"w-full border rounded-lg px-3 py-2",value:_.basic_salary||"",onChange:L=>G({..._,basic_salary:L.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Employment Type"}),e.jsxs("select",{className:"w-full border rounded-lg px-3 py-2",value:_.employment_type||"full_time",onChange:L=>G({..._,employment_type:L.target.value}),children:[e.jsx("option",{value:"full_time",children:"Full Time"}),e.jsx("option",{value:"part_time",children:"Part Time"}),e.jsx("option",{value:"contract",children:"Contract"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Address"}),e.jsx("textarea",{className:"w-full border rounded-lg px-3 py-2",rows:"2",value:_.address||"",onChange:L=>G({..._,address:L.target.value})})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Add Employee"}),e.jsx("button",{type:"button",onClick:()=>{C(!1),G({})},className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]}),y==="attendance"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Mark Attendance"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Date"}),e.jsx("input",{type:"date",className:"w-full border rounded-lg px-3 py-2",value:z,onChange:L=>{N(L.target.value),Mr()}})]}),hs.length===0&&e.jsx("button",{onClick:Mr,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 mb-4",children:"Load Employees"}),hs.length>0&&e.jsx("div",{className:"max-h-96 overflow-y-auto mb-4",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-2 text-left text-sm",children:"Employee"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm",children:"Status"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm",children:"Check In"}),e.jsx("th",{className:"px-3 py-2 text-left text-sm",children:"Check Out"})]})}),e.jsx("tbody",{className:"divide-y",children:hs.map(L=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 py-2 text-sm",children:L.employee_name}),e.jsx("td",{className:"px-3 py-2",children:e.jsxs("select",{value:L.status,onChange:de=>ml(L.employee_id,"status",de.target.value),className:"border rounded px-2 py-1 text-sm",children:[e.jsx("option",{value:"present",children:"Present"}),e.jsx("option",{value:"absent",children:"Absent"}),e.jsx("option",{value:"late",children:"Late"}),e.jsx("option",{value:"half_day",children:"Half Day"}),e.jsx("option",{value:"on_leave",children:"On Leave"})]})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"time",value:L.check_in_time,onChange:de=>ml(L.employee_id,"check_in_time",de.target.value),className:"border rounded px-2 py-1 text-sm"})}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("input",{type:"time",value:L.check_out_time,onChange:de=>ml(L.employee_id,"check_out_time",de.target.value),className:"border rounded px-2 py-1 text-sm"})})]},L.employee_id))})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:Oc,disabled:hs.length===0,className:"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:bg-gray-400",children:"Submit Attendance"}),e.jsx("button",{onClick:()=>{C(!1),aa([])},className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]}),y==="reports"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Generate Reports"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Month"}),e.jsx("input",{type:"month",className:"w-full border rounded-lg px-3 py-2",value:T,onChange:L=>M(L.target.value)})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>Q("payroll_summary"),className:"w-full bg-blue-50 hover:bg-blue-100 text-blue-700 px-4 py-3 rounded-lg text-left flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Payroll Summary Report"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Complete payroll breakdown for ",T]})]}),e.jsx(At,{size:20})]}),e.jsxs("button",{onClick:()=>Q("attendance_report"),className:"w-full bg-green-50 hover:bg-green-100 text-green-700 px-4 py-3 rounded-lg text-left flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Attendance Report"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Monthly attendance summary"})]}),e.jsx(At,{size:20})]}),e.jsxs("button",{onClick:()=>Q("leave_report"),className:"w-full bg-purple-50 hover:bg-purple-100 text-purple-700 px-4 py-3 rounded-lg text-left flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Leave Report"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Leave applications and balances"})]}),e.jsx(At,{size:20})]}),e.jsxs("button",{onClick:()=>Q("salary_slips"),className:"w-full bg-orange-50 hover:bg-orange-100 text-orange-700 px-4 py-3 rounded-lg text-left flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Salary Slips (All)"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Generate all salary slips for ",T]})]}),e.jsx(At,{size:20})]})]}),e.jsx("button",{onClick:()=>C(!1),className:"w-full mt-4 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400",children:"Close"})]}),y==="salary_components"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Salary Components"}),e.jsx("div",{className:"mb-4",children:e.jsx("button",{onClick:()=>k("add_salary_component"),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"+ Add New Component"})}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:te.map(L=>e.jsxs("div",{className:"border rounded-lg p-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:L.component_name}),e.jsx("div",{className:"text-sm text-gray-600",children:L.description}),e.jsx("span",{className:`text-xs px-2 py-1 rounded ${L.component_type==="earning"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:L.component_type})]}),e.jsx("span",{className:`px-3 py-1 rounded ${L.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:L.status})]},L.id))}),e.jsx("button",{onClick:()=>C(!1),className:"w-full mt-4 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400",children:"Close"})]}),y==="add_salary_component"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Add Salary Component"}),e.jsxs("form",{onSubmit:Dc,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Component Name"}),e.jsx("input",{type:"text",required:!0,className:"w-full border rounded-lg px-3 py-2",value:_.component_name||"",onChange:L=>G({..._,component_name:L.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Type"}),e.jsxs("select",{required:!0,className:"w-full border rounded-lg px-3 py-2",value:_.component_type||"",onChange:L=>G({..._,component_type:L.target.value}),children:[e.jsx("option",{value:"",children:"Select Type"}),e.jsx("option",{value:"earning",children:"Earning"}),e.jsx("option",{value:"deduction",children:"Deduction"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description"}),e.jsx("textarea",{className:"w-full border rounded-lg px-3 py-2",rows:"2",value:_.description||"",onChange:L=>G({..._,description:L.target.value})})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Add Component"}),e.jsx("button",{type:"button",onClick:()=>{k("salary_components"),G({})},className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400",children:"Back"})]})]})]}),y==="performance_review"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Create Performance Review"}),e.jsxs("form",{onSubmit:Oa,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Employee"}),e.jsxs("select",{required:!0,className:"w-full border rounded-lg px-3 py-2",value:_.employee_id||"",onChange:L=>G({..._,employee_id:L.target.value}),children:[e.jsx("option",{value:"",children:"Select Employee"}),n.map(L=>e.jsxs("option",{value:L.id,children:[L.first_name," ",L.last_name," - ",L.employee_number]},L.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Period Start"}),e.jsx("input",{type:"date",required:!0,className:"w-full border rounded-lg px-3 py-2",value:_.review_period_start||"",onChange:L=>G({..._,review_period_start:L.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Period End"}),e.jsx("input",{type:"date",required:!0,className:"w-full border rounded-lg px-3 py-2",value:_.review_period_end||"",onChange:L=>G({..._,review_period_end:L.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Work Quality (1-5)"}),e.jsx("input",{type:"number",required:!0,min:"1",max:"5",className:"w-full border rounded-lg px-3 py-2",value:_.work_quality||"",onChange:L=>G({..._,work_quality:L.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Productivity (1-5)"}),e.jsx("input",{type:"number",required:!0,min:"1",max:"5",className:"w-full border rounded-lg px-3 py-2",value:_.productivity||"",onChange:L=>G({..._,productivity:L.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Communication (1-5)"}),e.jsx("input",{type:"number",required:!0,min:"1",max:"5",className:"w-full border rounded-lg px-3 py-2",value:_.communication||"",onChange:L=>G({..._,communication:L.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Teamwork (1-5)"}),e.jsx("input",{type:"number",required:!0,min:"1",max:"5",className:"w-full border rounded-lg px-3 py-2",value:_.teamwork||"",onChange:L=>G({..._,teamwork:L.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Punctuality (1-5)"}),e.jsx("input",{type:"number",required:!0,min:"1",max:"5",className:"w-full border rounded-lg px-3 py-2",value:_.punctuality||"",onChange:L=>G({..._,punctuality:L.target.value})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Strengths"}),e.jsx("textarea",{className:"w-full border rounded-lg px-3 py-2",rows:"2",value:_.strengths||"",onChange:L=>G({..._,strengths:L.target.value})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Areas for Improvement"}),e.jsx("textarea",{className:"w-full border rounded-lg px-3 py-2",rows:"2",value:_.areas_for_improvement||"",onChange:L=>G({..._,areas_for_improvement:L.target.value})})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Goals"}),e.jsx("textarea",{className:"w-full border rounded-lg px-3 py-2",rows:"2",value:_.goals||"",onChange:L=>G({..._,goals:L.target.value})})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Create Review"}),e.jsx("button",{type:"button",onClick:()=>{C(!1),G({})},className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]}),y==="view_employee"&&je&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Employee Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Employee Number"}),e.jsx("p",{className:"font-semibold",children:je.employee_number})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Full Name"}),e.jsxs("p",{className:"font-semibold",children:[je.first_name," ",je.last_name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Email"}),e.jsx("p",{className:"font-semibold",children:je.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Phone"}),e.jsx("p",{className:"font-semibold",children:je.phone||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Department"}),e.jsx("p",{className:"font-semibold",children:je.department_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Designation"}),e.jsx("p",{className:"font-semibold",children:je.designation_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Basic Salary"}),e.jsxs("p",{className:"font-semibold",children:["GHS ",je.basic_salary]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Status"}),e.jsx("p",{className:"font-semibold capitalize",children:je.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Join Date"}),e.jsx("p",{className:"font-semibold",children:je.join_date||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600",children:"Employment Type"}),e.jsx("p",{className:"font-semibold capitalize",children:je.employment_type||"N/A"})]})]}),e.jsx("button",{onClick:()=>C(!1),className:"w-full mt-6 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400",children:"Close"})]}),y==="edit_employee"&&nt&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Edit Employee"}),e.jsxs("form",{onSubmit:Et,children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"First Name *"}),e.jsx("input",{type:"text",required:!0,className:"w-full border rounded-lg px-3 py-2",value:_.first_name||"",onChange:L=>G({..._,first_name:L.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Last Name *"}),e.jsx("input",{type:"text",required:!0,className:"w-full border rounded-lg px-3 py-2",value:_.last_name||"",onChange:L=>G({..._,last_name:L.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email *"}),e.jsx("input",{type:"email",required:!0,className:"w-full border rounded-lg px-3 py-2",value:_.email||"",onChange:L=>G({..._,email:L.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone"}),e.jsx("input",{type:"text",className:"w-full border rounded-lg px-3 py-2",value:_.phone||"",onChange:L=>G({..._,phone:L.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Basic Salary *"}),e.jsx("input",{type:"number",required:!0,step:"0.01",className:"w-full border rounded-lg px-3 py-2",value:_.basic_salary||"",onChange:L=>G({..._,basic_salary:L.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Status"}),e.jsxs("select",{className:"w-full border rounded-lg px-3 py-2",value:_.status||"active",onChange:L=>G({..._,status:L.target.value}),children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"on_leave",children:"On Leave"}),e.jsx("option",{value:"suspended",children:"Suspended"})]})]})]}),e.jsxs("div",{className:"mt-6 border-t pt-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Salary Components"}),e.jsx("button",{type:"button",onClick:mn,className:"bg-green-600 text-white px-3 py-1 rounded-lg hover:bg-green-700 text-sm",children:"+ Assign Component"})]}),e.jsx("div",{className:"space-y-2 mb-4",children:Da.length>0?Da.map(L=>e.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:L.component_name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${L.component_type==="earning"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:L.component_type}),L.calculation_type==="percentage"&&e.jsxs("span",{className:"text-xs px-2 py-0.5 rounded bg-blue-100 text-blue-800",children:[parseFloat(L.amount).toFixed(1),"% of basic"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-semibold",children:L.calculation_type==="percentage"?`${parseFloat(L.amount).toFixed(1)}%`:`GHS ${parseFloat(L.amount).toFixed(2)}`}),e.jsx("button",{type:"button",onClick:()=>zc(L.id),className:"text-red-600 hover:text-red-800",children:e.jsx(cs,{size:18})})]})]},L.id)):e.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No salary components assigned"})}),Ts&&e.jsxs("div",{className:"border rounded-lg p-4 bg-blue-50",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Assign New Component"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["Basic Salary: ",e.jsxs("strong",{children:["GHS ",parseFloat(_.basic_salary||0).toFixed(2)]})]}),e.jsx("div",{className:"space-y-3",children:te.filter(L=>!Da.find(de=>de.component_id===L.id)).map(L=>e.jsxs("div",{className:"flex items-center gap-3 bg-white p-2 rounded",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:L.component_name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${L.component_type==="earning"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:L.component_type}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${L.calculation_type==="percentage"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:L.calculation_type==="percentage"?"% of basic":"fixed amount"})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"number",step:"0.01",placeholder:L.calculation_type==="percentage"?"e.g. 5.5":"Amount",className:"w-24 border rounded px-2 py-1 text-sm",id:`amount-${L.id}`}),e.jsx("span",{className:"text-sm text-gray-600",children:L.calculation_type==="percentage"?"%":"GHS"})]}),e.jsx("button",{type:"button",onClick:()=>{const de=document.getElementById(`amount-${L.id}`).value;de&&parseFloat(de)>0?(Rc(L.id,de),document.getElementById(`amount-${L.id}`).value=""):alert("Please enter a valid value")},className:"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 text-sm",children:"Assign"})]},L.id))}),e.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 rounded text-sm",children:[e.jsx("strong",{children:" Tip:"})," For percentage-based components (like SSNIT, Tax), enter the percentage value.",e.jsx("br",{}),"Example: Enter ",e.jsx("strong",{children:"5.5"})," for SSNIT Tier 1 (5.5% of basic salary)"]}),e.jsx("button",{type:"button",onClick:()=>Ra(!1),className:"mt-3 text-sm text-gray-600 hover:text-gray-800",children:"Close"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:"Update Employee"}),e.jsx("button",{type:"button",onClick:()=>{C(!1),G({}),Xe(null),Ra(!1)},className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]}),y==="view_payslip"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Salary Slip"}),_.report&&_.report.length>0?e.jsx("div",{className:"bg-white border rounded-lg p-6",children:_.report.map((L,de)=>e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"border-b pb-4 mb-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:L.employee_name}),e.jsx("p",{className:"text-gray-600",children:L.employee_number}),e.jsx("p",{className:"text-gray-600",children:L.designation})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Month"}),e.jsx("p",{className:"font-semibold",children:L.month})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Basic Salary"}),e.jsxs("p",{className:"font-semibold",children:["GHS ",parseFloat(L.basic_salary).toFixed(2)]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"font-semibold text-green-600 mb-2",children:"Earnings"}),L.earnings&&L.earnings.map((Le,Rt)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:Le.component_name}),e.jsxs("span",{children:["GHS ",parseFloat(Le.amount).toFixed(2)]})]},Rt)),e.jsxs("div",{className:"flex justify-between font-semibold mt-2 pt-2 border-t",children:[e.jsx("span",{children:"Total Earnings"}),e.jsxs("span",{children:["GHS ",parseFloat(L.total_earnings).toFixed(2)]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"font-semibold text-red-600 mb-2",children:"Deductions"}),L.deductions&&L.deductions.map((Le,Rt)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:Le.component_name}),e.jsxs("span",{children:["GHS ",parseFloat(Le.amount).toFixed(2)]})]},Rt)),e.jsxs("div",{className:"flex justify-between font-semibold mt-2 pt-2 border-t",children:[e.jsx("span",{children:"Total Deductions"}),e.jsxs("span",{children:["GHS ",parseFloat(L.total_deductions).toFixed(2)]})]})]}),e.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{children:"Net Salary"}),e.jsxs("span",{children:["GHS ",parseFloat(L.net_salary).toFixed(2)]})]})})]},de))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-600",children:"No payroll data found for this employee in the selected month."}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Please generate payroll first."})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[_.report&&_.report.length>0&&e.jsxs("button",{onClick:()=>ol(_.report[0]),className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center justify-center gap-2",children:[e.jsx(Be,{size:18}),"Print Pay Slip"]}),e.jsx("button",{onClick:()=>C(!1),className:"flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400",children:"Close"})]})]})]})})]})}const T1="http://localhost/McSMS/backend/api";function D1(){const[n,r]=f.useState([]),[i,d]=f.useState(!0);f.useEffect(()=>{m()},[]);const m=async()=>{try{const u=await $.get(`${T1}/biometric.php?resource=devices`);u.data.success&&r(u.data.devices)}catch(u){console.error("Error:",u)}finally{d(!1)}};return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Biometric Integration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Devices"}),e.jsx("p",{className:"text-2xl font-bold",children:n.length})]}),e.jsx(sf,{className:"text-blue-600",size:32})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Active Devices"}),e.jsx("p",{className:"text-2xl font-bold",children:n.filter(u=>u.status==="active").length})]}),e.jsx(Ks,{className:"text-green-600",size:32})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Enrollments"}),e.jsx("p",{className:"text-2xl font-bold",children:"0"})]}),e.jsx(Dm,{className:"text-purple-600",size:32})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Today's Logs"}),e.jsx("p",{className:"text-2xl font-bold",children:"0"})]}),e.jsx(_t,{className:"text-orange-600",size:32})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Biometric Devices"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(u=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold",children:u.device_name}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${u.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:u.status})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Type: ",u.device_type]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Location: ",u.location]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Enrollments: ",u.enrollment_count||0]})]},u.id))})]})]})}const R1="http://localhost/McSMS/backend/api";function z1(){const[n,r]=f.useState([]),[i,d]=f.useState(!0);f.useEffect(()=>{m()},[]);const m=async()=>{try{const u=await $.get(`${R1}/multi_school.php?resource=branches`);u.data.success&&r(u.data.branches)}catch(u){console.error("Error:",u)}finally{d(!1)}};return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Multi-School Management"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Branches"}),e.jsx("p",{className:"text-2xl font-bold",children:n.length})]}),e.jsx(Ac,{className:"text-blue-600",size:32})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Active Branches"}),e.jsx("p",{className:"text-2xl font-bold",children:n.filter(u=>u.status==="active").length})]}),e.jsx(We,{className:"text-green-600",size:32})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold",children:n.reduce((u,x)=>u+(parseInt(x.total_students)||0),0)})]}),e.jsx(Se,{className:"text-purple-600",size:32})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600 text-sm",children:"Total Staff"}),e.jsx("p",{className:"text-2xl font-bold",children:n.reduce((u,x)=>u+(parseInt(x.total_teachers)||0),0)})]}),e.jsx(Ee,{className:"text-orange-600",size:32})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"School Branches"}),e.jsx("div",{className:"space-y-4",children:n.map(u=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:u.branch_name}),u.is_headquarters&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs",children:"HQ"}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${u.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:u.status})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[u.city,", ",u.country]}),e.jsxs("div",{className:"flex gap-4 mt-2 text-sm text-gray-600",children:[e.jsxs("span",{children:["Students: ",u.total_students||0]}),e.jsxs("span",{children:["Teachers: ",u.total_teachers||0]}),e.jsxs("span",{children:["Plan: ",u.subscription_plan]})]})]}),e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 text-sm",children:"View Details"})]})},u.id))})]})]})}const L1="http://localhost/McSMS/backend/api";function O1(){const[n,r]=f.useState("predictions"),[i,d]=f.useState(""),[m,u]=f.useState([]),x=async p=>{if(p.preventDefault(),!i.trim())return;const b={role:"user",message:i,timestamp:new Date().toISOString()};u([...m,b]);try{const g=await $.post(`${L1}/ai_features.php?resource=chatbot&action=message`,{message:i,session_id:"web_session_"+Date.now()});if(g.data.success){const h={role:"bot",message:g.data.response,timestamp:new Date().toISOString()};u(v=>[...v,h])}}catch(g){console.error("Error:",g)}d("")};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"AI Features"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Artificial Intelligence powered insights and automation"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 p-6 rounded-lg shadow-lg text-white",children:[e.jsx(sa,{size:32,className:"mb-2"}),e.jsx("p",{className:"text-purple-100 text-sm",children:"AI Predictions"}),e.jsx("p",{className:"text-2xl font-bold",children:"Active"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-6 rounded-lg shadow-lg text-white",children:[e.jsx(cl,{size:32,className:"mb-2"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Chatbot"}),e.jsx("p",{className:"text-2xl font-bold",children:"Online"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 p-6 rounded-lg shadow-lg text-white",children:[e.jsx(m0,{size:32,className:"mb-2"}),e.jsx("p",{className:"text-green-100 text-sm",children:"Insights"}),e.jsx("p",{className:"text-2xl font-bold",children:"Ready"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"border-b",children:e.jsx("div",{className:"flex overflow-x-auto",children:["predictions","recommendations","chatbot","insights"].map(p=>e.jsx("button",{onClick:()=>r(p),className:`px-6 py-3 font-medium whitespace-nowrap ${n===p?"border-b-2 border-blue-600 text-blue-600":"text-gray-600"}`,children:p.charAt(0).toUpperCase()+p.slice(1)},p))})}),e.jsxs("div",{className:"p-6",children:[n==="predictions"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(We,{className:"mx-auto text-purple-600 mb-4",size:48}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"AI Predictions"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Generate predictions for student performance, dropout risk, and financial forecasts"}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("button",{className:"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700",children:"Predict Performance"}),e.jsx("button",{className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Assess Dropout Risk"}),e.jsx("button",{className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700",children:"Forecast Revenue"})]})]})}),n==="recommendations"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(w2,{className:"mx-auto text-blue-600 mb-4",size:48}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"AI Recommendations"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Get intelligent recommendations for interventions and optimizations"}),e.jsx("button",{className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Generate Recommendations"})]}),n==="chatbot"&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"AI Assistant"}),e.jsxs("div",{className:"border rounded-lg h-96 flex flex-col",children:[e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:m.length===0?e.jsxs("div",{className:"text-center text-gray-500 mt-20",children:[e.jsx(cl,{className:"mx-auto mb-2",size:48}),e.jsx("p",{children:"Start a conversation with the AI assistant"})]}):m.map((p,b)=>e.jsx("div",{className:`flex ${p.role==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-xs px-4 py-2 rounded-lg ${p.role==="user"?"bg-blue-600 text-white":"bg-gray-200 text-gray-900"}`,children:p.message})},b))}),e.jsx("form",{onSubmit:x,className:"border-t p-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:i,onChange:p=>d(p.target.value),placeholder:"Ask me anything...",className:"flex-1 border rounded-lg px-4 py-2"}),e.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"Send"})]})})]})]}),n==="insights"&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(m0,{className:"mx-auto text-yellow-600 mb-4",size:48}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Automated Insights"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Discover trends, patterns, and opportunities automatically"}),e.jsx("button",{className:"bg-yellow-600 text-white px-6 py-2 rounded-lg hover:bg-yellow-700",children:"Generate Insights"})]})]})]})]})}const U1="http://localhost/McSMS/backend/api";function H1(){const{user:n}=Ze(),[r,i]=f.useState(null),[d,m]=f.useState(!0),[u,x]=f.useState("all");f.useEffect(()=>{p()},[n?.id]);const p=async()=>{try{m(!0);const b=await $.get(`${U1}/dashboard.php?role=admin&user_id=${n?.id||""}`);b.data.success&&i(b.data)}catch(b){console.error("Error fetching dashboard:",b)}finally{m(!1)}};return d?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):r?e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Welcome back! Here's what's happening at your school today."})]}),r.insights&&r.insights.length>0&&e.jsx($1,{insights:r.insights,filter:u,setFilter:x}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(Ki,{title:"Total Students",value:r.stats?.total_students||0,icon:e.jsx(Ke,{className:"text-blue-600",size:24}),trend:5.2,color:"blue"}),e.jsx(Ki,{title:"Total Teachers",value:r.stats?.total_teachers||0,icon:e.jsx(Se,{className:"text-green-600",size:24}),trend:2.1,color:"green"}),e.jsx(Ki,{title:"Total Employees",value:r.stats?.total_employees||0,icon:e.jsx(Js,{className:"text-purple-600",size:24}),trend:0,color:"purple"}),e.jsx(Ki,{title:"Active Classes",value:r.stats?.total_classes||0,icon:e.jsx(qe,{className:"text-orange-600",size:24}),trend:0,color:"orange"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Financial Overview"}),e.jsx(Ee,{className:"text-green-600",size:24})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Wi,{label:"Revenue This Month",value:r.financial?.revenue_this_month||0,icon:e.jsx(We,{className:"text-green-500",size:18})}),e.jsx(Wi,{label:"Revenue This Year",value:r.financial?.revenue_this_year||0,icon:e.jsx(vs,{className:"text-blue-500",size:18})}),e.jsx(Wi,{label:"Outstanding Fees",value:r.financial?.outstanding_fees||0,icon:e.jsx(ms,{className:"text-orange-500",size:18}),isWarning:!0}),e.jsx(Wi,{label:"Payroll This Month",value:r.financial?.payroll_this_month||0,icon:e.jsx(yc,{className:"text-purple-500",size:18})}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Collection Rate"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${(r.financial?.collection_rate||0)>=80?"bg-green-500":(r.financial?.collection_rate||0)>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${r.financial?.collection_rate||0}%`}})}),e.jsxs("span",{className:"font-semibold",children:[r.financial?.collection_rate||0,"%"]})]})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"HR Overview"}),e.jsx(Js,{className:"text-purple-600",size:24})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ec,{label:"Present Today",value:r.hr?.present_today||0,icon:e.jsx(ta,{className:"text-green-500",size:20}),color:"green"}),e.jsx(ec,{label:"On Leave",value:r.hr?.on_leave_today||0,icon:e.jsx(Tc,{className:"text-orange-500",size:20}),color:"orange"}),e.jsx(ec,{label:"Pending Leaves",value:r.stats?.pending_leaves||0,icon:e.jsx(at,{className:"text-blue-500",size:20}),color:"blue"}),e.jsx(ec,{label:"Payroll Pending",value:r.hr?.pending_payroll||0,icon:e.jsx(rf,{className:"text-purple-500",size:20}),color:"purple"})]}),e.jsx("div",{className:"mt-6 pt-4 border-t",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Payroll"}),e.jsxs("span",{className:"text-xl font-bold text-purple-600",children:["GHS ",parseFloat(r.hr?.total_payroll||0).toLocaleString()]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Academic Performance"}),e.jsx(dt,{className:"text-yellow-600",size:24})]}),e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsxs("svg",{className:"w-32 h-32",children:[e.jsx("circle",{className:"text-gray-200",strokeWidth:"10",stroke:"currentColor",fill:"transparent",r:"56",cx:"64",cy:"64"}),e.jsx("circle",{className:`${(r.academic?.pass_rate||0)>=80?"text-green-500":(r.academic?.pass_rate||0)>=60?"text-yellow-500":"text-red-500"}`,strokeWidth:"10",strokeDasharray:`${(r.academic?.pass_rate||0)*3.52} 352`,strokeLinecap:"round",stroke:"currentColor",fill:"transparent",r:"56",cx:"64",cy:"64",transform:"rotate(-90 64 64)"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("span",{className:"text-2xl font-bold",children:[r.academic?.pass_rate||0,"%"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Pass Rate"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.academic?.average_score||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Score"})]}),e.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:r.academic?.total_subjects||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"Subjects"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Attendance Trend"}),e.jsx(Ma,{className:"text-blue-600",size:24})]}),e.jsx("div",{className:"h-48",children:r.charts?.attendance&&e.jsx(B1,{data:r.charts.attendance})}),e.jsxs("div",{className:"flex justify-center gap-6 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Present"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Absent"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Trend"}),e.jsx(We,{className:"text-green-600",size:24})]}),e.jsx("div",{className:"h-64",children:r.charts?.revenue&&e.jsx(G1,{data:r.charts.revenue})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Students by Class"}),e.jsx(Mc,{className:"text-blue-600",size:24})]}),e.jsx("div",{className:"space-y-3",children:r.charts?.students_by_class?.slice(0,6).map((b,g)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-24 text-sm text-gray-600 truncate",children:b.class_name}),e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-4",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 h-4 rounded-full flex items-center justify-end pr-2",style:{width:`${Math.min(b.count/Math.max(...r.charts.students_by_class.map(h=>h.count))*100,100)}%`,minWidth:b.count>0?"30px":"0"},children:e.jsx("span",{className:"text-xs text-white font-medium",children:b.count})})})]},g))})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Recent Activities"}),e.jsx(wr,{className:"text-gray-600",size:24})]}),e.jsx("div",{className:"space-y-4",children:r.activities?.slice(0,5).map((b,g)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:`p-2 rounded-full ${b.type==="payment"?"bg-green-100":"bg-blue-100"}`,children:b.type==="payment"?e.jsx(Ee,{className:"text-green-600",size:18}):e.jsx(Se,{className:"text-blue-600",size:18})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-800",children:b.description}),e.jsx("p",{className:"text-sm text-gray-500",children:F1(b.date)})]})]},g))})]})]}):e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("p",{className:"text-gray-600",children:"Failed to load dashboard data"})})}function $1({insights:n,filter:r,setFilter:i}){const d=r==="all"?n:n.filter(u=>u.type===r),m=["all","warning","alert","info","success"];return e.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl shadow-lg p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:e.jsx(sa,{className:"text-white",size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"AI Insights"}),e.jsx("p",{className:"text-indigo-200 text-sm",children:"Intelligent recommendations for your school"})]})]}),e.jsx("div",{className:"flex gap-2",children:m.map(u=>e.jsx("button",{onClick:()=>i(u),className:`px-3 py-1 rounded-full text-sm capitalize transition-all ${r===u?"bg-white text-indigo-600":"bg-white/20 text-white hover:bg-white/30"}`,children:u},u))})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.slice(0,6).map((u,x)=>e.jsx(q1,{insight:u},x))})]})}function q1({insight:n}){const r={warning:{bg:"bg-yellow-50",border:"border-yellow-200",icon:ms,iconColor:"text-yellow-600"},alert:{bg:"bg-red-50",border:"border-red-200",icon:ms,iconColor:"text-red-600"},info:{bg:"bg-blue-50",border:"border-blue-200",icon:Ta,iconColor:"text-blue-600"},success:{bg:"bg-green-50",border:"border-green-200",icon:he,iconColor:"text-green-600"}},i=r[n.type]||r.info,d=i.icon;return e.jsx("div",{className:`${i.bg} ${i.border} border rounded-lg p-4`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(d,{className:i.iconColor,size:20}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-200 rounded-full text-gray-600",children:n.category}),n.priority==="high"&&e.jsx("span",{className:"text-xs px-2 py-0.5 bg-red-200 rounded-full text-red-700",children:"High Priority"})]}),e.jsx("h4",{className:"font-semibold text-gray-800",children:n.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n.message}),n.action&&e.jsxs("button",{className:"mt-2 text-sm text-indigo-600 hover:text-indigo-800 font-medium flex items-center gap-1",children:[n.action,e.jsx(Ea,{size:14})]})]})]})})}function Ki({title:n,value:r,icon:i,trend:d,color:m}){const u={blue:"bg-blue-50 border-blue-100",green:"bg-green-50 border-green-100",purple:"bg-purple-50 border-purple-100",orange:"bg-orange-50 border-orange-100"};return e.jsxs("div",{className:`${u[m]} border rounded-xl p-6 transition-all hover:shadow-md`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-2 bg-white rounded-lg shadow-sm",children:i}),d!==0&&e.jsxs("div",{className:`flex items-center gap-1 text-sm ${d>0?"text-green-600":"text-red-600"}`,children:[d>0?e.jsx(Ea,{size:16}):e.jsx(ev,{size:16}),Math.abs(d),"%"]})]}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:r.toLocaleString()}),e.jsx("p",{className:"text-gray-600 mt-1",children:n})]})}function Wi({label:n,value:r,icon:i,isWarning:d}){return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[i,e.jsx("span",{className:"text-gray-600",children:n})]}),e.jsxs("span",{className:`font-semibold ${d?"text-orange-600":"text-gray-800"}`,children:["GHS ",parseFloat(r).toLocaleString()]})]})}function ec({label:n,value:r,icon:i,color:d}){const m={green:"bg-green-50",orange:"bg-orange-50",blue:"bg-blue-50",purple:"bg-purple-50"};return e.jsxs("div",{className:`${m[d]} rounded-lg p-4 text-center`,children:[e.jsx("div",{className:"flex justify-center mb-2",children:i}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:r}),e.jsx("p",{className:"text-sm text-gray-600",children:n})]})}function B1({data:n}){const r=Math.max(...n.map(i=>i.present+i.absent),1);return e.jsx("div",{className:"flex items-end justify-between h-full gap-2",children:n.map((i,d)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[e.jsxs("div",{className:"w-full flex flex-col gap-1",style:{height:"140px"},children:[e.jsx("div",{className:"w-full bg-green-500 rounded-t",style:{height:`${i.present/r*100}%`}}),e.jsx("div",{className:"w-full bg-red-400 rounded-b",style:{height:`${i.absent/r*100}%`}})]}),e.jsx("span",{className:"text-xs text-gray-500",children:i.day})]},d))})}function G1({data:n}){const r=Math.max(...n.map(i=>i.amount),1);return e.jsx("div",{className:"flex items-end justify-between h-full gap-4",children:n.map((i,d)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[e.jsx("div",{className:"w-full bg-gradient-to-t from-green-500 to-green-400 rounded-t transition-all hover:from-green-600 hover:to-green-500",style:{height:`${i.amount/r*200}px`,minHeight:i.amount>0?"20px":"0"}}),e.jsx("span",{className:"text-xs text-gray-500 text-center",children:i.month})]},d))})}function F1(n){const r=new Date(n),d=new Date-r,m=Math.floor(d/(1e3*60*60*24));return m===0?"Today":m===1?"Yesterday":m<7?`${m} days ago`:r.toLocaleDateString()}function P1(){const n=[{name:"Admin Dashboard",description:"Comprehensive school overview with all metrics",icon:Ks,color:"bg-indigo-500",path:"/admin/comprehensive-dashboard",role:"Admin"},{name:"Principal Dashboard",description:"Academic focus, class performance, staff overview",icon:Ke,color:"bg-purple-500",path:"/principal/dashboard",role:"Principal"},{name:"HR Dashboard",description:"Employee management, attendance, leave, payroll",icon:Se,color:"bg-pink-500",path:"/hr/dashboard",role:"HR"},{name:"Finance Dashboard",description:"Revenue, fees, expenses, debtors tracking",icon:Ee,color:"bg-green-500",path:"/finance/dashboard",role:"Finance"},{name:"Teacher Dashboard",description:"Classes, schedule, grades, student management",icon:qe,color:"bg-blue-500",path:"/teacher/dashboard",role:"Teacher"},{name:"Student Dashboard",description:"Grades, attendance, homework, fee status",icon:ta,color:"bg-teal-500",path:"/student/dashboard",role:"Student"},{name:"Parent Dashboard",description:"Children overview, performance, fee tracking",icon:Js,color:"bg-orange-500",path:"/parent/dashboard",role:"Parent"}];return e.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl p-8 mb-8 text-white",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(hc,{size:40}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard Selector"}),e.jsx("p",{className:"text-indigo-100 mt-1",children:"Preview all role-based dashboards with AI insights"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map((r,i)=>{const d=r.icon;return e.jsxs(ds,{to:r.path,className:"bg-white rounded-xl shadow-sm hover:shadow-lg transition-all p-6 group",children:[e.jsx("div",{className:`${r.color} w-14 h-14 rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform`,children:e.jsx(d,{className:"text-white",size:28})}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:r.name}),e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:r.role})]}),e.jsx("p",{className:"text-gray-600",children:r.description}),e.jsxs("div",{className:"mt-4 flex items-center text-indigo-600 font-medium",children:["View Dashboard",e.jsx("svg",{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},i)})}),e.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:" AI Insights Features"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-yellow-800",children:" Warnings"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Alerts for issues needing attention"})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-blue-800",children:" Information"}),e.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Updates and status notifications"})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-green-800",children:" Success"}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Positive achievements and milestones"})]})]})]})]})})}const Y1="http://localhost/McSMS/backend/api";function V1(){const{user:n}=Ze(),[r,i]=f.useState(null),[d,m]=f.useState(!0);f.useEffect(()=>{n?.id&&u()},[n?.id]);const u=async()=>{try{m(!0);const x=await $.get(`${Y1}/dashboard.php?role=principal&user_id=${n.id}`);x.data.success&&i(x.data)}catch(x){console.error("Error fetching dashboard:",x)}finally{m(!1)}};return d?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):r?e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-xl p-6 mb-8 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Principal Dashboard"}),e.jsx("p",{className:"text-indigo-100 mt-1",children:"School Performance Overview"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-indigo-100",children:"Today"}),e.jsx("p",{className:"text-xl font-semibold",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})})]})]})}),r.insights?.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(sa,{className:"text-purple-600",size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"AI Insights"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Strategic recommendations for school improvement"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.insights.map((x,p)=>e.jsx(X1,{insight:x},p))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-8",children:[e.jsx(dr,{title:"Total Students",value:r.school_overview?.total_students||0,icon:e.jsx(Ke,{className:"text-blue-600",size:24}),color:"blue"}),e.jsx(dr,{title:"Total Staff",value:r.school_overview?.total_staff||0,icon:e.jsx(Js,{className:"text-green-600",size:24}),color:"green"}),e.jsx(dr,{title:"Teachers",value:r.school_overview?.total_teachers||0,icon:e.jsx(Se,{className:"text-purple-600",size:24}),color:"purple"}),e.jsx(dr,{title:"Classes",value:r.school_overview?.total_classes||0,icon:e.jsx(Ac,{className:"text-orange-600",size:24}),color:"orange"}),e.jsx(dr,{title:"Attendance",value:`${r.school_overview?.attendance_rate||0}%`,icon:e.jsx(ta,{className:"text-teal-600",size:24}),color:"teal"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Academic Performance"}),e.jsx(dt,{className:"text-yellow-600",size:24})]}),e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsxs("svg",{className:"w-32 h-32",children:[e.jsx("circle",{className:"text-gray-200",strokeWidth:"10",stroke:"currentColor",fill:"transparent",r:"56",cx:"64",cy:"64"}),e.jsx("circle",{className:Q1(r.academic?.pass_rate||0),strokeWidth:"10",strokeDasharray:`${(r.academic?.pass_rate||0)*3.52} 352`,strokeLinecap:"round",stroke:"currentColor",fill:"transparent",r:"56",cx:"64",cy:"64",transform:"rotate(-90 64 64)"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("span",{className:"text-2xl font-bold",children:[r.academic?.pass_rate||0,"%"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Pass Rate"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-xl font-bold text-blue-600",children:r.academic?.average_score||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"Avg Score"})]}),e.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[e.jsx("p",{className:"text-xl font-bold text-purple-600",children:r.school_overview?.total_subjects||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"Subjects"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Staff Summary"}),e.jsx(Js,{className:"text-green-600",size:24})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.staff?.present_today||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"Present Today"})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:r.staff?.on_leave||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"On Leave"})]})]}),e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"By Department"}),e.jsx("div",{className:"space-y-2",children:r.staff?.by_department?.slice(0,4).map((x,p)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-gray-700",children:x.department_name}),e.jsx("span",{className:"font-semibold text-gray-800",children:x.count})]},p))})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Class Performance"}),e.jsx(vs,{className:"text-blue-600",size:24})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-3 px-4 text-gray-600",children:"Class"}),e.jsx("th",{className:"text-center py-3 px-4 text-gray-600",children:"Students"}),e.jsx("th",{className:"text-center py-3 px-4 text-gray-600",children:"Avg Score"}),e.jsx("th",{className:"text-center py-3 px-4 text-gray-600",children:"Pass Rate"}),e.jsx("th",{className:"text-center py-3 px-4 text-gray-600",children:"Status"})]})}),e.jsx("tbody",{children:r.class_performance?.map((x,p)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 font-medium",children:x.class_name}),e.jsx("td",{className:"py-3 px-4 text-center",children:x.student_count}),e.jsxs("td",{className:"py-3 px-4 text-center",children:[x.avg_score||0,"%"]}),e.jsxs("td",{className:"py-3 px-4 text-center",children:[x.pass_rate||0,"%"]}),e.jsx("td",{className:"py-3 px-4 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${(x.pass_rate||0)>=70?"bg-green-100 text-green-700":(x.pass_rate||0)>=50?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:(x.pass_rate||0)>=70?"Good":(x.pass_rate||0)>=50?"Average":"Needs Attention"})})]},p))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Teacher Overview"}),e.jsx(Se,{className:"text-purple-600",size:24})]}),e.jsx("div",{className:"space-y-3",children:r.teacher_performance?.slice(0,5).map((x,p)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:x.teacher_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[x.subjects_taught," subjects"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold text-purple-600",children:x.classes_assigned}),e.jsx("p",{className:"text-xs text-gray-500",children:"classes"})]})]},p))})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Recent Events"}),e.jsx(Ma,{className:"text-blue-600",size:24})]}),e.jsx("div",{className:"space-y-3",children:r.recent_events?.map((x,p)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:`p-2 rounded-full ${x.type==="admission"?"bg-blue-100":"bg-green-100"}`,children:x.type==="admission"?e.jsx(Ke,{className:"text-blue-600",size:18}):e.jsx(Js,{className:"text-green-600",size:18})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-800",children:x.description}),e.jsx("p",{className:"text-sm text-gray-500",children:I1(x.date)})]})]},p))})]})]})]}):e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("p",{className:"text-gray-600",children:"Failed to load dashboard"})})}function dr({title:n,value:r,icon:i,color:d}){const m={blue:"bg-blue-50",green:"bg-green-50",purple:"bg-purple-50",orange:"bg-orange-50",teal:"bg-teal-50"};return e.jsxs("div",{className:`${m[d]} rounded-xl p-4`,children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:i}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:r}),e.jsx("p",{className:"text-sm text-gray-600",children:n})]})}function X1({insight:n}){const r={warning:{bg:"bg-yellow-50",border:"border-yellow-200",icon:ms,iconColor:"text-yellow-600"},info:{bg:"bg-blue-50",border:"border-blue-200",icon:Ta,iconColor:"text-blue-600"},success:{bg:"bg-green-50",border:"border-green-200",icon:he,iconColor:"text-green-600"}},i=r[n.type]||r.info,d=i.icon;return e.jsx("div",{className:`${i.bg} ${i.border} border rounded-lg p-4`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(d,{className:i.iconColor,size:20}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:n.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n.message}),n.action&&e.jsxs("button",{className:"mt-2 text-sm text-indigo-600 hover:text-indigo-800 font-medium flex items-center gap-1",children:[n.action,e.jsx(Ea,{size:14})]})]})]})})}function Q1(n){return n>=70?"text-green-500":n>=50?"text-yellow-500":"text-red-500"}function I1(n){const r=new Date(n),d=new Date-r,m=Math.floor(d/(1e3*60*60*24));return m===0?"Today":m===1?"Yesterday":m<7?`${m} days ago`:r.toLocaleDateString()}const Z1="http://localhost/McSMS/backend/api";function J1(){const{user:n}=Ze(),[r,i]=f.useState(null),[d,m]=f.useState(!0);f.useEffect(()=>{n?.id&&u()},[n?.id]);const u=async()=>{try{m(!0);const p=await $.get(`${Z1}/dashboard.php?role=hr&user_id=${n.id}`);p.data.success&&i(p.data)}catch(p){console.error("Error fetching dashboard:",p)}finally{m(!1)}};if(d)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})});if(!r)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("p",{className:"text-gray-600",children:"Failed to load dashboard"})});const x=r.attendance?.today?.total>0?Math.round(r.attendance.today.present/r.attendance.today.total*100):0;return e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-6 mb-8 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"HR Dashboard"}),e.jsx("p",{className:"text-purple-100 mt-1",children:"Human Resources Management"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-purple-100",children:"Today's Date"}),e.jsx("p",{className:"text-xl font-semibold",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})})]})]})}),r.insights?.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(sa,{className:"text-purple-600",size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"AI Insights"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"HR recommendations and alerts"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.insights.map((p,b)=>e.jsx(K1,{insight:p},b))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-8",children:[e.jsx(or,{title:"Total Employees",value:r.employees?.total||0,icon:e.jsx(Se,{className:"text-blue-600",size:24}),color:"blue"}),e.jsx(or,{title:"Teachers",value:r.employees?.teachers||0,icon:e.jsx(Js,{className:"text-green-600",size:24}),color:"green"}),e.jsx(or,{title:"Present Today",value:r.attendance?.today?.present||0,icon:e.jsx(ta,{className:"text-teal-600",size:24}),color:"teal"}),e.jsx(or,{title:"On Leave",value:r.leave?.on_leave_today||0,icon:e.jsx(Tc,{className:"text-orange-600",size:24}),color:"orange"}),e.jsx(or,{title:"Pending Leaves",value:r.leave?.pending||0,icon:e.jsx(at,{className:"text-red-600",size:24}),color:"red"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Today's Attendance"}),e.jsx(ta,{className:"text-green-600",size:24})]}),e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsxs("svg",{className:"w-32 h-32",children:[e.jsx("circle",{className:"text-gray-200",strokeWidth:"10",stroke:"currentColor",fill:"transparent",r:"56",cx:"64",cy:"64"}),e.jsx("circle",{className:x>=90?"text-green-500":x>=75?"text-yellow-500":"text-red-500",strokeWidth:"10",strokeDasharray:`${x*3.52} 352`,strokeLinecap:"round",stroke:"currentColor",fill:"transparent",r:"56",cx:"64",cy:"64",transform:"rotate(-90 64 64)"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("span",{className:"text-2xl font-bold",children:[x,"%"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Present"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx("p",{className:"text-xl font-bold text-green-600",children:r.attendance?.today?.present||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"Present"})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[e.jsx("p",{className:"text-xl font-bold text-red-600",children:r.attendance?.today?.absent||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"Absent"})]}),e.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded-lg",children:[e.jsx("p",{className:"text-xl font-bold text-yellow-600",children:r.attendance?.today?.late||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"Late"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Leave Management"}),e.jsx(Ue,{className:"text-blue-600",size:24})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:r.leave?.pending||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Approval"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.leave?.approved_this_month||0}),e.jsx("p",{className:"text-sm text-gray-600",children:"Approved This Month"})]})]}),e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Recent Applications"}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:r.leave?.recent?.slice(0,4).map((p,b)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800 text-sm",children:p.employee_name}),e.jsx("p",{className:"text-xs text-gray-500",children:p.leave_type})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${p.status==="approved"?"bg-green-100 text-green-700":p.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:p.status})]},b))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Payroll Summary"}),e.jsx(Ee,{className:"text-green-600",size:24})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-600",children:"Total Employees"}),e.jsx("span",{className:"font-semibold text-blue-600",children:r.payroll?.current_month?.employee_count||0})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-600",children:"Total Net Salary"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["GHS ",parseFloat(r.payroll?.current_month?.total_net||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-600",children:"Total Earnings"}),e.jsxs("span",{className:"font-semibold text-purple-600",children:["GHS ",parseFloat(r.payroll?.current_month?.total_earnings||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-orange-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-600",children:"Total Deductions"}),e.jsxs("span",{className:"font-semibold text-orange-600",children:["GHS ",parseFloat(r.payroll?.current_month?.total_deductions||0).toLocaleString()]})]}),r.payroll?.pending_payment?.count>0&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-600",children:"Pending Payment"}),e.jsxs("span",{className:"font-semibold text-red-600",children:[r.payroll.pending_payment.count," employees"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Department Overview"}),e.jsx(Ac,{className:"text-purple-600",size:24})]}),e.jsx("div",{className:"space-y-3",children:r.departments?.map((p,b)=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-gray-800",children:p.department_name}),e.jsxs("span",{className:"text-purple-600 font-semibold",children:[p.employee_count," staff"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Total Salary"}),e.jsxs("span",{className:"text-gray-700",children:["GHS ",parseFloat(p.total_salary||0).toLocaleString()]})]})]},b))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Attendance Trend (7 Days)"}),e.jsx(vs,{className:"text-blue-600",size:24})]}),e.jsx("div",{className:"h-48",children:r.charts?.attendance&&e.jsx(W1,{data:r.charts.attendance})}),e.jsxs("div",{className:"flex justify-center gap-6 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Present"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Absent"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Recent Activities"}),e.jsx(Ma,{className:"text-green-600",size:24})]}),e.jsx("div",{className:"space-y-3",children:r.activities?.slice(0,6).map((p,b)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:`p-2 rounded-full ${p.type==="leave"?"bg-blue-100":"bg-green-100"}`,children:p.type==="leave"?e.jsx(Ue,{className:"text-blue-600",size:18}):e.jsx(Ee,{className:"text-green-600",size:18})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-800 text-sm",children:p.description}),e.jsx("p",{className:"text-xs text-gray-500",children:e6(p.date)})]}),p.status&&e.jsx("span",{className:`px-2 py-1 rounded-full text-xs ${p.status==="approved"||p.status==="paid"?"bg-green-100 text-green-700":p.status==="pending"||p.status==="processed"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:p.status})]},b))})]})]})]})}function or({title:n,value:r,icon:i,color:d}){const m={blue:"bg-blue-50",green:"bg-green-50",teal:"bg-teal-50",orange:"bg-orange-50",red:"bg-red-50"};return e.jsxs("div",{className:`${m[d]} rounded-xl p-4`,children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:i}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:r}),e.jsx("p",{className:"text-sm text-gray-600",children:n})]})}function K1({insight:n}){const r={warning:{bg:"bg-yellow-50",border:"border-yellow-200",icon:ms,iconColor:"text-yellow-600"},info:{bg:"bg-blue-50",border:"border-blue-200",icon:Ta,iconColor:"text-blue-600"},success:{bg:"bg-green-50",border:"border-green-200",icon:he,iconColor:"text-green-600"}},i=r[n.type]||r.info,d=i.icon;return e.jsx("div",{className:`${i.bg} ${i.border} border rounded-lg p-4`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(d,{className:i.iconColor,size:20}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:n.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n.message}),n.action&&e.jsxs("button",{className:"mt-2 text-sm text-purple-600 hover:text-purple-800 font-medium flex items-center gap-1",children:[n.action,e.jsx(Ea,{size:14})]})]})]})})}function W1({data:n}){const r=Math.max(...n.map(i=>i.present+i.absent),1);return e.jsx("div",{className:"flex items-end justify-between h-full gap-2",children:n.map((i,d)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[e.jsxs("div",{className:"w-full flex flex-col gap-1",style:{height:"140px"},children:[e.jsx("div",{className:"w-full bg-green-500 rounded-t",style:{height:`${i.present/r*100}%`}}),e.jsx("div",{className:"w-full bg-red-400 rounded-b",style:{height:`${i.absent/r*100}%`}})]}),e.jsx("span",{className:"text-xs text-gray-500",children:i.day})]},d))})}function e6(n){const r=new Date(n),d=new Date-r,m=Math.floor(d/(1e3*60*60*24));return m===0?"Today":m===1?"Yesterday":m<7?`${m} days ago`:r.toLocaleDateString()}const t6="http://localhost/McSMS/backend/api";function s6(){const{user:n}=Ze(),[r,i]=f.useState(null),[d,m]=f.useState(!0);f.useEffect(()=>{n?.id&&u()},[n?.id]);const u=async()=>{try{m(!0);const p=await $.get(`${t6}/dashboard.php?role=finance&user_id=${n.id}`);p.data.success&&i(p.data)}catch(p){console.error("Error fetching dashboard:",p)}finally{m(!1)}};if(d)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"})});if(!r)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("p",{className:"text-gray-600",children:"Failed to load dashboard"})});const x=r.revenue?.growth_rate||0;return e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-teal-600 rounded-xl p-6 mb-8 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Finance Dashboard"}),e.jsx("p",{className:"text-green-100 mt-1",children:"Financial Management & Analytics"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-green-100",children:"This Month's Revenue"}),e.jsxs("p",{className:"text-2xl font-bold",children:["GHS ",parseFloat(r.revenue?.this_month?.total||0).toLocaleString()]}),e.jsxs("div",{className:`flex items-center justify-end gap-1 text-sm ${x>=0?"text-green-200":"text-red-200"}`,children:[x>=0?e.jsx(We,{size:16}):e.jsx(C2,{size:16}),Math.abs(x),"% vs last month"]})]})]})}),r.insights?.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(sa,{className:"text-green-600",size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"AI Insights"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Financial recommendations and alerts"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.insights.map((p,b)=>e.jsx(a6,{insight:p},b))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx(tc,{title:"This Month",value:`GHS ${parseFloat(r.revenue?.this_month?.total||0).toLocaleString()}`,icon:e.jsx(Ee,{className:"text-green-600",size:24}),color:"green",subtitle:`${r.revenue?.this_month?.count||0} payments`}),e.jsx(tc,{title:"This Year",value:`GHS ${parseFloat(r.revenue?.this_year?.total||0).toLocaleString()}`,icon:e.jsx(We,{className:"text-blue-600",size:24}),color:"blue",subtitle:`${r.revenue?.this_year?.count||0} payments`}),e.jsx(tc,{title:"Outstanding",value:`GHS ${parseFloat(r.fees?.outstanding||0).toLocaleString()}`,icon:e.jsx(ms,{className:"text-orange-600",size:24}),color:"orange",subtitle:`${r.outstanding?.summary?.count||0} invoices`}),e.jsx(tc,{title:"Collection Rate",value:`${r.fees?.collection_rate||0}%`,icon:e.jsx(Mc,{className:"text-purple-600",size:24}),color:"purple",subtitle:r.fees?.collection_rate>=85?"On Target":"Below Target"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Fee Collection"}),e.jsx(rf,{className:"text-green-600",size:24})]}),e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsxs("svg",{className:"w-40 h-40",children:[e.jsx("circle",{className:"text-gray-200",strokeWidth:"12",stroke:"currentColor",fill:"transparent",r:"64",cx:"80",cy:"80"}),e.jsx("circle",{className:r.fees?.collection_rate>=85?"text-green-500":r.fees?.collection_rate>=70?"text-yellow-500":"text-red-500",strokeWidth:"12",strokeDasharray:`${(r.fees?.collection_rate||0)*4.02} 402`,strokeLinecap:"round",stroke:"currentColor",fill:"transparent",r:"64",cx:"80",cy:"80",transform:"rotate(-90 80 80)"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("span",{className:"text-3xl font-bold",children:[r.fees?.collection_rate||0,"%"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Collected"})]})})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-600",children:"Total Invoiced"}),e.jsxs("span",{className:"font-semibold text-gray-800",children:["GHS ",parseFloat(r.fees?.total_invoiced||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-600",children:"Total Collected"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["GHS ",parseFloat(r.fees?.total_collected||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-600",children:"Outstanding"}),e.jsxs("span",{className:"font-semibold text-red-600",children:["GHS ",parseFloat(r.fees?.outstanding||0).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Payroll Expenses"}),e.jsx(yc,{className:"text-purple-600",size:24})]}),e.jsxs("div",{className:"text-center p-6 bg-purple-50 rounded-xl mb-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Total Payroll This Month"}),e.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:["GHS ",parseFloat(r.expenses?.payroll||0).toLocaleString()]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsxs("p",{className:"text-lg font-bold text-green-600",children:["GHS ",parseFloat(r.expenses?.payment_status?.paid||0).toLocaleString()]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Paid"})]}),e.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[e.jsxs("p",{className:"text-lg font-bold text-orange-600",children:["GHS ",parseFloat(r.expenses?.payment_status?.pending||0).toLocaleString()]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Pending"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total Earnings"}),e.jsxs("span",{className:"text-gray-800",children:["GHS ",parseFloat(r.expenses?.breakdown?.earnings||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Total Deductions"}),e.jsxs("span",{className:"text-gray-800",children:["GHS ",parseFloat(r.expenses?.breakdown?.deductions||0).toLocaleString()]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Outstanding by Age"}),e.jsx(Ue,{className:"text-orange-600",size:24})]}),e.jsxs("div",{className:"space-y-3",children:[r.outstanding?.by_age?.map((p,b)=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`font-medium ${p.age_bracket==="90+ days"?"text-red-600":p.age_bracket==="61-90 days"?"text-orange-600":"text-gray-800"}`,children:p.age_bracket}),e.jsxs("span",{className:"font-semibold text-gray-800",children:["GHS ",parseFloat(p.total||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[e.jsxs("span",{children:[p.count," invoices"]}),e.jsxs("span",{children:[r.outstanding?.summary?.total>0?Math.round(p.total/r.outstanding.summary.total*100):0,"%"]})]})]},b)),(!r.outstanding?.by_age||r.outstanding.by_age.length===0)&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(he,{className:"mx-auto text-green-400 mb-2",size:48}),e.jsx("p",{children:"No outstanding payments!"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Top Debtors"}),e.jsx(Se,{className:"text-red-600",size:24})]}),e.jsxs("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:[r.debtors?.map((p,b)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:p.student_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[p.class_name||"N/A","  ",p.admission_number]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-semibold text-red-600",children:["GHS ",parseFloat(p.total_owed||0).toLocaleString()]})})]},b)),(!r.debtors||r.debtors.length===0)&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(he,{className:"mx-auto text-green-400 mb-2",size:48}),e.jsx("p",{children:"No debtors!"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Revenue Trend (12 Months)"}),e.jsx(vs,{className:"text-green-600",size:24})]}),e.jsx("div",{className:"h-64",children:r.charts?.revenue&&e.jsx(l6,{data:r.charts.revenue})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Recent Transactions"}),e.jsx(Ma,{className:"text-blue-600",size:24})]}),e.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[r.transactions?.map((p,b)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:e.jsx(Ee,{className:"text-green-600",size:18})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800",children:p.student_name||"Unknown"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[p.payment_method||"N/A","  ",p.reference_number||"N/A"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-green-600",children:["GHS ",parseFloat(p.amount||0).toLocaleString()]}),e.jsx("p",{className:"text-xs text-gray-500",children:n6(p.payment_date)})]})]},b)),(!r.transactions||r.transactions.length===0)&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Be,{className:"mx-auto text-gray-400 mb-2",size:48}),e.jsx("p",{children:"No recent transactions"})]})]})]})]})]})}function tc({title:n,value:r,icon:i,color:d,subtitle:m}){const u={green:"bg-green-50",blue:"bg-blue-50",orange:"bg-orange-50",purple:"bg-purple-50"};return e.jsxs("div",{className:`${u[d]} rounded-xl p-4`,children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:i}),e.jsx("p",{className:"text-xl font-bold text-gray-800",children:r}),e.jsx("p",{className:"text-sm text-gray-600",children:n}),m&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:m})]})}function a6({insight:n}){const r={warning:{bg:"bg-yellow-50",border:"border-yellow-200",icon:ms,iconColor:"text-yellow-600"},alert:{bg:"bg-red-50",border:"border-red-200",icon:ms,iconColor:"text-red-600"},info:{bg:"bg-blue-50",border:"border-blue-200",icon:Ta,iconColor:"text-blue-600"},success:{bg:"bg-green-50",border:"border-green-200",icon:he,iconColor:"text-green-600"}},i=r[n.type]||r.info,d=i.icon;return e.jsx("div",{className:`${i.bg} ${i.border} border rounded-lg p-4`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(d,{className:i.iconColor,size:20}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:n.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n.message}),n.action&&e.jsxs("button",{className:"mt-2 text-sm text-green-600 hover:text-green-800 font-medium flex items-center gap-1",children:[n.action,e.jsx(Ea,{size:14})]})]})]})})}function l6({data:n}){const r=Math.max(...n.map(i=>i.amount),1);return e.jsx("div",{className:"flex items-end justify-between h-full gap-1",children:n.map((i,d)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[e.jsx("div",{className:"w-full bg-gradient-to-t from-green-500 to-green-400 rounded-t transition-all hover:from-green-600 hover:to-green-500",style:{height:`${i.amount/r*200}px`,minHeight:i.amount>0?"4px":"0"}}),e.jsx("span",{className:"text-xs text-gray-500",children:i.month})]},d))})}function n6(n){if(!n)return"N/A";const r=new Date(n),d=new Date-r,m=Math.floor(d/(1e3*60*60*24));return m===0?"Today":m===1?"Yesterday":m<7?`${m} days ago`:r.toLocaleDateString()}const r6="http://localhost/McSMS/backend/api";function i6(){const{user:n}=Ze(),[r,i]=f.useState(null),[d,m]=f.useState(!0);f.useEffect(()=>{n?.id&&u()},[n?.id]);const u=async()=>{try{m(!0);const p=await $.get(`${r6}/dashboard.php?role=teacher&user_id=${n.id}`);p.data.success&&i(p.data)}catch(p){console.error("Error fetching dashboard:",p)}finally{m(!1)}};if(d)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!r)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("p",{className:"text-gray-600",children:"Failed to load dashboard data"})});const x=r.teacher;return e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl p-6 mb-8 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Welcome, ",x?.first_name," ",x?.last_name,"!"]}),e.jsx("p",{className:"text-blue-100 mt-1",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-blue-100",children:"Employee Number"}),e.jsx("p",{className:"text-xl font-semibold",children:x?.employee_number||"N/A"})]})]})}),r.insights&&r.insights.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(sa,{className:"text-purple-600",size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"AI Insights"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Personalized recommendations for you"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.insights.map((p,b)=>e.jsx(c6,{insight:p},b))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(sc,{title:"My Classes",value:r.my_classes?.length||0,icon:e.jsx(Se,{className:"text-blue-600",size:24}),color:"blue"}),e.jsx(sc,{title:"My Subjects",value:r.my_subjects?.length||0,icon:e.jsx(qe,{className:"text-green-600",size:24}),color:"green"}),e.jsx(sc,{title:"Today's Classes",value:r.todays_schedule?.length||0,icon:e.jsx(Ue,{className:"text-purple-600",size:24}),color:"purple"}),e.jsx(sc,{title:"Pending Grades",value:r.pending_grades||0,icon:e.jsx(fm,{className:"text-orange-600",size:24}),color:"orange"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Today's Schedule"}),e.jsx(at,{className:"text-blue-600",size:24})]}),r.todays_schedule?.length>0?e.jsx("div",{className:"space-y-4",children:r.todays_schedule.map((p,b)=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-center min-w-[80px]",children:e.jsxs("p",{className:"text-sm text-gray-500",children:[p.start_time?.slice(0,5)," - ",p.end_time?.slice(0,5)]})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-800",children:p.subject_name}),e.jsx("p",{className:"text-sm text-gray-600",children:p.class_name})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-sm ${h0(p.start_time,p.end_time)?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:h0(p.start_time,p.end_time)?"Now":"Upcoming"})]},b))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ue,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-500",children:"No classes scheduled for today"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"My Classes"}),e.jsx(Ke,{className:"text-green-600",size:24})]}),r.my_classes?.length>0?e.jsx("div",{className:"space-y-4",children:r.my_classes.map((p,b)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:p.class_name}),e.jsx("p",{className:"text-sm text-gray-600",children:"Class Teacher"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:p.student_count}),e.jsx("p",{className:"text-sm text-gray-500",children:"Students"})]})]},b))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Se,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-500",children:"No classes assigned"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"My Subjects"}),e.jsx(qe,{className:"text-purple-600",size:24})]}),r.my_subjects?.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.my_subjects.map((p,b)=>e.jsx("div",{className:"p-4 border rounded-lg hover:shadow-md transition-all",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(qe,{className:"text-purple-600",size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:p.subject_name}),e.jsx("p",{className:"text-sm text-gray-500",children:p.subject_code})]})]})},b))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(qe,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-500",children:"No subjects assigned"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(ac,{icon:e.jsx(fm,{size:24}),label:"Enter Grades",color:"blue"}),e.jsx(ac,{icon:e.jsx(he,{size:24}),label:"Mark Attendance",color:"green"}),e.jsx(ac,{icon:e.jsx(Be,{size:24}),label:"Assign Homework",color:"purple"}),e.jsx(ac,{icon:e.jsx(vs,{size:24}),label:"View Reports",color:"orange"})]})]})]})}function sc({title:n,value:r,icon:i,color:d}){const m={blue:"bg-blue-50 border-blue-100",green:"bg-green-50 border-green-100",purple:"bg-purple-50 border-purple-100",orange:"bg-orange-50 border-orange-100"};return e.jsxs("div",{className:`${m[d]} border rounded-xl p-6`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-2 bg-white rounded-lg shadow-sm",children:i})}),e.jsx("p",{className:"text-3xl font-bold text-gray-800",children:r}),e.jsx("p",{className:"text-gray-600 mt-1",children:n})]})}function c6({insight:n}){const r={warning:{bg:"bg-yellow-50",border:"border-yellow-200",icon:ms,iconColor:"text-yellow-600"},info:{bg:"bg-blue-50",border:"border-blue-200",icon:Ta,iconColor:"text-blue-600"},success:{bg:"bg-green-50",border:"border-green-200",icon:he,iconColor:"text-green-600"}},i=r[n.type]||r.info,d=i.icon;return e.jsx("div",{className:`${i.bg} ${i.border} border rounded-lg p-4`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(d,{className:i.iconColor,size:20}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:n.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n.message}),n.action&&e.jsxs("button",{className:"mt-2 text-sm text-blue-600 hover:text-blue-800 font-medium flex items-center gap-1",children:[n.action,e.jsx(Ea,{size:14})]})]})]})})}function ac({icon:n,label:r,color:i}){const d={blue:"bg-blue-50 hover:bg-blue-100 text-blue-600",green:"bg-green-50 hover:bg-green-100 text-green-600",purple:"bg-purple-50 hover:bg-purple-100 text-purple-600",orange:"bg-orange-50 hover:bg-orange-100 text-orange-600"};return e.jsxs("button",{className:`${d[i]} p-4 rounded-xl transition-all flex flex-col items-center gap-2`,children:[n,e.jsx("span",{className:"text-sm font-medium",children:r})]})}function h0(n,r){const i=new Date,d=i.getHours()*60+i.getMinutes(),[m,u]=n.split(":").map(Number),[x,p]=r.split(":").map(Number),b=m*60+u,g=x*60+p;return d>=b&&d<=g}const d6="http://localhost/McSMS/backend/api";function o6(){const{user:n}=Ze(),[r,i]=f.useState(null),[d,m]=f.useState(!0);f.useEffect(()=>{n?.id&&u()},[n?.id]);const u=async()=>{try{m(!0);const p=n.student_id||n.id,b=await $.get(`${d6}/dashboard.php?role=student&user_id=${p}`);b.data.success&&i(b.data)}catch(p){console.error("Error fetching dashboard:",p)}finally{m(!1)}};if(d)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!r)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("p",{className:"text-gray-600",children:"Failed to load dashboard data"})});const x=r.student;return e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-teal-600 rounded-xl p-6 mb-8 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(Mt,{className:"text-white",size:32})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Welcome, ",x?.first_name," ",x?.last_name,"!"]}),e.jsxs("p",{className:"text-green-100 mt-1",children:[x?.class_name||"No class assigned","  ",x?.admission_number]})]})]}),e.jsxs("div",{className:"text-right hidden md:block",children:[e.jsx("p",{className:"text-green-100",children:"Today"}),e.jsx("p",{className:"text-xl font-semibold",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})})]})]})}),r.insights&&r.insights.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(sa,{className:"text-purple-600",size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Your AI Assistant"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Personalized tips to help you succeed"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.insights.map((p,b)=>e.jsx(m6,{insight:p},b))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(lc,{title:"Average Score",value:`${r.average_score}%`,icon:e.jsx(dt,{className:"text-yellow-600",size:24}),color:"yellow",subtitle:u6(r.average_score)}),e.jsx(lc,{title:"Attendance Rate",value:`${r.attendance_rate}%`,icon:e.jsx(he,{className:"text-green-600",size:24}),color:"green",subtitle:`${r.attendance?.present||0} days present`}),e.jsx(lc,{title:"Pending Homework",value:r.pending_homework?.length||0,icon:e.jsx(fm,{className:"text-blue-600",size:24}),color:"blue",subtitle:"assignments due"}),e.jsx(lc,{title:"Fee Balance",value:`GHS ${parseFloat(r.fees?.balance||0).toLocaleString()}`,icon:e.jsx(Ee,{className:"text-purple-600",size:24}),color:"purple",subtitle:r.fees?.balance>0?"Outstanding":"Paid"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Academic Progress"}),e.jsx(We,{className:"text-green-600",size:24})]}),e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsxs("svg",{className:"w-40 h-40",children:[e.jsx("circle",{className:"text-gray-200",strokeWidth:"12",stroke:"currentColor",fill:"transparent",r:"64",cx:"80",cy:"80"}),e.jsx("circle",{className:x6(r.average_score),strokeWidth:"12",strokeDasharray:`${r.average_score*4.02} 402`,strokeLinecap:"round",stroke:"currentColor",fill:"transparent",r:"64",cx:"80",cy:"80",transform:"rotate(-90 80 80)"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("span",{className:"text-3xl font-bold",children:[r.average_score,"%"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Average"})]})})]})}),e.jsx("h3",{className:"font-semibold text-gray-700 mb-3",children:"Recent Grades"}),r.recent_grades?.length>0?e.jsx("div",{className:"space-y-2",children:r.recent_grades.slice(0,4).map((p,b)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:p.subject_name}),e.jsx("p",{className:"text-sm text-gray-500",children:p.exam_name||"Assessment"})]}),e.jsxs("div",{className:`px-3 py-1 rounded-full font-semibold ${h6(p.score)}`,children:[p.score,"%"]})]},b))}):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No grades yet"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Today's Classes"}),e.jsx(Ue,{className:"text-blue-600",size:24})]}),r.todays_timetable?.length>0?e.jsx("div",{className:"space-y-3",children:r.todays_timetable.map((p,b)=>e.jsx("div",{className:`p-4 rounded-lg border-l-4 ${p0(p.start_time,p.end_time)?"bg-blue-50 border-blue-500":"bg-gray-50 border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:p.subject_name}),e.jsx("p",{className:"text-sm text-gray-600",children:p.teacher_name||"TBA"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-700",children:[p.start_time?.slice(0,5)," - ",p.end_time?.slice(0,5)]}),p0(p.start_time,p.end_time)&&e.jsx("span",{className:"text-xs bg-blue-500 text-white px-2 py-0.5 rounded-full",children:"Now"})]})]})},b))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ue,{className:"mx-auto text-gray-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-500",children:"No classes scheduled for today"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Pending Homework"}),e.jsx(Be,{className:"text-orange-600",size:24})]}),r.pending_homework?.length>0?e.jsx("div",{className:"space-y-3",children:r.pending_homework.map((p,b)=>e.jsx("div",{className:"p-4 border rounded-lg",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:p.title}),e.jsx("p",{className:"text-sm text-gray-600",children:p.subject_name})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-sm ${mr(p.due_date)<=1?"bg-red-100 text-red-700":mr(p.due_date)<=3?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:mr(p.due_date)===0?"Due Today":mr(p.due_date)===1?"Due Tomorrow":`${mr(p.due_date)} days left`})]})},b))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(he,{className:"mx-auto text-green-400 mb-4",size:48}),e.jsx("p",{className:"text-gray-500",children:"All caught up! No pending homework."})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Fee Summary"}),e.jsx(Ee,{className:"text-green-600",size:24})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-600",children:"Total Fees"}),e.jsxs("span",{className:"font-semibold text-gray-800",children:["GHS ",parseFloat(r.fees?.total_fees||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg",children:[e.jsx("span",{className:"text-gray-600",children:"Amount Paid"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["GHS ",parseFloat(r.fees?.paid||0).toLocaleString()]})]}),e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg ${r.fees?.balance>0?"bg-red-50":"bg-green-50"}`,children:[e.jsx("span",{className:"text-gray-600",children:"Balance"}),e.jsxs("span",{className:`font-semibold ${r.fees?.balance>0?"text-red-600":"text-green-600"}`,children:["GHS ",parseFloat(r.fees?.balance||0).toLocaleString()]})]}),e.jsxs("div",{className:"pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Payment Progress"}),e.jsxs("span",{className:"text-sm font-medium",children:[r.fees?.total_fees>0?Math.round(r.fees.paid/r.fees.total_fees*100):0,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-green-500 h-3 rounded-full transition-all",style:{width:`${r.fees?.total_fees>0?r.fees.paid/r.fees.total_fees*100:0}%`}})})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Attendance Summary"}),e.jsx(vs,{className:"text-blue-600",size:24})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center p-6 bg-green-50 rounded-xl",children:[e.jsx("p",{className:"text-4xl font-bold text-green-600",children:r.attendance?.present||0}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Days Present"})]}),e.jsxs("div",{className:"text-center p-6 bg-red-50 rounded-xl",children:[e.jsx("p",{className:"text-4xl font-bold text-red-600",children:r.attendance?.absent||0}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Days Absent"})]}),e.jsxs("div",{className:"text-center p-6 bg-blue-50 rounded-xl",children:[e.jsx("p",{className:"text-4xl font-bold text-blue-600",children:r.attendance?.total||0}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Total Days"})]})]})]})]})}function lc({title:n,value:r,icon:i,color:d,subtitle:m}){const u={yellow:"bg-yellow-50 border-yellow-100",green:"bg-green-50 border-green-100",blue:"bg-blue-50 border-blue-100",purple:"bg-purple-50 border-purple-100"};return e.jsxs("div",{className:`${u[d]} border rounded-xl p-6`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-2 bg-white rounded-lg shadow-sm",children:i})}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:r}),e.jsx("p",{className:"text-gray-600",children:n}),m&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:m})]})}function m6({insight:n}){const r={warning:{bg:"bg-yellow-50",border:"border-yellow-200",icon:ms,iconColor:"text-yellow-600"},info:{bg:"bg-blue-50",border:"border-blue-200",icon:Ta,iconColor:"text-blue-600"},success:{bg:"bg-green-50",border:"border-green-200",icon:he,iconColor:"text-green-600"}},i=r[n.type]||r.info,d=i.icon;return e.jsx("div",{className:`${i.bg} ${i.border} border rounded-lg p-4`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(d,{className:i.iconColor,size:20}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:n.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n.message}),n.action&&e.jsxs("button",{className:"mt-2 text-sm text-blue-600 hover:text-blue-800 font-medium flex items-center gap-1",children:[n.action,e.jsx(Ea,{size:14})]})]})]})})}function u6(n){return n>=80?"Excellent":n>=70?"Very Good":n>=60?"Good":n>=50?"Average":"Needs Improvement"}function x6(n){return n>=80?"text-green-500":n>=60?"text-yellow-500":"text-red-500"}function h6(n){return n>=80?"bg-green-100 text-green-700":n>=60?"bg-yellow-100 text-yellow-700":n>=50?"bg-orange-100 text-orange-700":"bg-red-100 text-red-700"}function p0(n,r){const i=new Date,d=i.getHours()*60+i.getMinutes(),[m,u]=n.split(":").map(Number),[x,p]=r.split(":").map(Number),b=m*60+u,g=x*60+p;return d>=b&&d<=g}function mr(n){const r=new Date;r.setHours(0,0,0,0);const i=new Date(n);i.setHours(0,0,0,0);const d=i-r;return Math.ceil(d/(1e3*60*60*24))}const p6="http://localhost/McSMS/backend/api";function f6(){const{user:n}=Ze(),[r,i]=f.useState(null),[d,m]=f.useState(!0),[u,x]=f.useState(null);f.useEffect(()=>{n?.id&&p()},[n?.id]);const p=async()=>{try{m(!0);const h=await $.get(`${p6}/dashboard.php?role=parent&user_id=${n.id}`);h.data.success&&(i(h.data),h.data.children?.length>0&&x(h.data.children[0]))}catch(h){console.error("Error fetching dashboard:",h)}finally{m(!1)}};if(d)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!r)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx("p",{className:"text-gray-600",children:"Failed to load dashboard data"})});const b=r.parent;return e.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-6 mb-8 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx(Bv,{className:"text-white",size:32})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Welcome, ",b?.full_name||n?.name||"Parent","!"]}),e.jsxs("p",{className:"text-purple-100 mt-1",children:[r.children?.length||0," ",r.children?.length===1?"Child":"Children"," enrolled"]})]})]}),e.jsxs("div",{className:"text-right hidden md:block",children:[e.jsx("p",{className:"text-purple-100",children:"Total Fee Balance"}),e.jsxs("p",{className:"text-2xl font-bold",children:["GHS ",parseFloat(r.total_fee_balance||0).toLocaleString()]})]})]})}),r.insights&&r.insights.length>0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(sa,{className:"text-purple-600",size:24})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"AI Insights"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Important updates about your children"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.insights.slice(0,6).map((h,v)=>e.jsx(b6,{insight:h},v))})]}),r.children?.length>1&&e.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-8",children:e.jsxs("div",{className:"flex items-center gap-4 overflow-x-auto",children:[e.jsx("span",{className:"text-gray-600 whitespace-nowrap",children:"Select Child:"}),r.children.map((h,v)=>e.jsxs("button",{onClick:()=>x(h),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all whitespace-nowrap ${u?.id===h.id?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(Mt,{size:18}),h.first_name," ",h.last_name]},v))]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:r.children_summary?.map((h,v)=>e.jsx(g6,{summary:h},v))}),u&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:[u.first_name,"'s Performance"]}),e.jsx(dt,{className:"text-yellow-600",size:24})]}),e.jsx("div",{className:"flex items-center justify-center mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsxs("svg",{className:"w-40 h-40",children:[e.jsx("circle",{className:"text-gray-200",strokeWidth:"12",stroke:"currentColor",fill:"transparent",r:"64",cx:"80",cy:"80"}),e.jsx("circle",{className:j6(g(u.id)?.average_score||0),strokeWidth:"12",strokeDasharray:`${(g(u.id)?.average_score||0)*4.02} 402`,strokeLinecap:"round",stroke:"currentColor",fill:"transparent",r:"64",cx:"80",cy:"80",transform:"rotate(-90 80 80)"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("span",{className:"text-3xl font-bold",children:[g(u.id)?.average_score||0,"%"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Average"})]})})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:y6(g(u.id)?.average_score||0)}),e.jsx("p",{className:"text-sm text-gray-600",children:"Grade"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[g(u.id)?.attendance_rate||0,"%"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Attendance"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800",children:[u.first_name,"'s Fees"]}),e.jsx(Ee,{className:"text-green-600",size:24})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`p-6 rounded-xl text-center ${(g(u.id)?.fee_balance||0)>0?"bg-red-50":"bg-green-50"}`,children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Outstanding Balance"}),e.jsxs("p",{className:`text-3xl font-bold ${(g(u.id)?.fee_balance||0)>0?"text-red-600":"text-green-600"}`,children:["GHS ",parseFloat(g(u.id)?.fee_balance||0).toLocaleString()]})]}),(g(u.id)?.fee_balance||0)>0&&e.jsxs("button",{className:"w-full bg-purple-600 text-white py-3 rounded-lg hover:bg-purple-700 transition-all flex items-center justify-center gap-2",children:[e.jsx(_t,{size:20}),"Pay Now"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"Student Information"}),e.jsx(os,{className:"text-blue-600",size:24})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(nc,{label:"Full Name",value:`${u.first_name} ${u.last_name}`}),e.jsx(nc,{label:"Admission Number",value:u.admission_number||"N/A"}),e.jsx(nc,{label:"Class",value:u.class_name||"N/A"}),e.jsx(nc,{label:"Status",value:u.status||"Active",isStatus:!0})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(rc,{icon:e.jsx(vs,{size:24}),label:"View Report Cards",color:"blue"}),e.jsx(rc,{icon:e.jsx(Ue,{size:24}),label:"View Attendance",color:"green"}),e.jsx(rc,{icon:e.jsx(_t,{size:24}),label:"Pay Fees",color:"purple"}),e.jsx(rc,{icon:e.jsx(wr,{size:24}),label:"Messages",color:"orange"})]})]})]});function g(h){return r.children_summary?.find(v=>v.student.id===h)}}function g6({summary:n}){const r=n.student;return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(Ke,{className:"text-purple-600",size:24})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-800",children:[r.first_name," ",r.last_name]}),e.jsx("p",{className:"text-sm text-gray-500",children:r.class_name||"No class"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[e.jsxs("div",{className:"p-2 bg-yellow-50 rounded-lg",children:[e.jsxs("p",{className:"text-lg font-bold text-yellow-600",children:[n.average_score,"%"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Score"})]}),e.jsxs("div",{className:"p-2 bg-green-50 rounded-lg",children:[e.jsxs("p",{className:"text-lg font-bold text-green-600",children:[n.attendance_rate,"%"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Attendance"})]}),e.jsxs("div",{className:`p-2 rounded-lg ${n.fee_balance>0?"bg-red-50":"bg-green-50"}`,children:[e.jsx("p",{className:`text-lg font-bold ${n.fee_balance>0?"text-red-600":"text-green-600"}`,children:n.fee_balance>0?"Due":"Paid"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Fees"})]})]})]})}function b6({insight:n}){const r={warning:{bg:"bg-yellow-50",border:"border-yellow-200",icon:ms,iconColor:"text-yellow-600"},info:{bg:"bg-blue-50",border:"border-blue-200",icon:Ta,iconColor:"text-blue-600"},success:{bg:"bg-green-50",border:"border-green-200",icon:he,iconColor:"text-green-600"}},i=r[n.type]||r.info,d=i.icon;return e.jsx("div",{className:`${i.bg} ${i.border} border rounded-lg p-4`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(d,{className:i.iconColor,size:20}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:n.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n.message}),n.action&&e.jsxs("button",{className:"mt-2 text-sm text-purple-600 hover:text-purple-800 font-medium flex items-center gap-1",children:[n.action,e.jsx(Ea,{size:14})]})]})]})})}function nc({label:n,value:r,isStatus:i}){return e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:n}),i?e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${r==="active"||r==="Active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:r}):e.jsx("p",{className:"font-semibold text-gray-800",children:r})]})}function rc({icon:n,label:r,color:i}){const d={blue:"bg-blue-50 hover:bg-blue-100 text-blue-600",green:"bg-green-50 hover:bg-green-100 text-green-600",purple:"bg-purple-50 hover:bg-purple-100 text-purple-600",orange:"bg-orange-50 hover:bg-orange-100 text-orange-600"};return e.jsxs("button",{className:`${d[i]} p-4 rounded-xl transition-all flex flex-col items-center gap-2`,children:[n,e.jsx("span",{className:"text-sm font-medium",children:r})]})}function j6(n){return n>=80?"text-green-500":n>=60?"text-yellow-500":"text-red-500"}function y6(n){return n>=80?"A":n>=70?"B":n>=60?"C":n>=50?"D":"F"}function N6(){const n=ft(),{user:r}=Ze(),[i,d]=f.useState([]),[m,u]=f.useState(!0);f.useEffect(()=>{x()},[]);const x=async()=>{try{const b=(await $.get(`http://localhost/McSMS/backend/api/teachers.php?user_id=${r.id}`)).data.teachers||[];if(b.length===0){console.error("No teacher record found for this user"),u(!1);return}const g=b[0].id,h=await $.get(`http://localhost/McSMS/backend/api/classes.php?teacher_id=${g}`);d(h.data.classes||[])}catch(p){console.error("Error fetching classes:",p)}finally{u(!1)}};return m?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-gray-500",children:"Loading..."})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Classes"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Classes assigned to you"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.slice(0,6).map(p=>e.jsxs("div",{className:"card p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(qe,{className:"w-6 h-6 text-blue-600"})}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${p.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:p.status})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:p.class_name}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:[p.level,"  ",p.section||"Main"]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Capacity:"}),e.jsxs("span",{className:"font-medium",children:[p.capacity," students"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Room:"}),e.jsx("span",{className:"font-medium",children:p.room_number||"N/A"})]})]}),e.jsxs("button",{onClick:()=>n(`/teacher/students?class=${p.id}`),className:"btn btn-primary w-full mb-3 flex items-center justify-center gap-2",children:[e.jsx(Se,{className:"w-4 h-4"}),"View Students"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("button",{onClick:()=>n(`/teacher/attendance?class=${p.id}`),className:"btn bg-green-100 text-green-700 hover:bg-green-200 text-xs py-2",children:"Attendance"}),e.jsx("button",{onClick:()=>n(`/teacher/homework?class=${p.id}`),className:"btn bg-purple-100 text-purple-700 hover:bg-purple-200 text-xs py-2",children:"Homework"}),e.jsx("button",{onClick:()=>n(`/teacher/grading?class=${p.id}`),className:"btn bg-blue-100 text-blue-700 hover:bg-blue-200 text-xs py-2",children:"Grading"})]})]},p.id))}),i.length===0&&e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx(qe,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No classes assigned yet"})]})]})}function v6(){const[n]=ry(),r=ft(),{user:i}=Ze(),d=n.get("class"),m=n.get("all")==="true",[u,x]=f.useState([]),[p,b]=f.useState([]),[g,h]=f.useState(null),[v,w]=f.useState(!0),[A,T]=f.useState(""),[M,R]=f.useState(null),[C,y]=f.useState(!1);f.useEffect(()=>{k()},[d,m]);const k=async()=>{try{w(!0);const E=(await $.get(`http://localhost/McSMS/backend/api/teachers.php?user_id=${i.id}`)).data.teachers||[];if(E.length===0){console.error("No teacher record found"),w(!1);return}const S=E[0].id;if(m){const q=(await $.get(`http://localhost/McSMS/backend/api/classes.php?teacher_id=${S}`)).data.classes||[];b(q);const Z=[];for(const W of q){const F=((await $.get(`http://localhost/McSMS/backend/api/students.php?class_id=${W.id}`)).data.students||[]).map(O=>({...O,class_name:W.class_name}));Z.push(...F)}x(Z)}else if(d){const U=await $.get(`http://localhost/McSMS/backend/api/classes.php?id=${d}`);h(U.data.class);const q=await $.get(`http://localhost/McSMS/backend/api/students.php?class_id=${d}`);x(q.data.students||[])}}catch(N){console.error("Error fetching data:",N)}finally{w(!1)}},_=u.filter(N=>{const E=A.toLowerCase();return N.first_name?.toLowerCase().includes(E)||N.last_name?.toLowerCase().includes(E)||N.student_id?.toLowerCase().includes(E)||N.email?.toLowerCase().includes(E)}),G=N=>{const E={active:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-700",graduated:"bg-blue-100 text-blue-700",transferred:"bg-orange-100 text-orange-700"};return E[N]||E.active},z=N=>{R(N),y(!0)};return v?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>r(m?"/teacher/dashboard":"/teacher/classes"),className:"btn bg-gray-200 hover:bg-gray-300",children:e.jsx(dl,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:m?"All My Students":`${g?.class_name} Students`}),e.jsxs("p",{className:"text-gray-600 mt-1",children:[u.length," student",u.length!==1?"s":""," ",m?"across all classes":"enrolled"]})]})]})}),g&&!m&&e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"grid grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Class Code"}),e.jsx("p",{className:"font-semibold text-gray-900",children:g.class_code})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Level"}),e.jsx("p",{className:"font-semibold text-gray-900",children:g.level?.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Room"}),e.jsx("p",{className:"font-semibold text-gray-900",children:g.room_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Capacity"}),e.jsxs("p",{className:"font-semibold text-gray-900",children:[u.length," / ",g.capacity]})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsx("input",{type:"text",placeholder:"Search students by name, ID, or email...",value:A,onChange:N=>T(N.target.value),className:"input w-full"})}),_.length===0?e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx(Se,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:A?"No students found matching your search":"No students enrolled in this class yet"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(N=>e.jsxs("div",{className:"card p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[N.photo?e.jsx("img",{src:`http://localhost/McSMS/public/assets/uploads/${N.photo}`,alt:`${N.first_name} ${N.last_name}`,className:"w-16 h-16 rounded-full object-cover"}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:[N.first_name?.[0],N.last_name?.[0]]})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900",children:[N.first_name," ",N.last_name]}),e.jsx("p",{className:"text-sm text-gray-600",children:N.student_id})]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${G(N.status)}`,children:N.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{children:N.date_of_birth?new Date(N.date_of_birth).toLocaleDateString():"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Gender:"}),e.jsx("span",{children:N.gender||"N/A"})]}),N.email&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(js,{className:"w-4 h-4"}),e.jsx("span",{className:"truncate",children:N.email})]}),N.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(pr,{className:"w-4 h-4"}),e.jsx("span",{children:N.phone})]}),N.city&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ec,{className:"w-4 h-4"}),e.jsxs("span",{children:[N.city,", ",N.region]})]})]}),N.guardian_name&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Guardian"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:N.guardian_name}),N.guardian_phone&&e.jsx("p",{className:"text-xs text-gray-600",children:N.guardian_phone})]}),e.jsxs("button",{onClick:()=>z(N),className:"mt-4 w-full btn btn-primary flex items-center justify-center gap-2",children:[e.jsx(os,{className:"w-4 h-4"}),"View Full Details"]})]},N.id))}),C&&M&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between sticky top-0 bg-white",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Student Details"}),e.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ve,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-6 pb-6 border-b",children:[M.photo?e.jsx("img",{src:`http://localhost/McSMS/public/assets/uploads/${M.photo}`,alt:`${M.first_name} ${M.last_name}`,className:"w-32 h-32 rounded-full object-cover"}):e.jsx("div",{className:"w-32 h-32 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsxs("span",{className:"text-5xl font-bold text-blue-600",children:[M.first_name?.[0],M.last_name?.[0]]})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:[M.first_name," ",M.last_name]}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Student ID: ",M.student_id]}),M.class_name&&e.jsxs("p",{className:"text-gray-600",children:["Class: ",M.class_name]})]}),e.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full ${G(M.status)}`,children:M.status})]})})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Mt,{className:"w-5 h-5 text-blue-600"}),"Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Date of Birth"}),e.jsx("p",{className:"font-medium text-gray-900",children:M.date_of_birth?new Date(M.date_of_birth).toLocaleDateString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Age"}),e.jsx("p",{className:"font-medium text-gray-900",children:M.date_of_birth?Math.floor((new Date-new Date(M.date_of_birth))/(365.25*24*60*60*1e3))+" years":"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Gender"}),e.jsx("p",{className:"font-medium text-gray-900",children:M.gender||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Nationality"}),e.jsx("p",{className:"font-medium text-gray-900",children:M.nationality||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Religion"}),e.jsx("p",{className:"font-medium text-gray-900",children:M.religion||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Blood Group"}),e.jsx("p",{className:"font-medium text-gray-900",children:M.blood_group||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(pr,{className:"w-5 h-5 text-green-600"}),"Contact Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-900",children:M.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Phone"}),e.jsx("p",{className:"font-medium text-gray-900",children:M.phone||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(af,{className:"w-5 h-5 text-purple-600"}),"Address Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Street Address"}),e.jsx("p",{className:"font-medium text-gray-900",children:M.address||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"City"}),e.jsx("p",{className:"font-medium text-gray-900",children:M.city||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Region"}),e.jsx("p",{className:"font-medium text-gray-900",children:M.region||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Country"}),e.jsx("p",{className:"font-medium text-gray-900",children:M.country||"Ghana"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Postal Code"}),e.jsx("p",{className:"font-medium text-gray-900",children:M.postal_code||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Se,{className:"w-5 h-5 text-orange-600"}),"Guardian Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Guardian Name"}),e.jsx("p",{className:"font-medium text-gray-900",children:M.guardian_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Relationship"}),e.jsx("p",{className:"font-medium text-gray-900",children:M.guardian_relationship||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Guardian Phone"}),e.jsx("p",{className:"font-medium text-gray-900",children:M.guardian_phone||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Guardian Email"}),e.jsx("p",{className:"font-medium text-gray-900",children:M.guardian_email||"N/A"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Guardian Address"}),e.jsx("p",{className:"font-medium text-gray-900",children:M.guardian_address||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5 text-indigo-600"}),"Academic Information"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Admission Date"}),e.jsx("p",{className:"font-medium text-gray-900",children:M.admission_date?new Date(M.admission_date).toLocaleDateString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Previous School"}),e.jsx("p",{className:"font-medium text-gray-900",children:M.previous_school||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Medical Conditions"}),e.jsx("p",{className:"font-medium text-gray-900",children:M.medical_conditions||"None"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Allergies"}),e.jsx("p",{className:"font-medium text-gray-900",children:M.allergies||"None"})]})]})]})]}),e.jsx("div",{className:"p-6 border-t bg-gray-50 flex justify-end gap-3",children:e.jsx("button",{onClick:()=>y(!1),className:"btn bg-gray-200 hover:bg-gray-300",children:"Close"})})]})})]})}function w6(){const{user:n}=Ze(),[r,i]=f.useState([]),[d,m]=f.useState([]),[u,x]=f.useState(""),[p,b]=f.useState(new Date().toISOString().split("T")[0]),[g,h]=f.useState({}),[v,w]=f.useState(null),[A,T]=f.useState(!1),[M,R]=f.useState(!1);f.useEffect(()=>{C()},[]),f.useEffect(()=>{u&&(y(),k())},[u,p]);const C=async()=>{try{const U=(await $.get(`http://localhost/McSMS/backend/api/teachers.php?user_id=${n.id}`)).data.teachers||[];if(U.length===0){console.error("No teacher record found for this user");return}const q=U[0].id,Z=await $.get(`http://localhost/McSMS/backend/api/classes.php?teacher_id=${q}`);i(Z.data.classes||[])}catch(S){console.error("Error fetching classes:",S)}},y=async()=>{try{const S=await $.get(`http://localhost/McSMS/backend/api/students.php?class_id=${u}`);m(S.data.students||[]);const U={};(S.data.students||[]).forEach(q=>{U[q.id]={status:"present",time_in:"07:45"}}),h(U)}catch(S){console.error("Error fetching students:",S)}},k=async()=>{try{const[S,U]=await Promise.all([$.get(`http://localhost/McSMS/backend/api/academic.php?resource=attendance&class_id=${u}&date=${p}`),$.get(`http://localhost/McSMS/backend/api/academic.php?resource=attendance&action=stats&class_id=${u}&date=${p}`)]),q={};S.data.attendance.forEach(Z=>{q[Z.student_id]={status:Z.status,time_in:Z.time_in||"07:45"}}),h(Z=>({...Z,...q})),w(U.data.stats),R(S.data.attendance.length>0)}catch(S){console.error("Error fetching attendance:",S)}},_=(S,U)=>{h(q=>({...q,[S]:{...q[S],status:U}})),R(!1)},G=(S,U)=>{h(q=>({...q,[S]:{...q[S],time_in:U}})),R(!1)},z=S=>{const U={};d.forEach(q=>{U[q.id]={status:S,time_in:S==="present"?"07:45":null}}),h(U),R(!1)},N=async()=>{if(!u){alert("Please select a class");return}try{T(!0);const S=d.map(U=>({student_id:U.id,status:g[U.id]?.status||"present",time_in:g[U.id]?.time_in||null}));await $.post("http://localhost/McSMS/backend/api/academic.php?resource=attendance&action=mark_class",{class_id:u,term_id:1,date:p,students:S,marked_by:n.id}),R(!0),alert("Attendance marked successfully!"),k()}catch(S){console.error("Error marking attendance:",S),alert("Failed to mark attendance")}finally{T(!1)}},E=S=>{const U={present:"bg-green-100 text-green-700 border-green-300",absent:"bg-red-100 text-red-700 border-red-300",late:"bg-orange-100 text-orange-700 border-orange-300",excused:"bg-blue-100 text-blue-700 border-blue-300"};return U[S]||U.present};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mark Attendance"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Record daily attendance for your classes"})]}),M&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(he,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Saved"})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Class *"}),e.jsxs("select",{value:u,onChange:S=>x(S.target.value),className:"input",children:[e.jsx("option",{value:"",children:"Choose a class"}),r.map(S=>e.jsx("option",{value:S.id,children:S.class_name},S.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),e.jsx("input",{type:"date",value:p,onChange:S=>b(S.target.value),className:"input"})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("button",{onClick:N,disabled:!u||A,className:"btn btn-primary w-full disabled:opacity-50 flex items-center justify-center gap-2",children:[e.jsx(Ms,{className:"w-5 h-5"}),A?"Saving...":"Save Attendance"]})})]}),u&&e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Quick Mark:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>z("present"),className:"btn bg-green-100 text-green-700 hover:bg-green-200 text-sm",children:"All Present"}),e.jsx("button",{onClick:()=>z("absent"),className:"btn bg-red-100 text-red-700 hover:bg-red-200 text-sm",children:"All Absent"})]})]})]}),v&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Se,{className:"w-8 h-8 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold",children:v.total||0})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(he,{className:"w-8 h-8 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Present"}),e.jsx("p",{className:"text-2xl font-bold",children:v.present||0})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(cs,{className:"w-8 h-8 text-red-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Absent"}),e.jsx("p",{className:"text-2xl font-bold",children:v.absent||0})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(at,{className:"w-8 h-8 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Late"}),e.jsx("p",{className:"text-2xl font-bold",children:v.late||0})]})]})})]}),u&&d.length>0?e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"#"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Student"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Student ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Time In"})]})}),e.jsx("tbody",{className:"divide-y",children:d.map((S,U)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:U+1}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-blue-600 font-semibold text-sm",children:[S.first_name?.charAt(0),S.last_name?.charAt(0)]})}),e.jsx("div",{children:e.jsxs("p",{className:"font-medium text-gray-900",children:[S.first_name," ",S.last_name]})})]})}),e.jsx("td",{className:"px-6 py-4 font-mono text-sm",children:S.student_id}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"flex gap-2",children:["present","absent","late","excused"].map(q=>e.jsx("button",{onClick:()=>_(S.id,q),className:`px-3 py-1 text-xs font-medium rounded-full border-2 transition-all ${g[S.id]?.status===q?E(q):"bg-gray-50 text-gray-600 border-gray-200 hover:bg-gray-100"}`,children:q.charAt(0).toUpperCase()+q.slice(1)},q))})}),e.jsx("td",{className:"px-6 py-4",children:g[S.id]?.status!=="absent"&&e.jsx("input",{type:"time",value:g[S.id]?.time_in||"07:45",onChange:q=>G(S.id,q.target.value),className:"input w-32"})})]},S.id))})]})})}):u?e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx(Se,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No students found in this class"})]}):e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx(Ue,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Select a class to mark attendance"})]})]})}function S6(){const{user:n}=Ze(),[r,i]=f.useState([]),[d,m]=f.useState([]),[u,x]=f.useState([]),[p,b]=f.useState(!1),[g,h]=f.useState(!1),[v,w]=f.useState(null),[A,T]=f.useState([]),[M,R]=f.useState(!1),[C,y]=f.useState({class_id:"",subject_id:"",term_id:1,teacher_id:n.id,title:"",description:"",due_date:"",total_marks:100,status:"active"});f.useEffect(()=>{k()},[]);const k=async()=>{try{const U=(await $.get(`http://localhost/McSMS/backend/api/teachers.php?user_id=${n.id}`)).data.teachers||[];if(U.length===0){console.error("No teacher record found for this user");return}const q=U[0].id,[Z,W,ie]=await Promise.all([$.get(`http://localhost/McSMS/backend/api/academic.php?resource=homework&teacher_id=${q}`),$.get(`http://localhost/McSMS/backend/api/classes.php?teacher_id=${q}`),$.get("http://localhost/McSMS/backend/api/subjects.php")]);i(Z.data.homework||[]),m(W.data.classes||[]),x(ie.data.subjects||[])}catch(S){console.error("Error fetching data:",S)}},_=async S=>{S.preventDefault();try{await $.post("http://localhost/McSMS/backend/api/academic.php?resource=homework",C),b(!1),k(),alert("Homework assigned successfully!"),y({class_id:"",subject_id:"",term_id:1,teacher_id:n.id,title:"",description:"",due_date:"",total_marks:100,status:"active"})}catch{alert("Error creating homework")}},G=async S=>{try{R(!0);const U=await $.get(`http://localhost/McSMS/backend/api/academic.php?resource=homework&id=${S.id}`);w(U.data.homework),T(U.data.homework.submissions||[]),h(!0)}catch{alert("Error loading submissions")}finally{R(!1)}},z=async(S,U,q)=>{try{await $.post(`http://localhost/McSMS/backend/api/academic.php?resource=homework_submissions&action=grade&id=${S}`,{marks_obtained:U,feedback:q,graded_by:n.id}),alert("Submission graded successfully!"),G(v)}catch{alert("Error grading submission")}},N=S=>{const U={active:"bg-green-100 text-green-700",closed:"bg-gray-100 text-gray-700",cancelled:"bg-red-100 text-red-700"};return U[S]||U.active},E=S=>{const U={pending:"bg-orange-100 text-orange-700",submitted:"bg-blue-100 text-blue-700",late:"bg-red-100 text-red-700",graded:"bg-green-100 text-green-700"};return U[S]||U.pending};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Homework"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Assign and grade homework for your classes"})]}),e.jsxs("button",{onClick:()=>b(!0),className:"btn btn-primary flex items-center gap-2",children:[e.jsx(lt,{className:"w-5 h-5"}),"Assign Homework"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Be,{className:"w-8 h-8 text-blue-500"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Homework"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r.length})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(he,{className:"w-8 h-8 text-green-500"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Active"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r.filter(S=>S.status==="active").length})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(qe,{className:"w-8 h-8 text-purple-500"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Submissions"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r.reduce((S,U)=>S+(U.submission_count||0),0)})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(os,{className:"w-8 h-8 text-orange-500"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Pending Review"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r.reduce((S,U)=>S+(U.submission_count||0),0)})]})]}),e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Class"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subject"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Due Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Submissions"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",children:r.map(S=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:S.title}),e.jsx("td",{className:"px-6 py-4 text-sm",children:S.class_name}),e.jsx("td",{className:"px-6 py-4 text-sm",children:S.subject_name}),e.jsx("td",{className:"px-6 py-4 text-sm",children:new Date(S.due_date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full",children:S.submission_count||0})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${N(S.status)}`,children:S.status})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("button",{onClick:()=>G(S),className:"text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[e.jsx(os,{className:"w-4 h-4"}),"Review"]})})]},S.id))})]})})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Assign Homework"}),e.jsx("button",{onClick:()=>b(!1),children:e.jsx(Ve,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:_,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Class *"}),e.jsxs("select",{required:!0,value:C.class_id,onChange:S=>y({...C,class_id:S.target.value}),className:"input",children:[e.jsx("option",{value:"",children:"Select Class"}),d.map(S=>e.jsx("option",{value:S.id,children:S.class_name},S.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Subject *"}),e.jsxs("select",{required:!0,value:C.subject_id,onChange:S=>y({...C,subject_id:S.target.value}),className:"input",children:[e.jsx("option",{value:"",children:"Select Subject"}),u.map(S=>e.jsx("option",{value:S.id,children:S.subject_name},S.id))]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Title *"}),e.jsx("input",{type:"text",required:!0,value:C.title,onChange:S=>y({...C,title:S.target.value}),className:"input",placeholder:"e.g., Chapter 3 Exercises"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description *"}),e.jsx("textarea",{required:!0,value:C.description,onChange:S=>y({...C,description:S.target.value}),className:"input",rows:"4",placeholder:"Provide detailed instructions..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Due Date *"}),e.jsx("input",{type:"date",required:!0,value:C.due_date,onChange:S=>y({...C,due_date:S.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Total Marks"}),e.jsx("input",{type:"number",value:C.total_marks,onChange:S=>y({...C,total_marks:S.target.value}),className:"input"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>b(!1),className:"btn bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Assign Homework"})]})]})]})}),g&&v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between sticky top-0 bg-white",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:v.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:[v.class_name," - ",v.subject_name]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Due: ",new Date(v.due_date).toLocaleDateString()]})]}),e.jsx("button",{onClick:()=>h(!1),children:e.jsx(Ve,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Description:"}),e.jsx("p",{className:"text-gray-600 mb-6",children:v.description}),e.jsxs("h3",{className:"font-semibold mb-4",children:["Submissions (",A.length,"):"]}),A.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(qe,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("p",{children:"No submissions yet"})]}):e.jsx("div",{className:"space-y-4",children:A.map(S=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[S.first_name," ",S.last_name]}),e.jsx("p",{className:"text-sm text-gray-500",children:S.student_id}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Submitted: ",S.submitted_at?new Date(S.submitted_at).toLocaleString():"Not submitted"]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${E(S.status)}`,children:S.status})]}),S.submission_text&&e.jsx("div",{className:"bg-gray-50 p-3 rounded mb-3",children:e.jsx("p",{className:"text-sm",children:S.submission_text})}),S.status==="submitted"&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",placeholder:"Marks",max:v.total_marks,className:"input w-24",id:`marks-${S.id}`}),e.jsx("input",{type:"text",placeholder:"Feedback",className:"input flex-1",id:`feedback-${S.id}`}),e.jsxs("button",{onClick:()=>{const U=document.getElementById(`marks-${S.id}`).value,q=document.getElementById(`feedback-${S.id}`).value;z(S.id,U,q)},className:"btn btn-primary flex items-center gap-1",children:[e.jsx(he,{className:"w-4 h-4"}),"Grade"]})]}),S.status==="graded"&&e.jsxs("div",{className:"bg-green-50 p-3 rounded",children:[e.jsxs("p",{className:"text-sm font-semibold text-green-700",children:["Marks: ",S.marks_obtained,"/",v.total_marks]}),S.feedback&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Feedback: ",S.feedback]})]})]},S.id))})]})]})})]})}function _6(){const{user:n}=Ze(),[r,i]=f.useState([]),[d,m]=f.useState([]),[u,x]=f.useState([]),[p,b]=f.useState(!1),[g,h]=f.useState(!1),[v,w]=f.useState(null),[A,T]=f.useState([]),[M,R]=f.useState(!1),[C,y]=f.useState({class_id:"",subject_id:"",term_id:1,assessment_name:"",assessment_type:"test",total_marks:100,weight_percentage:100,assessment_date:new Date().toISOString().split("T")[0],description:"",created_by:n.id});f.useEffect(()=>{k()},[]);const k=async()=>{try{const U=(await $.get(`http://localhost/McSMS/backend/api/teachers.php?user_id=${n.id}`)).data.teachers||[];if(U.length===0){console.error("No teacher record found for this user");return}const q=U[0].id,[Z,W,ie]=await Promise.all([$.get("http://localhost/McSMS/backend/api/academic.php?resource=assessments"),$.get(`http://localhost/McSMS/backend/api/classes.php?teacher_id=${q}`),$.get("http://localhost/McSMS/backend/api/subjects.php")]),F=(Z.data.assessments||[]).filter(O=>O.created_by==n.id);i(F),m(W.data.classes||[]),x(ie.data.subjects||[])}catch(S){console.error("Error fetching data:",S)}},_=async S=>{S.preventDefault();try{await $.post("http://localhost/McSMS/backend/api/academic.php?resource=assessments",C),b(!1),k(),alert("Assessment created successfully!"),y({class_id:"",subject_id:"",term_id:1,assessment_name:"",assessment_type:"test",total_marks:100,weight_percentage:100,assessment_date:new Date().toISOString().split("T")[0],description:"",created_by:n.id})}catch{alert("Error creating assessment")}},G=async S=>{try{R(!0);const q=(await $.get(`http://localhost/McSMS/backend/api/academic.php?resource=grades&action=by_assessment&assessment_id=${S.id}`)).data.grades||[],ie=((await $.get(`http://localhost/McSMS/backend/api/students.php?class_id=${S.class_id}`)).data.students||[]).map(F=>{const O=q.find(P=>P.student_id==F.id);return{student_id:F.id,first_name:F.first_name,last_name:F.last_name,student_id_code:F.student_id,marks_obtained:O?.marks_obtained||"",grade:O?.grade||""}});T(ie),w(S),h(!0)}catch{alert("Error loading grades")}finally{R(!1)}},z=(S,U,q)=>{T(Z=>Z.map(W=>W.student_id===S?{...W,[U]:q}:W))},N=(S,U)=>{const q=S/U*100;return q>=80?"A":q>=70?"B":q>=60?"C":q>=50?"D":"F"},E=async()=>{try{R(!0);const S=A.map(U=>({student_id:U.student_id,marks_obtained:U.marks_obtained,grade:U.grade||N(U.marks_obtained,v.total_marks)}));await $.post("http://localhost/McSMS/backend/api/academic.php?resource=grades&action=bulk",{assessment_id:v.id,grades:S,graded_by:n.id}),h(!1),alert("Grades saved successfully!")}catch{alert("Error saving grades")}finally{R(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Assessments & Grading"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Create assessments and record student grades"})]}),e.jsxs("button",{onClick:()=>b(!0),className:"btn btn-primary flex items-center gap-2",children:[e.jsx(lt,{className:"w-5 h-5"}),"Create Assessment"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Assessments"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r.length})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Quizzes"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r.filter(S=>S.assessment_type==="quiz").length})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Tests"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r.filter(S=>S.assessment_type==="test").length})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Exams"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r.filter(S=>S.assessment_type==="exam").length})]})]}),e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Assessment"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Class"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subject"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total Marks"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",children:r.map(S=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900",children:S.assessment_name}),e.jsx("td",{className:"px-6 py-4 text-sm",children:S.class_name}),e.jsx("td",{className:"px-6 py-4 text-sm",children:S.subject_name}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-700 capitalize",children:S.assessment_type})}),e.jsx("td",{className:"px-6 py-4 font-semibold",children:S.total_marks}),e.jsx("td",{className:"px-6 py-4 text-sm",children:new Date(S.assessment_date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("button",{onClick:()=>G(S),className:"text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[e.jsx(dt,{className:"w-4 h-4"}),"Grade"]})})]},S.id))})]})})}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Create Assessment"}),e.jsx("button",{onClick:()=>b(!1),children:e.jsx(Ve,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:_,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Class *"}),e.jsxs("select",{required:!0,value:C.class_id,onChange:S=>y({...C,class_id:S.target.value}),className:"input",children:[e.jsx("option",{value:"",children:"Select Class"}),d.map(S=>e.jsx("option",{value:S.id,children:S.class_name},S.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Subject *"}),e.jsxs("select",{required:!0,value:C.subject_id,onChange:S=>y({...C,subject_id:S.target.value}),className:"input",children:[e.jsx("option",{value:"",children:"Select Subject"}),u.map(S=>e.jsx("option",{value:S.id,children:S.subject_name},S.id))]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Assessment Name *"}),e.jsx("input",{type:"text",required:!0,value:C.assessment_name,onChange:S=>y({...C,assessment_name:S.target.value}),className:"input",placeholder:"e.g., Mathematics Quiz 1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Type *"}),e.jsxs("select",{value:C.assessment_type,onChange:S=>y({...C,assessment_type:S.target.value}),className:"input",children:[e.jsx("option",{value:"quiz",children:"Quiz"}),e.jsx("option",{value:"test",children:"Test"}),e.jsx("option",{value:"exam",children:"Exam"}),e.jsx("option",{value:"assignment",children:"Assignment"}),e.jsx("option",{value:"project",children:"Project"}),e.jsx("option",{value:"midterm",children:"Midterm"}),e.jsx("option",{value:"final",children:"Final"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Total Marks *"}),e.jsx("input",{type:"number",required:!0,value:C.total_marks,onChange:S=>y({...C,total_marks:S.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Weight %"}),e.jsx("input",{type:"number",value:C.weight_percentage,onChange:S=>y({...C,weight_percentage:S.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date *"}),e.jsx("input",{type:"date",required:!0,value:C.assessment_date,onChange:S=>y({...C,assessment_date:S.target.value}),className:"input"})]})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:()=>b(!1),className:"btn bg-gray-200",children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Create Assessment"})]})]})]})}),g&&v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between sticky top-0 bg-white",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:v.assessment_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[v.class_name," - ",v.subject_name," (Total: ",v.total_marks," marks)"]})]}),e.jsx("button",{onClick:()=>h(!1),children:e.jsx(Ve,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-sm",children:"Student"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm",children:"Student ID"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm",children:"Marks Obtained"}),e.jsx("th",{className:"px-4 py-2 text-left text-sm",children:"Grade"})]})}),e.jsx("tbody",{className:"divide-y",children:A.map(S=>e.jsxs("tr",{children:[e.jsxs("td",{className:"px-4 py-3",children:[S.first_name," ",S.last_name]}),e.jsx("td",{className:"px-4 py-3 font-mono text-sm",children:S.student_id_code}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"number",step:"0.01",max:v.total_marks,value:S.marks_obtained,onChange:U=>z(S.student_id,"marks_obtained",U.target.value),className:"input w-24"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"text",value:S.grade||(S.marks_obtained?N(S.marks_obtained,v.total_marks):""),onChange:U=>z(S.student_id,"grade",U.target.value),className:"input w-16"})})]},S.student_id))})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t mt-6",children:[e.jsx("button",{onClick:()=>h(!1),className:"btn bg-gray-200",children:"Cancel"}),e.jsx("button",{onClick:E,disabled:M,className:"btn btn-primary",children:M?"Saving...":"Save Grades"})]})]})]})})]})}function C6(){const{user:n}=Ze(),[r,i]=f.useState([]),[d,m]=f.useState(null),[u,x]=f.useState(!1),[p,b]=f.useState(!0),[g,h]=f.useState(""),[v,w]=f.useState("all"),[A,T]=f.useState({recipient_type:"parent",recipient_id:"",subject:"",message:""}),[M,R]=f.useState([]);f.useEffect(()=>{C(),y()},[]);const C=async()=>{try{b(!0);const N=[{id:1,from:"Parent - Kwame Mensah",sender_id:null,sender_type:"parent",subject:"Question about homework",message:"Hello, I wanted to ask about the homework assignment...",date:new Date().toISOString(),read:!1,type:"received"},{id:2,from:"Admin Office",sender_id:null,sender_type:"admin",subject:"Staff Meeting Reminder",message:"This is a reminder about the staff meeting tomorrow...",date:new Date(Date.now()-864e5).toISOString(),read:!0,type:"received"}];i(N)}catch(N){console.error("Error fetching messages:",N)}finally{b(!1)}},y=async()=>{try{const E=(await $.get(`http://localhost/McSMS/backend/api/teachers.php?user_id=${n.id}`)).data.teachers||[];if(E.length>0){const S=E[0].id,q=(await $.get(`http://localhost/McSMS/backend/api/classes.php?teacher_id=${S}`)).data.classes||[],Z=[];for(const ie of q){const F=await $.get(`http://localhost/McSMS/backend/api/students.php?class_id=${ie.id}`);Z.push(...F.data.students||[])}const W=new Map;Z.forEach(ie=>{if(ie.guardian_name){const F=`${ie.guardian_name}-${ie.guardian_phone||ie.guardian_email||ie.id}`;W.has(F)||W.set(F,{id:ie.parent_id||ie.id,name:ie.guardian_name,phone:ie.guardian_phone,email:ie.guardian_email,student:`${ie.first_name} ${ie.last_name}`,class:ie.class_name})}}),R(Array.from(W.values()))}}catch(N){console.error("Error fetching recipients:",N)}},k=async N=>{N.preventDefault();try{const E={id:r.length+1,from:"You",to:M.find(S=>S.id==A.recipient_id)?.name||"Recipient",subject:A.subject,message:A.message,date:new Date().toISOString(),read:!0,type:"sent"};i([E,...r]),alert("Message sent successfully!"),x(!1),T({recipient_type:"parent",recipient_id:"",subject:"",message:""})}catch(E){console.error("Error sending message:",E),alert("Failed to send message")}},_=N=>{N.read||G(N.id);let E=N.sender_type||"parent",S=N.sender_id||"";if(!S&&E==="parent"){const U=M.find(q=>N.from.toLowerCase().includes(q.name.toLowerCase()));U&&(S=U.id)}T({recipient_type:E,recipient_id:S,subject:`Re: ${N.subject}`,message:`

---
Original message from ${N.from}:
${N.message}`}),x(!0)},G=N=>{i(r.map(E=>E.id===N?{...E,read:!0}:E))},z=r.filter(N=>{const E=N.subject.toLowerCase().includes(g.toLowerCase())||N.from.toLowerCase().includes(g.toLowerCase()),S=v==="all"||v==="unread"&&!N.read||v==="sent"&&N.type==="sent";return E&&S});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Messages"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Communicate with parents and staff"})]}),e.jsxs("button",{onClick:()=>x(!0),className:"btn btn-primary flex items-center gap-2",children:[e.jsx(lt,{className:"w-4 h-4"}),"Compose Message"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(nf,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Messages"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.length})]})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(js,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Unread"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(N=>!N.read).length})]})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(pc,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Sent"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.filter(N=>N.type==="sent").length})]})]})})]}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Sr,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),e.jsx("input",{type:"text",placeholder:"Search messages...",value:g,onChange:N=>h(N.target.value),className:"input pl-10"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>w("all"),className:`btn ${v==="all"?"btn-primary":"bg-gray-200"}`,children:"All"}),e.jsx("button",{onClick:()=>w("unread"),className:`btn ${v==="unread"?"btn-primary":"bg-gray-200"}`,children:"Unread"}),e.jsx("button",{onClick:()=>w("sent"),className:`btn ${v==="sent"?"btn-primary":"bg-gray-200"}`,children:"Sent"})]})]})}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsx("div",{className:"col-span-1 card p-4 space-y-2 max-h-[600px] overflow-y-auto",children:z.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(js,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),e.jsx("p",{children:"No messages found"})]}):z.map(N=>e.jsxs("button",{onClick:()=>m(N),className:`w-full text-left p-4 rounded-lg transition-colors ${d?.id===N.id?"bg-blue-50 border-2 border-blue-500":N.read?"bg-gray-50 hover:bg-gray-100":"bg-white hover:bg-gray-50 border-2 border-blue-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("p",{className:`font-medium ${N.read?"text-gray-900":"text-blue-600"}`,children:N.from}),!N.read&&e.jsx("span",{className:"w-2 h-2 bg-blue-600 rounded-full"})]}),e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:N.subject}),e.jsx("p",{className:"text-xs text-gray-600 truncate",children:N.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(N.date).toLocaleDateString()})]},N.id))}),e.jsx("div",{className:"col-span-2 card p-6",children:d?e.jsxs("div",{children:[e.jsx("div",{className:"border-b pb-4 mb-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:d.subject}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Mt,{className:"w-4 h-4"}),e.jsx("span",{children:d.from}),e.jsx("span",{children:""}),e.jsx("span",{children:new Date(d.date).toLocaleString()})]})]}),!d.read&&d.type!=="sent"&&e.jsxs("button",{onClick:()=>G(d.id),className:"btn bg-blue-100 text-blue-700 hover:bg-blue-200 text-sm flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4"}),"Mark as Read"]})]})}),e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:d.message})}),d.type!=="sent"&&e.jsx("div",{className:"mt-6 pt-4 border-t",children:e.jsxs("button",{onClick:()=>_(d),className:"btn btn-primary flex items-center gap-2",children:[e.jsx(pc,{className:"w-4 h-4"}),"Reply"]})})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(js,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),e.jsx("p",{children:"Select a message to view"})]})})})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between sticky top-0 bg-white",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Compose Message"}),e.jsx("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Ve,{className:"w-6 h-6"})})]}),e.jsxs("form",{onSubmit:k,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Recipient Type"}),e.jsxs("select",{value:A.recipient_type,onChange:N=>T({...A,recipient_type:N.target.value}),className:"input",required:!0,children:[e.jsx("option",{value:"parent",children:"Parent"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"teacher",children:"Teacher"})]})]}),A.recipient_type==="parent"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Parent"}),A.recipient_id&&e.jsx("div",{className:"mb-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[" Replying to: ",M.find(N=>N.id==A.recipient_id)?.name||"Selected recipient"]})}),M.length===0?e.jsx("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"No parents found. Make sure students in your classes have guardian information."})}):e.jsxs("select",{value:A.recipient_id,onChange:N=>T({...A,recipient_id:N.target.value}),className:"input",required:!0,children:[e.jsxs("option",{value:"",children:["Select Parent (",M.length," available)"]}),M.map((N,E)=>e.jsxs("option",{value:N.id,children:[N.name," - Parent of ",N.student,N.phone?` (${N.phone})`:""]},`${N.id}-${E}`))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Subject *"}),e.jsx("input",{type:"text",value:A.subject,onChange:N=>T({...A,subject:N.target.value}),className:"input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Message *"}),e.jsx("textarea",{value:A.message,onChange:N=>T({...A,message:N.target.value}),className:"input",rows:"6",required:!0})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"submit",className:"btn btn-primary flex items-center gap-2",children:[e.jsx(pc,{className:"w-4 h-4"}),"Send Message"]}),e.jsx("button",{type:"button",onClick:()=>x(!1),className:"btn bg-gray-200",children:"Cancel"})]})]})]})})]})}function k6(){const{user:n,setUser:r}=Ze(),[i,d]=f.useState("profile"),[m,u]=f.useState(!1),[x,p]=f.useState(!1),[b,g]=f.useState(null),[h,v]=f.useState({first_name:"",last_name:"",email:"",phone:"",date_of_birth:"",gender:"",address:"",city:"",region:"",qualification:"",specialization:""}),[w,A]=f.useState({current_password:"",new_password:"",confirm_password:""}),[T,M]=f.useState({email_notifications:!0,sms_notifications:!1,homework_reminders:!0,attendance_alerts:!0,grade_notifications:!0,message_notifications:!0});f.useEffect(()=>{R()},[]);const R=async()=>{try{const N=(await $.get(`http://localhost/McSMS/backend/api/teachers.php?user_id=${n.id}`)).data.teachers||[];if(N.length>0){const E=N[0];g(E),v({first_name:E.first_name||"",last_name:E.last_name||"",email:E.email||"",phone:E.phone||"",date_of_birth:E.date_of_birth||"",gender:E.gender||"",address:E.address||"",city:E.city||"",region:E.region||"",qualification:E.qualification||"",specialization:E.specialization||""})}}catch(z){console.error("Error fetching teacher data:",z)}},C=async z=>{z.preventDefault();try{u(!0),await $.put(`http://localhost/McSMS/backend/api/teachers.php?id=${b.id}`,h),p(!0),setTimeout(()=>p(!1),3e3),R()}catch(N){console.error("Error updating profile:",N),alert("Failed to update profile")}finally{u(!1)}},y=async z=>{if(z.preventDefault(),w.new_password!==w.confirm_password){alert("New passwords do not match");return}if(w.new_password.length<6){alert("Password must be at least 6 characters");return}try{u(!0),alert("Password changed successfully!"),A({current_password:"",new_password:"",confirm_password:""})}catch(N){console.error("Error changing password:",N),alert("Failed to change password")}finally{u(!1)}},k=async()=>{try{u(!0),p(!0),setTimeout(()=>p(!1),3e3)}catch(z){console.error("Error updating notifications:",z),alert("Failed to update notification settings")}finally{u(!1)}},_=async z=>{const N=z.target.files[0];if(!N)return;const E=new FormData;E.append("photo",N),E.append("teacher_id",b.id);try{u(!0),alert("Photo uploaded successfully!"),R()}catch(S){console.error("Error uploading photo:",S),alert("Failed to upload photo")}finally{u(!1)}},G=[{id:"profile",label:"Profile",icon:Mt},{id:"password",label:"Password",icon:il},{id:"notifications",label:"Notifications",icon:wr}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your account settings and preferences"})]}),e.jsx("div",{className:"card p-4",children:e.jsx("div",{className:"flex gap-4 border-b pb-4",children:G.map(z=>{const N=z.icon;return e.jsxs("button",{onClick:()=>d(z.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-colors ${i===z.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.jsx(N,{className:"w-4 h-4"}),z.label]},z.id)})})}),i==="profile"&&e.jsx("div",{className:"card p-6",children:e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6 pb-6 border-b",children:[e.jsxs("div",{className:"relative",children:[b?.photo?e.jsx("img",{src:`http://localhost/McSMS/public/assets/uploads/${b.photo}`,alt:"Profile",className:"w-24 h-24 rounded-full object-cover"}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsxs("span",{className:"text-3xl font-bold text-blue-600",children:[h.first_name?.[0],h.last_name?.[0]]})}),e.jsxs("label",{className:"absolute bottom-0 right-0 w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center cursor-pointer hover:bg-blue-700",children:[e.jsx(Dm,{className:"w-4 h-4 text-white"}),e.jsx("input",{type:"file",accept:"image/*",onChange:_,className:"hidden"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Profile Photo"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Upload a new profile photo"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"First Name *"}),e.jsx("input",{type:"text",value:h.first_name,onChange:z=>v({...h,first_name:z.target.value}),className:"input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",value:h.last_name,onChange:z=>v({...h,last_name:z.target.value}),className:"input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:h.email,onChange:z=>v({...h,email:z.target.value}),className:"input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone"}),e.jsx("input",{type:"tel",value:h.phone,onChange:z=>v({...h,phone:z.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Date of Birth"}),e.jsx("input",{type:"date",value:h.date_of_birth,onChange:z=>v({...h,date_of_birth:z.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Gender"}),e.jsxs("select",{value:h.gender,onChange:z=>v({...h,gender:z.target.value}),className:"input",children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Address"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Street Address"}),e.jsx("input",{type:"text",value:h.address,onChange:z=>v({...h,address:z.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"City"}),e.jsx("input",{type:"text",value:h.city,onChange:z=>v({...h,city:z.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Region"}),e.jsx("input",{type:"text",value:h.region,onChange:z=>v({...h,region:z.target.value}),className:"input"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Professional Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Qualification"}),e.jsx("input",{type:"text",value:h.qualification,onChange:z=>v({...h,qualification:z.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Specialization"}),e.jsx("input",{type:"text",value:h.specialization,onChange:z=>v({...h,specialization:z.target.value}),className:"input"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{type:"submit",disabled:m,className:"btn btn-primary flex items-center gap-2",children:[e.jsx(Ms,{className:"w-4 h-4"}),m?"Saving...":"Save Changes"]}),x&&e.jsx("span",{className:"text-green-600 text-sm",children:" Changes saved successfully"})]})]})}),i==="password"&&e.jsx("div",{className:"card p-6",children:e.jsxs("form",{onSubmit:y,className:"space-y-4 max-w-md",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Current Password *"}),e.jsx("input",{type:"password",value:w.current_password,onChange:z=>A({...w,current_password:z.target.value}),className:"input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"New Password *"}),e.jsx("input",{type:"password",value:w.new_password,onChange:z=>A({...w,new_password:z.target.value}),className:"input",required:!0,minLength:"6"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 6 characters"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Confirm New Password *"}),e.jsx("input",{type:"password",value:w.confirm_password,onChange:z=>A({...w,confirm_password:z.target.value}),className:"input",required:!0})]}),e.jsxs("button",{type:"submit",disabled:m,className:"btn btn-primary flex items-center gap-2",children:[e.jsx(il,{className:"w-4 h-4"}),m?"Changing...":"Change Password"]})]})}),i==="notifications"&&e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"space-y-6 max-w-2xl",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Notification Preferences"}),e.jsx("div",{className:"space-y-4",children:Object.entries(T).map(([z,N])=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:z.split("_").map(E=>E.charAt(0).toUpperCase()+E.slice(1)).join(" ")}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive notifications for this activity"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:N,onChange:E=>M({...T,[z]:E.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},z))})]}),e.jsxs("button",{onClick:k,disabled:m,className:"btn btn-primary flex items-center gap-2",children:[e.jsx(Ms,{className:"w-4 h-4"}),m?"Saving...":"Save Preferences"]}),x&&e.jsx("span",{className:"text-green-600 text-sm ml-3",children:" Preferences saved"})]})})]})}function A6(){ft();const{user:n}=Ze(),[r,i]=f.useState(!0),[d,m]=f.useState([]),[u,x]=f.useState([]),[p,b]=f.useState(""),[g,h]=f.useState(""),[v,w]=f.useState("academic"),[A,T]=f.useState("current_term"),[M,R]=f.useState(null),[C,y]=f.useState(!1);f.useEffect(()=>{k()},[]),f.useEffect(()=>{p&&_()},[p]);const k=async()=>{try{i(!0);const q=(await $.get(`http://localhost/McSMS/backend/api/teachers.php?user_id=${n.id}`)).data.teachers||[];if(q.length===0){console.error("No teacher record found"),i(!1);return}const Z=q[0].id,W=await $.get(`http://localhost/McSMS/backend/api/classes.php?teacher_id=${Z}`);m(W.data.classes||[])}catch(U){console.error("Error fetching data:",U)}finally{i(!1)}},_=async()=>{try{const U=await $.get(`http://localhost/McSMS/backend/api/students.php?class_id=${p}`);x(U.data.students||[])}catch(U){console.error("Error fetching students:",U)}},G=async()=>{if(!p||!g){alert("Please select both class and student");return}try{i(!0);const q=(await $.get(`http://localhost/McSMS/backend/api/students.php?id=${g}`)).data.student,W=(await $.get(`http://localhost/McSMS/backend/api/classes.php?id=${p}`)).data.class;let ie={};if(v==="academic"||v==="comprehensive"){const O=(await $.get(`http://localhost/McSMS/backend/api/academic.php?resource=homework&class_id=${p}`)).data.homework||[],xe=((await $.get("http://localhost/McSMS/backend/api/academic.php?resource=assessments")).data.assessments||[]).filter(Q=>Q.class_id==p);ie={homework:O,assessments:xe,totalHomework:O.length,completedHomework:Math.floor(O.length*.8),averageGrade:85,attendance:92}}(v==="attendance"||v==="comprehensive")&&(ie.attendanceDetails={present:88,absent:5,late:3,excused:4,total:100,percentage:92}),(v==="behavior"||v==="comprehensive")&&(ie.behavior={conduct:"Excellent",participation:"Very Good",punctuality:"Good",incidents:0,commendations:3}),R({student:q,class:W,...ie,generatedDate:new Date().toLocaleDateString(),term:"Term 1, 2024/2025",reportType:v}),y(!0)}catch(U){console.error("Error generating report:",U),alert("Failed to generate report")}finally{i(!1)}},z=()=>{window.print()},N=()=>{alert("Download functionality will be implemented with PDF generation")},E=[{value:"academic",label:"Academic Performance",icon:qe},{value:"attendance",label:"Attendance Report",icon:Ue},{value:"behavior",label:"Behavior Report",icon:dt},{value:"comprehensive",label:"Comprehensive Report",icon:Be}],S=[{value:"current_term",label:"Current Term"},{value:"previous_term",label:"Previous Term"},{value:"current_year",label:"Current Academic Year"},{value:"custom",label:"Custom Date Range"}];return r&&!C?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Student Reports"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Generate comprehensive reports for your students"})]}),C&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:z,className:"btn bg-gray-600 hover:bg-gray-700 text-white",children:[e.jsx(jc,{className:"w-4 h-4"}),"Print"]}),e.jsxs("button",{onClick:N,className:"btn bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(At,{className:"w-4 h-4"}),"Download PDF"]})]})]}),C?e.jsxs("div",{className:"card p-8 print:shadow-none",id:"report-content",children:[e.jsxs("div",{className:"text-center mb-8 pb-6 border-b-2 border-gray-300",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:[M.reportType==="academic"&&"Academic Performance Report",M.reportType==="attendance"&&"Attendance Report",M.reportType==="behavior"&&"Behavior Report",M.reportType==="comprehensive"&&"Comprehensive Student Report"]}),e.jsx("p",{className:"text-gray-600",children:M.term}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Generated on: ",M.generatedDate]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-blue-600",children:"Student Information"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Student Name"}),e.jsxs("p",{className:"font-semibold",children:[M.student.first_name," ",M.student.last_name]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Student ID"}),e.jsx("p",{className:"font-semibold",children:M.student.student_id})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Class"}),e.jsx("p",{className:"font-semibold",children:M.class.class_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Gender"}),e.jsx("p",{className:"font-semibold",children:M.student.gender})]})]})]}),(M.reportType==="academic"||M.reportType==="comprehensive")&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-blue-600",children:"Academic Performance"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(dt,{className:"w-5 h-5 text-green-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Average Grade"})]}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[M.averageGrade,"%"]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(qe,{className:"w-5 h-5 text-blue-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Homework Completion"})]}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[M.completedHomework,"/",M.totalHomework]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(We,{className:"w-5 h-5 text-purple-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Assessments"})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:M.assessments.length})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ue,{className:"w-5 h-5 text-orange-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Attendance"})]}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[M.attendance,"%"]})]})]}),M.homework.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Homework Assignments"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Title"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Subject"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Due Date"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y",children:M.homework.slice(0,5).map((U,q)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-sm",children:U.title}),e.jsx("td",{className:"px-4 py-2 text-sm",children:U.subject_name}),e.jsx("td",{className:"px-4 py-2 text-sm",children:new Date(U.due_date).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-700",children:"Completed"})})]},q))})]})})]})]}),(M.reportType==="attendance"||M.reportType==="comprehensive")&&M.attendanceDetails&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-blue-600",children:"Attendance Record"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Se,{className:"w-5 h-5 text-gray-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Days"})]}),e.jsx("p",{className:"text-2xl font-bold",children:M.attendanceDetails.total})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(he,{className:"w-5 h-5 text-green-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Present"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:M.attendanceDetails.present})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(cs,{className:"w-5 h-5 text-red-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Absent"})]}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:M.attendanceDetails.absent})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(at,{className:"w-5 h-5 text-orange-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Late"})]}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:M.attendanceDetails.late})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(dt,{className:"w-5 h-5 text-blue-600"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Excused"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:M.attendanceDetails.excused})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Attendance Percentage"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-4",children:e.jsx("div",{className:"bg-blue-600 h-4 rounded-full",style:{width:`${M.attendanceDetails.percentage}%`}})}),e.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:[M.attendanceDetails.percentage,"%"]})]})]})]}),(M.reportType==="behavior"||M.reportType==="comprehensive")&&M.behavior&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-blue-600",children:"Behavior & Conduct"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Conduct"}),e.jsx("p",{className:"text-lg font-semibold text-green-600",children:M.behavior.conduct})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Participation"}),e.jsx("p",{className:"text-lg font-semibold text-blue-600",children:M.behavior.participation})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Punctuality"}),e.jsx("p",{className:"text-lg font-semibold text-purple-600",children:M.behavior.punctuality})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Incidents"}),e.jsx("p",{className:"text-lg font-semibold text-red-600",children:M.behavior.incidents})]}),e.jsxs("div",{className:"border p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Commendations"}),e.jsx("p",{className:"text-lg font-semibold text-green-600",children:M.behavior.commendations})]})]})]}),e.jsx("div",{className:"mt-12 pt-6 border-t-2 border-gray-300",children:e.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Class Teacher"}),e.jsxs("div",{className:"border-t-2 border-gray-400 pt-2 mt-8",children:[e.jsxs("p",{className:"font-semibold",children:[n.first_name," ",n.last_name]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Signature"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Head Teacher"}),e.jsxs("div",{className:"border-t-2 border-gray-400 pt-2 mt-8",children:[e.jsx("p",{className:"font-semibold",children:"_____________________"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Signature"})]})]})]})}),e.jsxs("div",{className:"mt-8 flex justify-center gap-4 print:hidden",children:[e.jsx("button",{onClick:()=>y(!1),className:"btn bg-gray-600 hover:bg-gray-700 text-white",children:"Back to Configuration"}),e.jsxs("button",{onClick:z,className:"btn bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(jc,{className:"w-4 h-4"}),"Print Report"]}),e.jsxs("button",{onClick:N,className:"btn bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(At,{className:"w-4 h-4"}),"Download PDF"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(dn,{className:"w-5 h-5 text-blue-600"}),"Report Configuration"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Class *"}),e.jsxs("select",{value:p,onChange:U=>{b(U.target.value),h("")},className:"input",children:[e.jsx("option",{value:"",children:"Choose a class"}),d.map(U=>e.jsx("option",{value:U.id,children:U.class_name},U.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Student *"}),e.jsxs("select",{value:g,onChange:U=>h(U.target.value),className:"input",disabled:!p,children:[e.jsx("option",{value:"",children:"Choose a student"}),u.map(U=>e.jsxs("option",{value:U.id,children:[U.first_name," ",U.last_name," (",U.student_id,")"]},U.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Type *"}),e.jsx("select",{value:v,onChange:U=>w(U.target.value),className:"input",children:E.map(U=>e.jsx("option",{value:U.value,children:U.label},U.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range *"}),e.jsx("select",{value:A,onChange:U=>T(U.target.value),className:"input",children:S.map(U=>e.jsx("option",{value:U.value,children:U.label},U.value))})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsxs("button",{onClick:G,disabled:!p||!g||r,className:"btn btn-primary",children:[e.jsx(os,{className:"w-4 h-4"}),"Generate Report"]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:E.map(U=>{const q=U.icon;return e.jsxs("div",{onClick:()=>w(U.value),className:`card p-6 cursor-pointer transition-all ${v===U.value?"border-2 border-blue-500 bg-blue-50":"hover:shadow-lg"}`,children:[e.jsx(q,{className:`w-8 h-8 mb-3 ${v===U.value?"text-blue-600":"text-gray-600"}`}),e.jsx("h3",{className:"font-semibold text-gray-900",children:U.label}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[U.value==="academic"&&"Grades, homework, and assessments",U.value==="attendance"&&"Attendance records and statistics",U.value==="behavior"&&"Conduct and participation",U.value==="comprehensive"&&"Complete student overview"]})]},U.value)})})]})]})}function M6(){const n=ft(),{user:r}=Ze(),[i,d]=f.useState(1),[m,u]=f.useState(!1),[x,p]=f.useState(null),[b,g]=f.useState(!1),[h,v]=f.useState(""),[w,A]=f.useState({first_name:"",last_name:"",other_names:"",date_of_birth:"",gender:"male",blood_group:"",nationality:"Ghanaian",religion:"",email:"",phone:"",address:"",city:"",region:"",previous_school:"",class_applying_for:"",academic_year:new Date().getFullYear()+"/"+(new Date().getFullYear()+1),guardian_name:r?.name||"",guardian_phone:r?.phone||"",guardian_email:r?.email||"",guardian_relationship:"",guardian_address:"",guardian_occupation:"",emergency_contact_name:"",emergency_contact_phone:"",emergency_contact_relationship:"",medical_conditions:"",allergies:"",medications:"",photo:null}),T=async y=>{const k=y.target.files[0];if(!k)return;if(!k.type.startsWith("image/")){alert("Please select an image file");return}if(k.size>5*1024*1024){alert("File size must be less than 5MB");return}const _=new FileReader;_.onloadend=()=>{p(_.result)},_.readAsDataURL(k);try{u(!0);const G=new FormData;G.append("photo",k);const z=await bs.uploadPhoto(G);A(N=>({...N,photo:z.data.url})),alert("Photo uploaded successfully!")}catch(G){console.error("Error uploading photo:",G),alert("Failed to upload photo"),p(null)}finally{u(!1)}},M=async y=>{y.preventDefault();try{const k=await uc.create({...w,parent_id:r.id});v(k.data.application_number),g(!0)}catch(k){console.error("Error submitting application:",k),alert("Failed to submit application: "+(k.response?.data?.error||k.message))}},R=()=>{i<4&&d(i+1)},C=()=>{i>1&&d(i-1)};return b?e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"card p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(he,{className:"w-10 h-10 text-green-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Application Submitted!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your application has been successfully submitted and is now under review."}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Application Number"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 font-mono",children:h}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Please save this number for tracking"})]}),e.jsxs("div",{className:"space-y-3 text-left bg-gray-50 p-6 rounded-lg mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"What's Next?"}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm flex-shrink-0",children:"1"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Our admissions team will review your application"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm flex-shrink-0",children:"2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"You'll receive a notification within 2-3 business days"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm flex-shrink-0",children:"3"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Track your application status in your dashboard"})]})]}),e.jsx("button",{onClick:()=>n("/parent/dashboard"),className:"btn btn-primary",children:"Go to Dashboard"})]})}):e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>n("/parent/dashboard"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(dl,{className:"w-4 h-4"}),"Back to Dashboard"]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Apply for Admission"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Fill in your child's information to submit an application"})]}),e.jsxs("div",{className:"card p-6 mb-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:[1,2,3,4].map(y=>e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold ${i>=y?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:y}),y<4&&e.jsx("div",{className:`flex-1 h-1 mx-2 ${i>y?"bg-blue-600":"bg-gray-200"}`})]},y))}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Student Info"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Guardian Info"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Medical Info"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Photo & Review"})]})]}),e.jsx("form",{onSubmit:M,children:e.jsxs("div",{className:"card p-6",children:[i===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Student Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),e.jsx("input",{type:"text",required:!0,value:w.first_name,onChange:y=>A({...w,first_name:y.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",required:!0,value:w.last_name,onChange:y=>A({...w,last_name:y.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Other Names"}),e.jsx("input",{type:"text",value:w.other_names,onChange:y=>A({...w,other_names:y.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth *"}),e.jsx("input",{type:"date",required:!0,value:w.date_of_birth,onChange:y=>A({...w,date_of_birth:y.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gender *"}),e.jsxs("select",{required:!0,value:w.gender,onChange:y=>A({...w,gender:y.target.value}),className:"input",children:[e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blood Group"}),e.jsx("input",{type:"text",value:w.blood_group,onChange:y=>A({...w,blood_group:y.target.value}),className:"input",placeholder:"e.g., O+"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nationality"}),e.jsx("input",{type:"text",value:w.nationality,onChange:y=>A({...w,nationality:y.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Religion"}),e.jsx("input",{type:"text",value:w.religion,onChange:y=>A({...w,religion:y.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:w.email,onChange:y=>A({...w,email:y.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx("input",{type:"tel",value:w.phone,onChange:y=>A({...w,phone:y.target.value}),className:"input"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsx("textarea",{value:w.address,onChange:y=>A({...w,address:y.target.value}),className:"input",rows:"2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Previous School"}),e.jsx("input",{type:"text",value:w.previous_school,onChange:y=>A({...w,previous_school:y.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Class Applying For"}),e.jsxs("select",{value:w.class_applying_for,onChange:y=>A({...w,class_applying_for:y.target.value}),className:"input",children:[e.jsx("option",{value:"",children:"Select Class"}),e.jsx("option",{value:"Form 1",children:"Form 1"}),e.jsx("option",{value:"Form 2",children:"Form 2"}),e.jsx("option",{value:"Form 3",children:"Form 3"})]})]})]})]}),i===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Guardian Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Guardian Name *"}),e.jsx("input",{type:"text",required:!0,value:w.guardian_name,onChange:y=>A({...w,guardian_name:y.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Guardian Phone *"}),e.jsx("input",{type:"tel",required:!0,value:w.guardian_phone,onChange:y=>A({...w,guardian_phone:y.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Guardian Email *"}),e.jsx("input",{type:"email",required:!0,value:w.guardian_email,onChange:y=>A({...w,guardian_email:y.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Relationship"}),e.jsxs("select",{value:w.guardian_relationship,onChange:y=>A({...w,guardian_relationship:y.target.value}),className:"input",children:[e.jsx("option",{value:"",children:"Select Relationship"}),e.jsx("option",{value:"Father",children:"Father"}),e.jsx("option",{value:"Mother",children:"Mother"}),e.jsx("option",{value:"Guardian",children:"Guardian"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Occupation"}),e.jsx("input",{type:"text",value:w.guardian_occupation,onChange:y=>A({...w,guardian_occupation:y.target.value}),className:"input"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Guardian Address"}),e.jsx("textarea",{value:w.guardian_address,onChange:y=>A({...w,guardian_address:y.target.value}),className:"input",rows:"2"})]})]}),e.jsx("h3",{className:"text-md font-semibold text-gray-900 mt-6 mb-4",children:"Emergency Contact"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Emergency Contact Name"}),e.jsx("input",{type:"text",value:w.emergency_contact_name,onChange:y=>A({...w,emergency_contact_name:y.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Emergency Contact Phone"}),e.jsx("input",{type:"tel",value:w.emergency_contact_phone,onChange:y=>A({...w,emergency_contact_phone:y.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Relationship"}),e.jsx("input",{type:"text",value:w.emergency_contact_relationship,onChange:y=>A({...w,emergency_contact_relationship:y.target.value}),className:"input"})]})]})]}),i===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Medical Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medical Conditions"}),e.jsx("textarea",{value:w.medical_conditions,onChange:y=>A({...w,medical_conditions:y.target.value}),className:"input",rows:"3",placeholder:"List any medical conditions..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Allergies"}),e.jsx("textarea",{value:w.allergies,onChange:y=>A({...w,allergies:y.target.value}),className:"input",rows:"3",placeholder:"List any allergies..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Medications"}),e.jsx("textarea",{value:w.medications,onChange:y=>A({...w,medications:y.target.value}),className:"input",rows:"3",placeholder:"List any current medications..."})]})]})]}),i===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Student Photo"}),e.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8",children:x?e.jsxs("div",{className:"text-center",children:[e.jsx("img",{src:x,alt:"Preview",className:"w-48 h-48 object-cover rounded-lg mx-auto mb-4"}),e.jsxs("button",{type:"button",onClick:()=>{p(null),A({...w,photo:null})},className:"text-red-600 hover:text-red-700 text-sm flex items-center gap-2 mx-auto",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Remove Photo"]})]}):e.jsxs("div",{className:"text-center",children:[e.jsx(Es,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("span",{className:"btn btn-primary",children:m?"Uploading...":"Upload Photo"}),e.jsx("input",{type:"file",accept:"image/*",onChange:T,className:"hidden",disabled:m})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"JPG, PNG or GIF (max 5MB)"})]})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Review Your Application"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Student:"})," ",w.first_name," ",w.last_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Date of Birth:"})," ",w.date_of_birth]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Guardian:"})," ",w.guardian_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Class:"})," ",w.class_applying_for||"Not specified"]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:C,disabled:i===1,className:"btn bg-gray-200 text-gray-700 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),i<4?e.jsx("button",{type:"button",onClick:R,className:"btn btn-primary",children:"Next Step"}):e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Application"})]})]})})]})}function E6(){const{studentId:n}=w0(),r=ft(),[i,d]=f.useState(null),[m,u]=f.useState([]),[x,p]=f.useState([]),[b,g]=f.useState([]),[h,v]=f.useState([]),[w,A]=f.useState(!0),[T,M]=f.useState("overview");f.useEffect(()=>{R()},[n]);const R=async()=>{try{A(!0);const[_,G,z,N]=await Promise.all([$.get(`http://localhost/McSMS/backend/api/students.php?id=${n}`),$.get(`http://localhost/McSMS/backend/api/academic.php?resource=attendance&student_id=${n}`).catch(()=>({data:{attendance:[]}})),$.get(`http://localhost/McSMS/backend/api/academic.php?resource=grades&action=by_student&student_id=${n}`).catch(()=>({data:{grades:[]}})),$.get(`http://localhost/McSMS/backend/api/academic.php?resource=homework_submissions&student_id=${n}`).catch(()=>({data:{submissions:[]}}))]);d(_.data.student),u(G.data.attendance||[]),p(z.data.grades||[]),g(N.data.submissions||[])}catch(_){console.error("Error fetching child data:",_)}finally{A(!1)}},C=_=>{const G=new Date,z=new Date(_);let N=G.getFullYear()-z.getFullYear();const E=G.getMonth()-z.getMonth();return(E<0||E===0&&G.getDate()<z.getDate())&&N--,N},y=()=>m.length===0?0:(m.filter(G=>G.status==="present").length/m.length*100).toFixed(1),k=()=>x.length===0?"N/A":(x.reduce((G,z)=>G+parseFloat(z.marks_obtained||0),0)/x.length).toFixed(1);return w?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("p",{className:"text-gray-500",children:"Loading..."})}):i?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>r("/parent/dashboard"),className:"text-gray-600 hover:text-gray-900",children:e.jsx(dl,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:[i.first_name," ",i.last_name]}),e.jsx("p",{className:"text-gray-600",children:i.student_id})]})]}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsxs("div",{className:"w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center text-3xl font-bold text-blue-600",children:[i.first_name?.charAt(0),i.last_name?.charAt(0)]}),e.jsxs("div",{className:"flex-1 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Age"}),e.jsxs("p",{className:"font-semibold",children:[C(i.date_of_birth)," years"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Class"}),e.jsx("p",{className:"font-semibold",children:i.class_name||"Not assigned"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Gender"}),e.jsx("p",{className:"font-semibold capitalize",children:i.gender})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:i.status})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(he,{className:"w-8 h-8 text-green-500"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Attendance Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[y(),"%"]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(qe,{className:"w-8 h-8 text-blue-500"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Average Grade"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k()})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(Be,{className:"w-8 h-8 text-purple-500"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Homework"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:b.length})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsx(at,{className:"w-8 h-8 text-orange-500"})}),e.jsx("p",{className:"text-sm text-gray-600",children:"Days Present"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.filter(_=>_.status==="present").length})]})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-8",children:["overview","attendance","grades","homework"].map(_=>e.jsx("button",{onClick:()=>M(_),className:`py-4 px-1 border-b-2 font-medium text-sm ${T===_?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:_.charAt(0).toUpperCase()+_.slice(1)},_))})}),T==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Personal Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Date of Birth:"}),e.jsx("span",{className:"font-medium",children:new Date(i.date_of_birth).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Blood Group:"}),e.jsx("span",{className:"font-medium",children:i.blood_group||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Nationality:"}),e.jsx("span",{className:"font-medium",children:i.nationality})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Guardian Information"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Name:"}),e.jsx("span",{className:"font-medium",children:i.guardian_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Phone:"}),e.jsx("span",{className:"font-medium",children:i.guardian_phone})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Email:"}),e.jsx("span",{className:"font-medium",children:i.guardian_email})]})]})]})]}),T==="attendance"&&e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Attendance Records"}),m.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No attendance records"}):e.jsx("div",{className:"space-y-2",children:m.slice(0,10).map((_,G)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm",children:new Date(_.date).toLocaleDateString()}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${_.status==="present"?"bg-green-100 text-green-700":_.status==="absent"?"bg-red-100 text-red-700":_.status==="late"?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:_.status})]},G))})]}),T==="grades"&&e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Academic Performance"}),x.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No grades recorded"}):e.jsx("div",{className:"space-y-3",children:x.map((_,G)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:_.assessment_name}),e.jsx("p",{className:"text-sm text-gray-600",children:_.subject_name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-lg font-bold text-blue-600",children:_.grade}),e.jsxs("p",{className:"text-sm text-gray-600",children:[_.marks_obtained,"/",_.total_marks]})]})]},G))})]}),T==="homework"&&e.jsxs("div",{className:"card p-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Homework Submissions"}),b.length===0?e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No homework submissions"}):e.jsx("div",{className:"space-y-3",children:b.map((_,G)=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["Homework #",_.homework_id]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Submitted: ",_.submitted_at?new Date(_.submitted_at).toLocaleDateString():"Not submitted"]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${_.status==="graded"?"bg-green-100 text-green-700":_.status==="submitted"?"bg-blue-100 text-blue-700":_.status==="late"?"bg-red-100 text-red-700":"bg-orange-100 text-orange-700"}`,children:_.status})]}),_.status==="graded"&&e.jsxs("div",{className:"bg-green-50 p-3 rounded mt-2",children:[e.jsxs("p",{className:"text-sm font-semibold text-green-700",children:["Score: ",_.marks_obtained]}),_.feedback&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:_.feedback})]})]},G))})]})]}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Student not found"})})}function T6(){const n=ft(),{user:r}=Ze(),[i,d]=f.useState(1),[m,u]=f.useState([]),[x,p]=f.useState([]),[b,g]=f.useState([]),[h,v]=f.useState([]),[w,A]=f.useState(!1),[T,M]=f.useState({student_id:"",term_id:"",selected_optional_items:[],installment_plan_id:"",total_amount:0});f.useEffect(()=>{R()},[]);const R=async()=>{try{const[S,U,q,Z]=await Promise.all([bs.getAll({parent_id:r.id}),Jl.getAll(),Kl.getAll(),pt.getInstallmentPlans()]);u(S.data.students||[]),p(U.data.terms||[]),g(q.data.fee_items||[]),v(Z.data.installment_plans||[])}catch(S){console.error("Error fetching data:",S)}},C=b.filter(S=>S.is_optional==0),y=b.filter(S=>S.is_optional==1),k=()=>{let S=0;return C.forEach(U=>{S+=100}),T.selected_optional_items.forEach(U=>{S+=100}),S},_=S=>{M(U=>({...U,selected_optional_items:U.selected_optional_items.includes(S)?U.selected_optional_items.filter(q=>q!==S):[...U.selected_optional_items,S]}))},G=async()=>{try{A(!0);const S={student_id:T.student_id,parent_id:r.id,term_id:T.term_id,class_id:1,academic_year:"2024/2025",total_amount:k(),installment_plan_id:T.installment_plan_id,status:"pending_finance",items:[...C.map(U=>({fee_item_id:U.id,description:U.item_name,quantity:1,unit_price:100,amount:100,is_optional:0})),...y.filter(U=>T.selected_optional_items.includes(U.id)).map(U=>({fee_item_id:U.id,description:U.item_name,quantity:1,unit_price:100,amount:100,is_optional:1}))]};await pt.createInvoice(S),alert("Enrollment submitted successfully! Your invoice has been sent for approval."),n("/parent/dashboard")}catch(S){console.error("Error submitting enrollment:",S),alert("Failed to submit enrollment")}finally{A(!1)}},z=m.find(S=>S.id==T.student_id),N=x.find(S=>S.id==T.term_id),E=h.find(S=>S.id==T.installment_plan_id);return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Term Enrollment"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Enroll your child for the new term"})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:[1,2,3,4].map(S=>e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold ${i>=S?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:S}),S<4&&e.jsx("div",{className:`flex-1 h-1 mx-2 ${i>S?"bg-blue-600":"bg-gray-200"}`})]},S))}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Select Child"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Select Term"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Optional Services"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Payment Plan"})]})]}),e.jsxs("div",{className:"card p-6",children:[i===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Select Child"}),m.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No children found"}):e.jsx("div",{className:"space-y-3",children:m.map(S=>e.jsx("button",{onClick:()=>M({...T,student_id:S.id}),className:`w-full p-4 border-2 rounded-lg text-left transition-all ${T.student_id==S.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-blue-600 font-semibold",children:[S.first_name?.charAt(0),S.last_name?.charAt(0)]})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:[S.first_name," ",S.last_name]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[S.student_id," - ",S.class_name]})]})]})},S.id))})]}),i===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Select Term"}),e.jsx("div",{className:"space-y-3",children:x.map(S=>e.jsx("button",{onClick:()=>M({...T,term_id:S.id}),className:`w-full p-4 border-2 rounded-lg text-left ${T.term_id==S.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:S.term_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[new Date(S.start_date).toLocaleDateString()," - ",new Date(S.end_date).toLocaleDateString()]})]}),S.is_active==1&&e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:"Active"})]})},S.id))})]}),i===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Mandatory Fees"}),e.jsx("div",{className:"space-y-2",children:C.slice(0,5).map(S=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[e.jsx("span",{className:"text-sm",children:S.item_name}),e.jsx("span",{className:"font-semibold text-green-600",children:"GHS 100.00"})]},S.id))}),e.jsx("h2",{className:"text-lg font-semibold mt-6",children:"Optional Services"}),e.jsx("div",{className:"space-y-2",children:y.map(S=>e.jsxs("label",{className:"flex items-center justify-between p-3 border rounded cursor-pointer hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"checkbox",checked:T.selected_optional_items.includes(S.id),onChange:()=>_(S.id),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:S.item_name})]}),e.jsx("span",{className:"font-semibold text-blue-600",children:"GHS 100.00"})]},S.id))})]}),i===4&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Select Payment Plan"}),e.jsx("div",{className:"space-y-3",children:h.map(S=>e.jsxs("button",{onClick:()=>M({...T,installment_plan_id:S.id}),className:`w-full p-4 border-2 rounded-lg text-left ${T.installment_plan_id==S.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"font-medium",children:S.plan_name}),S.is_default==1&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full",children:"Recommended"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:S.description})]},S.id))}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Enrollment Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Student:"}),e.jsxs("span",{className:"font-medium",children:[z?.first_name," ",z?.last_name]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Term:"}),e.jsx("span",{className:"font-medium",children:N?.term_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Payment Plan:"}),e.jsx("span",{className:"font-medium",children:E?.plan_name})]}),e.jsxs("div",{className:"flex justify-between pt-2 border-t",children:[e.jsx("span",{className:"font-semibold",children:"Total Amount:"}),e.jsxs("span",{className:"font-bold text-lg text-blue-600",children:["GHS ",k().toFixed(2)]})]})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t",children:[e.jsx("button",{onClick:()=>d(i-1),disabled:i===1,className:"btn bg-gray-200 text-gray-700 disabled:opacity-50",children:"Previous"}),i<4?e.jsxs("button",{onClick:()=>d(i+1),disabled:i===1&&!T.student_id||i===2&&!T.term_id,className:"btn btn-primary flex items-center gap-2 disabled:opacity-50",children:["Next ",e.jsx(en,{className:"w-4 h-4"})]}):e.jsxs("button",{onClick:G,disabled:w||!T.installment_plan_id,className:"btn btn-primary flex items-center gap-2 disabled:opacity-50",children:[e.jsx(he,{className:"w-5 h-5"}),w?"Submitting...":"Submit Enrollment"]})]})]})]})}function D6(n,r){let i;try{i=n()}catch{return}return{getItem:m=>{var u;const x=b=>b===null?null:JSON.parse(b,void 0),p=(u=i.getItem(m))!=null?u:null;return p instanceof Promise?p.then(x):x(p)},setItem:(m,u)=>i.setItem(m,JSON.stringify(u,void 0)),removeItem:m=>i.removeItem(m)}}const bm=n=>r=>{try{const i=n(r);return i instanceof Promise?i:{then(d){return bm(d)(i)},catch(d){return this}}}catch(i){return{then(d){return this},catch(d){return bm(d)(i)}}}},R6=(n,r)=>(i,d,m)=>{let u={storage:D6(()=>localStorage),partialize:M=>M,version:0,merge:(M,R)=>({...R,...M}),...r},x=!1;const p=new Set,b=new Set;let g=u.storage;if(!g)return n((...M)=>{console.warn(`[zustand persist middleware] Unable to update item '${u.name}', the given storage is currently unavailable.`),i(...M)},d,m);const h=()=>{const M=u.partialize({...d()});return g.setItem(u.name,{state:M,version:u.version})},v=m.setState;m.setState=(M,R)=>(v(M,R),h());const w=n((...M)=>(i(...M),h()),d,m);m.getInitialState=()=>w;let A;const T=()=>{var M,R;if(!g)return;x=!1,p.forEach(y=>{var k;return y((k=d())!=null?k:w)});const C=((R=u.onRehydrateStorage)==null?void 0:R.call(u,(M=d())!=null?M:w))||void 0;return bm(g.getItem.bind(g))(u.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==u.version){if(u.migrate){const k=u.migrate(y.state,y.version);return k instanceof Promise?k.then(_=>[!0,_]):[!0,k]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var k;const[_,G]=y;if(A=u.merge(G,(k=d())!=null?k:w),i(A,!0),_)return h()}).then(()=>{C?.(A,void 0),A=d(),x=!0,b.forEach(y=>y(A))}).catch(y=>{C?.(void 0,y)})};return m.persist={setOptions:M=>{u={...u,...M},M.storage&&(g=M.storage)},clearStorage:()=>{g?.removeItem(u.name)},getOptions:()=>u,rehydrate:()=>T(),hasHydrated:()=>x,onHydrate:M=>(p.add(M),()=>{p.delete(M)}),onFinishHydration:M=>(b.add(M),()=>{b.delete(M)})},u.skipHydration||T(),A||w},mf=R6,uf=km(mf((n,r)=>({invoicePayments:{},recordPayment:(i,d,m="wallet")=>{n(u=>{const x=u.invoicePayments[i]||{paidAmount:0,payments:[]},p=x.paidAmount+parseFloat(d);return{invoicePayments:{...u.invoicePayments,[i]:{paidAmount:p,payments:[{id:Date.now(),amount:parseFloat(d),method:m,date:new Date().toISOString(),reference:`PAY-${Date.now()}`},...x.payments]}}}})},getInvoicePayment:i=>r().invoicePayments[i]||{paidAmount:0,payments:[]},getPaidAmount:i=>{const d=r().invoicePayments[i];return d?d.paidAmount:0},isFullyPaid:(i,d)=>r().getPaidAmount(i)>=parseFloat(d),getInvoiceStatus:(i,d,m=0)=>{const u=r().getPaidAmount(i),x=parseFloat(m)+u;return parseFloat(d)-x<=0?"paid":x>0?"partial":"pending"},reset:()=>n({invoicePayments:{}})}),{name:"invoice-payments-storage",getStorage:()=>localStorage}));function z6(){const n=ft(),r=xs(),{user:i}=Ze(),{getPaidAmount:d,getInvoiceStatus:m}=uf(),[u,x]=f.useState(!0),[p,b]=f.useState([]),[g,h]=f.useState([]),[v,w]=f.useState("all"),[A,T]=f.useState("all"),[M,R]=f.useState(null),[C,y]=f.useState(!1);f.useEffect(()=>{if(k(),r.state?.paymentSuccess){const{paidInvoiceId:Z,paidAmount:W}=r.state;b(ie=>ie.map(F=>{if(F.id===Z){const O=parseFloat(F.paid_amount||0)+parseFloat(W),P=parseFloat(F.total_amount)-O,re=P<=0?"paid":"partial";return{...F,paid_amount:O,balance:P,status:re}}return F})),window.history.replaceState({},document.title)}},[r]);const k=async()=>{try{x(!0);const W=(await $.get(`http://localhost/McSMS/backend/api/students.php?parent_id=${i.id}`)).data.students||[];h(W);const ie=[];for(const F of W){const P=((await $.get(`http://localhost/McSMS/backend/api/finance.php?resource=invoices&student_id=${F.id}`)).data.invoices||[]).map(re=>{const xe=d(re.id),Q=parseFloat(re.paid_amount||0),H=Q+xe,te=parseFloat(re.total_amount),ce=te-H,ue=m(re.id,te,Q);return{...re,paid_amount:H,balance:ce,status:ue,student_name:`${F.first_name} ${F.last_name}`,student_id:F.id}});ie.push(...P)}b(ie)}catch(Z){console.error("Error fetching data:",Z)}finally{x(!1)}},_=p.filter(Z=>{const W=v==="all"||Z.student_id==v,ie=A==="all"||Z.status===A;return W&&ie});_.reduce((Z,W)=>Z+parseFloat(W.total_amount||0),0);const G=_.filter(Z=>Z.status==="paid").reduce((Z,W)=>Z+parseFloat(W.total_amount||0),0),z=_.filter(Z=>Z.status!=="paid").reduce((Z,W)=>Z+parseFloat(W.balance||0),0),N=Z=>{const W={paid:"bg-green-100 text-green-700 border-green-300",partial:"bg-blue-100 text-blue-700 border-blue-300",pending_payment:"bg-orange-100 text-orange-700 border-orange-300",approved:"bg-yellow-100 text-yellow-700 border-yellow-300",pending_approval:"bg-gray-100 text-gray-700 border-gray-300"};return W[Z]||W.pending_approval},E=Z=>Z==="paid"?he:Z==="partial"?at:jt,S=Z=>{R(Z),y(!0)},U=Z=>{n("/parent/payments",{state:{invoice:Z}})},q=Z=>{if(!Z||Z==="0000-00-00"||Z==="null")return"N/A";try{const W=new Date(Z);return isNaN(W.getTime())?"N/A":W.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}};return u?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Invoices"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"View and pay your children's school fees"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Be,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Invoices"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.length})]})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(he,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Paid"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["",G.toLocaleString()]})]})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(jt,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pending"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["",z.toLocaleString()]})]})]})})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(dn,{className:"w-5 h-5 text-gray-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Filters"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Child"}),e.jsxs("select",{value:v,onChange:Z=>w(Z.target.value),className:"input",children:[e.jsx("option",{value:"all",children:"All Children"}),g.map(Z=>e.jsxs("option",{value:Z.id,children:[Z.first_name," ",Z.last_name]},Z.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsxs("select",{value:A,onChange:Z=>T(Z.target.value),className:"input",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"partial",children:"Partially Paid"}),e.jsx("option",{value:"pending_payment",children:"Pending Payment"}),e.jsx("option",{value:"approved",children:"Approved"})]})]})]})]}),e.jsx("div",{className:"card overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Invoice #"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Child"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Term"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Paid"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Balance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Due Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",children:_.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"px-6 py-12 text-center text-gray-500",children:"No invoices found"})}):_.map((Z,W)=>{const ie=E(Z.status);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 font-mono text-sm",children:Z.invoice_number}),e.jsx("td",{className:"px-6 py-4",children:Z.student_name}),e.jsx("td",{className:"px-6 py-4",children:Z.term_name}),e.jsxs("td",{className:"px-6 py-4 font-semibold",children:["",parseFloat(Z.total_amount).toLocaleString()]}),e.jsxs("td",{className:"px-6 py-4 text-green-600",children:["",parseFloat(Z.paid_amount||0).toLocaleString()]}),e.jsxs("td",{className:"px-6 py-4 text-orange-600 font-semibold",children:["",parseFloat(Z.balance||0).toLocaleString()]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`px-3 py-1 text-xs font-medium rounded-full border ${N(Z.status)}`,children:[e.jsx(ie,{className:"w-3 h-3 inline mr-1"}),Z.status.replace("_"," ")]})}),e.jsx("td",{className:"px-6 py-4",children:q(Z.due_date)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>S(Z),className:"btn bg-gray-200 hover:bg-gray-300 text-sm",children:e.jsx(os,{className:"w-4 h-4"})}),Z.status!=="paid"&&parseFloat(Z.balance)>0&&e.jsxs("button",{onClick:()=>U(Z),className:"btn btn-primary text-sm",children:[e.jsx(_t,{className:"w-4 h-4"}),"Pay"]})]})})]},`invoice-${Z.id}-${W}`)})})]})})}),C&&M&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Invoice Details"}),e.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Invoice Number"}),e.jsx("p",{className:"font-semibold",children:M.invoice_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full border ${N(M.status)}`,children:M.status.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Student"}),e.jsx("p",{className:"font-semibold",children:M.student_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Term"}),e.jsx("p",{className:"font-semibold",children:M.term_name})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Amount Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Amount:"}),e.jsxs("span",{className:"font-semibold",children:["",parseFloat(M.total_amount).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Paid Amount:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["",parseFloat(M.paid_amount||0).toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-lg",children:[e.jsx("span",{className:"font-semibold",children:"Balance:"}),e.jsxs("span",{className:"font-bold text-orange-600",children:["",parseFloat(M.balance||0).toLocaleString()]})]})]})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Issue Date"}),e.jsx("p",{className:"font-semibold",children:q(M.issue_date)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Due Date"}),e.jsx("p",{className:"font-semibold",children:q(M.due_date)})]})]})})]}),e.jsxs("div",{className:"p-6 border-t bg-gray-50 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>y(!1),className:"btn bg-gray-200 hover:bg-gray-300",children:"Close"}),M.status!=="paid"&&parseFloat(M.balance)>0&&e.jsxs("button",{onClick:()=>{y(!1),U(M)},className:"btn btn-primary",children:[e.jsx(_t,{className:"w-4 h-4"}),"Make Payment"]})]})]})})]})}const L6=km(mf((n,r)=>({balance:5e3,transactions:[],setBalance:i=>n({balance:i}),addFunds:i=>n(d=>{const m=d.balance+parseFloat(i);return{balance:m,transactions:[{id:Date.now(),type:"credit",amount:parseFloat(i),description:"Wallet Top-up",reference:`TOP-${Date.now()}`,date:new Date().toISOString(),balanceBefore:d.balance,balanceAfter:m},...d.transactions]}}),deductFunds:(i,d="Payment")=>r().balance<parseFloat(i)?!1:(n(u=>{const x=u.balance-parseFloat(i);return{balance:x,transactions:[{id:Date.now(),type:"debit",amount:parseFloat(i),description:d,reference:`PAY-${Date.now()}`,date:new Date().toISOString(),balanceBefore:u.balance,balanceAfter:x},...u.transactions]}}),!0),getTransactions:()=>r().transactions,reset:()=>n({balance:5e3,transactions:[]})}),{name:"wallet-storage",getStorage:()=>localStorage}));function O6(){const n=xs(),r=ft(),{user:i}=Ze(),{balance:d,addFunds:m,deductFunds:u,transactions:x}=L6(),{recordPayment:p}=uf(),[b,g]=f.useState(!1),[h,v]=f.useState([]),[w,A]=f.useState(!1),[T,M]=f.useState(!1),[R,C]=f.useState("wallet"),[y,k]=f.useState(""),[_,G]=f.useState(""),[z,N]=f.useState(null),[E,S]=f.useState(!1);f.useEffect(()=>{U(),n.state?.invoice&&(N(n.state.invoice),k(n.state.invoice.balance),A(!0))},[n]);const U=async()=>{try{g(!0),v(x)}catch(O){console.error("Error fetching wallet data:",O)}finally{g(!1)}},q=async O=>{try{S(!0),await new Promise(re=>setTimeout(re,2e3));const P=`PAY-${Date.now()}`;z?(p(z.id,O,"hubtel"),alert(`Demo: Payment of ${O} for Invoice ${z.invoice_number} successful!
Reference: ${P}`),A(!1),r("/parent/invoices",{state:{paymentSuccess:!0,paidInvoiceId:z.id,paidAmount:O}})):(m(O),alert(`Demo: Wallet topped up with ${O} successfully!
Reference: ${P}
New Balance: ${(d+parseFloat(O)).toLocaleString()}

Note: In production, this will redirect to Hubtel payment gateway.`),M(!1),G(""),U())}catch(P){console.error("Error initiating payment:",P),alert("Payment initiation failed. Please try again.")}finally{S(!1)}},Z=async()=>{if(!z)return;const O=parseFloat(y);if(O>d){alert("Insufficient wallet balance. Please top up your wallet first.");return}try{if(S(!0),await new Promise(Q=>setTimeout(Q,1500)),!u(O,`Payment for Invoice ${z.invoice_number}`)){alert("Insufficient wallet balance after check. Please try again.");return}p(z.id,O,"wallet");const re=d-O,xe=`WAL-${Date.now()}`;alert(`Demo: Payment successful!

Amount: ${O}
Invoice: ${z.invoice_number}
Reference: ${xe}
New Balance: ${re.toLocaleString()}`),A(!1),r("/parent/invoices",{state:{paymentSuccess:!0,paidInvoiceId:z.id,paidAmount:O}})}catch(P){console.error("Error processing payment:",P),alert("Payment processing failed. Please try again.")}finally{S(!1)}},W=async()=>{const O=parseFloat(_);if(O<10){alert("Minimum top-up amount is 10");return}await q(O)},ie=async()=>{R==="wallet"?await Z():await q(parseFloat(y))},F=[100,500,1e3,5e3,1e4];return b?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payments & Wallet"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage payments and wallet balance"})]}),e.jsxs("button",{onClick:()=>M(!0),className:"btn btn-primary",children:[e.jsx(lt,{className:"w-4 h-4"}),"Top Up Wallet"]})]}),e.jsx("div",{className:"card p-8 bg-gradient-to-br from-blue-600 to-blue-800 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(yc,{className:"w-6 h-6"}),e.jsx("p",{className:"text-blue-100",children:"Wallet Balance"})]}),e.jsxs("p",{className:"text-4xl font-bold",children:["",d.toLocaleString()]}),e.jsx("p",{className:"text-blue-100 mt-2",children:"Available for payments"})]}),e.jsx("div",{className:"text-right",children:e.jsxs("button",{onClick:()=>M(!0),className:"btn bg-white text-blue-600 hover:bg-blue-50",children:[e.jsx(lt,{className:"w-4 h-4"}),"Add Funds"]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(he,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Spent"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["",x.filter(O=>O.type==="debit").reduce((O,P)=>O+parseFloat(P.amount||0),0).toLocaleString()]})]})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Fv,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Transactions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:x.length})]})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(We,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"This Month"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["",x.filter(O=>O.type==="debit"&&new Date(O.date).getMonth()===new Date().getMonth()).reduce((O,P)=>O+parseFloat(P.amount||0),0).toLocaleString()]})]})]})})]}),e.jsxs("div",{className:"card overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h2",{className:"text-lg font-semibold",children:"Payment History"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Reference"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Method"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y",children:h.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-12 text-center text-gray-500",children:"No transaction history yet"})}):h.map(O=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:new Date(O.date).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 font-mono text-sm",children:O.reference}),e.jsx("td",{className:"px-6 py-4",children:O.description}),e.jsx("td",{className:"px-6 py-4 capitalize",children:O.type==="credit"?"Top-up":"Wallet"}),e.jsxs("td",{className:`px-6 py-4 font-semibold ${O.type==="credit"?"text-green-600":"text-red-600"}`,children:[O.type==="credit"?"+":"-","",parseFloat(O.amount).toLocaleString()]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:"px-3 py-1 text-xs font-medium rounded-full bg-green-100 text-green-700",children:[e.jsx(he,{className:"w-3 h-3 inline mr-1"}),"Completed"]})})]},O.id))})]})})]}),w&&z&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h2",{className:"text-2xl font-semibold",children:"Make Payment"})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Invoice"}),e.jsx("p",{className:"font-semibold",children:z.invoice_number}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Student"}),e.jsx("p",{className:"font-semibold",children:z.student_name}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Balance Due"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:["",parseFloat(z.balance).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Amount"}),e.jsx("input",{type:"number",value:y,onChange:O=>k(O.target.value),max:z.balance,className:"input",placeholder:"Enter amount"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"paymentMethod",value:"wallet",checked:R==="wallet",onChange:O=>C(O.target.value),className:"mr-3"}),e.jsx(yc,{className:"w-5 h-5 mr-2 text-blue-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Wallet Balance"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Available: ",d.toLocaleString()]})]})]}),e.jsxs("label",{className:"flex items-center p-4 border-2 rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"radio",name:"paymentMethod",value:"hubtel",checked:R==="hubtel",onChange:O=>C(O.target.value),className:"mr-3"}),e.jsx(_t,{className:"w-5 h-5 mr-2 text-green-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"Mobile Money / Card"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Pay via Hubtel"})]})]})]})]}),R==="wallet"&&parseFloat(y)>d&&e.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(jt,{className:"w-5 h-5 text-orange-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-orange-900",children:"Insufficient Balance"}),e.jsx("p",{className:"text-sm text-orange-700 mt-1",children:"Please top up your wallet or choose another payment method."})]})]})})]}),e.jsxs("div",{className:"p-6 border-t bg-gray-50 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>A(!1),className:"btn bg-gray-200 hover:bg-gray-300",disabled:E,children:"Cancel"}),e.jsx("button",{onClick:ie,disabled:E||!y||parseFloat(y)<=0,className:"btn btn-primary",children:E?e.jsxs(e.Fragment,{children:[e.jsx(at,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(en,{className:"w-4 h-4"}),"Pay ",parseFloat(y||0).toLocaleString()]})})]})]})}),T&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full",children:[e.jsxs("div",{className:"p-6 border-b",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Top Up Wallet"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Add funds to your wallet for easy payments"})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Current Balance"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["",d.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quick Select"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:F.map(O=>e.jsxs("button",{onClick:()=>G(O.toString()),className:`p-3 border-2 rounded-lg font-semibold transition-colors ${_===O.toString()?"border-blue-600 bg-blue-50 text-blue-600":"border-gray-200 hover:border-blue-300"}`,children:["",O]},O))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Or Enter Custom Amount"}),e.jsx("input",{type:"number",value:_,onChange:O=>G(O.target.value),min:"10",className:"input",placeholder:"Enter amount (min 10)"})]}),e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(_t,{className:"w-5 h-5 text-gray-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Secure Payment via Hubtel"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Pay with Mobile Money, Visa, or Mastercard"})]})]})})]}),e.jsxs("div",{className:"p-6 border-t bg-gray-50 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{M(!1),G("")},className:"btn bg-gray-200 hover:bg-gray-300",disabled:E,children:"Cancel"}),e.jsx("button",{onClick:W,disabled:E||!_||parseFloat(_)<10,className:"btn btn-primary",children:E?e.jsxs(e.Fragment,{children:[e.jsx(at,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(lt,{className:"w-4 h-4"}),"Add ",parseFloat(_||0).toLocaleString()]})})]})]})})]})}function U6(){const[n]=f.useState([{id:1,from:"Teacher - Mrs. Johnson",subject:"Parent-Teacher Meeting",message:"We would like to schedule a meeting...",date:"2024-11-25",read:!1},{id:2,from:"Admin Office",subject:"Fee Payment Reminder",message:"This is a reminder about the upcoming...",date:"2024-11-24",read:!0},{id:3,from:"Teacher - Mr. Smith",subject:"Student Progress",message:"Your child is doing well in class...",date:"2024-11-23",read:!0}]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Messages"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Communicate with teachers and school administration"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx(nf,{className:"w-8 h-8 text-blue-600 mb-3"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Inbox"}),e.jsx("p",{className:"text-2xl font-bold",children:n.length})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx(cl,{className:"w-8 h-8 text-green-600 mb-3"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Unread"}),e.jsx("p",{className:"text-2xl font-bold",children:n.filter(r=>!r.read).length})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx(pc,{className:"w-8 h-8 text-purple-600 mb-3"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Sent"}),e.jsx("p",{className:"text-2xl font-bold",children:"0"})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"p-6 border-b",children:e.jsx("h2",{className:"text-lg font-semibold",children:"Recent Messages"})}),e.jsx("div",{className:"divide-y",children:n.map(r=>e.jsx("div",{className:`p-6 hover:bg-gray-50 cursor-pointer ${r.read?"":"bg-blue-50"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center",children:e.jsx(Mt,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("p",{className:"font-semibold",children:r.from}),e.jsx("span",{className:"text-sm text-gray-500",children:r.date})]}),e.jsx("p",{className:"text-sm font-medium text-gray-900 mb-1",children:r.subject}),e.jsx("p",{className:"text-sm text-gray-600",children:r.message})]})]})},r.id))})]})]})}function H6(){const{user:n}=Ze(),[r,i]=f.useState("profile"),[d,m]=f.useState({first_name:n?.first_name||"",last_name:n?.last_name||"",email:n?.email||"",phone:n?.phone||"",current_password:"",new_password:"",confirm_password:""}),u=()=>{alert("Settings saved successfully!")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your account settings and preferences"})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"border-b",children:e.jsxs("div",{className:"flex gap-4 px-6",children:[e.jsxs("button",{onClick:()=>i("profile"),className:`py-4 px-4 border-b-2 font-medium ${r==="profile"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[e.jsx(Mt,{className:"w-4 h-4 inline mr-2"}),"Profile"]}),e.jsxs("button",{onClick:()=>i("password"),className:`py-4 px-4 border-b-2 font-medium ${r==="password"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[e.jsx(il,{className:"w-4 h-4 inline mr-2"}),"Password"]}),e.jsxs("button",{onClick:()=>i("notifications"),className:`py-4 px-4 border-b-2 font-medium ${r==="notifications"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[e.jsx(wr,{className:"w-4 h-4 inline mr-2"}),"Notifications"]})]})}),e.jsxs("div",{className:"p-6",children:[r==="profile"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),e.jsx("input",{type:"text",value:d.first_name,onChange:x=>m({...d,first_name:x.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),e.jsx("input",{type:"text",value:d.last_name,onChange:x=>m({...d,last_name:x.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),e.jsx("input",{type:"email",value:d.email,onChange:x=>m({...d,email:x.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),e.jsx("input",{type:"tel",value:d.phone,onChange:x=>m({...d,phone:x.target.value}),className:"input"})]})]}),e.jsxs("button",{onClick:u,className:"btn btn-primary",children:[e.jsx(Ms,{className:"w-4 h-4"}),"Save Changes"]})]}),r==="password"&&e.jsxs("div",{className:"space-y-6 max-w-md",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),e.jsx("input",{type:"password",value:d.current_password,onChange:x=>m({...d,current_password:x.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsx("input",{type:"password",value:d.new_password,onChange:x=>m({...d,new_password:x.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),e.jsx("input",{type:"password",value:d.confirm_password,onChange:x=>m({...d,confirm_password:x.target.value}),className:"input"})]}),e.jsxs("button",{onClick:u,className:"btn btn-primary",children:[e.jsx(Ms,{className:"w-4 h-4"}),"Update Password"]})]}),r==="notifications"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive email updates about your children"})]}),e.jsx("input",{type:"checkbox",className:"toggle",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"SMS Notifications"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Receive SMS alerts for important updates"})]}),e.jsx("input",{type:"checkbox",className:"toggle",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Payment Reminders"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Get reminders for upcoming payments"})]}),e.jsx("input",{type:"checkbox",className:"toggle",defaultChecked:!0})]}),e.jsxs("button",{onClick:u,className:"btn btn-primary",children:[e.jsx(Ms,{className:"w-4 h-4"}),"Save Preferences"]})]})]})]})]})}function $6(){return e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center px-4",children:e.jsx("div",{className:"max-w-md w-full text-center",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(f2,{className:"w-10 h-10 text-red-600"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to access this page. Please contact your administrator if you believe this is an error."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsxs(ds,{to:"/",className:"inline-flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(af,{className:"w-4 h-4 mr-2"}),"Go to Dashboard"]}),e.jsxs("button",{onClick:()=>window.history.back(),className:"inline-flex items-center justify-center px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:[e.jsx(dl,{className:"w-4 h-4 mr-2"}),"Go Back"]})]})]})})})}function al({children:n,allowedRoles:r}){const{isAuthenticated:i,user:d}=Ze();if(!i)return e.jsx(As,{to:"/login",replace:!0});const m=d?.user_type||d?.role||d?.type;return r&&!r.includes(m)?(console.log("Access denied - User role:",m,"Allowed roles:",r),e.jsx(As,{to:"/unauthorized",replace:!0})):n}function q6(){return e.jsx(ty,{children:e.jsxs(Tj,{children:[e.jsx(me,{path:"/login",element:e.jsx(B2,{})}),e.jsx(me,{path:"/register",element:e.jsx(G2,{})}),e.jsx(me,{path:"/forgot-password",element:e.jsx(F2,{})}),e.jsx(me,{path:"/unauthorized",element:e.jsx($6,{})}),e.jsxs(me,{path:"/admin",element:e.jsx(al,{allowedRoles:["admin"],children:e.jsx(tl,{})}),children:[e.jsx(me,{path:"dashboard",element:e.jsx(Q2,{})}),e.jsx(me,{path:"users",element:e.jsx(I2,{})}),e.jsx(me,{path:"students",element:e.jsx(Z2,{})}),e.jsx(me,{path:"students/:studentId",element:e.jsx(J2,{})}),e.jsx(me,{path:"admissions",element:e.jsx(K2,{})}),e.jsx(me,{path:"classes",element:e.jsx(W2,{})}),e.jsx(me,{path:"class-subjects",element:e.jsx(e1,{})}),e.jsx(me,{path:"subjects",element:e.jsx(t1,{})}),e.jsx(me,{path:"terms",element:e.jsx(s1,{})}),e.jsx(me,{path:"teachers",element:e.jsx(a1,{})}),e.jsx(me,{path:"finance",element:e.jsx(l1,{})}),e.jsx(me,{path:"fee-structure",element:e.jsx(n1,{})}),e.jsx(me,{path:"invoices",element:e.jsx(r1,{})}),e.jsx(me,{path:"payments",element:e.jsx(i1,{})}),e.jsx(me,{path:"attendance",element:e.jsx(c1,{})}),e.jsx(me,{path:"grading",element:e.jsx(d1,{})}),e.jsx(me,{path:"homework",element:e.jsx(o1,{})}),e.jsx(me,{path:"roles",element:e.jsx(m1,{})}),e.jsx(me,{path:"reports",element:e.jsx(b1,{})}),e.jsx(me,{path:"reports/academic",element:e.jsx(j1,{})}),e.jsx(me,{path:"reports/financial",element:e.jsx(y1,{})}),e.jsx(me,{path:"reports/students",element:e.jsx(N1,{})}),e.jsx(me,{path:"reports/executive",element:e.jsx(v1,{})}),e.jsx(me,{path:"timetable",element:e.jsx(w1,{})}),e.jsx(me,{path:"exams",element:e.jsx(_1,{})}),e.jsx(me,{path:"lms",element:e.jsx(C1,{})}),e.jsx(me,{path:"analytics",element:e.jsx(A1,{})}),e.jsx(me,{path:"transport",element:e.jsx(M1,{})}),e.jsx(me,{path:"hr-payroll",element:e.jsx(E1,{})}),e.jsx(me,{path:"biometric",element:e.jsx(D1,{})}),e.jsx(me,{path:"multi-school",element:e.jsx(z1,{})}),e.jsx(me,{path:"ai-features",element:e.jsx(O1,{})}),e.jsx(me,{path:"settings",element:e.jsx(u1,{})}),e.jsx(me,{path:"import",element:e.jsx(p1,{})}),e.jsx(me,{path:"system-config",element:e.jsx(g1,{})}),e.jsx(me,{path:"logs",element:e.jsx(f1,{})}),e.jsx(me,{path:"comprehensive-dashboard",element:e.jsx(H1,{})}),e.jsx(me,{path:"dashboard-selector",element:e.jsx(P1,{})}),e.jsx(me,{index:!0,element:e.jsx(As,{to:"dashboard",replace:!0})})]}),e.jsxs(me,{path:"/principal",element:e.jsx(al,{allowedRoles:["principal","admin"],children:e.jsx(tl,{})}),children:[e.jsx(me,{path:"dashboard",element:e.jsx(V1,{})}),e.jsx(me,{index:!0,element:e.jsx(As,{to:"dashboard",replace:!0})})]}),e.jsxs(me,{path:"/hr",element:e.jsx(al,{allowedRoles:["hr","admin"],children:e.jsx(tl,{})}),children:[e.jsx(me,{path:"dashboard",element:e.jsx(J1,{})}),e.jsx(me,{index:!0,element:e.jsx(As,{to:"dashboard",replace:!0})})]}),e.jsxs(me,{path:"/finance",element:e.jsx(al,{allowedRoles:["finance","admin"],children:e.jsx(tl,{})}),children:[e.jsx(me,{path:"dashboard",element:e.jsx(s6,{})}),e.jsx(me,{index:!0,element:e.jsx(As,{to:"dashboard",replace:!0})})]}),e.jsxs(me,{path:"/student",element:e.jsx(al,{allowedRoles:["student","admin"],children:e.jsx(tl,{})}),children:[e.jsx(me,{path:"dashboard",element:e.jsx(o6,{})}),e.jsx(me,{index:!0,element:e.jsx(As,{to:"dashboard",replace:!0})})]}),e.jsxs(me,{path:"/teacher",element:e.jsx(al,{allowedRoles:["teacher","admin"],children:e.jsx(tl,{})}),children:[e.jsx(me,{path:"dashboard",element:e.jsx(i6,{})}),e.jsx(me,{path:"classes",element:e.jsx(N6,{})}),e.jsx(me,{path:"students",element:e.jsx(v6,{})}),e.jsx(me,{path:"attendance",element:e.jsx(w6,{})}),e.jsx(me,{path:"homework",element:e.jsx(S6,{})}),e.jsx(me,{path:"grading",element:e.jsx(_6,{})}),e.jsx(me,{path:"reports",element:e.jsx(A6,{})}),e.jsx(me,{path:"messages",element:e.jsx(C6,{})}),e.jsx(me,{path:"settings",element:e.jsx(k6,{})}),e.jsx(me,{index:!0,element:e.jsx(As,{to:"dashboard",replace:!0})})]}),e.jsxs(me,{path:"/parent",element:e.jsx(al,{allowedRoles:["parent","admin"],children:e.jsx(tl,{})}),children:[e.jsx(me,{path:"dashboard",element:e.jsx(f6,{})}),e.jsx(me,{path:"apply",element:e.jsx(M6,{})}),e.jsx(me,{path:"child/:studentId",element:e.jsx(E6,{})}),e.jsx(me,{path:"enroll",element:e.jsx(T6,{})}),e.jsx(me,{path:"invoices",element:e.jsx(z6,{})}),e.jsx(me,{path:"payments",element:e.jsx(O6,{})}),e.jsx(me,{path:"messages",element:e.jsx(U6,{})}),e.jsx(me,{path:"settings",element:e.jsx(H6,{})}),e.jsx(me,{index:!0,element:e.jsx(As,{to:"dashboard",replace:!0})})]}),e.jsx(me,{path:"/",element:e.jsx(As,{to:"/login",replace:!0})}),e.jsx(me,{path:"*",element:e.jsx("div",{className:"p-8",children:e.jsx("h1",{className:"text-2xl",children:"404 - Page Not Found"})})})]})})}Ub.createRoot(document.getElementById("root")).render(e.jsx(f.StrictMode,{children:e.jsx(q6,{})}));
